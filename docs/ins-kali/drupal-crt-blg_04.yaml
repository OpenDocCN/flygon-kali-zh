- en: 'Chapter 4. Basics II: Adding Functionality'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第4章。基础 II：添加功能
- en: With the general configuration tasks behind us, I am sure you are more than
    keen to begin working on the layout and functionality for the site. That's not
    to say we are going to discuss the type of layout that involves themes just yet,
    because there is plenty of work to be done deciding what goes where before we
    look at things like fonts, colors, and images. While we aren't working with anything
    as exciting as new images or flashy graphics, you will find that much of what
    we cover in this section is a matter of taste, and you can get fairly creative.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 随着一般配置任务的完成，我相信你更愿意开始为网站设计布局和功能。这并不是说我们现在要讨论涉及主题的布局类型，因为在我们讨论字体、颜色和图片之前，还有很多工作要做，决定什么放在哪里。虽然我们没有使用任何新图片或花哨的图形，但你会发现，在这一部分中，我们所涵盖的大部分内容都是品味问题，你可以相当有创意。
- en: '*So how do we go about building a fully functional website?* The answer is
    to use chunks of free‑standing code called modules, which either come as part
    of the standard Drupal download, or are provided by the good people of the Drupal
    community. Modules simply sit around waiting till you need them, at which point,
    Drupal (knowing how to make use of them) calls on all the functionalities provided
    by the module file(s) in order to fulfill the tasks required of it.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*那么我们如何构建一个完全功能的网站呢？*答案是使用称为模块的独立代码块，这些模块要么作为标准Drupal下载的一部分，要么由Drupal社区的热心人提供。模块只是静静地等待，直到你需要它们，此时，Drupal（知道如何利用它们）调用模块文件提供的所有功能，以完成所需的任务。'
- en: The terms *module* and *functionality*, with respect to Drupal, are synonymous,
    from the point of view that modules provide functionality. It is possible to add
    your own functionality directly to your pages too, but that is a slightly different
    matter, which we will get into later. For now, the discussion of your site's functionality
    is really a discussion about modules.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在Drupal方面，术语*模块*和*功能*是同义的，因为模块提供功能。你也可以直接向你的页面添加自己的功能，但这是一个稍微不同的问题，我们稍后会讨论。目前，讨论你的网站功能实际上是在讨论模块。
- en: 'Consequently, in this chapter, we are going to take a close look at:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在本章中，我们将仔细研究：
- en: Adding modules
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加模块
- en: Third-party modules
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三方模块
- en: Configuring modules
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置模块
- en: Menus and primary links
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 菜单和主链接
- en: Using modules
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用模块
- en: Working with blocks
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用区块
- en: Be aware that we won't be discussing some of the content-related modules in
    too much depth, because we will cover the topic of content in great detail on
    its own, in Chapters 6 and 7\. While the focus of this chapter is on getting the
    basics up and running, we will also look at how to include other modules from
    the Drupal site in order to demonstrate its power and flexibility. This will also
    reveal the considerable advantage of having an entire development community at
    hand to help out.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我们不会对一些与内容相关的模块进行太多深入讨论，因为我们将在第6和第7章中详细讨论内容。虽然本章的重点是让基础知识运转起来，但我们还将看看如何从Drupal网站中包含其他模块，以展示其强大和灵活性。这也将展示出拥有整个开发社区来帮助的巨大优势。
- en: Adding Modules
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加模块
- en: It is by enabling certain modules that you will be able to achieve a diverse,
    and more importantly, functional site. As there are tons of modules available,
    I can't hope to bore you with the all the ins and outs of every single one. Instead,
    we will enable and briefly work with each of the ones required for the demo site
    as these will more than likely be the most popular ones in any case.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '通过启用某些模块，你将能够实现一个多样化、更重要的是功能齐全的网站。由于有大量的模块可用，我无法希望你对每一个模块的所有细节都感兴趣。相反，我们将启用并简要使用演示网站所需的每个模块，因为这些很可能是任何情况下最受欢迎的模块。 '
- en: If you find that there is a module required by your site, which is not covered
    here, then don't panic, simply follow the same method of enabling and testing
    that you will see throughout this chapter, and apply it to the specific module.
    You will be up and running in no time at all!
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你发现你的网站需要一个这里没有涉及的模块，那么不要惊慌，只需按照本章中将看到的启用和测试的方法，应用到特定模块上，你很快就能上手了！
- en: 'Before we begin discussing each individual module, head on over to the **modules**
    section under the **administer** menu item, and decide which you would like to
    enable initially, based on your site''s forecasted needs. Bear in mind that it
    is very easy to come back at a later stage and add or remove modules—this is part
    of the beauty and power of a system like Drupal. For the purposes of the demo
    site, we will need the following modules for the moment (we will need a few more
    as we continue building the site):'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始讨论每个单独的模块之前，前往**管理**菜单项下的**模块**部分，根据你网站的预期需求决定首先启用哪些模块。请记住，随时都可以轻松地回来添加或删除模块，这是Drupal系统的美妙之处。对于演示网站，我们目前需要以下模块（随着网站的继续建设，我们还需要更多）：
- en: '**blog**'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**博客**'
- en: '**forum**'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**论坛**'
- en: '**locale**'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语言环境**'
- en: '**poll**'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**投票**'
- en: '**search**'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**搜索**'
- en: '**upload**'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**上传**'
- en: Once you have made a selection, click **Save configuration**, and away you go.
    Unfortunately, things are not quite as easy as all that, and for at least a few
    of these modules, we will have to put in some serious thought before we actually
    implement them on the site. In particular, **forum** and **locale** need to be
    discussed in some depth. Before we do that, let's take a look at what else is
    available to us, courtesy of the Drupal community.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你做出选择，点击**保存配置**，然后就可以开始了。不幸的是，事情并不像那么简单，对于其中至少一些模块，我们需要认真考虑，然后才能在网站上实际实施它们。特别是**论坛**和**语言环境**需要进行一些深入讨论。在讨论这些之前，让我们看看Drupal社区为我们提供了什么其他东西。
- en: Third-Party Modules
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三方模块
- en: One of the greatest things about Drupal is that it adheres to the open-source
    paradigm. This fosters community development, which in turn promotes and increases
    the diversity of any given project. One of the spin-offs from this is that community
    members who overcome certain obstacles or create something new and useful can,
    and often do, take the time to share it with everyone else. This is an exceptionally
    valuable property of most, if not all, open-source projects.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal最伟大的一点是它遵循开源范例。这促进了社区发展，从而促进和增加了任何给定项目的多样性。由此产生的一个副产品是，克服某些障碍或创造出新的有用东西的社区成员可以，而且经常会，花时间与精力与其他人分享。这是大多数，如果不是全部，开源项目的一个非常宝贵的特性。
- en: What this means for us is that we can take a leisurely scroll over a variety
    of modules that have been made by someone, improved on by someone else, or changed
    into something else, and pick and choose what we like the most. The converse of
    this is, of course, that you can make any of your own developments available for
    everyone else to use when the time comes.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 对我们来说，这意味着我们可以悠闲地浏览各种模块，这些模块是由某人制作的，由其他人改进，或者改变成其他东西，然后我们可以挑选出我们最喜欢的。相反的是，当时机成熟时，你也可以将你自己的开发成果提供给其他人使用。
- en: For now, there are certain issues associated with using contributed modules
    such as the one we are going to incorporate into our site here. It is important
    to understand that people are providing useful software without enforcing payment.
    Hopefully, you will take it upon yourself to drop the developers a line every
    now and then to thank them for any functionality they have spent time and effort
    on that you may benefit from.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，使用贡献模块存在一些问题，比如我们将在这里整合到我们网站中的模块。重要的是要明白，人们提供有用的软件而不强制付款。希望你会时不时地给开发者写封信，感谢他们为你所受益的任何功能所花费的时间和精力。
- en: Secondly, because more often then not there is only one developer or a small
    group of developers, you need to understand that there is no huge budget, with
    lots of computer geeks tapping away day and night. This means that contributions,
    like any software, are subject to bugs or errors, and you should always make sure
    that your site, including the database, are protected by making backups before
    implementing any changes. (For more information on properly backing up your site,
    see [Chapter 10](ch10.html "Chapter 10. Running Your Website")) This is in line
    with best practices when it comes to dealing with software—if something breaks
    your code, then it is your responsibility, and not the contributor's.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，因为通常情况下只有一个开发者或一小群开发者，你需要明白没有大量的计算机极客日夜敲击的巨大预算。这意味着像任何软件一样，贡献是容易出现错误或漏洞的，你应该始终确保你的网站，包括数据库，在实施任何更改之前都受到保护，通过制作备份。（有关正确备份您的网站的更多信息，请参见[第10章](ch10.html
    "第10章 运行您的网站")）这符合处理软件时的最佳实践——如果某些东西破坏了你的代码，那么这是你的责任，而不是贡献者的责任。
- en: With those two rather serious points out of the way, let's begin.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这两个相当严重的问题，让我们开始吧。
- en: Downloading Modules
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载模块
- en: 'The Drupal website houses a list of contributions that are available for you
    to add under the **Modules** tab of the **Downloads** page ([http://drupal.org/project/modules](http://drupal.org/project/modules)).
    At the top of the **Modules** page there is a selection of Drupal versions from
    which you can choose the appropriate one, and then browse the modules by name,
    category, or date, as shown here:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal网站上有一个贡献列表，可以在**下载**页面的**模块**选项卡下添加（[http://drupal.org/project/modules](http://drupal.org/project/modules)）。在**模块**页面的顶部，你可以选择适当的Drupal版本，然后按名称、类别或日期浏览模块，如下所示：
- en: '![Downloading Modules](graphics/1800_04_01.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![下载模块](graphics/1800_04_01.jpg)'
- en: As we saw in [Chapter 1](ch01.html "Chapter 1. Introduction to Drupal"), obtaining
    the correct version is very important because you cannot assume that a module
    developed for the **4.6.x** family will work with the latest **4.7.x** family.
    In fact, it is probably a bigger issue now than it will be in a year or so, since
    Drupal has only just reached the **4.7.x** family. Unfortunately, the upgrading
    of contributions is not necessarily done at the same time as the core development;
    so it may be that there are some modules you can only implement in older versions
    of Drupal—hopefully by the time you read this, most modules, if not all, will
    have been made compatible with **4.7.x**.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[第1章](ch01.html "第1章 Drupal简介")中看到的，获取正确的版本非常重要，因为你不能假设为**4.6.x**系列开发的模块将与最新的**4.7.x**系列兼容。事实上，这可能是一个更大的问题，因为Drupal刚刚达到**4.7.x**系列。不幸的是，贡献的升级并不一定与核心开发同时进行；所以可能有一些模块只能在较旧版本的Drupal中实施——希望在你阅读本文时，大多数模块，如果不是全部，都已经与**4.7.x**兼容。
- en: For the purpose of the demo site, one contribution that we will need fairly
    soon is **Taxonomy Access Control,** which can be found under the **Categories**
    section, assuming you are searching by category. Navigate there, click **Download**,
    and save the zipped file to your machine. You might find it more expedient to
    create a directory, say `drupal_downloads`, to save these files to. Of course,
    once the module is installed you no longer need the zip file. It may be useful
    to maintain a copy just in case, but if you are certain you won't need it again,
    remove it once everything is up and running.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 对于演示网站的目的，我们很快将需要的一个贡献是**分类访问控制**，它可以在**分类**部分下找到，假设你是按分类搜索的。导航到那里，点击**下载**，并将压缩文件保存到你的计算机上。你可能会发现创建一个目录，比如`drupal_downloads`，来保存这些文件更方便。当然，一旦模块安装完成，你就不再需要这个压缩文件了。保留一份备份可能是有用的，但如果你确定你不再需要它，那么在一切都正常运行后就将其删除。
- en: That's all there is to downloading modules. Before we move on, it's a good idea
    to take a look over the list of all modules available to see what you can actually
    achieve with Drupal. For example, *did you know that you can use Drupal as an
    e-commerce website, complete with products or services and a shopping cart?* You
    can implement all types of payment facilities such as PayPal, or credit cards
    and pretty much anything else that a fully-fledged online store would need—or
    will be able to once the **E-Commerce** module has been upgraded to work with
    4.7.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 下载模块就是这样。在我们继续之前，最好看一下所有可用模块的列表，看看你实际上可以用Drupal实现什么。例如，*你知道吗，你可以将Drupal用作电子商务网站，包括产品或服务和购物车？*你可以实现各种支付设施，如PayPal，信用卡，以及几乎任何一个完整的在线商店所需要的其他功能，或者说一旦**电子商务**模块升级到与4.7兼容的版本后，你就可以实现这些功能了。
- en: Learning just what you can easily achieve with Drupal modules now can really
    cut down the amount of time you spend developing or looking for solutions to problems
    later on.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 现在学习Drupal模块可以轻松实现的功能，可以真正减少你以后开发或寻找解决方案所花费的时间。
- en: Installing Modules
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装模块
- en: Each module download can be different depending on how it needs to alter the
    system in order to function. The best way to learn about how to install modules
    is simply to go ahead and do it. Since we have already downloaded one, let's continue
    on and install it.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 每个模块的下载可能会有所不同，具体取决于它需要如何修改系统才能正常运行。学习如何安装模块的最佳方法就是去尝试。既然我们已经下载了一个，那么我们继续安装它。
- en: Open up the `.gz` file that you saved on your machine (refer to the previous
    section). Depending on the module in question you will have anywhere from one
    file to tens of files. As many will have license information in them, ensure that
    you take the time to read over these before you go ahead and use them. Apart from
    that, the first thing you need to do is open up the `readme` file as this will,
    more than likely, have some detailed information on what you can expect from the
    module, and how it functions.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 打开你在计算机上保存的`.gz`文件（参考前一节）。根据所涉及的模块，你可能会有从一个文件到数十个文件不等。由于许多文件中都包含许可信息，请确保在使用之前花时间阅读这些信息。除此之外，你需要做的第一件事就是打开`readme`文件，因为这很可能会包含一些关于模块的详细信息以及它的功能。
- en: Assuming you are happy you have the right module for the job, the next file
    to open up is the install file, usually something like `INSTALL.txt`. This will
    give you a list of instructions to follow in order to set things up properly.
    More often than not, this involves making some sort of adjustment to your database
    as well as adding the relevant `.module` file to your `modules` folder under the
    Drupal home directory.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你已经确定你有了适合工作的正确模块，接下来要打开的文件是安装文件，通常是`INSTALL.txt`之类的。这将给你一系列指示，以便正确设置事物。往往，这需要对数据库进行某种调整，以及将相关的`.module`文件添加到Drupal主目录下的`modules`文件夹中。
- en: Sometimes the developer of the module will add notes to guide your usage of
    the contribution. For example, in the case of the Taxonomy Access Control module,
    we are advised not to use it in conjunction with other access-related modules
    such as **OG** or **node_privacy_by_role**. That doesn't mean you can not—just
    that you should ensure you know exactly what you are doing before going against
    suggestions like the one provided with this module.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，模块的开发者会添加注释来指导你使用贡献。例如，在分类访问控制模块的情况下，我们被告知不要与其他访问相关的模块一起使用，比如**OG**或**node_privacy_by_role**。这并不意味着你不能这样做，只是在违背这个模块提供的建议之前，确保你确切地知道自己在做什么。
- en: 'Another bit of advice that might save you a lot of trouble at some stage in
    the future is to make a backup of your database, or any important files, before
    making use of a module. The reason being is that Drupal is moving to a more user-friendly,
    plug-n-play type of setup where all that you need to do extract the module file
    to the `modules` folder and away you go. The module itself takes care of any changes
    required to be made to the database automatically. This makes it easier to install
    it because you no longer have to issue commands like:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个可能在未来某个阶段为你节省大量麻烦的建议是，在使用模块之前备份数据库或任何重要文件。原因是Drupal正在转向更加用户友好的即插即用类型的设置，你只需要将模块文件提取到`modules`文件夹中，然后就可以使用了。模块本身会自动处理数据库所需的任何更改。这样安装起来更容易，因为你不再需要发出诸如：
- en: '[PRE0]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: in order to get things working. Of course, not all modules work like this, so
    use the command shown here to execute whatever scripts are necessary for any other
    modules you install. Remember to change the username, as well as the file path,
    to reflect the specifics of your system and the module being installed.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让事情正常运行。当然，并非所有模块都是这样工作的，所以使用这里显示的命令来执行任何其他安装的模块所需的任何脚本。记得更改用户名以及文件路径，以反映你的系统和正在安装的模块的具体情况。
- en: With some contributions performing their own database modifications automatically,
    it is now easier to install a module, but it is also easier to *shoot yourself
    in the foot*. This is because the changes take place behind the scenes without
    you having direct control over them. Admittedly, these changes, more often than
    not, are fairly harmless, but you never know.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 由于一些贡献者自动执行他们自己的数据库修改，现在安装模块变得更容易了，但也更容易*自掘坟墓*。这是因为更改是在幕后进行的，你无法直接控制它们。诚然，这些更改往往是相当无害的，但你永远不知道。
- en: To get things moving, we simply extract the contents of the download to the
    `modules` folder. Once that is done, there is now a folder called `taxonomy_access`
    in the `modules` directory.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让事情进展，我们只需将下载的内容提取到`modules`文件夹中。完成后，`modules`目录中现在有一个名为`taxonomy_access`的文件夹。
- en: Note
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: It is good practice to maintain separate folders for each additional contributed
    module in the `modules` folder. Doing this allows you to keep track of which module
    files have been added, and which are the core files.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在`modules`文件夹中为每个额外的贡献模块保持单独的文件夹是一个很好的做法。这样做可以让你跟踪哪些模块文件已经被添加，哪些是核心文件。
- en: That's pretty much all there is to do behind the scenes, but we still need to
    ensure that we can make use of this module from the administrator's point of view.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这基本上就是幕后需要做的事情，但我们仍然需要确保我们可以从管理员的角度使用这个模块。
- en: 'Log in to your site as the administrator and head on over to the **modules**
    section under the **administer** menu item. Scroll down the list of available
    modules and you should come across your new **taxonomy_access** module, like so:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 以管理员身份登录到你的网站，然后转到**管理**菜单项下的**模块**部分。滚动查看可用模块的列表，你应该会找到你的新**taxonomy_access**模块，就像这样：
- en: '![Installing Modules](graphics/1800_04_02.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![安装模块](graphics/1800_04_02.jpg)'
- en: Enable the module and click **Save configuration**. That's it, all done!
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 启用模块并点击**保存配置**。就是这样，全部完成了！
- en: Naturally, we still need to test out the module and put it to work. It is used
    in the following chapter however, so we won't discuss it any further here. You
    should be confident that you can now select, download, and install any module
    you like. Let's move on and look at how to configure the standard modules that
    we enabled earlier.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，我们仍然需要测试一下这个模块并让它发挥作用。然而，它在下一章中会被使用，所以我们不会在这里进一步讨论它。你应该有信心现在可以选择、下载和安装任何你喜欢的模块。让我们继续看看如何配置我们之前启用的标准模块。
- en: Configuring Modules
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置模块
- en: Obviously, the nature of the setup for each module can differ wildly from the
    next. This is because modules can provide pretty much any type of functionality
    you can imagine, ranging from a simple poll, to a search engine, or whatever.
    Accordingly, there are a host of different settings associated with each one.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，每个模块的设置方式可能大不相同。这是因为模块可以提供几乎你能想象到的任何类型的功能，从简单的投票到搜索引擎，或其他功能。因此，每个模块都有一系列不同的设置。
- en: You should also bear in mind that because of the inherent broadness of function
    associated with modules, the configuration and use of each one can also vary greatly.
    What this means is that it can be quite confusing at first to find out where to
    go in order to change settings or simply make use of them.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 你还应该记住，由于模块的固有功能广泛，每个模块的配置和使用也可能大不相同。这意味着一开始找到去哪里更改设置或简单地使用它们可能会相当令人困惑。
- en: We will begin with **forum** and **locale**, followed by the others, since these
    two are slightly more complex.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从**论坛**和**地区**开始，然后再处理其他内容，因为这两个稍微复杂一些。
- en: Forum
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 论坛
- en: 'Before we begin looking at forums, you should ensure that you have enabled
    both the **comment** and **taxonomy** modules since these are required in order
    for the **forum** module to function (This will probably be done automatically).
    Once these are all enabled, you can go along to the **forums** link under the
    **administer** menu item to begin working with it. You will be presented with
    the following page, which will straight away raise some interesting questions:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始查看论坛之前，你应该确保你已经启用了**评论**和**分类**模块，因为这些是**论坛**模块正常运行所必需的（这可能会自动完成）。一旦这些都启用了，你可以转到**管理**菜单项下的**论坛**链接开始使用它。你将看到以下页面，这将立即引发一些有趣的问题：
- en: '![Forum](graphics/1800_04_03.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![论坛](graphics/1800_04_03.jpg)'
- en: '"How *do I go about organizing my forum(s)?"* is probably what you are asking
    right now. The answer to this really depends on how broad the scope of the discussion
    topics are going to be, how many people will be using the forums, and the nature
    of the topics up for discussion. What you are aiming for is an intuitive, logical,
    easy-to-use structure that will facilitate and encourage discussion by allowing
    users to easily find information—as opposed to frustrating them with a poor structure
    that effectively hides topics.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: “*我该如何组织我的论坛（们）呢？*”这可能是你现在正在问的问题。对这个问题的答案实际上取决于讨论主题的范围有多广，有多少人将使用论坛，以及讨论主题的性质。你的目标是建立一个直观、逻辑、易于使用的结构，通过让用户轻松找到信息来促进和鼓励讨论，而不是通过一个糟糕的结构让他们感到沮丧，实际上隐藏了主题。
- en: Let's take a look at how to go about organizing the demo site's forum. *Where
    do we begin?* A good idea is to draw out your structure beforehand so that you
    can see how everything relates, and make changes before you begin creating or
    deleting forums. For example, it may seem logical to split up forums depending
    on location, so that people in the US go straight to the North American forums,
    and people in Africa go straight to the African forums.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何组织演示网站的论坛。*我们从哪里开始呢？*一个好主意是事先画出你的结构，这样你就可以看到一切是如何相关的，并在开始创建或删除论坛之前进行更改。例如，根据地理位置来分割论坛，让美国的人直接去北美论坛，非洲的人直接去非洲论坛，可能看起来是合乎逻辑的。
- en: Unfortunately, this has several drawbacks because you would end up with a lot
    of repeated topics for each continent (since wildlife issues are the same the
    world over). Even worse, if you were living in the States and were concerned about
    canned hunting in South Africa, where would you go to discuss this, Africa or
    North America? It seems that partitioning your forums based on location, in this
    instance, is probably not a good idea. *So what criteria do we use to categorize
    our forum content?*
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，这有一些缺点，因为你最终会得到许多重复的主题，每个大洲都会有（因为野生动物问题在全世界都是一样的）。更糟糕的是，如果你住在美国，关心南非的圈养狩猎问题，你会去哪里讨论这个问题，非洲还是北美洲？在这种情况下，基于地理位置划分你的论坛可能不是一个好主意。*那么我们用什么标准来对论坛内容进行分类呢？*
- en: The best way to do it is by issue. People want to discuss issues or topics,
    and so they naturally look for content based on these criteria. When looked at
    in this light, the meaning of the **add containers** tab becomes clear, because
    now we can organize forum topics based on their common issues.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 最好的方法是按问题来组织。人们想讨论问题或主题，因此他们自然会根据这些标准寻找内容。从这个角度来看，**添加容器**选项卡的含义变得清晰，因为现在我们可以根据它们共同的问题组织论坛主题。
- en: For example, one of the major areas of concern for wildlife today is the topic
    of conservation. This in turn has many facets, all of which would no doubt be
    of interest to the demo site's target audience. The environment is also an issue
    that should be discussed, and everyone is interested in research these days. These
    all seem like viable containers because they logically encapsulate the bulk of
    what people using this site will discuss.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如今野生动物的一个主要关注领域是保护的话题。这又有许多方面，毫无疑问，所有这些方面对演示站点的目标受众都会感兴趣。环境也是一个应该讨论的问题，如今每个人都对研究感兴趣。所有这些似乎都是可行的容器，因为它们在逻辑上涵盖了这个站点的用户将要讨论的大部分内容。
- en: Moving ahead on this line of thought, each of the potential containers has distinct
    sub-categories that users would intuitively understand as topics for debate—we'll
    see the actual structure I came up with in a moment. Once you have a nice structure
    jotted down on paper, it is time to actually implement the forums on the site.
    Let's set about this by creating the containers first. Click **add container**
    to bring up a page that allows you to specify the name of the container, a brief
    description, the parent, and a weight.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 继续这种思路，每个潜在的容器都有不同的子类别，用户可以直观地理解为辩论的主题——我们将在一会儿看到我想出的实际结构。一旦您在纸上草拟出一个良好的结构，就是时候在网站上实际实施论坛了。首先创建容器。单击**添加容器**，将会弹出一个页面，允许您指定容器的名称、简要描述、父级和权重。
- en: Since you should have already decided on a structure, it is easy to see which
    container or forum has which parent. The top-level container or forum should obviously
    leave the parent as**<root>**. You can set the weight of the container or forum
    if you would like them to be presented in an order other than alphabetical—the
    smaller the weight; the closer to the top of the pile it will appear.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 由于您应该已经决定了一个结构，很容易看出每个容器或论坛有哪个父级。顶级容器或论坛显然应该将父级留为**<root>**。如果您希望以字母顺序之外的顺序呈现它们，可以设置容器或论坛的权重——权重越小，它将出现在堆栈顶部。
- en: 'Keep adding containers and forums, along with helpful descriptions until you
    have completed the entire structure. The following screenshot shows how the demo
    site ended up (There are, no doubt, more topics that could be added or changed,
    but this suffices for the moment):'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 继续添加容器和论坛，以及有用的描述，直到您完成整个结构。以下截图显示了演示站点的最终结果（毫无疑问，可能还有更多的主题可以添加或更改，但目前这就足够了）：
- en: '![Forum](graphics/1800_04_04.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![论坛](graphics/1800_04_04.jpg)'
- en: There are a few things to note here. First of all, there is some overlap in
    terms of how categories mesh on a conceptual level. For example, **Global Warming**
    should logically appear under **Environmental Impact**, so *why does it have its
    own forum?* The answer is that you need to think about which issues are likely
    to be most important. As global warming is a huge issue, it warrants a promotion
    to its own forum.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有几点需要注意。首先，在概念层面上，类别之间存在一些重叠。例如，**全球变暖**在逻辑上应该出现在**环境影响**下，那么*为什么它有自己的论坛呢？*答案是您需要考虑哪些问题可能最重要。由于全球变暖是一个重大问题，它值得提升为自己的论坛。
- en: Secondly, I have only added a single parent layer of containers, with forums
    appearing under this. It is possible to add containers within containers and so
    on, but in the interests of making it easy to find topics, you should try keeping
    a flat structure instead of creating a deep navigation structure wherever possible.
    This is because it is easier for people to search a list than to navigate a deep
    hierarchy.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，我只添加了一个单一的父级容器层，论坛出现在其下。可以在容器内部添加容器等等，但为了方便查找主题，您应该尽量保持扁平的结构，而不是创建深层次的导航结构。这是因为人们更容易搜索列表，而不是导航深层次的层次结构。
- en: Finally, there are some configuration options, which you should take a look
    over before finishing. Most of the defaults are pretty sensible, but you may wish
    to click the **configure** tab, and decide on such things as how many posts you
    want to consider *hot*, or whether to order your posts by date or activity. Once
    you are done, click **Save configuration** and your forum is more or less ready
    to go.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，还有一些配置选项，您应该在完成之前仔细查看。大多数默认设置都很合理，但您可能希望单击**配置**选项卡，并决定诸如您想要考虑多少帖子为*热门*，或者是按日期还是活动来排序帖子等事项。完成后，单击**保存配置**，您的论坛基本上已经准备就绪。
- en: Let's continue with setting up the other modules before we take a look at how
    to use one of them. In reality you should play around with each and every module,
    and ensure that it is working to your satisfaction, even though we don't have
    the space to do so here.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们查看如何使用其中一个模块之前，让我们继续设置其他模块。实际上，您应该尝试每个模块，并确保它能满足您的要求，即使我们在这里没有足够的空间来这样做。
- en: Locale
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 区域设置
- en: 'With **locale** enabled, you can now click the **localization** link under
    **administer** in order to take a look at what''s on offer. Doing so will bring
    up the following page:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 启用**区域设置**后，您现在可以单击**管理**下的**本地化**链接，以查看提供的内容。这样做将会弹出以下页面：
- en: '![Locale](graphics/1800_04_05.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![区域设置](graphics/1800_04_05.jpg)'
- en: Since there are many European agencies and organizations that deal with conservation
    and environmental issues, we would like to add, for example, Italian to our website.
    In order to do this, we simply click **add language**, select the relevant language
    from the drop-down language list, and click the **Add language** button below.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 由于有许多处理保护和环境问题的欧洲机构和组织，我们希望在我们的网站上添加意大利语等语言。为了做到这一点，我们只需点击**添加语言**，从下拉语言列表中选择相关语言，然后点击下方的**添加语言**按钮。
- en: 'The next step is to actually import the language onto the site so that the
    translation can be done. In order to achieve this, go and find the relevant language
    file from the Drupal **Translations** page at[http://drupal.org/project/translations](http://drupal.org/project/translations).
    Search around until you find the relevant file, and then download and unzip the
    file to your file system. Once that is done, click the **import** tab and then
    browse to the `.po` file from your Drupal page—you should have something like
    this (depending on the language being imported):'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是实际将语言导入到网站上进行翻译。为了实现这一点，去Drupal的**翻译**页面找到相关的语言文件[http://drupal.org/project/translations](http://drupal.org/project/translations)。搜索直到找到相关文件，然后下载并解压文件到您的文件系统。完成后，点击**导入**选项卡，然后浏览到您的Drupal页面上的`.po`文件——您应该会看到类似这样的内容（取决于导入的语言）：
- en: '![Locale](graphics/1800_04_06.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![Locale](graphics/1800_04_06.jpg)'
- en: Once you are happy that you have the right language `.po` file and that you
    are importing it into the correct language, click **Import**. From the previous
    screenshot you can tell that, sensibly enough, we are importing the `it.po` file
    (the Italian language file) into the **Italian** language on our site. Since this
    is a new import we don't need to worry about replacing any strings in the **Mode**
    section. If you were modifying your language translations, then you might consider
    leaving what you have intact, and only adding new strings by selecting the second
    option.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您确定了拥有正确的语言`.po`文件，并且将其导入到正确的语言中，点击**导入**。从之前的截图中可以看出，我们正在将`it.po`文件（意大利语文件）导入到我们网站上的**意大利语**中。由于这是一个新的导入，我们不需要担心在**模式**部分替换任何字符串。如果您正在修改语言翻译，那么您可能会考虑保留您已有的内容，并通过选择第二个选项来添加新的字符串。
- en: When that is done, check the **Enabled** checkbox on the page that is brought
    up and click **Save configuration**. You now have a new language enabled on your
    site. You can repeat this process for whichever languages are available for download
    and are required by your users.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，在弹出的页面上勾选**已启用**复选框，然后点击**保存配置**。现在您的网站上已启用了新的语言。您可以为您的用户下载和需要的任何语言重复此过程。
- en: The next thing we should discuss briefly is how to manage strings. You might
    find that an imported language translation doesn't translate everything as you'd
    like, in which case you need to do it manually. Click the **manage strings** tab
    and you will see a search page that you can use to locate the string(s) you would
    like to change. There is also a list of options to control your search. Once you
    have found what you are looking for, you can simply edit it accordingly.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来我们应该简要讨论如何管理字符串。您可能会发现导入的语言翻译并没有按您的期望翻译所有内容，这种情况下您需要手动进行翻译。点击**管理字符串**选项卡，您将看到一个搜索页面，您可以使用它来定位您想要更改的字符串。还有一系列选项来控制您的搜索。一旦找到您要找的内容，您可以简单地进行相应的编辑。
- en: Bear in mind that it is possible to create a custom language file, and build
    up the list of translations for that by using the string management tool under
    the **manage strings** tab and manually entering translations—although, this is
    rather tedious work.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，您可以创建自定义语言文件，并通过使用**管理字符串**选项卡下的字符串管理工具手动输入翻译来建立该文件的翻译列表——尽管这是相当繁琐的工作。
- en: If you get a set of translations fairly complete, or make improvements to a
    language file, then the community, in general, would certainly appreciate it if
    you used the **export** link to share your translation files with everyone. Once
    you have exported the file in `.po` format by selecting the language to export
    and clicking the **Export** button, you can then set about getting it up on the
    Drupal site (take a look under the **Contribute** tab on the Drupal site for more
    information).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您获得了一套相当完整的翻译，或者对语言文件进行了改进，那么整个社区肯定会感激您使用**导出**链接与所有人分享您的翻译文件。选择要导出的语言并点击**导出**按钮，以`.po`格式导出文件后，您可以开始将其上传到Drupal网站（在Drupal网站的**贡献**选项卡下查看更多信息）。
- en: Comments
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 评论
- en: Since this module is needed by default, along with the forum module, we may
    as well discuss it here briefly. A comment, as the name implies, allows users
    to remark about content they find on the site—simple as that. How to figure out
    who can comment and on what, is the subject of [Chapter 5](ch05.html "Chapter 5. Users,
    Roles, and Permissions") on *Users, Roles, and Permissions*.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这个模块是默认需要的，以及论坛模块一起，我们可能会在这里简要讨论一下。评论，顾名思义，允许用户对他们在网站上发现的内容进行评论——就是这么简单。如何确定谁可以评论以及评论什么，是《第5章》中关于*用户、角色和权限*的主题。
- en: 'You can find **comments** under the **administer** menu item, and clicking
    this brings up a list of all the comments on your site. The following screenshot
    shows a typical comments page once a few comments have been added to a particular
    post:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在**管理**菜单项下找到**评论**，点击这个选项会显示网站上所有评论的列表。下面的截图显示了特定帖子添加了一些评论后的典型评论页面：
- en: '![Comments](graphics/1800_04_07.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![Comments](graphics/1800_04_07.jpg)'
- en: From this you can see that we have a comprehensive interface for working with
    comments. There are a few **Update options** available, and these allow us to
    delete or unpublish comments. If you never wanted to see a comment again on your
    site, then **Delete the selected comments** is the way to go. If you only want
    to prevent the comment from being displayed, without being removed entirely, then
    **Unpublish the selected comments** is the correct update option to use.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里你可以看到我们有一个全面的界面来处理评论。有一些**更新选项**可用，这些选项允许我们删除或取消发布评论。如果你永远不想在你的网站上再看到一条评论，那么**删除所选评论**就是正确的选择。如果你只想阻止评论显示，而不是完全删除，那么**取消发布所选评论**是正确的更新选项。
- en: Assuming you have decided to unpublish a comment for some reason or other, you
    will have to look for it under the **approval queue** tab instead of the main
    page. The approval queue allows you to search through and edit posts that have
    landed up here for whatever reason—it may be that you have unpublished them, or
    it may be that you have decided to force all comments into the approval queue
    for moderation. However comments land up here, you will find that there are two
    update options available again, this time you can either delete the comment or
    publish it.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你因某种原因决定取消发布评论，你将不得不在**审核队列**选项卡下寻找它，而不是在主页面下寻找。审核队列允许你搜索和编辑因为某种原因而被放在这里的帖子——可能是因为你取消了发布，或者可能是因为你决定强制所有评论都进入审核队列进行审核。无论评论是如何进入这里的，你会发现再次有两个更新选项可用，这次你可以删除评论或者发布评论。
- en: Clicking on the **configure** tab, you will find two important categories associated
    with comments, namely **Viewing options** and **Posting settings**. Browse through
    the available options and make any changes you would like. For example, in the
    **Viewing options** section, the **Default display mode** was changed to Threaded
    list collapsed in order to bunch related comments together without displaying
    the body for each comment. The Default display order was also changed to Date
    oldest first so that comments can be viewed as a conversation from the top of
    the page downwards.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**配置**选项卡，你会发现与评论相关的两个重要类别，即**查看选项**和**发布设置**。浏览可用选项并进行任何你想要的更改。例如，在**查看选项**部分，**默认显示模式**被更改为折叠的线性列表，以便将相关的评论聚集在一起，而不显示每条评论的内容。默认显示顺序也被更改为最早的日期，以便评论可以从页面顶部向下作为对话查看。
- en: 'Using these settings, comments on a page now look something like this:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些设置，页面上的评论现在看起来像这样：
- en: '![Comments](graphics/1800_04_08.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![评论](graphics/1800_04_08.jpg)'
- en: 'As you can see, earlier comments appear towards the top of the pile, with replies
    to those comments posted underneath and indented. Of course, this may not be to
    you liking, and these comments might just as easily been displayed like this:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，早期的评论出现在堆的顶部，对这些评论的回复则显示在下面并缩进。当然，这可能不符合你的口味，这些评论也可以像这样显示：
- en: '![Comments](graphics/1800_04_09.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![评论](graphics/1800_04_09.jpg)'
- en: It shouldn't be too hard to work out what changes were made in order to get
    the comments looking like this (especially since they are shown in the previous
    screenshot), so it is left as an exercise for you to do. How you decide to display
    comments is really up to you, and any decisions made should take into account
    how comments are used on the site.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 应该不难弄清楚为了让评论看起来像这样所做的更改（特别是因为它们在前一张截图中显示），所以这留给你来做。如何决定显示评论真的取决于你，任何决定都应该考虑评论在网站上的使用方式。
- en: The **Posting settings** section provides a few options on how users actually
    create their comments. Once again, you should really take into account the type
    of site you are working on. For example, it might seem sensible to force users
    to preview their comments, but if you find that you have a bunch of regular community
    users who post very frequently, then it is going to become tedious for them to
    continue checking their posts every time.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**发布设置**部分提供了一些关于用户如何创建评论的选项。再次强调，你应该真正考虑你正在处理的网站类型。例如，强制用户预览他们的评论可能看起来是明智的，但如果你发现有一群经常发布评论的常规社区用户，那么每次都检查他们的帖子将变得乏味。'
- en: 'Assuming you are going to allow anonymous users to post comments, you must
    decide whether they are to leave contact information with their posts. From the
    point of view of keeping up the standard of posts to your site, it is probably
    a good idea to have postings from anonymous viewers sent to the approval queue
    so that you don''t become a victim of spam attacks or cheap advertising. This
    can be done in the **access control** section under **administer** by selecting
    only the **post comments** option in the **comment module** section for anonymous
    users, as shown here:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你要允许匿名用户发表评论，你必须决定他们是否要在他们的帖子中留下联系信息。从保持网站帖子标准的角度来看，让匿名观众的帖子发送到审核队列可能是个好主意，这样你就不会成为垃圾邮件攻击或廉价广告的受害者。这可以在**管理**下的**访问控制**部分的**评论模块**中通过选择匿名用户的**发表评论**选项来完成，如下所示：
- en: '![Comments](graphics/1800_04_10.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![评论](graphics/1800_04_10.jpg)'
- en: As with anything, this is a trade-off because you are really giving yourself
    a lot of work by insisting that all comments from anonymous users are moderated.
    You might find that in the long run it is better to insist that people who wish
    to become active community members are registered.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 和任何事情一样，这是一个权衡，因为坚持要求所有匿名用户的评论都经过审核，实际上会给自己带来很多工作。你可能会发现，从长远来看，坚持要求希望成为活跃社区成员的人注册可能更好。
- en: Content Types
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内容类型
- en: 'Some of you might be frowning at the moment, because aren''t comments content
    types? Well, yes, they are, but their configuration is slightly different from
    the others, so they have been separated out. The three content type modules, which
    we enabled in the previous section, have similar configuration settings to contend
    with, so it makes sense to cover them altogether here. If you navigate back to
    the **settings** section under **administer** and then click **content types**,
    you will be shown a list of all the available types, like this, depending on what
    you have enabled:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 此刻，有些人可能会皱起眉头，因为评论不也是内容类型吗？是的，它们是，但它们的配置与其他内容类型略有不同，因此它们已被分开。在前一部分启用的三个内容类型模块具有类似的配置设置，因此在这里一起讨论是有意义的。如果您导航回**管理**下的**设置**部分，然后单击**内容类型**，您将看到所有可用类型的列表，具体取决于您已启用的内容类型：
- en: '![Content Types](graphics/1800_04_11.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![内容类型](graphics/1800_04_11.jpg)'
- en: Clicking **configure** brings up the relevant configuration page, and since
    they are all the same we will only look at one in detail here. For interest's
    sake, we will open up the poll configuration page.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 单击**配置**会显示相关的配置页面，由于它们都是相同的，我们只会在这里详细查看一个。出于兴趣，我们将打开投票配置页面。
- en: 'The options on this configuration page are broken up into two sections: the
    first allowing you to enter some explanatory text and select the minimum number
    of words required to make the content type valid; the second section, **Workflow**,
    is shown here:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 此配置页面上的选项分为两个部分：第一部分允许您输入一些解释性文本并选择使内容类型有效所需的最小字数；第二部分，“工作流”，如下所示：
- en: '![Content Types](graphics/1800_04_12.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![内容类型](graphics/1800_04_12.jpg)'
- en: As you can see, comments, as well as attachments, have been disabled because
    we don't really want feedback on the poll posting itself and we aren't bothered
    about attaching files to polls—they should simply be straightforward Q&A tools.
    You will need to make choices like this for each and every one of the content
    types based on how you want the content to be utilized.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，评论以及附件都已被禁用，因为我们实际上不希望在投票发布本身上得到反馈，也不关心将文件附加到投票中——它们应该只是简单的问答工具。您需要根据您希望如何利用内容来为每种内容类型做出类似的选择。
- en: You can also decide whether certain content postings should remain at the top
    of lists as well as deal with a couple of slightly more complex options like **Create
    new revision** or **In moderation queue**—these will be discussed later on in
    [Chapter 6](ch06.html "Chapter 6. Basic Content") on Basic Content. For now, you
    might find it better to leave these settings as they and come back to them later
    once you have all the necessary information.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以决定是否应将某些内容发布保留在列表顶部，并处理一些稍微复杂的选项，如**创建新修订版**或**在审核队列中**—这些将在[第6章](ch06.html
    "第6章。基本内容")中的基本内容中讨论。目前，您可能会发现最好将这些设置保持原样，并在获得所有必要信息后再回来处理它们。
- en: Search
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 搜索
- en: This is an interesting module to configure because there are some subtle underlying
    issues, which you should take into consideration when adjusting the settings.
    For a start, the indexing process that is used to build the search in the database
    relies on cron (discussed in [Chapter 10](ch10.html "Chapter 10. Running Your
    Website")). You will need to ensure that you have this operating correctly on
    your live site if you are going to implement a search feature. For more information
    on cron jobs and the `cron.php` script provided with Drupal, you can also visit
    **system** in the **help** section under the **administer** menu item.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个有趣的模块，因为在调整设置时需要考虑一些微妙的潜在问题。首先，用于在数据库中构建搜索的索引过程依赖于cron（在[第10章](ch10.html
    "第10章。运行您的网站")中讨论）。如果要实现搜索功能，您需要确保在实时站点上正确运行。有关cron作业和Drupal提供的`cron.php`脚本的更多信息，您还可以访问**管理**菜单项下**帮助**部分中的**系统**。
- en: It is possible to re-index your site manually by clicking on the **Re-index
    site** button at the top of the search page, under the **settings** menu item.
    This will cause Drupal to go over the site's content and update its index so that
    any new content that you specifically wish to be included in any searches will
    be.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过单击搜索页面顶部的**重新索引站点**按钮来手动重新索引站点。这将导致Drupal查看站点内容并更新其索引，以便您特别希望包含在任何搜索中的任何新内容都会被包括进去。
- en: Most of the other settings in this section relate to the performance of the
    system. For example, as the number of items you choose to index per cron run will
    also affect the speed of the cron job, you might have to make this setting a little
    lower if you are running into time-out problems. As well as this, indexing shorter
    words adds load to your system, because it has to index that many more words in
    the content.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 此部分中的大多数其他设置与系统的性能有关。例如，您选择每个cron运行索引的项目数量也会影响cron作业的速度，如果遇到超时问题，可能需要将此设置稍微降低。此外，索引较短的单词会增加系统的负载，因为它必须索引更多的内容中的单词。
- en: 'Finally, it is possible to decide on how to weigh the site search based on
    three criteria, namely **Keyword relevance, Recently posted**, and **Number of
    comments**. You need to work out which criterion is more important, and which
    one can be safely downgraded in importance. In the case of the demo site, the
    following settings were used:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，可以根据三个标准决定如何权衡站点搜索，即**关键词相关性，最近发布**和**评论数量**。您需要确定哪个标准更重要，哪个可以安全地降低重要性。在演示站点的情况下，使用了以下设置：
- en: '![Search](graphics/1800_04_13.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![搜索](graphics/1800_04_13.jpg)'
- en: The reason for the weightings given here is because we really want searches
    to hinge on whether there is a strong correlation between the search terms and
    the content. Effectively, we are saying that just because a posting is new, doesn't
    make it more worthwhile, and just because a piece of content has been commented
    on extensively, doesn't make it more relevant. Depending on your criteria, you
    may choose something completely different—the bottom line is to ensure that the
    search results are as relevant as possible to the site's users.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这里给出权重的原因是因为我们真的希望搜索取决于搜索词与内容之间是否存在强烈的相关性。实际上，我们是在说，仅仅因为一个帖子是新的，并不意味着它更有价值，仅仅因为一篇内容被广泛评论，并不意味着它更相关。根据您的标准，您可能会选择完全不同的东西——最重要的是确保搜索结果尽可能与网站用户相关。
- en: Upload
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上传
- en: Assuming you are going to allow file uploads to the site, then there are a few
    settings that are of interest. Click the **upload** option under **settings**
    in **administer** to bring up the configuration page for uploads. Here you will
    be able to determine the **Maximum resolution for uploaded images**, as well as
    whether to **List files by default**.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您打算允许网站上传文件，则有一些设置是有趣的。点击**管理**下的**设置**中的**上传**选项，以打开上传配置页面。在这里，您将能够确定**上传图像的最大分辨率**，以及是否**默认列出文件**。
- en: Depending on which version of Drupal you have, it may also be possible to decide
    what types of files are to be allowed onto the site. Remember that some files
    can contain harmful or malicious code like spyware, viruses, or Trojans. You probably
    don't want to run the risk of spreading them around by allowing `.exe` or other
    executable files to be made available. Further, you need to think about how much
    disk space there is available. The last thing you want to do is allow people to
    upload entire movie files that can take up gigabytes of space at a time; so ensure
    that the **Maximum file size** and **Total file size per user** are kept down
    to a reasonable limit.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您使用的Drupal版本，可能还可以决定允许哪些类型的文件上传到网站。请记住，一些文件可能包含有害或恶意代码，如间谍软件、病毒或特洛伊木马。您可能不希望通过允许`.exe`或其他可执行文件的上传来传播它们。此外，您需要考虑可用的磁盘空间有多少。您最不希望做的事情就是允许人们上传可以一次占用几十亿字节空间的整个电影文件；因此，请确保**最大文件大小**和**每个用户的总文件大小**保持在合理的限制范围内。
- en: Menus and Primary Links
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 菜单和主链接
- en: 'Before we continue with something new, it is very important to take a look
    at the site and see whether the changes made so far have the desired effect. Remember:
    it is of paramount importance that new modifications are always tested out like
    this. *How do we go about testing out the new modules?* The best way is really
    to try to use them on the site; so navigate to the homepage and take a look at
    the site as it stands. At present we have something like this (provided you are
    logged in as the administrator):'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续进行新的工作之前，非常重要的是要查看网站，看看到目前为止所做的更改是否产生了预期的效果。记住：新的修改总是要像这样进行测试是非常重要的。*我们如何测试新的模块？*最好的方法是真的尝试在网站上使用它们；所以导航到首页，看看网站的现状。目前我们有这样的东西（假设您以管理员身份登录）：
- en: '![Menus and Primary Links](graphics/1800_04_14.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_14.jpg)'
- en: This is certainly not what we would hope for. For a start, there is no immediate
    way to navigate over to the forums, or even look at a poll. We have enabled these
    modules and even configured them; *so why aren't they showing up on the site?*
    The answer lies in the fact that we haven't yet edited our menus or configured
    the primary links.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 这显然不是我们所希望的。首先，没有立即的方法可以导航到论坛，甚至查看投票。我们已经启用了这些模块，甚至配置了它们；*那为什么它们不显示在网站上呢？*答案在于我们还没有编辑我们的菜单或配置主链接。
- en: 'You will probably have noticed the **primary links** link in the top-right
    corner of your screen already. Go ahead and click it to get the ball rolling.
    The following screenshot shows a part of the list that is pulled up on the new
    page:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能已经注意到了屏幕右上角的**主链接**链接。继续点击它来开始。以下截图显示了在新页面上拉出的列表的一部分：
- en: '![Menus and Primary Links](graphics/1800_04_15.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_15.jpg)'
- en: 'The highlighted sections in the screenshot above tell us which menu items are
    disabled. By default all the new modules that we have enabled, such as **forums,
    blogs**, and **search** are not available in the **Menu item** list. Let''s rectify
    this by enabling **forums** (or all of them if you wish). You will notice that
    you have a few options to contend with for each one before they are enabled. You
    can make some fairly common-sense decisions regarding these, and the following
    screenshot shows how the **forums** menu item has been set up:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 上面截图中的突出部分告诉我们哪些菜单项被禁用了。默认情况下，我们启用的所有新模块，如**论坛、博客**和**搜索**在**菜单项**列表中都不可用。让我们通过启用**论坛**（或者如果您愿意，启用所有模块）来纠正这一点。您会注意到在启用它们之前，您需要处理每个模块的一些选项。您可以就这些做出一些相当符合常理的决定，以下截图显示了**论坛**菜单项的设置方式：
- en: '![Menus and Primary Links](graphics/1800_04_16.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_16.jpg)'
- en: Select **Parent item** carefully, as you may not always want a menu item to
    be displayed on the top level. For example, there is a **Search** box present
    at the top-right of the screen (for now), so you might not want the **search**
    menu item to appear alongside the other main menu items as this would be fairly
    redundant.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 仔细选择**父项目**，因为您可能并不总是希望菜单项显示在顶层。例如，目前屏幕右上角有一个**搜索**框，因此您可能不希望**搜索**菜单项出现在其他主菜单项旁边，因为这将是相当多余的。
- en: The **Path** option allows you to check that this menu item points to the correct
    content, allowing you to click on the link below (in this case, **forum)** to
    see which page is brought up. This is useful if the menu item has been manually
    added and you are uncertain as to whether the target URL for the item was correctly
    entered.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '**路径**选项允许您检查该菜单项是否指向正确的内容，让您点击下面的链接（在本例中为**论坛)**，以查看带来的页面。如果菜单项是手动添加的，并且您不确定该项的目标URL是否正确输入，这将非常有用。'
- en: Once you are done, you will find that the items you have enabled are now available
    in the menu on the left-hand side.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，您会发现您启用的项目现在可以在左侧菜单中使用。
- en: 'It is possible that you will need to create your own menu at some stage—perhaps
    to provide a more focused navigable area. In such a case, use the **add menu**
    tab on the **menus** page to enter the name of a new menu, like so:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 可能您在某个阶段需要创建自己的菜单——也许是为了提供一个更集中的可导航区域。在这种情况下，可以在**菜单**页面上使用**添加菜单**选项卡输入新菜单的名称，如下所示：
- en: '![Menus and Primary Links](graphics/1800_04_17.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_17.jpg)'
- en: 'After submitting this, it is then easy to add new menu items using the **add
    menu item** tab:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 提交后，使用**添加菜单项**选项卡很容易添加新的菜单项：
- en: '![Menus and Primary Links](graphics/1800_04_18.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_18.jpg)'
- en: 'From the screenshot above, you can see that we are adding a menu item entitled
    **aggregation** to the **News** parent item. The **Path** we have chosen to link
    the menu item to is **aggregator**, as this will display all the aggregated news
    available on the site (assuming this is set up). If you don''t have **aggregator**
    enabled for now, link it to something else—anything will do! Once this is done,
    you can view the new menu at the bottom of the menu page:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 从上面的截图中，您可以看到我们正在向**新闻**父项添加一个名为**聚合**的菜单项。我们选择将菜单项链接到**聚合器**，因为这将显示站点上所有聚合的新闻（假设已设置）。如果您现在没有启用**聚合器**，可以将其链接到其他地方——任何地方都可以！完成后，您可以在菜单页面的底部查看新菜单：
- en: '![Menus and Primary Links](graphics/1800_04_19.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_19.jpg)'
- en: 'If you would like to have this menu displayed somewhere on your site, then
    it is a simple matter of enabling it in the **blocks** section of the main menu
    under **administer**. Blocks are discussed in detail later in this chapter under
    the section entitled Working with Blocks, so we won''t go any further with this
    particular topic other than to show you this (the result of adding the **News**
    menu, with its **aggregator** menu item to the left sidebar):'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望在站点的某个位置显示此菜单，那么只需在**管理**下的主菜单的**区块**部分中启用它就可以了。区块将在本章后面的**区块操作**部分中详细讨论，所以我们不会进一步讨论这个特定的主题，只是向您展示这个（添加了**新闻**菜单及其**聚合器**菜单项到左侧边栏的结果）：
- en: '![Menus and Primary Links](graphics/1800_04_20.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_20.jpg)'
- en: With that out of the way, we need to look at how to configure the primary links,
    which appear by default at the top right-hand side of each page. We have already
    clicked on this link in order to bring up the **menu** section that we used in
    this section, but we have not yet taken a look at what configuration options we
    have available for the primary links.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些后，我们需要看一下如何配置默认情况下显示在每个页面右上角的主链接。我们已经点击了这个链接，以打开我们在本节中使用的**菜单**部分，但我们还没有看一下我们为主链接可用的配置选项。
- en: 'Head on over to the **menus** link that appears under the **settings** menu
    item in the main menu. You will notice that the page is divided into two halves.
    The first provides a drop-down list for the menu options associated with both
    primary and secondary links as shown here:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 转到主菜单中**设置**菜单项下出现的**菜单**链接。您会注意到页面分为两半。第一部分提供了一个下拉列表，用于显示与主链接和次级链接相关的菜单选项，如下所示：
- en: '![Menus and Primary Links](graphics/1800_04_21.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_21.jpg)'
- en: 'As you can see, the fact that the latest addition to the available menus, **News**,
    is present in this list should give you a clue as to how this page is used. In
    actual fact, we can select whatever menu item we wish to display here. In this
    case, **Navigation** is the menu of choice, and after saving these settings, the
    **Navigation** menu items are displayed along the top of each page, like this:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，可用菜单的最新添加项**新闻**出现在此列表中，这应该给你一个线索，说明这个页面的用途。实际上，我们可以选择在这里显示任何菜单项。在这种情况下，**导航**是选择的菜单，在保存这些设置后，**导航**菜单项显示在每个页面的顶部，就像这样：
- en: '![Menus and Primary Links](graphics/1800_04_22.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_22.jpg)'
- en: Now, recall that we enabled the **forums** menu item within the **Navigation**
    menu a little earlier in this section, so it appears along with all the other
    primary links in this menu item. Drupal doesn't stop there, because right below
    the first drop-down list, we have a second one that can be used to display secondary
    links.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，回想一下，我们在本节稍早时启用了**导航**菜单中的**论坛**菜单项，因此它将与此菜单项中的所有其他主链接一起显示。Drupal并不止步于此，因为在第一个下拉列表的正下方，我们有第二个可以用来显示次级链接的下拉列表。
- en: 'Selecting **Navigation**, as shown here:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 选择**导航**，如下所示：
- en: '![Menus and Primary Links](graphics/1800_04_23.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_23.jpg)'
- en: 'causes all the secondary links in the given menu item to be displayed. In this
    case, the **administer** primary link has a large number of secondary links associated
    with it; so the header section now looks a bit crowded:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在给定菜单项中显示所有次级链接的原因。在这种情况下，**管理**主链接有大量与之关联的次级链接；所以头部部分现在看起来有点拥挤：
- en: '![Menus and Primary Links](graphics/1800_04_24.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![菜单和主链接](graphics/1800_04_24.jpg)'
- en: Having the ability to create whatever menus you like and then display them wherever
    you want is a very powerful tool. There are a multitude of different combinations
    for you to try out. For example, you might wish to create a content menu that
    contains a listing of all the different types of content on your site—blogs, forums,
    stories, polls, and so on. You can then attach this menu to the primary links
    as a kind of *quick navigation* tool for users. Very powerful and very flexible;
    I'm sure you'll agree!
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有创建任何您喜欢的菜单然后在任何您想要的地方显示它们的能力是一个非常强大的工具。有许多不同的组合供您尝试。例如，您可能希望创建一个内容菜单，其中包含网站上所有不同类型的内容的列表-博客、论坛、故事、投票等。然后，您可以将此菜单附加到主要链接，作为用户的一种*快速导航*工具。非常强大和非常灵活；我相信您会同意的！
- en: Using Modules
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用模块
- en: So now we have a whole bunch of configured modules just waiting to be used.
    The content-related modules should be present in the main menu (or at least **forums)**
    because we have edited the primary links to allow them to be shown (alternatively,
    you might have created your own menu to allow navigation of content). We still
    need to take a quick look at one of the modules here just to prove that everything
    is in order. One of the more powerful examples of how customizable Drupal is can
    be demonstrated quite nicely with the **locale** module, so let's look at that.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有一大堆配置好的模块等待使用。与内容相关的模块应该出现在主菜单中（或至少**论坛**），因为我们已编辑了主要链接以允许它们显示（或者，您可能已经创建了自己的菜单以允许导航内容）。我们仍然需要快速查看这里的一个模块，以证明一切都井井有条。Drupal的可定制性有一个更强大的例子可以很好地展示**locale**模块，所以让我们来看看。
- en: 'Assuming you are a registered user, and the site is configured to allow for
    localization (by having several languages enabled in the **localization** page
    under **administer)**, you could simply log on, click the **my account** link,
    and then select the **edit** tab on that page. Scrolling down, the option to select
    the interface''s language as shown here is now available:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您是注册用户，并且网站配置为允许本地化（通过在**管理**下的**本地化**页面启用多种语言），您只需登录，单击**我的帐户**链接，然后在该页面上选择**编辑**选项卡。向下滚动，现在可以选择界面语言的选项如下所示：
- en: '![Using Modules](graphics/1800_04_25.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![使用模块](graphics/1800_04_25.jpg)'
- en: 'After making a language selection, in this case **Italian**, click **Submit**
    at the bottom of the page, and you will find that, depending on how well the translation
    has been done, your site is more or less presented in the language of your choice.
    Now, whenever you log out the site goes back to its default language, in this
    instance **English**, but on login the site is re-rendered in **Italian**, like
    this:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行语言选择后，例如**意大利语**，单击页面底部的**提交**，您会发现，根据翻译的质量如何，您的网站更多或更少地以您选择的语言呈现。现在，每当您注销时，网站会恢复到其默认语言，例如**英语**，但在登录时，网站会以**意大利语**重新呈现，如下所示：
- en: '![Using Modules](graphics/1800_04_26.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![使用模块](graphics/1800_04_26.jpg)'
- en: This is a fairly impressive and powerful feature of Drupal, and hopefully, regardless
    of whether you need this particular module, you are getting excited about the
    many possibilities that lie ahead.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这是Drupal的一个相当令人印象深刻和强大的功能，希望无论您是否需要这个特定的模块，您都对前方的许多可能性感到兴奋。
- en: It is strongly recommended that you now work with all the modules you have enabled
    before continuing, and get a feel for what is happening behind the scenes. One
    question you will ask yourself sooner or later is *How do I go about presenting
    all my modules on the site?* This is obviously a fairly important question; so
    we will deal with it right now…
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 强烈建议您在继续之前现在使用您已启用的所有模块，并了解幕后发生了什么。您迟早会问自己一个问题*我该如何在网站上展示所有我的模块？* 这显然是一个非常重要的问题；所以我们现在就来处理它…
- en: Working with Blocks
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理块
- en: As we saw briefly in [Chapter 2](ch02.html "Chapter 2. Setting Up the Development
    Environment"), blocks contain information or related data that is visible in various
    places around the site—depending on where you choose to show them. Blocks are
    often generated by modules, but it is also possible to create them manually. Since
    many modules generate blocks automatically, it is always wise to pay the **blocks**
    section a visit whenever a new module has been enabled, because chances are that
    you have some new settings to play with.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[第2章](ch02.html "第2章。设置开发环境")中简要看到的，块包含在网站各个地方可见的信息或相关数据，具体取决于您选择显示它们的位置。块通常由模块生成，但也可以手动创建。由于许多模块会自动生成块，因此在启用新模块后，最好总是访问**块**部分，因为很可能您有一些新的设置可以使用。
- en: OK, we know what blocks are, so *what are we discussing in this section?* Well,
    when we talk about working with blocks, what we are really saying is*"How do we
    want to present the functionality of the site to the user?"* Naturally, everyone
    should strive to make a striking and unique site, and layout configuration is
    a big part of that—especially since it governs how functionality is organized
    on the site's interface.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，我们知道什么是块，那么*我们在这一部分讨论什么呢？* 嗯，当我们谈论处理块时，我们真正在说的是*“我们想要如何向用户呈现网站的功能？”* 当然，每个人都应该努力使网站引人注目和独特，布局配置是其中的重要部分，特别是因为它决定了网站界面上功能的组织方式。
- en: Keep in mind at all times that the overriding factors, which govern the way
    you set things up when it comes to presenting the site, are all about usability.
    Make sure that the site is intuitive and easy to follow and never sacrifice clarity
    and ease of use for artistic reasons.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 请时刻记住，决定您在呈现网站时设置事物的最重要因素都与可用性有关。确保网站直观易懂，永远不要因为艺术原因而牺牲清晰度和易用性。
- en: Luckily, Drupal is already fairly sensibly laid out by default, but that doesn't
    mean that there is not plenty to do. You have an exceptional amount of control
    over where and how everything is displayed and correspondingly, quite a lot to
    work on.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，Drupal默认情况下已经相当合理地布局，但这并不意味着没有很多工作要做。你对一切的显示位置和方式都有相当多的控制，因此也有很多工作要做。
- en: For the moment, we are only concerned with where functionality is going to be
    presented on the page. In other words, we are dealing with the part of the interface
    design that is directly concerned with the site's functionality. For example,
    a theme would work with such things as color and font, or even background images
    and layout, among other things (the scope of themes is actually very broad but
    for the time being it is fine to look at things in this way), whereas we would
    still need to enable and add blocks to certain parts of the site regardless of
    what template/theme we were using.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们只关心功能将在页面上如何呈现。换句话说，我们正在处理与网站功能直接相关的界面设计部分。例如，主题将与颜色和字体等内容一起工作，甚至包括背景图片和布局等内容（主题的范围实际上非常广泛，但暂时以这种方式看待事物是可以的），而无论我们使用什么模板/主题，我们仍需要启用和添加区块到网站的某些部分。
- en: '*But where do we begin?* Well, one of the best ways to find out how you want
    things done is by looking on the Net and seeing how other people have made sites
    that work nicely. If there is something you like, see if it can be imitated on
    your site.'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '*但我们从哪里开始呢？* 嗯，找出你想要的方式的最好方法之一就是上网看看，看看其他人是如何制作出漂亮的网站的。如果有你喜欢的东西，看看它是否可以在你的网站上模仿。'
- en: Another way to learn about how you are ultimately going to set out your site
    is to actually play around and see what works. This section will concentrate on
    this method and leave the first method for you to research.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 了解如何最终设置你的网站的另一种方法是实际尝试并看看什么有效。本节将集中讨论这种方法，留下第一种方法让你自己去研究。
- en: Adding Blocks
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加区块
- en: Under the **administer** menu item, click **blocks** to bring up the list of
    blocks that are available for the site at present. Remember that as you add and
    change things on your site, this list will change—you will probably have to revisit
    it more than once. Looking over the blocks page, you will see a list of the available
    blocks and several options for each one. Drupal gives you the ability to place
    any of these options pretty much anywhere on the page, but your choices shouldn't
    be quite so random.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在**管理**菜单项下，点击**区块**，以查看目前网站可用的区块列表。请记住，随着你在网站上添加和更改内容，这个列表会发生变化——你可能不止一次地需要重新查看它。浏览区块页面，你会看到可用区块的列表以及每个区块的几个选项。Drupal允许你将这些选项中的任何一个几乎放在页面的任何地方，但你的选择不应该太随意。
- en: 'Try to make the site intuitive to use. In order to do this, it is a good idea
    to group related information into the same places on the site, so that users can
    get a feel for where they might look for a specific type of content. For the purposes
    of the demo site, the following settings were made for the time being (remember
    that as the site develops, it is likely that this will change):'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 尽量使网站易于使用。为了做到这一点，最好将相关信息分组放在网站的相同位置，这样用户就可以感受到他们可能在哪里寻找特定类型的内容。对于演示网站，暂时做出了以下设置（请记住随着网站的发展，这可能会改变）：
- en: '![Adding Blocks](graphics/1800_04_27.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![添加区块](graphics/1800_04_27.jpg)'
- en: There is one interesting point to note about the **Weight** settings. If you
    look at the previous screenshot, you will see that the blocks in the **right sidebar**
    have weightings of **1** to **4**. What do I do if I want to add two new blocks
    above these? Fortunately, the **Weight** drop-down list (under **blocks)** has
    negative numbers that allow you to give weightings of less than **0** so that
    you don't have to redo all the weightings to insert one above. Accordingly, if
    you wanted to add two more blocks to the top of the right sidebar, you could give
    them weights of **1** and **0** without changing anything else.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 关于**权重**设置有一个有趣的地方。如果你看一下之前的屏幕截图，你会看到**右侧边栏**中的区块的权重分别为**1**到**4**。如果我想在这些区块上面添加两个新的区块怎么办？幸运的是，**权重**下拉列表（在**区块**下）有负数选项，可以让你给予小于**0**的权重，这样你就不必重新调整所有的权重来插入一个新的区块。因此，如果你想在右侧边栏顶部添加两个区块，你可以给它们分别设置为**1**和**0**的权重，而不改变其他任何内容。
- en: Moving on, notice that information about other users, like **Who's new** and
    **Who's online**, is confined to the footer area of the page in the previous screenshot.
    This is because obviously the main area of concern for the site is not who is
    online, but rather content relating to wildlife. This information is therefore
    assigned to the bottom of the page where people who are interested in taking a
    look at who's around can take the trouble to check, without it detracting from
    the main content of the site. It's a good idea to put all information like this
    at the bottom of your pages.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 继续前进，注意到在之前的屏幕截图中，关于其他用户的信息，比如“谁是新的”和“谁在线”，都被限制在页面的页脚区域。这是因为显然，网站的主要关注点不是谁在线，而是与野生动物相关的内容。因此，这些信息被分配到页面的底部，这样对于想要查看周围有谁的人来说，可以花点功夫去检查，而不会分散网站的主要内容。把所有这样的信息放在页面底部是一个好主意。
- en: What else? All content-related issues are grouped into the right-hand sidebar.
    This means that if people want to quickly take a look at what new content has
    been added to the site, they can find it by looking here. As well as this, information
    is structured such that polls appear above all other information (because we generally
    want to encourage people to take the time to answer a poll), but we have left
    the search form at the top of the page, because we envisage this to be the most
    useful tool once the amount of content on the site has become substantial.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 还有什么？所有与内容相关的问题都被分组到右侧边栏。这意味着如果人们想要快速查看网站上添加了什么新内容，他们可以通过在这里查找来找到。除此之外，信息被结构化，使得投票出现在所有其他信息之上（因为我们通常希望鼓励人们花时间回答投票），但我们将搜索表单留在页面顶部，因为我们预计一旦网站上的内容变得丰富起来，这将是最有用的工具。
- en: Of course, some blocks remain disabled as the site does not need them for now.
    It is always easy to add or remove blocks at a later date. Provided you make sure
    there is a nice logical layout for the various blocks, you can chop and change
    what is and is not displayed as and when required. But try not to chop and change
    too often as this will hurt the usability of the site and may lead to frustration
    among users once it has gone live.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，一些块目前处于禁用状态，因为网站目前不需要它们。随后随时添加或删除块都很容易。只要确保各种块有一个合理的逻辑布局，您可以根据需要随时更改显示和不显示的内容。但尽量不要经常更改，因为这会影响网站的可用性，并可能导致用户在网站上线后感到沮丧。
- en: Taking a look at your homepage once these changes have been saved (by clicking
    **Save blocks)**, you will see that the various blocks have been inserted into
    your web pages as you requested. It's easy enough to move things around until
    you are totally happy with the way the page looks.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 保存这些更改后，查看主页（单击**保存块**），您将看到各种块已按您的要求插入到您的网页中。移动这些内容直到您完全满意页面的外观非常容易。
- en: 'Some of you may also have noticed that there is an **add block** tab at the
    top of the **blocks** page. Clicking this brings up a page that can be used to
    insert your own blocks into your site, as shown here:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能还注意到**块**页面顶部有一个**添加块**选项卡。单击此选项将显示一个页面，可用于将您自己的块插入到您的网站中，如下所示：
- en: '![Adding Blocks](graphics/1800_04_28.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![添加块](graphics/1800_04_28.jpg)'
- en: 'In this case, we are adding a little block of PHP code that takes a quote out
    of a file from the `drupal` folder in the file system (quotes.txt), breaks it
    up into an array of lines, picks one at random, and then displays it in a special
    font. Don''t worry about understanding the PHP code for the moment. This is really
    just here to give you an idea of why you might wish to add a block to the site
    in future. If you then view the new block on the website you should get something
    like this (depending on what quotes you have added to your `quote.txt` file):'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们正在添加一小块PHP代码，该代码从文件系统中的`drupal`文件夹（quotes.txt）中取出引用，将其分解为一系列行，随机选择一行，然后以特殊字体显示出来。暂时不用担心理解PHP代码。这只是为了让您了解为什么您可能希望在将来向网站添加一个块。如果您在网站上查看新的块，您应该会得到类似于以下内容（取决于您已经添加到`quote.txt`文件中的引用）：
- en: '![Adding Blocks](graphics/1800_04_29.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![添加块](graphics/1800_04_29.jpg)'
- en: Adding silly quotes is of course something quite fun to do, but hopefully you
    appreciate how easy it is to include new blocks in your pages. The situation becomes
    more complex when we start thinking about whether certain people should be allowed
    to access a block or not, or whether the block should be displayed on all pages
    or only on selected pages. In order to find out how to deal with these issues,
    we must look at block configuration in some detail.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 添加愚蠢的引用当然是一件非常有趣的事情，但希望您能够欣赏到在页面中包含新块有多么容易。当我们开始考虑是否应该允许某些人访问块，或者块是否应该显示在所有页面上还是仅显示在选定的页面上时，情况变得更加复杂。为了了解如何处理这些问题，我们必须详细了解块配置。
- en: Configuring Blocks
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置块
- en: 'Drupal allows us to control when a block is displayed through the **configure**
    link at the right-hand side of each block in the list. This configuration page
    is split up into three sections that deal with:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal允许我们通过列表中每个块右侧的**配置**链接来控制块何时显示。此配置页面分为三个部分，涉及以下内容：
- en: '**Block specific settings**'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**块特定设置**'
- en: '**User specific visibility settings**'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户特定可见性设置**'
- en: '**Page specific visibility settings**'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**页面特定可见性设置**'
- en: Combining these three sections provides a sophisticated method of controlling
    when a block is shown, and to whom. Of course, some modules don't require any
    specific settings of their own; so you might find that you are only required to
    make specific decisions about users and pages more often than not.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 结合这三个部分提供了一种复杂的方法来控制块何时显示以及显示给谁。当然，一些模块不需要任何特定的设置；因此，您可能会发现您只需要经常对用户和页面做出具体决定。
- en: 'A good example for configuring a block can be shown by the **Who''s online**
    page. This page allows us to decide how long users can be inactive, before we
    no longer consider them online, as well as, the maximum number of people to show
    at any one time. That''s easy enough to deal with, and really depends on the needs
    of the site. The next two options give us something to think about though:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 一个配置块的很好的例子可以通过**在线用户**页面来展示。该页面允许我们决定用户在不活动多久后不再被视为在线，以及一次最多显示多少人。这很容易处理，实际上取决于网站的需求。接下来的两个选项给我们一些思考的余地：
- en: '![Configuring Blocks](graphics/1800_04_31.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![配置块](graphics/1800_04_31.jpg)'
- en: As you can see, the settings above allow users to edit their own preference
    for whether they can see the **Who's online** block—although, it is visible by
    default. While you might find that most of your casual users don't really mind,
    regular users often appreciate being given some control over how they set up their
    pages.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，上述设置允许用户编辑他们自己的偏好，以确定他们是否可以看到**在线用户**块，尽管默认情况下是可见的。虽然您可能会发现大多数休闲用户并不在意，但常规用户通常会感激能够对他们设置页面的方式有一些控制。
- en: 'With these settings in place, users editing their account information are presented
    with the following checkbox that allows them to enable the block or leave it disabled:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些设置，编辑他们的帐户信息的用户将看到以下复选框，允许他们启用阻止或离开它禁用：
- en: '![Configuring Blocks](graphics/1800_04_30.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![配置块](graphics/1800_04_30.jpg)'
- en: '*Allowing users to make their own choices is one thing, but what if we don''t
    want to display a certain block on a certain page ever?* Well, the next section
    allows us to do exactly this, and if you look at the screenshot before last, you
    will see that the **Show on every page except the listed pages** option has been
    selected and the text**<front>** has been entered in the **Pages** text area.
    This means that whenever someone visits the site, they aren''t shown who is online.
    This information only becomes available once they have logged in or begun using
    the site by looking over content or adding material.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '*允许用户做出自己的选择是一回事，但如果我们不想在某个页面上永远显示某个块怎么办？*好吧，下一节允许我们做到这一点，如果您看一下最后之前的屏幕截图，您会看到已选择了**在除列出的页面之外的每个页面上显示**选项，并且在**页面**文本区域中输入了**<front>**。这意味着每当有人访问网站时，他们不会看到谁在线。只有在他们登录或开始查看内容或添加材料时，这些信息才会变得可用。'
- en: 'More advanced users can add some code to determine whether or not the block
    is displayed. This could be in the form:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 更高级的用户可以添加一些代码来确定是否显示该块。这可能是这种形式：
- en: '[PRE1]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: You will probably find that you only need to come back to this section later
    on, when there are specific reasons to show or not show information. As always,
    it is recommended that you play around and attempt to show a module on a certain
    page but not others. *For example, can you show a block only when someone is using
    the forums?* The answer is of course to select **Show on only the listed pages**
    option, and then enter **forum** or **forum/*** into the text area. Make sure
    this is correct by trying it out on your own machine.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能会发现，只有在有特定原因要显示或不显示信息时，才需要回到本节。一如既往，建议您尝试并尝试在特定页面上显示或不显示模块。*例如，您能否只在有人使用论坛时显示一个块？*答案当然是选择**仅在列出的页面上显示**选项，然后在文本区域中输入**forum**或**forum/***。通过在自己的机器上尝试确保这是正确的。
- en: Now you know how to configure a block. It is simply a case of going through
    each one you have enabled, and making the appropriate decisions about when, where,
    and to whom they will be displayed.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您知道如何配置块了。只需逐个查看已启用的块，并对何时、何地以及向谁显示做出适当的决定。
- en: Summary
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: With the general configuration tasks out of the way, we knuckled down to the
    all important topic of adding functionality and organizing it on the site. This
    is one of the most important tasks you will undertake during the development phase.
    Selecting and implementing the right functionality is a subtle task, but hopefully
    you found that Drupal makes it quite easy to implement once you have made up your
    mind about what goes where.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了一般配置任务后，我们开始认真对待了在网站上添加功能并对其进行组织的重要主题。这是您在开发阶段将要承担的最重要的任务之一。选择和实施正确的功能是一个微妙的任务，但希望您会发现，一旦您确定了功能的位置，Drupal就会使其实施变得非常容易。
- en: As well as this, we got a taste of what it's like to have an entire development
    community to draw from, when we downloaded and installed a contribution module.
    Contribution modules are an invaluable resource for extending the functionality
    of a site. This valuable facility comes with the express warning that you need
    to safeguard the security of your site by making backups before implementing any
    changes.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 除此之外，当我们下载并安装贡献模块时，我们体验到了从整个开发社区中获取帮助的感觉。贡献模块是扩展网站功能的宝贵资源。这一宝贵的功能需要特别警告，即在实施任何更改之前，您需要通过备份来保护网站的安全。
- en: Drupal's power and elegance shone through brightly when we talked about how
    easy it is to customize the site's menu and navigation. Having a powerful tool,
    combined with the flexibility of the menu system, is an extraordinary help when
    it comes to creating a well designed and easy‑to‑use site. Hopefully, the relationship
    between how menus are created and how they relate to the functionality provided
    by the modules became clear to you over the course of the latter stages of the
    chapter.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们谈论如何轻松定制网站的菜单和导航时，Drupal的强大和优雅就会显现出来。拥有强大的工具，再加上菜单系统的灵活性，对于创建设计良好且易于使用的网站来说是非常有帮助的。希望在本章的后期阶段，菜单的创建方式以及它们与模块提供的功能之间的关系对您变得清晰。
- en: One of the most important things you hopefully learned from this chapter is
    that, because Drupal is so flexible and customizable, there are a large number
    of settings that are held at different places. Keeping track of all of these might
    seem quite daunting at first, but you will become more familiar with them as you
    work with Drupal. Eventually, you will be able to find your way around with ease.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 您希望从本章中学到的最重要的一点是，由于Drupal非常灵活和可定制，因此有许多设置保存在不同的位置。一开始跟踪所有这些可能似乎很令人生畏，但随着您与Drupal的工作，您将变得更加熟悉。最终，您将能够轻松地找到自己的方式。
- en: For now though, sit back and take a quick break, happy in the knowledge of a
    task well done. In the following chapter we will begin looking at how to work
    with users and permissions—another topic crucial for your success as a Drupal
    administrator.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 不过，现在请坐下来休息一下，对自己的任务完成得很好感到高兴。在接下来的章节中，我们将开始学习如何与用户和权限一起工作，这对于您作为Drupal管理员的成功至关重要。
