["```\n 1  git clone https://github.com/vfarcic/k8s-specs.git\n 2\n 3  cd k8s-specs\n```", "```\n 1  helm install stable/metrics-server \\\n 2      --name metrics-server \\\n 3      --version 2.0.2 \\\n 4      --namespace metrics\n 5\n 6  kubectl -n metrics \\\n 7      rollout status \\\n 8      deployment metrics-server\n```", "```\n 1  kubectl top nodes\n```", "```\n 1  kubectl top nodes\n```", "```\nNAME               CPU(cores) CPU% MEMORY(bytes) MEMORY%\ndocker-for-desktop 248m       12%  1208Mi        63%\n```", "```\n 1  kubectl -n kube-system top pod\n```", "```\nNAME                                       CPU(cores) MEMORY(bytes)\netcd-docker-for-desktop                    16m        74Mi\nkube-apiserver-docker-for-desktop          33m        427Mi\nkube-controller-manager-docker-for-desktop 44m        63Mi\nkube-dns-86f4d74b45-c47nh                  1m         39Mi\nkube-proxy-r56kd                           2m         22Mi\nkube-scheduler-docker-for-desktop          13m        23Mi\ntiller-deploy-5c688d5f9b-2pspz             0m         21Mi\n\n```", "```\n 1  kubectl top pods --all-namespaces\n```", "```\nNAMESPACE   NAME                                       CPU(cores) MEMORY(bytes) \ndocker      compose-7447646cf5-wqbwz                   0m         11Mi \ndocker      compose-api-6fbc44c575-gwhxt               0m         14Mi \nkube-system etcd-docker-for-desktop                    16m        74Mi \nkube-system kube-apiserver-docker-for-desktop          33m        427Mi \nkube-system kube-controller-manager-docker-for-desktop 46m        63Mi \nkube-system kube-dns-86f4d74b45-c47nh                  1m         38Mi \nkube-system kube-proxy-r56kd                           3m         22Mi \nkube-system kube-scheduler-docker-for-desktop          14m        23Mi \nkube-system tiller-deploy-5c688d5f9b-2pspz             0m         21Mi \nmetrics     metrics-server-5d78586d76-pbqj8            0m         10Mi \n```", "```\n 1  kubectl top pods \\\n 2    --all-namespaces \\\n 3    --containers\n```", "```\nNAMESPACE   POD                                        NAME                 CPU(cores) MEMORY(bytes) \ndocker      compose-7447646cf5-wqbwz                   compose                 0m         11Mi \ndocker      compose-api-6fbc44c575-gwhxt               compose                 0m         14Mi \nkube-system etcd-docker-for-desktop                    etcd                    16m        74Mi \nkube-system kube-apiserver-docker-for-desktop          kube-apiserver          33m        427Mi \nkube-system kube-controller-manager-docker-for-desktop kube-controller-manager 46m        63Mi \nkube-system kube-dns-86f4d74b45-c47nh                  kubedns                 0m         13Mi \nkube-system kube-dns-86f4d74b45-c47nh                  dnsmasq                 0m         10Mi \nkube-system kube-dns-86f4d74b45-c47nh                  sidecar                 1m         14Mi \nkube-system kube-proxy-r56kd                           kube-proxy              3m         22Mi \nkube-system kube-scheduler-docker-for-desktop          kube-scheduler          14m        23Mi \nkube-system tiller-deploy-5c688d5f9b-2pspz             tiller                  0m         21Mi \nmetrics     metrics-server-5d78586d76-pbqj8            metrics-server          0m         10Mi \n```", "```\n 1  kubectl get \\\n 2      --raw \"/apis/metrics.k8s.io/v1beta1\" \\\n 3      | jq '.'\n```", "```\n{\n  \"kind\": \"APIResourceList\",\n  \"apiVersion\": \"v1\",\n  \"groupVersion\": \"metrics.k8s.io/v1beta1\",\n  \"resources\": [\n    {\n      \"name\": \"nodes\",\n      \"singularName\": \"\",\n      \"namespaced\": false,\n      \"kind\": \"NodeMetrics\",\n      \"verbs\": [\n        \"get\",\n        \"list\"\n      ]\n    },\n    {\n      \"name\": \"pods\",\n      \"singularName\": \"\",\n      \"namespaced\": true,\n      \"kind\": \"PodMetrics\",\n      \"verbs\": [\n        \"get\",\n        \"list\"\n      ]\n    }\n  ]\n}\n```", "```\n 1  kubectl get \\\n 2      --raw \"/apis/metrics.k8s.io/v1beta1/pods\" \\\n 3      | jq '.'\n```", "```\n 1  cat scaling/go-demo-5-no-sidecar-mem.yml\n```", "```\n...\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: db\n  namespace: go-demo-5\nspec:\n  ...\n  template:\n    ...\n    spec:\n      ...\n      containers:\n      - name: db\n        ...\n        resources:\n          limits:\n            memory: \"150Mi\"\n            cpu: 0.2\n          requests:\n            memory: \"100Mi\"\n            cpu: 0.1\n        ...\n      - name: db-sidecar\n    ... \napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  ...\n  template:\n    ...\n    spec:\n      containers:\n      - name: api\n        ...\n        resources:\n          limits:\n            memory: 15Mi\n            cpu: 0.1\n          requests:\n            memory: 10Mi\n            cpu: 0.01\n...\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-no-sidecar-mem.yml \\\n 3      --record\n```", "```\n 1  kubectl -n go-demo-5 \\\n 2      rollout status \\\n 3      deployment api\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        1m\ndb-0    2/2   Running 0        1m\n```", "```\n 1  cat scaling/go-demo-5-api-hpa.yml\n```", "```\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: api\n  minReplicas: 2\n  maxReplicas: 5\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      targetAverageUtilization: 80\n  - type: Resource\n    resource:\n      name: memory\n      targetAverageUtilization: 80\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-api-hpa.yml \\\n 3      --record\n```", "```\n 1  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS                      MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api <unknown>/80%, <unknown>/80% 2       5       0        20s\n\n```", "```\n 1  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS          MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api 38%/80%, 10%/80% 2       5       2        1m\n\n```", "```\n 1  kubectl -n go-demo-5 describe hpa api\n```", "```\n...\nEvents:\n... Message\n... -------\n... New size: 2; reason: Current number of replicas below Spec.MinReplicas\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        2m\napi-... 1/1   Running 0        6m\ndb-0    2/2   Running 0        6m\n```", "```\n 1  cat scaling/go-demo-5-db-hpa.yml\n```", "```\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: db\n  namespace: go-demo-5\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: StatefulSet\n    name: db\n  minReplicas: 3\n  maxReplicas: 5\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      targetAverageUtilization: 80\n  - type: Resource\n    resource:\n      name: memory\n      targetAverageUtilization: 80\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-db-hpa.yml \\\n 3      --record\n```", "```\n 1  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS                      MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api 41%/80%, 0%/80%              2       5       2        5m\ndb   StatefulSet/db <unknown>/80%, <unknown>/80% 3       5       0        20s\n```", "```\n 1  kubectl -n go-demo-5 describe hpa db\n```", "```\n...\nEvents:\n... Message\n... -------\n... New size: 3; reason: Current number of replicas below Spec.MinReplicas\n... missing request for memory on container db-sidecar in pod go-demo-5/db-0\n... failed to get memory utilization: missing request for memory on container db-sidecar in pod go-demo-5/db-0\n\n```", "```\n 1  cat scaling/go-demo-5-no-hpa.yml\n```", "```\n...\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: db\n  namespace: go-demo-5\nspec:\n  ...\n  template:\n    ...\n    spec:\n      ...\n      - name: db-sidecar\n        ...\n        resources:\n          limits:\n            memory: \"100Mi\"\n            cpu: 0.2\n          requests:\n            memory: \"50Mi\"\n            cpu: 0.1\n...\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-no-hpa.yml \\\n 3      --record\n```", "```\n 1  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS          MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api 66%/80%, 10%/80% 2       5       2        16m\ndb   StatefulSet/db 60%/80%, 4%/80%  3       5       3        10m\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        42m\napi-... 1/1   Running 0        46m\ndb-0    2/2   Running 0        33m\ndb-1    2/2   Running 0        33m\ndb-2    2/2   Running 0        33m\n```", "```\n 1  cat scaling/go-demo-5-api-hpa-low-mem.yml\n```", "```\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  ...\n  metrics:\n  ...\n  - type: Resource\n    resource:\n      name: memory\n      targetAverageUtilization: 10\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-api-hpa-low-mem.yml \\\n 3      --record\n```", "```\n 1  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS          MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api 49%/10%, 10%/80% 2       5       2        44m\ndb   StatefulSet/db 64%/80%, 5%/80%  3       5       3        39m\n```", "```\n 1  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS          MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api 49%/10%, 10%/80% 2       5       4        44m\ndb   StatefulSet/db 64%/80%, 5%/80%  3       5       3        39m\n```", "```\n 1  kubectl -n go-demo-5 describe hpa api\n```", "```\n...\nEvents:\n... Message\n... -------\n... New size: 2; reason: Current number of replicas below Spec.MinReplicas\n... New size: 4; reason: memory resource utilization (percentage of request) above target\n```", "```\n 1  kubectl -n go-demo-5 describe hpa api\n```", "```\n...\nEvents:\n... Message\n... -------\n... New size: 2; reason: Current number of replicas below Spec.MinReplicas\n... New size: 4; reason: memory resource utilization (percentage of request) above target\n... New size: 5; reason: memory resource utilization (percentage of request) above target\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        47m\napi-... 1/1   Running 0        51m\napi-... 1/1   Running 0        4m\napi-... 1/1   Running 0        4m\napi-... 1/1   Running 0        24s\ndb-0    2/2   Running 0        38m\ndb-1    2/2   Running 0        38m\ndb-2    2/2   Running 0        38m\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-api-hpa.yml \\\n 3      --record\n```", "```\n 1  kubectl -n go-demo-5 describe hpa api\n```", "```\n...\nEvents:\n... Message\n... -------\n... New size: 2; reason: Current number of replicas below Spec.MinReplicas\n... New size: 4; reason: memory resource utilization (percentage of request) above target\n... New size: 5; reason: memory resource utilization (percentage of request) above target\n... New size: 3; reason: All metrics below target\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        27m\napi-... 1/1   Running 2        31m\ndb-0    2/2   Running 0        20m\ndb-1    2/2   Running 0        20m\ndb-2    2/2   Running 0        21m\n```", "```\n 1  cat scaling/go-demo-5-replicas-10.yml\n```", "```\n...\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  replicas: 10\n... \napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: api\n  minReplicas: 2\n  maxReplicas: 5\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      targetAverageUtilization: 80\n  - type: Resource\n    resource:\n      name: memory\n      targetAverageUtilization: 80\n```", "```\n 1  kubectl apply \\\n 2    -f scaling/go-demo-5-replicas-10.yml\n 3\n 4  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS            RESTARTS AGE\napi-... 1/1   Running           0        9s\napi-... 0/1   ContainerCreating 0        9s\napi-... 0/1   ContainerCreating 0        9s\napi-... 1/1   Running           2        41m\napi-... 1/1   Running           0        22s\napi-... 0/1   ContainerCreating 0        9s\napi-... 0/1   ContainerCreating 0        9s\napi-... 1/1   Running           0        9s\napi-... 1/1   Running           0        9s\napi-... 1/1   Running           0        9s\ndb-0    2/2   Running           0        31m\ndb-1    2/2   Running           0        31m\ndb-2    2/2   Running           0        31m\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        30s\napi-... 1/1   Running 2        42m\napi-... 1/1   Running 0        43s\napi-... 1/1   Running 0        30s\napi-... 1/1   Running 0        30s\ndb-0    2/2   Running 0        31m\ndb-1    2/2   Running 0        32m\ndb-2    2/2   Running 0        32m\n```", "```\n 1  kubectl -n go-demo-5 \\\n 2    describe deployment api\n```", "```\n...\nReplicas: 5 desired | 5 updated | 5 total | 5 available | 0 unavailable\n...\nEvents:\n... Message\n... -------\n...\n... Scaled up replica set api-5bbfd85577 to 10\n... Scaled down replica set api-5bbfd85577 to 5\n```", "```\n 1  diff \\\n 2    scaling/go-demo-5-replicas-10.yml \\\n 3    scaling/go-demo-5.yml\n```", "```\n 1  kubectl apply \\\n 2    -f scaling/go-demo-5.yml\n 3\n 4  kubectl -n go-demo-5 \\\n 5    describe deployment api\n```", "```\n...\nReplicas: 1 desired | 5 updated | 5 total | 5 available | 0 unavailable\n...\nEvents:\n... Message\n... -------\n...\n... Scaled down replica set api-5bbfd85577 to 5\n... Scaled down replica set api-5bbfd85577 to 1\n```", "```\n 1  kubectl delete -f scaling/go-demo-5.yml\n```", "```\n 1  kubectl apply \\\n 2    -f scaling/go-demo-5.yml\n 3\n 4  kubectl -n go-demo-5 \\\n 5    describe deployment api\n```", "```\n...\nReplicas: 1 desired | 1 updated | 1 total | 0 available | 1 unavailable\n...\n```", "```\n 1  kubectl -n go-demo-5 \\\n 2    describe deployment api\n```", "```\n 1  kubectl apply \\\n 2    -f scaling/go-demo-5-2-5.yml\n 3\n 4  kubectl -n go-demo-5 \\\n 5    describe deployment api\n```", "```\n...\nReplicas: 2 desired | 1 updated | 3 total | 2 available | 1 unavailable\n...\nEvents:\n... Message\n... -------\n... Scaled up replica set api-5bbfd85577 to 1\n... Scaled up replica set api-5bbfd85577 to 2\n... Scaled up replica set api-745bc9fc6d to 1\n```", "```\n 1  # If NOT GKE or AKS\n 2  helm delete metrics-server --purge\n 3\n 4  kubectl delete ns go-demo-5\n```"]