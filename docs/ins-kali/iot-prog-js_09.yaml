- en: Chapter 9. Putting It All Together
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第9章。将所有内容放在一起
- en: The previous chapters have provided us with the foundation and elements to design
    and put together our entire domestic system, which we will study in this chapter.
    I hope that I've guided you through this journey in a fairly structured and logical
    way, so that you are ready to do that.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 之前的章节为我们提供了设计和组装整个家庭系统的基础和元素，我们将在本章中进行研究。我希望我已经以相当结构化和逻辑的方式引导您进行了这次旅程，以便您已经准备好了。
- en: As a guide to building the whole system, in this chapter, we will guide you
    through how to integrate and give you some ideas to put everything together, and
    also give you the final details. You can then make your own projects with the
    ideas that we will mention in this final chapter.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 作为构建整个系统的指南，在本章中，我们将指导您如何整合并给出一些将所有内容放在一起的想法，并为您提供最终的细节。然后，您可以使用我们在本章中提到的想法制作自己的项目。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Integrating the system - development projects
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 整合系统-开发项目
- en: Controlling access with a matrix keyboard
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用矩阵键盘控制访问
- en: Integrating the system control with relays and devices
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将系统控制与继电器和设备集成
- en: How to set up the power supplies
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何设置电源供应
- en: Integrating the system - development projects
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 整合系统-开发项目
- en: In the previous chapters, we have seen different projects on home automation
    and domestic that is control and monitor home appliances. In this chapter, we
    will give some ideas to develop some projects that they can be done in different
    areas using electronics, controlling and monitoring.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的章节中，我们已经看到了关于家庭自动化和家用电器控制和监控的不同项目。在本章中，我们将提供一些想法，开发一些可以在不同领域使用电子设备进行控制和监控的项目。
- en: Getting into the details of light sensor
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 深入了解光传感器
- en: As its name implies, the **Light Dependent Resistor (LDR)** is made from a piece
    of exposed semiconductor material, such as cadmium sulfide, that changes its electrical
    resistance from several thousand Ohms in the dark to only a few hundred Ohms when
    light falls upon it, by creating hole-electron pairs in the material. The net
    effect is an improvement in its conductivity, with a decrease in resistance for
    an increase in illumination. Also, photosensitive cells have a long response,
    time requiring many seconds to respond to a change in the light intensity.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 正如其名称所示，“光敏电阻（LDR）”由一块暴露的半导体材料制成，例如硫化镉，当光照射到它时，它的电阻从黑暗中的几千欧姆变为只有几百欧姆，通过在材料中创建空穴-电子对。净效应是其导电性的改善，随着照明的增加，电阻减小。此外，光敏电池具有长时间的响应，需要多秒钟才能对光强度的变化做出反应。
- en: 'In this section, we will look at how to use a light sensor to control different
    devices:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看看如何使用光传感器来控制不同的设备：
- en: On/off lights when needed
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要时开关灯光
- en: Dimming the lamp when the sensor detects if there is light in the room or not
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当传感器检测到房间内是否有光线时，调暗灯光
- en: '![Getting into the details of light sensor](graphics/B05170_09_01.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![深入了解光传感器](graphics/B05170_09_01.jpg)'
- en: You can dim the lamp with the signal sensor; according to the measurement taken
    by the light sensor you can regulate the intensity of it.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用信号传感器调暗灯光；根据光传感器测量的数据，可以调节其强度。
- en: '![Getting into the details of light sensor](graphics/B05170_09_02.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![深入了解光传感器](graphics/B05170_09_02.jpg)'
- en: Motion sensor
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 运动传感器
- en: A motion sensor detects body heat (infrared energy). Passive infrared sensors
    are the most widely used motion in home security systems. When your system is
    armed, your motion sensors are activated. Once the sensor warms up, it can detect
    heat and movement in the surrounding areas, creating a protective grid.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 运动传感器检测体热（红外能量）。被动红外传感器是家庭安全系统中最广泛使用的运动传感器。当您的系统处于武装状态时，您的运动传感器会被激活。一旦传感器变热，它就可以检测周围区域的热量和运动，形成一个保护网格。
- en: 'If a moving object blocks too many grid zones and the infrared energy levels
    change rapidly, the sensors are tripped. Using this sensor we can control lights
    when we want them turn on or turn off:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如果移动物体阻挡了太多的网格区域，并且红外能量级别迅速变化，传感器就会触发。使用这个传感器，我们可以在需要时控制灯光的开关：
- en: '![Motion sensor](graphics/B05170_09_03.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![运动传感器](graphics/B05170_09_03.jpg)'
- en: 'According to the distance the sensor measures, it can detect the object so
    you can control the lamp:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 根据传感器测量的距离，它可以检测物体，因此您可以控制灯光：
- en: '![Motion sensor](graphics/B05170_09_04.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![运动传感器](graphics/B05170_09_04.jpg)'
- en: Automatic light controller
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自动光控制器
- en: 'Sensors work when you are not home, or when you tell the system you are not
    there. Some security systems can be programmed to record events via a security
    camera when motion is detected. The main purpose of motion detection is to sense
    an intruder and send an alert to your control panel, which alerts your monitoring
    center:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 当您不在家时，或者当您告诉系统您不在家时，传感器会起作用。一些安全系统可以被编程，当检测到运动时通过安全摄像头记录事件。运动检测的主要目的是感应入侵者并向您的控制面板发送警报，从而向您的监控中心发出警报：
- en: '![Automatic light controller](graphics/B05170_09_05.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![自动光控制器](graphics/B05170_09_05.jpg)'
- en: 'The following circuit diagram show the connection for an automatic light control
    where we use all the elements used earlier like the LDR sensor, PIR sensor, and
    the relay module:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 以下电路图显示了自动光控制的连接，其中使用了之前使用的所有元素，如LDR传感器、PIR传感器和继电器模块：
- en: '![Automatic light controller](graphics/B05170_09_06.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![自动光控制器](graphics/B05170_09_06.jpg)'
- en: Solar power monitor circuit
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 太阳能电源监控电路
- en: 'Here we have another real project that shows a control panel that will monitor
    the energy of the solar panel using the Arduino board. The following diagram shows
    the connection of the sensors and solar panel to Arduino board:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有另一个真实项目，显示了一个控制面板，将使用Arduino板监控太阳能电池板的能量。以下图表显示了传感器和太阳能电池板连接到Arduino板的连接：
- en: '![Solar power monitor circuit](graphics/B05170_09_07.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![太阳能电源监控电路](graphics/B05170_09_07.jpg)'
- en: Automatic irrigation system with a soil sensor
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 带土壤传感器的自动灌溉系统
- en: 'In the following figure, we have another project; we are integrating the tools
    that were used before. In this case, we will control the watering when it is present
    or not, using a soil sensor:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们有另一个项目；我们正在整合以前使用过的工具。在这种情况下，我们将使用土壤传感器在有或无水时控制浇水：
- en: '![Automatic irrigation system with a soil sensor](graphics/B05170_09_08.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![带土壤传感器的自动灌溉系统](graphics/B05170_09_08.jpg)'
- en: Until now you have seen very interesting and valuable projects that can be applied
    to real situations, in different areas, such as domestic, home automation, and
    even in a garden. In the following sections we will look at more projects. Let's
    do it!
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您已经看到了可以应用于真实情况的非常有趣和有价值的项目，涉及不同领域，如家庭、家庭自动化，甚至花园。在接下来的章节中，我们将看更多的项目。让我们开始吧！
- en: Arduino water-level controller
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Arduino水位控制器
- en: 'In this project, we will make an automatic level sensor to control the level
    of water using your Arduino board, as shown in the following diagram:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个项目中，我们将制作一个自动水位传感器，使用您的Arduino板来控制水位，如下图所示：
- en: '![Arduino water-level controller](graphics/B05170_09_09.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![Arduino水位控制器](graphics/B05170_09_09.jpg)'
- en: Bluetooth based home automation
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于蓝牙的家庭自动化
- en: In this section, we will look at a project that can be used in home automation,
    to control the devices in a house, using a Bluetooth module to communicate, and
    a relay module and the integration of the hardware as software tools.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看一个可以用于家庭自动化的项目，使用蓝牙模块进行通信，继电器模块和硬件集成作为软件工具来控制房屋中的设备。
- en: 'The following diagram shows how to connect the relay module and the HC05 Bluetooth
    module to the Arduino board:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了如何将继电器模块和HC05蓝牙模块连接到Arduino板：
- en: '![Bluetooth based home automation](graphics/B05170_09_10.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![基于蓝牙的家庭自动化](graphics/B05170_09_10.jpg)'
- en: Controlling access with a matrix keyboard
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用矩阵键盘控制访问
- en: 'In this section, we will look at how to control the access with a code using
    a matrix keyboard. In the following image, we can see the keyboard that we will
    use:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看如何使用矩阵键盘控制访问代码。在下图中，我们可以看到我们将使用的键盘：
- en: '![Controlling access with a matrix keyboard](graphics/B05170_09_11.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![使用矩阵键盘控制访问](graphics/B05170_09_11.jpg)'
- en: The keypad
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 键盘
- en: 'In the following diagram, we see the hardware connections to the Arduino board.
    They are connected to the digital pins:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们看到了与Arduino板的硬件连接。它们连接到数字引脚：
- en: '![The keypad](graphics/B05170_09_12.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![键盘](graphics/B05170_09_12.jpg)'
- en: Connecting an LCD screen to display the code
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 连接LCD屏幕显示代码
- en: 'In the following diagram, we show the hardware connections of the LCD screen
    to the Arduino board:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们展示了LCD屏幕与Arduino板的硬件连接：
- en: '![Connecting an LCD screen to display the code](graphics/B05170_09_13.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![连接LCD屏幕显示代码](graphics/B05170_09_13.jpg)'
- en: We have looked at some interesting projects that you can develop by adding new
    sensor to control other devices. In the next section, we will look at a very interesting
    project. Get ready for the next step, this is a great goal.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看过一些有趣的项目，您可以通过添加新的传感器来控制其他设备。在下一节中，我们将看一个非常有趣的项目。准备好迈出下一步，这是一个很好的目标。
- en: Controlling the door lock with a keypad
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用键盘控制门锁
- en: 'In the following image, we see a keypad with a lock. This section can be merged
    along with the last project. This device can be controlled from your Raspberry
    Pi Zero or your Arduino board:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们看到了一个带锁的键盘。这一部分可以与上一个项目合并。这个设备可以从您的Raspberry Pi Zero或Arduino板上进行控制：
- en: '![Controlling the door lock with a keypad](graphics/B05170_09_14.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![使用键盘控制门锁](graphics/B05170_09_14.jpg)'
- en: Code to access using the keypad
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用键盘访问的代码
- en: 'You can now either copy the code inside a file called Project_keyboard_Access_Control.ino,
    or just get the complete code from the folder for this project using the Arduino
    IDE:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以将代码复制到名为Project_keyboard_Access_Control.ino的文件中，或者只需使用Arduino IDE从此项目的文件夹中获取完整的代码：
- en: '[PRE0]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This function checks if the code that was typed is correct:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 此功能检查键入的代码是否正确：
- en: '[PRE1]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Integrating the system control with relays and devices
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集成系统控制与继电器和设备
- en: 'In the following figure, we''re integrating important parts of the book. We
    will show the connections in a house using a relay, and how you will apply and
    control the real load using a lamp:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们正在整合书中的重要部分。我们将展示使用继电器在房屋中的连接，以及如何应用和控制真实负载使用灯：
- en: '![Integrating the system control with relays and devices](graphics/B05170_09_15.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![集成系统控制与继电器和设备](graphics/B05170_09_15.jpg)'
- en: Controlling multiple appliances
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 控制多个电器
- en: 'In real life, we will see the devices connected and controlling the real world.
    In the following image, we can see the relay module that can control the loads
    with the electronics part:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实生活中，我们将看到连接并控制真实世界的设备。在下图中，我们可以看到可以控制电子部分负载的继电器模块：
- en: '![Controlling multiple appliances](graphics/B05170_09_16.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![控制多个电器](graphics/B05170_09_16.jpg)'
- en: The following image shows the final circuit. We see the real connections to
    the Arduino board, and how they control the real world.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了最终电路。我们看到了与Arduino板的真实连接，以及它们如何控制真实世界。
- en: '![Controlling multiple appliances](graphics/B05170_09_17.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![控制多个电器](graphics/B05170_09_17.jpg)'
- en: The complete system
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完整系统
- en: 'In the following figure, we see the final circuit for controlling real devices
    in a home automation system. This can be used in all areas of the home, in each
    room we can have a relay module, connected to each module communicating with control
    system:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们看到了控制家庭自动化系统中真实设备的最终电路。这可以在家中的所有区域使用，在每个房间中我们可以有一个继电器模块，与控制系统通信：
- en: '![The complete system](graphics/B05170_09_18.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![完整系统](graphics/B05170_09_18.jpg)'
- en: How to set up the power supplies
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何设置电源供应
- en: 'For our system, it is very important to set up the power supply that will be
    used in the system. First we need to ensure that the voltage for the Arduino is
    about *5V*. In the following diagram, we have shown how to configure the voltage
    to about 5 volts:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的系统，设置系统中将使用的电源非常重要。首先，我们需要确保Arduino的电压约为5V。在下图中，我们展示了如何将电压配置为约5伏特：
- en: '![How to set up the power supplies](graphics/B05170_09_19.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![如何设置电源供应](graphics/B05170_09_19.jpg)'
- en: Power supply for AC loads
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 交流负载的电源供应
- en: 'If we need to connect AC loads to the Arduino or Raspberry Pi Zero and make
    an industrial control system, we need to use a voltage of 24 V of DC, as you can
    see in the following circuit diagram:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们需要将交流负载连接到Arduino或树莓派Zero并建立工业控制系统，我们需要使用24V直流电压，如下电路图所示：
- en: '![Power supply for AC loads](graphics/B05170_09_20.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![交流负载的电源供应](graphics/B05170_09_20.jpg)'
- en: Connecting a relay of 24 DC volts to the Arduino board
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将24V直流继电器连接到Arduino板
- en: 'In the following diagram, we have the circuit to control an AC load using a
    relay of 24 volts of DC:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们有了使用24伏特直流继电器控制交流负载的电路：
- en: '![Connecting a relay of 24 DC volts to the Arduino board](graphics/B05170_09_21.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![将24V直流继电器连接到Arduino板](graphics/B05170_09_21.jpg)'
- en: 'We have the final circuit, which represents the interface to control an AC
    load, connected to the output digital pin to the Raspberry Pi Zero or the Arduino
    board: this is not very common to see, but it''s necessary to learn how to connect
    a relay that can be energized with 24 volts of DC to the Arduino board:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有了最终电路，它代表了连接到Raspberry Pi Zero或Arduino板的数字引脚的接口，用于控制交流负载：这并不常见，但有必要学习如何将能够用24伏特直流通电的继电器连接到Arduino板：
- en: '![Connecting a relay of 24 DC volts to the Arduino board](graphics/B05170_09_22.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![将24V直流继电器连接到Arduino板](graphics/B05170_09_22.jpg)'
- en: Finally we have the final circuit in a board. We used a relay that has a coil,
    which has to energize with 24 volts. The digital output of the Arduino or Raspberry
    Pi can be connected to the relay module.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们在一个板上有了最终电路。我们使用了一个需要用24伏特通电的线圈的继电器。Arduino或树莓派的数字输出可以连接到继电器模块。
- en: Summary
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This is the last chapter of the book, *Internet of Things Programming with JavaScript*.
    In this chapter, you learned how to integrate all the elements that you need to
    take into consideration when you want to apply the tools of hardware and software
    in the projects that we showed you. This is going to help you to continue developing
    your own projects, following the basics and the knowledge shared in this book.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这是书籍《JavaScript物联网编程》的最后一章。在本章中，您将学习如何整合在项目中需要考虑的所有元素，当您想要将硬件和软件工具应用到我们展示的项目中时。这将帮助您继续开发自己的项目，遵循本书中分享的基础知识。
