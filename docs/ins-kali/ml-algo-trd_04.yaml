- en: '4'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '4'
- en: Financial Feature Engineering – How to Research Alpha Factors
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 金融特征工程-如何研究Alpha因子
- en: Algorithmic trading strategies are driven by signals that indicate when to buy
    or sell assets to generate superior returns relative to a benchmark, such as an
    index. The portion of an asset's return that is not explained by exposure to this
    benchmark is called **alpha**, and hence the signals that aim to produce such
    uncorrelated returns are also called **alpha factors**.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 算法交易策略由指示何时买入或卖出资产以产生相对于基准（如指数）的优异回报的信号驱动。资产回报中未被暴露于该基准的部分被称为**alpha**，因此旨在产生这种不相关回报的信号也被称为**alpha因子**。
- en: If you are already familiar with ML, you may know that feature engineering is
    a key ingredient for successful predictions. This is no different in trading.
    Investment, however, is particularly rich in decades of research into how markets
    work, and which features may work better than others to explain or predict price
    movements as a result. This chapter provides an overview as a starting point for
    your own search for alpha factors.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经熟悉ML，您可能知道特征工程是成功预测的关键因素。交易中也不例外。然而，投资领域特别丰富，有数十年的研究成果，研究市场如何运作，以及哪些特征可能比其他特征更好地解释或预测价格波动。本章提供了一个概述，作为您自己寻找Alpha因子的起点。
- en: This chapter also presents key tools that facilitate computing and testing alpha
    factors. We will highlight how the NumPy, pandas, and TA-Lib libraries facilitate
    the manipulation of data and present popular smoothing techniques like the wavelets
    and the Kalman filter, which help reduce noise in data.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章还介绍了便于计算和测试Alpha因子的关键工具。我们将重点介绍NumPy、pandas和TA-Lib库如何便于数据操作，并介绍流行的平滑技术，如小波和卡尔曼滤波器，以帮助减少数据中的噪音。
- en: We will also preview how you can use the trading simulator Zipline to evaluate
    the predictive performance of (traditional) alpha factors. We will discuss key
    alpha factor metrics like the information coefficient and factor turnover. An
    in-depth introduction to backtesting trading strategies that use machine learning
    follows in *Chapter 6*, *The Machine Learning Process*, which covers the ML4T
    workflow that we will use throughout this book to evaluate trading strategies.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将预览如何使用交易模拟器Zipline评估（传统）Alpha因子的预测性能。我们将讨论关键的Alpha因子指标，如信息系数和因子周转率。随后将深入介绍使用机器学习进行回测交易策略的*第6章*，*机器学习流程*，该章涵盖了我们将在本书中使用的ML4T工作流程，用于评估交易策略。
- en: 'In particular, this chapter will address the following topics:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 特别是，本章将讨论以下主题：
- en: Which categories of factors exist, why they work, and how to measure them
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存在哪些因子类别，它们为什么有效，以及如何衡量它们
- en: Creating alpha factors using NumPy, pandas, and TA-Lib
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用NumPy、pandas和TA-Lib创建Alpha因子
- en: How to denoise data using wavelets and the Kalman filter
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用小波和卡尔曼滤波器去噪数据
- en: Using Zipline offline and on Quantopian to test individual and multiple alpha factors
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Zipline离线和在Quantopian上测试单个和多个Alpha因子
- en: How to use Alphalens to evaluate predictive performance and turnover using,
    among other metrics, the **information coefficient** (**IC**)
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用Alphalens评估预测性能和周转率，包括**信息系数**（**IC**）等指标
- en: You can find the code samples for this chapter and links to additional resources
    in the corresponding directory of the GitHub repository. The notebooks include
    color versions of the images. The *Appendix, Alpha Factor Library*, contains additional
    information on financial feature engineering, including more than 100 worked examples
    that you can leverage for your own strategy..
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在GitHub存储库的相应目录中找到本章的代码示例和其他资源的链接。笔记本包括图像的彩色版本。*附录，Alpha Factor Library*中包含有关金融特征工程的其他信息，包括100多个示例，您可以利用这些示例来制定自己的策略。
- en: Alpha factors in practice – from data to signals
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实践中的Alpha因子-从数据到信号
- en: Alpha factors are transformations of raw data that aim to predict asset price
    movements. They are designed to **capture risks that drive asset returns**. A
    factor may combine one or several inputs, but outputs a single value for each
    asset, every time the strategy evaluates the factor to obtain a signal. Trade
    decisions may rely on relative factor values across assets or patterns for a single
    asset.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha因子是对原始数据的转换，旨在预测资产价格的波动。它们旨在**捕捉推动资产回报的风险**。一个因子可以结合一个或多个输入，但每次策略评估因子以获得信号时，都会为每个资产输出一个单一值。交易决策可能依赖于跨资产的相对因子值或单个资产的模式。
- en: 'The design, evaluation, and combination of alpha factors are critical steps
    during the research phase of the algorithmic trading strategy workflow, which
    is displayed in *Figure 4.1*:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha因子的设计、评估和组合是算法交易策略工作流程研究阶段的关键步骤，如*图4.1*所示。
- en: '![](img/B15439_04_01.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_01.png)'
- en: 'Figure 4.1: Alpha factor research and execution workflow'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.1：Alpha因子研究和执行工作流程
- en: This chapter focuses on the research phase; the next chapter covers the execution
    phase. The remainder of this book will then focus on how to leverage ML to learn
    new factors from data and effectively aggregate the signals from multiple alpha
    factors.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 本章重点研究阶段；下一章涵盖执行阶段。本书的其余部分将重点介绍如何利用ML从数据中学习新因子，并有效地整合来自多个Alpha因子的信号。
- en: Alpha factors are transformations of market, fundamental, and alternative data
    that contain predictive signals. Some factors describe fundamental, economy-wide
    variables such as growth, inflation, volatility, productivity, and demographic
    risk. Other factors represent investment styles, such as value or growth, and
    momentum investing that can be traded and are thus priced by the market. There
    are also factors that explain price movements based on the economics or institutional
    setting of financial markets, or investor behavior, including known biases of
    this behavior.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha因子是包含预测信号的市场、基本和替代数据的转换。一些因子描述了基本的、全面的变量，如增长、通货膨胀、波动性、生产率和人口风险。其他因子代表了价值或增长等投资风格，以及动量投资，这些因子可以交易，因此市场对其进行了定价。还有一些因子根据金融市场的经济学或制度设置，或者投资者行为来解释价格波动，包括这种行为的已知偏见。
- en: The economic theory behind factors can be **rational** so that factors have
    high returns over the long run to compensate for their low returns during bad
    times. It can also be **behavioral**, where factor risk premiums result from the
    possibly biased, or not entirely rational, behavior of agents that is not arbitraged
    away.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 因子背后的经济理论可以是**理性的**，因此因子在长期内具有高回报，以弥补其在不景气时期的低回报。它也可以是**行为的**，因子风险溢价是由代理人可能存在的偏见或不完全理性的行为导致的，这种行为不会被套利掉。
- en: There is a constant search for and discovery of new factors that may better
    capture known or reflect new drivers of returns. Jason Hsu, the co-founder of
    Research Affiliates, which manages close to $200 billion, identified some 250
    factors that had been published with empirical evidence in reputable journals
    by 2015\. He estimated that this number was likely to increase by 40 factors per
    year.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 不断寻找和发现可能更好地捕捉已知或反映新回报驱动因素的新因子。Research Affiliates的联合创始人杰森·许（管理着近2000亿美元）在2015年确定了大约250个因子，这些因子已经在知名期刊上发表并获得了实证证据。他估计这个数字可能每年增加40个因子。
- en: To avoid false discoveries and ensure a factor delivers consistent results,
    it should have a meaningful **economic intuition** based on the various established
    factor categories like momentum, value, volatility, or quality and their rationales,
    which we'll outline in the next section. This makes it more plausible that the
    factor reflects risks for which the market would compensate.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 避免虚假发现并确保因子提供一致的结果，它应该基于各种已建立的因子类别（如动量、价值、波动性或质量）及其基本原理具有有意义的**经济直觉**，我们将在下一节中概述。这使得因子更有可能反映市场会补偿的风险。
- en: Alpha factors result from transforming raw market, fundamental, or alternative
    data using simple arithmetic, such as absolute or relative changes of a variable
    over time, ratios between data series, or aggregations over a time window like
    a simple or exponential moving average. They also include metrics that have emerged
    from the technical analysis of price and volume patterns, such as the **relative
    strength index** of demand versus supply and numerous metrics familiar from the
    fundamental analysis of securities. Kakushadze (2016) lists the formulas for 101
    alpha factors, 80 percent of which were used in production at the WorldQuant hedge
    fund at the time of writing.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha因子是通过简单的算术转换（如随时间的绝对或相对变化、数据系列之间的比率或时间窗口内的聚合）从原始市场、基本或替代数据中得出的。它们还包括从价格和成交量模式的技术分析中出现的指标，如需求与供应的**相对强度指数**，以及从证券基本分析中熟悉的许多指标。Kakushadze（2016年）列出了101个Alpha因子的公式，其中80%在撰写时被用于WorldQuant对冲基金的生产。
- en: Historically, trading strategies applied simple ranking heuristics, value thresholds,
    or quantile cutoffs to one or several alpha factors computed across multiple securities
    in the investment universe. Examples include the value investing approach popularized
    in one of Warren Buffet's favorite books, *Security Analysis*, by Graham and Dodd
    (1934), which relies on metrics like the book-to-market ratio.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在历史上，交易策略应用了简单的排名启发式、价值阈值或在投资范围内的多个证券上计算的一个或多个Alpha因子的分位数截断。例如，沃伦·巴菲特最喜欢的书之一《证券分析》中流行的价值投资方法，由格雷厄姆和多德（1934年）提出，依赖于诸如账面价值比之类的指标。
- en: Modern research into alpha factors that predict above-market returns has been
    led by Eugene Fama (who won the 2013 Nobel Prize in Economics) and Kenneth French,
    who provided evidence on the size and value factors (1993). This work led to the
    three- and five-factor models, which we will discuss in *Chapter 7*, *Linear Models
    – From Risk Factors to Return Forecasts*, using daily data on factor returns provided
    by the authors on their website. An excellent, more recent, overview of modern
    factor investing has been written by Andrew Ang (2014), who heads this discipline
    at BlackRock, which manages close to $7 trillion.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 预测超过市场回报的Alpha因子的现代研究由尤金·法玛（2013年诺贝尔经济学奖得主）和肯尼斯·弗伦奇领导，他们提供了有关规模和价值因子的证据（1993年）。这项工作导致了三因子和五因子模型，我们将在*第7章*中讨论，*线性模型-从风险因子到回报预测*，使用作者在其网站上提供的因子回报的日常数据。安德鲁·安格（2014年）撰写了一篇关于现代因子投资的优秀而更为最新的概述，他在管理近7万亿美元的BlackRock公司负责这一学科。
- en: As we will see throughout this book, ML has proven quite effective in learning
    to extract signals directly from a more diverse and much larger set of input data
    without using prescribed formulas. As we will also see, however, alpha factors
    remain useful inputs for an ML model that combines their information content in a more
    optimal way than manually set rules.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们将在本书中看到的那样，机器学习已经被证明在学习如何直接从更多样化和更大规模的输入数据中提取信号方面非常有效，而不使用规定的公式。然而，正如我们将看到的那样，Alpha因子仍然是机器学习模型的有用输入，它以比手动设置规则更为优化的方式结合它们的信息内容。
- en: As a result, algorithmic trading strategies today leverage a large number of
    signals, many of which may be weak individually but can yield reliable predictions
    when combined with other model-driven or traditional factors by an ML algorithm.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，今天的算法交易策略利用了大量信号，其中许多信号在单独使用时可能较弱，但当与ML算法结合使用其他模型驱动或传统因子时，可以产生可靠的预测。
- en: Building on decades of factor research
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于几十年的因子研究
- en: In an idealized world, risk factors should be independent of each other, yield
    positive risk premia, and form a complete set that spans all dimensions of risk
    and explains the systematic risks for assets in a given class. In practice, these
    requirements hold only approximately, and there are important correlations between
    different factors. For instance, momentum is often stronger among smaller firms
    (Hou, Xue, and Zhang, 2015). We will show how to derive synthetic, data-driven
    risk factors using unsupervised learning—in particular, principal and independent
    component analysis —in *Chapter 13*, *Data-Driven Risk Factors and Asset Allocation
    with Unsupervised Learning*.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在理想化的世界中，风险因子应该彼此独立，产生正的风险溢价，并形成一个完整的集合，涵盖了资产在给定类别中的所有风险维度，并解释了系统性风险。实际上，这些要求只是近似成立，不同因子之间存在重要的相关性。例如，动量在较小的公司中通常更强（Hou，Xue和Zhang，2015）。我们将展示如何使用无监督学习推导出合成的数据驱动风险因子，特别是主成分和独立成分分析-在*第13章*，*使用无监督学习的数据驱动风险因子和资产配置*中。
- en: In this section, we will review a few key factor categories prominent in financial
    research and trading applications, explain their economic rationale, and present
    metrics typically used to capture these drivers of returns.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将回顾金融研究和交易应用中突出的一些关键因子类别，解释它们的经济原理，并介绍通常用于捕捉这些回报驱动因素的指标。
- en: In the next section, we will demonstrate how to implement some of these factors
    using NumPy and pandas, use the TA-Lib library for technical analysis, and demonstrate
    how to evaluate factors using the Zipline backtesting library. We will also highlight
    some factors built into Zipline that are available on the Quantopian platform.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将演示如何使用NumPy和pandas实现其中一些因子，使用TA-Lib库进行技术分析，并演示如何使用Zipline回测库评估因子。我们还将介绍一些内置于Zipline中的因子，这些因子可以在Quantopian平台上使用。
- en: Momentum and sentiment – the trend is your friend
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 动量和情绪-趋势是你的朋友
- en: '**Momentum investing** is among the most well-established factor strategies,
    underpinned by quantitative evidence since Jegadeesh and Titman (1993) for the
    US equity market. It follows the adage: *the trend is your friend or let your
    winners run*. Momentum factors are designed to go long on assets that have performed
    well, while going short on assets with poor performance over a certain period.
    Clifford Asness, the founder of the $200 billion hedge fund AQR, presented evidence
    for momentum effects across eight different asset classes and markets much more
    recently (Asness, Moskowitz, and Pedersen, 2013).'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '**动量投资**是最成熟的因子策略之一，自Jegadeesh和Titman（1993年）以来，就有量化证据支持美国股票市场。它遵循这句格言：*趋势是你的朋友，或者让你的赢家继续奔跑*。动量因子旨在做多表现良好的资产，同时做空一定期间内表现不佳的资产。最近，价值2000亿美元的对冲基金AQR的创始人Clifford
    Asness展示了动量效应在八个不同资产类别和市场中的证据（Asness，Moskowitz和Pedersen，2013）。'
- en: The premise of strategies using this factor is that **asset prices exhibit a
    trend**, reflected in positive serial correlation. Such price momentum defies
    the hypothesis of efficient markets, which states that past price returns alone
    cannot predict future performance. Despite theoretical arguments to the contrary,
    price momentum strategies have produced positive returns across asset classes
    and are an important part of many trading strategies.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这个因子的策略的前提是**资产价格呈现出趋势**，反映出正的串行相关性。这种价格动量违背了有效市场假说，该假说认为过去的价格回报本身不能预测未来的表现。尽管有相反的理论论点，价格动量策略在各种资产类别中产生了正的回报，并且是许多交易策略的重要组成部分。
- en: 'The chart in *Figure 4.2* shows the historical performance of portfolios formed
    based on their exposure to various alpha factors (using data from the Fama-French
    website). The factor **winner minus loser** (**WML**) represents the difference
    in performance between portfolios containing US stocks in the top and bottom three deciles,
    respectively, of the prior 2-12 months of returns:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.2中的图表显示了基于它们对各种阿尔法因子的暴露而形成的投资组合的历史表现（使用Fama-French网站的数据）。**赢家减输家**（**WML**）因子代表了包含美国股票的投资组合在过去2-12个月的回报的前三个分位数的差异。
- en: '![](img/B15439_04_02.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_02.png)'
- en: 'Figure 4.2: Returns on various risk factors'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.2：各种风险因子的回报
- en: The momentum factor dramatically outperformed other prominent risk factors up
    to the 2008 crisis. The other factors include the **high-minus-low** (**HML**)
    value factor, the **robust-minus-weak** (**RMW**) profitability factor, and the
    **conservative-minus-aggressive** (**CMA**) investment factor. The equity premium
    is the difference between the market return (for example, the S&P 500) and the
    risk-free rate.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 动量因子在2008年危机之前明显优于其他突出的风险因子。其他因子包括**高减低**（**HML**）价值因子，**强劲减弱**（**RMW**）盈利能力因子，以及**保守减激进**（**CMA**）投资因子。股票溢价是市场回报（例如标普500）与无风险利率之间的差异。
- en: Why might momentum and sentiment drive excess returns?
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为什么动量和情绪可能驱动超额回报？
- en: Reasons for the momentum effect point to investor behavior, persistent supply
    and demand imbalances, a positive feedback loop between risk assets and the economy,
    or the market microstructure.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 动量效应的原因指向投资者行为、持续的供需失衡、风险资产和经济之间的正反馈循环，或市场微观结构。
- en: The **behavioral rationale** reflects the biases of underreaction (Hong, Lim,
    and Stein, 2000) and over-reaction (Barberis, Shleifer, and Vishny, 1998) to market
    news as investors process new information at different speeds. After an initial
    under-reaction to news, investors often extrapolate past behavior and create price
    momentum. The technology stocks rally during the late 90s market bubble was an
    extreme example. A fear and greed psychology also motivates investors to increase
    exposure to winning assets and continue selling losing assets (Jegadeesh and Titman,
    2011).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 行为学原理反映了投资者对市场新闻的低反应偏差（Hong, Lim, and Stein, 2000）和过度反应偏差（Barberis, Shleifer,
    and Vishny, 1998），因为投资者以不同的速度处理新信息。在对新闻的初始低反应之后，投资者经常会推断过去的行为并创造价格动量。90年代末科技股市场泡沫的狂热是一个极端的例子。恐惧和贪婪心理也促使投资者增加对获利资产的敞口，并继续出售亏损资产（Jegadeesh
    and Titman, 2011）。
- en: Momentum can also have **fundamental drivers** such as a positive feedback loop
    between risk assets and the economy. Economic growth boosts equities, and the
    resulting wealth effect feeds back into the economy through higher spending, again
    fueling growth. Positive feedback between prices and the economy often extends
    momentum in equities and credit to longer horizons than for bonds, FOEX, and commodities,
    where negative feedback creates reversals, requiring a much shorter investment
    horizon. Another cause of momentum can be persistent demand-supply imbalances
    due to market frictions. One example is the delay of commodity production in adjusting
    to changing demand. Oil production may lag higher demand from a booming economy
    for years, and persistent supply shortages can trigger and support upward price
    momentum (Novy-Marx, 2015).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 动量也可以有基本驱动因素，比如风险资产和经济之间的正反馈循环。经济增长推动股票，而由此产生的财富效应通过更高的支出反馈到经济中，再次刺激增长。价格和经济之间的正反馈往往会延长股票和信贷的动量时间跨度，而对债券、FOEX和大宗商品来说，负反馈会导致逆转，需要更短的投资时间跨度。动量的另一个原因可能是由于市场摩擦导致的持续的供需失衡。一个例子是商品生产在调整以适应需求变化时的延迟。石油生产可能滞后于经济蓬勃发展带来的更高需求数年，而持续的供应短缺可能触发并支持价格上涨的动量（Novy-Marx,
    2015）。
- en: Over shorter, intraday horizons, **market microstructure** effects can also
    create price momentum as investors implement strategies that mimic their biases.
    For example, the trading wisdom to cut losses and let profits run has investors
    use trading strategies such as stop-loss, **constant proportion portfolio insurance**
    (**CPPI**), dynamical delta hedging, or option-based strategies such as protective
    puts. These strategies create momentum because they imply an advance commitment
    to sell when an asset underperforms and buy when it outperforms.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在较短的日内时间跨度内，**市场微观结构**效应也可以创造价格动量，因为投资者实施模仿其偏见的策略。例如，根据交易智慧，及时止损并让利润奔跑的投资者使用了诸如止损、**恒定比例组合保险**（**CPPI**）、动态对冲、或基于期权的策略，比如保护性买入期权。这些策略会创造动量，因为它们意味着在资产表现不佳时预先承诺出售，在表现良好时购买。
- en: Similarly, risk parity strategies (see the next chapter) tend to buy low-volatility
    assets that often exhibit positive performance and sell high-volatility assets
    that often have had negative performance (see the *Volatility and size anomalies*
    section later in this chapter). The automatic rebalancing of portfolios using
    these strategies tends to reinforce price momentum.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，风险平价策略（见下一章）倾向于购买通常表现良好的低波动资产，并出售通常表现不佳的高波动资产（见本章后面的*波动率和规模异常*部分）。使用这些策略自动重新平衡投资组合往往会加强价格动量。
- en: How to measure momentum and sentiment
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何衡量动量和情绪
- en: Momentum factors are typically derived from changes in price time series by
    identifying trends and patterns. They can be constructed based on absolute or
    relative return by comparing a cross-section of assets or analyzing an asset's
    time series, within or across traditional asset classes, and at different time
    horizons.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 动量因子通常是通过识别趋势和模式来从价格时间序列中衍生出来的。它们可以基于绝对或相对收益构建，通过比较一组资产或分析资产的时间序列，在或跨越传统资产类别，并在不同的时间范围内。
- en: 'A few popular illustrative indicators are listed in the following table (see
    the *Appendix* for formulas):'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 以下表列出了一些流行的说明性指标（有关公式，请参见*附录*）：
- en: '| Factor | Description |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| 因子 | 描述 |'
- en: '| Relative strength index (RSI) | RSI compares the magnitude of recent price
    changes across stocks to identify stocks as overbought or oversold. A high RSI
    (usually above 70) indicates overbought and a low RSI (typically below 30) indicates
    oversold. It first computes the average price change for a given number (often
    14) of prior trading days with rising prices ![](img/B15439_04_001.png) and falling
    prices ![](img/B15439_04_002.png), respectively, to compute ![](img/B15439_04_003.png).
    |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| 相对强度指数（RSI） | RSI比较了股票最近价格变化的幅度，以识别股票的超买或超卖。高RSI（通常超过70）表示超买，低RSI（通常低于30）表示超卖。它首先计算了给定数量（通常为14）的前期交易日的上涨价格和下跌价格的平均价格变化，分别计算![](img/B15439_04_001.png)和![](img/B15439_04_002.png)，以计算![](img/B15439_04_003.png)。'
- en: '| Price momentum | This factor computes the total return for a given number
    of prior trading days. In academic literature, it is common to use the last 12
    months except for the most recent month due to a short-term reversal effect that''s
    frequently observed. However, shorter periods have also been widely used. |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| 价格动量 | 该因子计算了给定数量的前期交易日的总回报。在学术文献中，通常使用过去12个月，除了最近一个月，因为经常观察到短期逆转效应。然而，较短的时间段也被广泛使用。'
- en: '| 12-month price momentum volume adjustment | The indicator normalizes the
    total return over the previous 12 months by dividing it by the standard deviation
    of these returns. |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| 12个月价格动量量调整 | 该指标通过将过去12个月的总回报除以这些回报的标准差来对其进行标准化。 |'
- en: '| Price acceleration | Price acceleration calculates the gradient of the price
    trend (adjusted for volatility) using linear regression on daily prices for a
    longer and a shorter period, for example, 1 year and 3 months of trading days,
    and compares the change in the slope as a measure of price acceleration. |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| 价格加速度 | 价格加速度使用线性回归计算较长和较短期间内（例如，1年和3个月的交易日）价格趋势的梯度（根据波动性调整），并比较斜率的变化作为价格加速度的衡量。
    |'
- en: '| Percent off 52-week high | This factor uses the percent difference between
    the most recent and the highest price for the last 52 weeks. |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| 较52周高点的百分比 | 这个因素使用最近价格与过去52周最高价格之间的百分差异。 |'
- en: 'Additional sentiment indicators include the following metrics; inputs like
    analyst estimates can be obtained from data providers like Quandl or Bloomberg,
    among others:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 其他情绪指标包括以下指标；像分析师预测这样的输入可以从Quandl或彭博等数据提供商获取：
- en: '| Factor | Description |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| 因素 | 描述 |'
- en: '| Earnings estimates count | This metric ranks stocks by the number of consensus
    estimates as a proxy for analyst coverage and information uncertainty. A higher
    value is more desirable. |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| 盈利预期数量 | 这个指标根据共识预测的数量对股票进行排名，作为分析师覆盖和信息不确定性的代理。更高的值更可取。 |'
- en: '| N-month change in recommendation | This factor ranks stocks by the change
    in consensus recommendation over the prior *N* month, where improvements are desirable
    (regardless of whether they have moved from strong sell to sell or buy to strong
    buy and so on). |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| N个月内的推荐变化 | 这个因素根据前*N*个月内共识推荐的变化对股票进行排名，其中改善是可取的（无论是从强热卖到卖出还是从买入到强买等）。 |'
- en: '| 12-month change in shares outstanding | This factor measures the change in
    a company''s split-adjusted share count over the last 12 months, where a negative
    change implies share buybacks and is desirable because it signals that management
    views the stock as cheap relative to its intrinsic and, hence, future value. |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| 流通股数的12个月变化 | 这个因素衡量了公司在过去12个月内经过分割调整的流通股数的变化，负变化意味着股票回购，这是可取的，因为它表明管理层认为股票相对其内在价值和未来价值而言是便宜的。
    |'
- en: '| 6-month change in target price | The metric tracks the 6-month change in
    mean analyst target price. A higher positive change is naturally more desirable.
    |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 目标价格的6个月变化 | 这个指标跟踪分析师目标价格的6个月变化。更高的正变化自然更可取。 |'
- en: '| Net earnings revisions | This factor expresses the difference between upward
    and downward revisions to earnings estimates as a percentage of the total number
    of revisions. |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 净收益修订 | 这个因素表示盈利预期的上调和下调修订之间的差异，作为修订总数的百分比。 |'
- en: '| Short interest to shares outstanding | This measure is the percentage of
    shares outstanding currently being sold short, that is, sold by an investor who
    has borrowed the share and needs to repurchase it at a later day while speculating
    that its price will fall. Hence, a high level of short interest indicates negative
    sentiment and is expected to signal poor performance going forward. |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| 卖空利息占流通股比例 | 这个指标是当前被卖空的流通股的百分比，即由借入股票并需要在以后的某一天回购的投资者卖出，同时猜测其价格会下跌。因此，高水平的卖空利息表明负面情绪，并预计会预示未来的表现不佳。
    |'
- en: There are also numerous data providers that aim to offer sentiment indicators
    constructed from social media, such as Twitter. We will create our own sentiment
    indicators using **natural language processing** in Part 3 of this book.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 还有许多数据提供商旨在提供从社交媒体（如Twitter）构建的情绪指标。我们将在本书的第三部分使用**自然语言处理**创建我们自己的情绪指标。
- en: Value factors – hunting fundamental bargains
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 价值因素 - 寻找基本面的便宜货
- en: Stocks with low prices relative to their fundamental value tend to deliver returns
    in excess of a capitalization-weighted benchmark. Value factors reflect this correlation
    and are designed to send buy signals for undervalued assets that are relatively
    cheap and sell signals for overvalued assets. Hence, at the core of any value
    strategy is a model that estimates the asset's fair or fundamental value. Fair
    value can be defined as an absolute price level, a spread relative to other assets,
    or a range in which an asset should trade.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 相对于其基本价值的低价格的股票往往会提供超过市值加权基准的回报。价值因素反映了这种相关性，并旨在为相对便宜的资产发送买入信号，为相对高估的资产发送卖出信号。因此，在任何价值策略的核心是一个估计资产公允或基本价值的模型。公允价值可以被定义为绝对价格水平，相对于其他资产的价差，或者资产应该交易的范围。
- en: Relative value strategies
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 相对价值策略
- en: Value strategies rely on the mean-reversion of prices to the asset's fair value.
    They assume that prices only temporarily move away from fair value due to behavioral
    effects like overreaction or herding, or liquidity effects such as temporary market
    impact or long-term supply/demand friction. Value factors often exhibit properties
    opposite to those of momentum factors because they rely on mean-reversion. For
    equities, the opposite of value stocks is growth stocks that have a high valuation
    due to growth expectations.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 价值策略依赖于价格回归到资产的公允价值。它们假设价格只是因为行为效应（如过度反应或群体效应）或流动性效应（如临时市场影响或长期供求摩擦）而暂时偏离公允价值。价值因素通常表现出与动量因素相反的特性，因为它们依赖于均值回归。对于股票，价值股的对立面是由于增长预期而具有高估值的成长股。
- en: Value factors enable a broad array of systematic strategies, including fundamental
    and market valuation and cross-asset relative value. They are often collectively
    labeled **statistical arbitrage** (**StatArb**) strategies, implemented as market-neutral
    long/short portfolios without exposure to other traditional or alternative risk
    factors.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 价值因素使得一系列系统化策略成为可能，包括基本面和市场估值以及跨资产相对价值。它们通常被统称为**统计套利**（StatArb）策略，实施为市场中性的多空头寸组合，没有暴露于其他传统或替代风险因素。
- en: Fundamental value strategies
  id: totrans-68
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 基本价值策略
- en: Fundamental value strategies derive fair asset values from economic and fundamental
    indicators that depend on the target asset class. In fixed income, currencies,
    and commodities, indicators include levels and changes in the capital account
    balance, economic activity, inflation, or fund flows. For equities and corporate
    credit, value factors go back to Graham and Dodd's previously mentioned *Security
    Analysis*. Equity value approaches compare a stock price to fundamental metrics
    such as book value, top-line sales, bottom-line earnings, or various cash-flow
    metrics.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 基本价值策略从依赖于目标资产类别的经济和基本指标中得出公平资产价值。在固定收益、货币和大宗商品中，指标包括资本账户余额、经济活动水平和变化、通货膨胀或资金流动。对于股票和公司信用，价值因子可以追溯到Graham和Dodd之前提到的*Security
    Analysis*。股票价值方法将股价与基本指标（如账面价值、销售额、净利润或各种现金流指标）进行比较。
- en: Market value strategies
  id: totrans-70
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 市值策略
- en: Market value strategies use statistical or machine learning models to identify
    mispricing due to inefficiencies in liquidity provision. Statistical and index
    arbitrage are prominent examples that capture the reversion of temporary market
    impacts over short time horizons. (We will cover pairs trading in *Chapter 9*,
    *Time-Series Models for Volatility Forecasts and Statistical Arbitrage*). Over
    longer time horizons, market value trades also leverage seasonal effects in equities
    and commodities.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 市值策略使用统计或机器学习模型来识别由流动性供给不足引起的定价错误。统计和指数套利是捕捉短期时间跨度内临时市场影响回归的著名例子（我们将在*第9章*，*波动率预测和统计套利的时间序列模型*中涵盖配对交易）。在较长的时间跨度内，市值交易还利用股票和大宗商品的季节效应。
- en: Cross-asset relative value strategies
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 跨资产相对价值策略
- en: Cross-asset relative value strategies focus on mispricing across asset classes.
    For example, convertible bond arbitrage involves trades on the relative value
    between the bond that can be turned into equity and the underlying stock of a
    single company. Relative value strategies also include trades between credit and
    equity volatility, using credit signals to trade equities or trades between commodities
    and related equities.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 跨资产相对价值策略侧重于跨资产类别的定价错误。例如，可转债套利涉及对可转换为股票的债券和单一公司的基础股票之间的相对价值进行交易。相对价值策略还包括信用和股票波动率之间的交易，利用信用信号交易股票或商品和相关股票之间的交易。
- en: Why do value factors help predict returns?
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为什么价值因子有助于预测回报？
- en: There are both rational and behavioral explanations for the existence of the
    **value effect**, defined as the excess return on a portfolio of value stocks
    relative to a portfolio of growth stocks, where the former have a low market value
    and the latter have a high market value relative to fundamentals. We will cite
    a few prominent examples from a wealth of research (see, for example, Fama and
    French, 1998, and Asness, Moskowitz, and Pedersen, 2013).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 对于**价值效应**的存在，有理性和行为解释，它被定义为价值股组合相对于成长股组合的超额回报，前者市值低，后者市值高相对于基本面。我们将引用大量研究中的一些著名例子（例如，Fama和French，1998年，以及Asness，Moskowitz和Pedersen，2013年）。
- en: In the **rational**, **efficient markets view**, the value premium compensates
    for higher real or perceived risks. Researchers have presented evidence that value
    firms have less flexibility to adapt to the unfavorable economic environments
    than leaner and more flexible growth companies, or that value stock risks relate
    to high financial leverage and more uncertain future earnings. Value and small-cap
    portfolios have also been shown to be more sensitive to macro shocks than growth
    and large-cap portfolios (Lakonishok, Shleifer, and Vishny, 1994).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在**理性**，**有效市场观**中，价值溢价是对更高的实际或感知风险的补偿。研究人员提出证据表明，价值公司比瘦身和更灵活的成长公司更难适应不利的经济环境，或者价值股风险与高财务杠杆和更不确定的未来收益有关。研究还表明，价值和小盘股组合对宏观冲击的敏感性也比成长和大盘股组合更高（Lakonishok，Shleifer和Vishny，1994年）。
- en: From a **behavioral perspective**, the value premium can be explained by loss
    aversion and mental accounting biases. Investors may be less concerned about losses
    on assets with a strong recent performance due to the cushions offered by prior
    gains. This loss aversion bias induces investors to perceive the stock as less
    risky than before and discount its future cash flows at a lower rate. Conversely,
    poor recent performance may lead investors to raise the asset's discount rate.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 从**行为角度**来看，价值溢价可以通过损失厌恶和心理会计偏见来解释。由于之前的收益提供的保障，投资者可能对具有强劲近期表现的资产的损失不太关心。这种损失厌恶偏见导致投资者认为股票比以前更不那么风险，并以较低的利率贴现其未来现金流。相反，近期表现不佳可能导致投资者提高资产的贴现率。
- en: 'These **differential return expectations** can produce a value premium: growth
    stocks with a high price multiple relative to fundamentals have done well in the
    past, but investors will require a lower average return going forward due to their
    biased perception of lower risks, while the inverse is true for value stocks.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这些**不同的回报预期**可以产生价值溢价：相对于基本面，具有较高价格倍数的成长股在过去表现良好，但由于投资者对较低风险的偏见，他们未来将要求较低的平均回报，而价值股则相反。
- en: How to capture value effects
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何捕捉价值效应
- en: 'A large number of valuation proxies are computed from fundamental data. These
    factors can be combined as inputs into a machine learning valuation model to predict
    asset prices. The following examples apply to equities, and we will see how some
    of these factors are used in the following chapters:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 大量的估值代理从基本数据中计算出来。这些因子可以作为输入结合到机器学习估值模型中，以预测资产价格。以下例子适用于股票，我们将在接下来的章节中看到一些这些因子是如何使用的：
- en: '| Factor | Description |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| 因子 | 描述 |'
- en: '| Cash flow yield | The ratio divides the operational cash flow per share by
    the share price. A higher ratio implies better cash returns for shareholders (if
    paid out using dividends or share buybacks or profitably reinvested in the business).
    |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '| 现金流量收益率 | 该比率将每股经营现金流量除以股价。较高的比率意味着股东获得更好的现金回报（如果使用股息或股票回购支付，或者在业务中获得有利可图的再投资）。
    |'
- en: '| Free cash flow yield | The ratio divides the free cash flow per share, which
    reflects the amount of cash available for distribution after necessary expenses
    and investments, by the share price. Higher and growing free cash flow yield is
    commonly viewed as a signal of outperformance. |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| 自由现金流量收益率 | 该比率将每股自由现金流量除以股价，反映出必要费用和投资后可分配现金的数量。较高且增长的自由现金流量收益率通常被视为**超额表现的信号**。
    |'
- en: '| Cash flow return on invested capital (CFROIC) | CFROIC measures a company''s
    cash flow profitability. It divides operating cash flow by invested capital, defined
    as total debt plus net assets. A higher return means the business has more cash
    for a given amount of invested capital, generating more value for shareholders.
    |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| 投入资本的现金流回报率（CFROIC） | CFROIC衡量公司的现金流盈利能力。它将经营现金流除以投入资本，定义为总债务加上净资产。较高的回报意味着公司在给定的投入资本量下有更多现金，为股东创造更多价值。
    |'
- en: '| Cash flow to total assets | This ratio divides operational cash flow by total
    assets and indicates how much cash a company can generate relative to its assets,
    where a higher ratio is better, as with CFROIC. |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| 现金流量与总资产 | 该比率将经营现金流量除以总资产，表明公司相对于其资产可以产生多少现金，较高的比率更好，就像CFROIC一样。 |'
- en: '| Free cash flow to enterprise value | This ratio measures the free cash flow
    that a company generates relative to its enterprise value, measured as the combined
    value of equity and debt. The debt and equity values can be taken from the balance
    sheet, but market values often provide a more accurate picture assuming the corresponding
    assets are actively traded. |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| 自由现金流量与企业价值 | 该比率衡量公司相对于其企业价值所产生的自由现金流量，企业价值由股权和债务的综合价值构成。债务和股权价值可以从资产负债表中获取，但市场价值通常可以更准确地反映出相应资产的交易活跃度。
    |'
- en: '| EBITDA to enterprise value | This ratio measures a company''s **earnings
    before interest, taxes, depreciation, and amortization** (**EBITDA**), which is
    a proxy for cash flow relative to its enterprise value. |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '| EBITDA与企业价值 | 该比率衡量公司的**利息、税收、折旧和摊销前收益**（**EBITDA**），这是相对于其企业价值的现金流的替代指标。
    |'
- en: '| Earnings yield | This ratio divides the sum of earnings for the past 12 months
    by the last market (close) price. |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| 收益率 | 该比率将过去12个月的收益总和除以最后的市场（收盘）价格。 |'
- en: '| Earnings yield 1-year forward | Instead of using historical earnings, this
    ratio divides the average of earnings forecasted by stock analyst for the next
    12 months by the last price. |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '| 预期收益率1年 | 该比率不是使用历史收益，而是将分析师预测的未来12个月的收益平均值除以最后的价格。 |'
- en: '| PEG ratio | The **price/earnings to growth** (**PEG**) ratio divides a stock''s
    **price-to-earnings** (**P/E**) ratio by the earnings growth rate for a given
    period. The ratio adjusts the price paid for a dollar of earnings (measured by
    the P/E ratio) by the company''s earnings growth. |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| PEG比率 | **价格/收益增长**（**PEG**）比率将股票的**市盈率**（**P/E**）比率除以给定期间的盈利增长率。该比率通过公司的盈利增长调整支付的价格（由P/E比率衡量）。
    |'
- en: '| P/E 1-year forward relative to the sector | Forecasts the P/E ratio relative
    to the corresponding sector P/E. It aims to alleviate the sector bias of the generic
    P/E ratio by accounting for sector differences in valuation. |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| 相对于行业的1年期P/E | 相对于相应行业P/E的P/E比率预测。它旨在通过考虑估值中的行业差异来减轻通用P/E比率的行业偏见。 |'
- en: '| Sales yield | The ratio measures the valuation of a stock relative to its
    ability to generate revenues. All else being equal, stocks with higher historical
    sales to price ratios are expected to outperform. |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| 销售收益率 | 该比率衡量股票相对于其产生收入能力的估值。其他条件相等，具有较高历史销售价格比率的股票预计将表现更好。 |'
- en: '| Sales yield forward | The forward sales-to-price ratio uses analyst sales
    forecast, combined to a (weighted) average. |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| 预期销售收益率 | 预期销售与价格比率使用分析师的销售预测，结合（加权）平均值。 |'
- en: '| Book value yield | The ratio divides the historical book value by the share
    price. |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| 账面价值收益率 | 该比率将历史账面价值除以股价。 |'
- en: '| Dividend yield | The current annualized dividend divided by the last close
    price. Discounted cash flow valuation assumes a company''s market value equates
    to the present value of its future cash flows. |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| 股息收益率 | 当前年化股息除以最后的收盘价。贴现现金流量估值假设公司的市值等于其未来现金流的现值。 |'
- en: '*Chapter 2*, *Market and Fundamental Data – Sources and Techniques*, discussed
    how you can source the fundamental data used to compute these metrics from company
    filings.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '*第2章*，*市场和基本数据-来源和技术*，讨论了如何从公司文件中获取用于计算这些指标的基本数据。'
- en: Volatility and size anomalies
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 波动性和规模异常
- en: The **size effect** is among the older risk factors and relates to the excess
    performance of stocks with a low market capitalization (see *Figure 4.2* at the
    beginning of this section). More recently, the **low-volatility factor** has been
    shown to capture excess returns on stocks with below-average volatility, beta,
    or idiosyncratic risk. Stocks with a larger market capitalization tend to have
    lower volatility so that the traditional size factor is often combined with the
    more recent volatility factor.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '**规模效应**是较早的风险因素之一，与市值较低的股票的超额表现有关（见本节开头的*图4.2*）。最近，**低波动因子**已被证明能够捕捉波动性、贝塔或特异风险低于平均水平的股票的超额回报。市值较大的股票往往波动性较低，因此传统的规模因子通常与较新的波动性因子结合使用。'
- en: The low volatility anomaly is an empirical puzzle that is at odds with the basic
    principles of finance. The **capital asset pricing model** (**CAPM**) and other
    asset pricing models assert that higher risk should earn higher returns (as we
    will discuss in detail in the next chapter), but in numerous markets and over
    extended periods, the opposite has been true, with less risky assets outperforming
    their riskier peers.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 低波动性异常是与金融基本原理相矛盾的经验难题。**资本资产定价模型**（CAPM）和其他资产定价模型断言，更高的风险应该获得更高的回报（我们将在下一章中详细讨论），但在许多市场和较长时期内，情况恰恰相反，风险较小的资产表现优于风险较大的同行。
- en: '*Figure 4.3* plots a rolling mean of the S&P 500 returns of 1990-2019 against
    the VIX index, which measures the implied volatility of at-the-money options on
    the S&P 100\. It illustrates how stock returns and this measure of volatility
    have moved inversely with a negative correlation of -.54 over this period. In
    addition to this aggregate effect, there is also evidence that stocks with a greater
    sensitivity to changes in the VIX perform worse (Ang et al. 2006):'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '*图4.3*绘制了1990-2019年标普500回报的滚动均值与VIX指数的关系，VIX指数衡量了标普100标的期权的隐含波动性。它说明了股票回报和这个波动性指标在这段时间内呈负相关，相关系数为-0.54。除了这种总体效应外，还有证据表明对VIX变化更敏感的股票表现更差（Ang等人，2006）：'
- en: '![](img/B15439_04_03.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_03.png)'
- en: 'Figure 4.3: Correlation between the VIX and the S&P 500'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.3：VIX与标普500之间的相关性
- en: Why do volatility and size predict returns?
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为什么波动性和规模能预测回报？
- en: The low volatility anomaly contradicts the hypothesis of efficient markets and
    the CAPM assumptions. Several behavioral explanations have been advanced to explain
    its existence.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 低波动性异常与有效市场假说和CAPM假设相矛盾。已经提出了几种行为解释来解释其存在。
- en: The **lottery effect** builds on empirical evidence that individuals take on
    bets that resemble lottery tickets with a small expected loss but a large potential
    win, even though this large win may have a fairly low probability. If investors
    perceive that the risk-return profile of a low price, volatile stock is like a
    lottery ticket, then it could be an attractive bet. As a result, investors may
    overpay for high-volatility stocks and underpay for low-volatility stocks due
    to their biased preferences.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '**彩票效应**建立在个人承担类似彩票的赌注的经验证据之上，这些赌注有着较小的预期损失，但有着较大的潜在赢利，尽管这种大赢利的可能性可能相当低。如果投资者认为低价、波动性大的股票的风险-回报特征类似于彩票，那么它可能是一个有吸引力的赌注。因此，投资者可能会为高波动性股票支付过高的价格，而对低波动性股票支付过低的价格，因为他们的偏好有所偏差。'
- en: The **representativeness bias** suggests that investors extrapolate the success
    of a few, well-publicized volatile stocks to all volatile stocks while ignoring
    the speculative nature of such stocks.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '**代表性偏差**表明投资者将少数广为人知的波动性股票的成功推广到所有波动性股票，而忽略了这类股票的投机性质。'
- en: Investors may also be **overconfident** in their ability to forecast the future,
    and their differences in opinions are higher for volatile stocks with more uncertain
    outcomes. Since it is easier to express a positive view by going long—that is,
    owning an asset—than a negative view by going short, optimists may outnumber pessimists
    and keep driving up the price of volatile stocks, resulting in lower returns.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 投资者可能也对自己预测未来的能力过于自信，对于波动性更大、结果更不确定的股票，他们的意见差异更大。由于通过做多（即拥有资产）来表达积极观点比通过做空来表达消极观点更容易，乐观主义者可能比悲观主义者更多，从而推高波动性股票的价格，导致回报率降低。
- en: Furthermore, investors behave differently during bull markets and crises. During
    bull markets, the dispersion of betas is much lower so that low-volatility stocks
    do not underperform much, if at all, whereas during crises, investors seek or
    keep low-volatility stocks and the beta dispersion increases. As a result, lower
    volatility assets and portfolios do better over the long term.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，投资者在牛市和危机期间的行为也不同。在牛市期间，贝塔的离散度要低得多，因此低波动性股票的表现并不差，甚至可能更好，而在危机期间，投资者寻求或持有低波动性股票，贝塔的离散度增加。因此，长期来看，波动性较低的资产和投资组合表现更好。
- en: How to measure volatility and size
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何衡量波动性和规模
- en: Metrics used to identify low-volatility stocks cover a broad spectrum, with
    realized volatility (standard deviation) on one end and forecast (implied) volatility
    and correlations on the other end. Some operationalize low volatility as low beta.
    The evidence in favor of the volatility anomaly appears robust for different metrics
    (Ang, 2014).
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 用于识别低波动股票的指标涵盖了广泛的范围，其中一个端是实现波动性（标准偏差），另一个端是预测（隐含）波动性和相关性。一些将低波动性操作化为低贝塔。对于不同的指标，支持波动性异常的证据似乎是稳健的（Ang,
    2014）。
- en: Quality factors for quantitative investing
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定量投资的质量因素
- en: '**Quality factors** aim to capture the excess returns reaped by companies that
    are highly profitable, operationally efficient, safe, stable, and well-governed—in
    short, high quality. The markets also appear to reward relative earnings certainty
    and penalize stocks with high earnings volatility.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**质量因素**旨在捕捉高盈利、运营高效、安全稳定、治理良好的公司所获得的超额回报，简而言之，高质量。市场似乎也奖励相对收益的确定性，并惩罚盈利波动性大的股票。'
- en: A portfolio tilt toward businesses with high quality has been long advocated
    by stock pickers that rely on fundamental analysis, but it is a relatively new
    phenomenon in quantitative investments. The main challenge is how to define the
    quality factor consistently and objectively using quantitative indicators, given
    the subjective nature of quality.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 股票选择者长期以来一直主张向高质量企业倾斜的投资组合，但这在定量投资中是一个相对较新的现象。主要挑战在于如何使用定量指标一致和客观地定义质量因素，考虑到质量的主观性。
- en: Strategies based on standalone quality factors tend to perform in a counter-cyclical
    way as investors pay a premium to minimize downside risks and drive up valuations.
    For this reason, quality factors are often combined with other risk factors in
    a multi-factor strategy, most frequently with value to produce the quality at
    a reasonable price strategy.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 基于独立质量因素的策略往往以反周期方式表现，因为投资者愿意支付溢价以最小化下行风险并推高估值。因此，质量因素经常与其他风险因素结合在多因素策略中，最常见的是与价值因素结合，以制定合理价格的质量策略。
- en: Long-short quality factors tend to have negative market beta because they are
    long quality stocks that are also low volatility, and short more volatile, low-quality
    stocks. Hence, quality factors are often positively correlated with low volatility
    and momentum factors, and negatively correlated with value and broad market exposure.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 长短质量因素往往具有负市场β，因为它们做多质量股票，这些股票也是低波动性的，做空更具波动性、低质量的股票。因此，质量因素通常与低波动性和动量因素呈正相关，与价值和广泛市场暴露呈负相关。
- en: Why quality matters
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为什么质量很重要
- en: Quality factors may signal outperformance because superior fundamentals such
    as sustained profitability, steady growth in cash flow, prudent leveraging, a
    low need for capital market financing, or low financial risk underpin the demand
    for equity shares and support the price of such companies in the long run. From
    a corporate finance perspective, a quality company often manages its capital carefully
    and reduces the risk of over-leveraging or over-capitalization.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 质量因素可能表明超额表现，因为持续盈利能力、现金流稳定增长、审慎杠杆、低需求资本市场融资或低财务风险支撑了对股票的需求，并从长远来看支撑了这些公司的股价。从公司财务的角度来看，一个优质公司通常会谨慎管理资本，减少过度杠杆或过度资本化的风险。
- en: A behavioral explanation suggests that investors under-react to information
    about quality, similar to the rationale for momentum, where investors chase winners
    and sell losers.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 行为解释表明，投资者对质量信息反应不足，类似于动量的理由，投资者追逐赢家并抛售输家。
- en: Another argument for quality premia is a herding argument, similar to growth
    stocks. Fund managers may find it easier to justify buying a company with strong
    fundamentals, even when it is getting expensive, rather than a more volatile (risky)
    value stock.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 质量溢价的另一个论点是一个类似于成长股的集群论点。基金经理可能会发现更容易去购买一个基本面强劲的公司，即使它变得昂贵，而不是一个更具波动性（风险）的价值股。
- en: How to measure asset quality
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何衡量资产质量
- en: Quality factors rely on metrics computed from the balance sheet and income statement,
    which indicate profitability reflected in high profit or cash flow margins, operating
    efficiency, financial strength, and competitiveness more broadly because it implies
    the ability to sustain a profitability position over time.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 质量因素依赖于从资产负债表和利润表计算出的指标，这些指标表明了高利润或现金流利润率、运营效率、财务实力和更广泛的竞争力，因为这意味着能够长期维持盈利地位。
- en: Hence, quality has been measured using gross profitability (which has been recently
    added to the Fama–French factor model; see *Chapter 7*, *Linear Models – From
    Risk Factors to Return Forecasts*), return on invested capital, low earnings volatility,
    or a combination of various profitability, earnings quality, and leverage metrics,
    with some options listed in the following table.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，质量是使用毛利率（最近已添加到法玛-法国因子模型中；见*第7章*，*线性模型-从风险因素到收益预测*）、投资资本回报率、低盈利波动性或各种盈利能力、盈利质量和杠杆指标的组合来衡量的，以下表格列出了一些选项。
- en: 'Earnings management is mainly exercised by manipulating accruals. Hence, the
    size of accruals is often used as a proxy for earnings quality: higher total accruals
    relative to assets make low earnings quality more likely. However, this is not
    unambiguous as accruals can reflect earnings manipulation just as well as accounting
    estimates of future business growth:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 盈利管理主要是通过操纵应计项目来实施的。因此，应计项目的规模经常被用作盈利质量的代理：相对于资产的较高总应计项目使低盈利质量更有可能。然而，这并不一定，因为应计项目既可以反映盈利操纵，也可以反映未来业务增长的会计估计：
- en: '| Factor | Description |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '|因素|描述|'
- en: '| Asset turnover | This factor measures how efficiently a company uses its
    assets, which require capital, to produce revenue and is calculated by dividing
    sales by total assets. A higher turnover is better. |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '|资产周转率|该因素衡量公司使用资产（需要资本）生产收入的效率，通过将销售额除以总资产来计算。周转率越高越好。|'
- en: '| Asset turnover 12-month change | This factor measures a change in management''s
    efficiency in using assets to produce revenue over the last year. Stocks with
    the highest level of efficiency improvements are typically expected to outperform.
    |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '|资产周转率12个月变化|该因素衡量管理层在过去一年内使用资产生产收入的效率变化。通常预计效率改善最大的股票将表现优异。|'
- en: '| Current ratio | The current ratio is a liquidity metric that measures a company''s
    ability to pay short-term obligations. It compares a company''s current assets
    to its current liabilities, and a higher current ratio is better from a quality
    perspective. |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '|流动比率|流动比率是一种衡量公司偿付短期债务能力的流动性指标。它比较公司的流动资产与流动负债，从质量角度来看，流动比率越高越好。|'
- en: '| Interest coverage | This factor measures how easily a company will be able
    to pay interest on its debt. It is calculated by dividing a company''s **earnings
    before interest and taxes** (**EBIT**) by its interest expense. A higher ratio
    is desirable. |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '|利息保障|该因素衡量公司偿付债务利息的能力。它通过将公司的利息前税利润（EBIT）除以利息支出来计算。更高的比率是可取的。|'
- en: '| Leverage | A firm with significantly more debt than equity is considered
    to be highly leveraged. The debt-to-equity ratio is typically inversely related
    to prospects, with lower leverage being better. |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '|杠杆|相对于股本，负债明显更多的公司被认为是高度杠杆化的。负债权益比通常与前景呈负相关，杠杆越低越好。|'
- en: '| Payout ratio | The share of earnings paid out in dividends to shareholders.
    Stocks with higher payout ratios are ranked higher. |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '|支付比率|支付给股东的股利占盈利的比例。具有更高支付比率的股票排名较高。|'
- en: '| Return on equity (ROE) | ROE is computed as the ratio of net income to shareholders''
    equity. Equities with higher historical returns on equity are ranked higher. |'
  id: totrans-131
  prefs: []
  type: TYPE_TB
  zh: '|净资产收益率（ROE）| ROE被计算为净收入与股东权益的比率。具有更高历史净资产收益率的股票排名较高。|'
- en: Equipped with a high-level categorization of alpha factors that have been shown
    to be associated with abnormal returns to varying degrees, we'll now start developing
    our own financial features from market, fundamental, and alternative data.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 具有高水平分类的alpha因子已经显示与不同程度的异常回报相关联，现在我们将开始从市场、基本和替代数据中开发我们自己的金融特征。
- en: Engineering alpha factors that predict returns
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预测回报的工程alpha因子
- en: Based on a conceptual understanding of key factor categories, their rationale,
    and popular metrics, a key task is to identify new factors that may better capture
    the risks embodied by the return drivers laid out previously, or to find new ones.
    In either case, it will be important to compare the performance of innovative
    factors to that of known factors to identify incremental signal gains.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 基于对关键因素类别、其基本原理和流行指标的概念理解，一个关键任务是识别可能更好地捕捉之前所述的回报驱动因素所体现的风险的新因素，或者找到新的因素。在任何一种情况下，比较创新因素与已知因素的表现以识别增量信号增益将是重要的。
- en: Key tools that facilitate the transformation of data into factors include the
    Python libraries for numerical computing, NumPy and pandas, as well as the Python
    wrapper around the specialized library for technical analysis, TA-Lib. Alternatives
    include the expression alphas developed in Zura Kakushadze's 2016 paper, *101
    Formulaic Alphas*, and implemented by the alphatools library. In addition, the
    Quantopian platform provides a large number of built-in factors to speed up the
    research process.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 促进数据转换的关键工具包括用于数值计算的Python库NumPy和pandas，以及用于技术分析的专门库的Python包装器TA-Lib。另外，Quantopian平台提供了大量内置因素，以加快研究过程。
- en: To apply one or more factors to an investment universe, we can use the Zipline
    backtesting library (which also includes some built-in factors) and evaluate their
    performance using the Alphalens library using metrics discussed in the following
    section.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 要将一个或多个因素应用于投资领域，我们可以使用Zipline回测库（其中还包括一些内置因素）并使用Alphalens库评估它们的表现，使用下一节讨论的指标。
- en: How to engineer factors using pandas and NumPy
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何使用pandas和NumPy工程化因子
- en: NumPy and pandas are the key tools for custom factor computations. This section
    demonstrates how they can be used to quickly compute the transformations that
    yield various alpha factors. If you are not familiar with these libraries, in
    particular pandas, which we will use throughout this book, please see the `README`
    for this chapter in the GitHub repo for links to documentation and tutorials.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: NumPy和pandas是自定义因子计算的关键工具。本节演示了它们如何快速计算出产生各种alpha因子的转换。如果您对这些库不熟悉，特别是我们将在整本书中使用的pandas，请参阅GitHub存储库中本章的`README`，以获取文档和教程的链接。
- en: The notebook `feature_engineering.ipynb` in the `alpha_factors_in_practice`
    directory contains examples of how to create various factors. The notebook uses
    data generated by the `create_data.ipynb` notebook in the `data` folder in the
    root directory of the GitHub repo, which is stored in HDF5 format for faster access.
    See the notebook `storage_benchmarks.ipynb` in the directory for *Chapter 2*,
    in the GitHub repo for a comparison of parquet, HDF5, and CSV storage formats
    for pandas DataFrames.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '`alpha_factors_in_practice`目录中的`feature_engineering.ipynb`笔记本包含了创建各种因素的示例。该笔记本使用了存储在GitHub存储库的根目录中`data`文件夹中的`create_data.ipynb`笔记本生成的数据，该数据以HDF5格式存储以加快访问速度。有关pandas
    DataFrame的parquet、HDF5和CSV存储格式的比较，请参阅GitHub存储库中*第2章*目录中的`storage_benchmarks.ipynb`笔记本。'
- en: The NumPy library for scientific computing was created by Travis Oliphant in
    2005 by integrating the older Numeric and Numarray libraries that had been developed
    since the mid-1990s. It is organized in a high-performance *n*-dimensional array
    data structure called `ndarray`, which enables functionality comparable to MATLAB.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 科学计算的NumPy库是由Travis Oliphant在2005年创建的，它整合了自上世纪90年代中期以来开发的旧的Numeric和Numarray库。它以高性能的*n*维数组数据结构`ndarray`组织，使其功能可与MATLAB相媲美。
- en: The pandas library emerged in 2008 when Wes McKinney was working at AQR Capital
    Management. It provides the DataFrame data structure, which is based on NumPy's
    `ndarray`, but allows for more user-friendly data manipulation with label-based
    indexing. It includes a wide array of computational tools particularly well-suited
    to financial data, including rich time-series operations with automatic date alignment,
    which we will explore here.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 2008年，Wes McKinney在AQR Capital Management工作时，pandas库应运而生。它提供了基于NumPy的`ndarray`的DataFrame数据结构，但允许更加用户友好的基于标签的数据操作。它包括一系列特别适用于金融数据的计算工具，包括具有自动日期对齐的丰富时间序列操作，我们将在这里探讨。
- en: The following sections illustrate some steps in transforming raw stock price
    data into selected factors. See the notebook `feature_engineering.ipynb` for additional
    detail and visualizations that we have omitted here to save some space. See the
    resources listed in the `README` for this chapter on GitHub for links to the documentation
    and tutorials on how to use pandas and NumPy.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分说明了将原始股价数据转换为选定因素的一些步骤。有关更多细节和我们在此处省略以节省空间的可视化，请参阅笔记本`feature_engineering.ipynb`。有关如何使用pandas和NumPy的文档和教程的链接，请参阅GitHub上本章的`README`中列出的资源。
- en: Loading, slicing, and reshaping the data
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 加载、切片和重塑数据
- en: 'After loading the Quandl Wiki stock price data on US equities, we select the
    2000-18 time slice by applying `pd.IndexSlice` to `pd.MultiIndex`, which contains
    timestamp and ticker information. We then select and unpivot the adjusted close
    price column using the `.stack()` method to convert the DataFrame into wide format,
    with tickers in the columns and timestamps in the rows:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在加载Quandl Wiki美国股票价格数据后，我们通过将`pd.IndexSlice`应用于包含时间戳和股票信息的`pd.MultiIndex`来选择2000-18年的时间段。然后我们使用`.stack()`方法选择和取消旋转调整收盘价列，将DataFrame转换为宽格式，其中列中包含股票代码，行中包含时间戳：
- en: '[PRE0]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Resampling – from daily to monthly frequency
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 重采样-从日频到月频
- en: 'To reduce training time and experiment with strategies for longer time horizons,
    we convert the business-daily data into month-end frequency using the available
    adjusted close price:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减少训练时间并尝试更长时间范围的策略，我们使用可用的调整收盘价将业务日数据转换为月末频率：
- en: '[PRE1]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: How to compute returns for multiple historical periods
  id: totrans-149
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何计算多个历史期间的收益
- en: To capture time-series dynamics like momentum patterns, we compute historical
    multi-period returns using the `pct_change(n_periods)` method, where `n_periods`
    identifies the number of lags. We then convert the wide result back into long
    format using `.stack()`, use `.pipe()` to apply the `.clip()` method to the resulting
    DataFrame, and winsorize returns at the [1%, 99%] levels; that is, we cap outliers
    at these percentiles.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 为了捕捉时间序列动态如动量模式，我们使用`pct_change(n_periods)`方法计算历史多期收益，其中`n_periods`标识滞后的数量。然后我们使用`.stack()`将宽格式结果转换回长格式，使用`.pipe()`将`.clip()`方法应用于结果DataFrame，并在[1%，99%]水平上对收益进行winsorize处理；也就是说，我们将异常值限制在这些百分位数上。
- en: 'Finally, we normalize returns using the geometric average. After using `.swaplevel()`
    to change the order of the `MultiIndex` levels, we obtain the compounded monthly
    returns over six different periods, ranging from 1 to 12 months:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们使用几何平均值对收益进行标准化。使用`.swaplevel()`改变`MultiIndex`级别的顺序后，我们得到了六个不同期间的复合月度收益，范围从1到12个月：
- en: '[PRE2]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We can use these results to compute momentum factors based on the difference
    between returns over longer periods and the most recent monthly return, as well
    as for the difference between 3- and 12-month returns, as follows:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以利用这些结果来计算基于较长期收益与最近月度收益之间差异的动量因子，以及3个月和12个月收益之间的差异，具体如下：
- en: '[PRE3]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Using lagged returns and different holding periods
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用滞后收益和不同持有期
- en: 'To use lagged values as input variables or features associated with the current
    observations, we use the `.shift()` method to move historical returns up to the
    current period:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将滞后值作为输入变量或与当前观察相关的特征，我们使用`.shift()`方法将历史收益移动到当前期间：
- en: '[PRE4]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Similarly, to compute returns for various holding periods, we use the normalized
    period returns computed previously and shift them back to align them with the
    current financial features:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，为了计算不同持有期的收益，我们使用之前计算的标准化期间收益，并将它们向后移以与当前的财务特征对齐：
- en: '[PRE5]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The notebook also demonstrates how to compute various descriptive statistics
    for the different return series and visualize their correlation using the seaborn
    library.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 该笔记本还演示了如何计算不同收益系列的各种描述性统计，并使用seaborn库可视化它们的相关性。
- en: Computing factor betas
  id: totrans-161
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 计算因子贝塔
- en: We will introduce the Fama–French data to estimate the exposure of assets to
    common risk factors using linear regression in *Chapter 7*, *Linear Models – From
    Risk Factors to Return Forecasts*. The five Fama–French factors, namely market
    risk, size, value, operating profitability, and investment, have been shown empirically
    to explain asset returns. They are commonly used to assess the exposure of a portfolio
    to well-known drivers of risk and returns, where the unexplained portion is then
    attributed to the manager's idiosyncratic skill. Hence, it is natural to include
    past factor exposures as financial features in models that aim to predict future
    returns.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将介绍Fama-French数据，以估计资产对常见风险因素的暴露，使用线性回归在*第7章*中。Fama-French因子包括市场风险、规模、价值、经营盈利能力和投资，经验上已经证明可以解释资产收益。它们通常用于评估投资组合对风险和收益的知名驱动因素的暴露，未解释的部分则归因于管理者的特有技能。因此，在旨在预测未来收益的模型中，自然地包括过去的因子暴露作为财务特征。
- en: 'We can access the historical factor returns using the pandas-datareader and
    estimate historical exposures using the `PandasRollingOLS` rolling linear regression
    functionality in the pyfinance library, as follows:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用pandas-datareader访问历史因子收益，并使用pyfinance库中的`PandasRollingOLS`滚动线性回归功能估计历史暴露，具体如下：
- en: '[PRE6]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: As mentioned previously, we will explore both the Fama–French factor model and
    linear regression in *Chapter 7*, *Linear Models – From Risk Factors to Return
    Forecasts*, in more detail. See the notebook `feature_engineering.ipynb` for additional
    examples, including the computation of lagged and forward returns.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们将在*第7章*中更详细地探讨Fama-French因子模型和线性回归，从风险因素到收益预测。请参阅笔记本`feature_engineering.ipynb`，其中包括滞后和前瞻收益的计算等其他示例。
- en: How to add momentum factors
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何添加动量因子
- en: 'We can use the 1-month and 3-month results to compute simple momentum factors.
    The following code example shows how to compute the difference between returns
    over longer periods and the most recent monthly return, as well as for the difference
    between 3- and 12-month returns:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用1个月和3个月的结果来计算简单的动量因子。以下代码示例显示了如何计算较长期收益与最近月度收益之间的差异，以及3个月和12个月收益之间的差异：
- en: '[PRE7]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Adding time indicators to capture seasonal effects
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加时间指标以捕捉季节效应
- en: 'Basic factors also include seasonal anomalies like the January effect, which
    has been observed to cause higher returns for stocks during this month, possibly
    for tax reasons. This and other seasonal effects can be modeled through indicator
    variables that represent specific time periods such as the year and/or the month.
    These can be generated as follows:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 基本因素还包括季节性异常，如一月效应，据观察，这可能是由于税收原因导致了该月股票的较高收益。这和其他季节性效应可以通过代表特定时间段的指标变量来建模，比如年份和/或月份。这可以通过以下方式生成：
- en: '[PRE8]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: How to create lagged return features
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何创建滞后收益特征
- en: 'If you want to use lagged returns, that is, returns from previous periods as
    input variables or features to train a model that learns return patterns to predict
    future returns, you can use the `.shift()` method to move historical returns up
    to the current period. The following example moves the returns for the periods
    1 to 6 months ago up by the corresponding lag so that they are associated with
    the observation for the current month:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想使用滞后收益，即以前期的收益作为输入变量或特征来训练模型，以学习预测未来收益的模式，您可以使用`.shift()`方法将历史收益移动到当前期。以下示例将1到6个月前的收益移动到相应的滞后期，以便它们与当前月份的观察相关联：
- en: '[PRE9]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: How to create forward returns
  id: totrans-175
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何创建前向收益
- en: 'Similarly, you can create forward returns for the current period, that is,
    returns that will occur in the future, using `.shift()` with a negative period
    (assuming your data is sorted in ascending order):'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，您可以使用`.shift()`来为当前期创建前向收益，即将会在未来发生的收益（假设您的数据按升序排序）：
- en: '[PRE10]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: We will use forward returns when we train ML models starting in *Chapter 6*,
    *The Machine Learning Process*.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在*第6章* *机器学习过程*中训练ML模型时使用前向收益。
- en: How to use TA-Lib to create technical alpha factors
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何使用TA-Lib创建技术alpha因子
- en: TA-Lib is an open source library written in C++ with a Python interface that
    is widely used by trading software developers. It contains standardized implementations
    of over 200 popular indicators for technical analysis; that is, these indicators
    only use market data, namely price and volume information.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: TA-Lib是一个用C++编写的开源库，具有Python接口，被交易软件开发人员广泛使用。它包含了200多种流行技术分析指标的标准化实现；也就是说，这些指标只使用市场数据，即价格和成交量信息。
- en: TA-Lib is compatible with pandas and NumPy, rendering its usage very straightforward.
    The following examples demonstrate how to compute two popular indicators.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: TA-Lib与pandas和NumPy兼容，因此使用非常简单。以下示例演示了如何计算两个流行的指标。
- en: '**Bollinger Bands** consist of a **simple moving average** (**SMA**) surrounded
    by bands two rolling standard deviations below and above the SMA. It was introduced
    for the visualization of potential overbought/oversold conditions when the price
    dipped outside the two bands on the upper or lower side, respectively. The inventor,
    John Bollinger, actually recommended a trading system of 22 rules that generate
    trade signals.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '**布林带**由**简单移动平均**（**SMA**）包围，两个滚动标准差分别低于和高于SMA。它被引入用于可视化潜在的超买/超卖条件，当价格在上下两个带之外时。发明者约翰·布林格实际上推荐了一个包含22条规则的交易系统，用于生成交易信号。'
- en: We can compute the Bollinger Bands and, for comparison, the **relative strength
    index** described earlier in this section on popular alpha factors as follows.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以计算布林带和前面在本节中描述的相对强度指数，作为流行的alpha因子的比较。
- en: 'We load the adjusted close for a single stock—in this case, AAPL:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 我们加载单只股票的调整收盘价，比如AAPL：
- en: '[PRE11]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Then, we pass the one-dimensional `pd.Series` through the relevant TA-Lib functions:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们通过相关的TA-Lib函数传递一维的`pd.Series`：
- en: '[PRE12]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Then, we collect the results in a DataFrame and plot the Bollinger Bands with
    the AAPL stock price and the RSI with the 30/70 lines, which suggest long/short
    opportunities:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将结果收集到一个DataFrame中，并绘制布林带与AAPL股价以及RSI与30/70线，这表明了做多/做空的机会。
- en: '[PRE13]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The result, shown in *Figure 4.4*, is rather mixed—both indicators suggested
    overbought conditions during the early post-crisis recovery when the price continued
    to rise:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如*图4.4*所示，相当混合——两个指标都建议在早期后危机复苏期间出现超买条件，而价格继续上涨：
- en: '![](img/B15439_04_04.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_04.png)'
- en: 'Figure 4.4: Bollinger Bands and relative strength index'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.4：布林带和相对强度指数
- en: Denoising alpha factors with the Kalman filter
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用卡尔曼滤波器对alpha因子进行去噪
- en: The concept of **noise in data** relates to the domain of signal processing,
    which aims to retrieve the correct information from a signal sent, for example,
    through the air in the form of electromagnetic waves. As the waves move through
    space, environmental interference can be added to the originally pure signal in
    the form of noise, making it necessary to separate the two once received.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 数据中的噪音概念与信号处理领域相关，旨在从发送的信号中检索正确的信息，例如，通过空气以电磁波的形式发送。当波通过空间移动时，环境干扰可以以噪音的形式添加到最初的纯净信号中，这使得在接收后需要将两者分开。
- en: The Kalman filter was introduced in 1960 and has become very popular for many
    applications that require processing noisy data because it permits more accurate
    estimates of the underlying signal.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 卡尔曼滤波器是在1960年引入的，并且因为它允许更准确地估计潜在信号而在许多需要处理嘈杂数据的应用中变得非常流行。
- en: This technique is widely used to track objects in computer vision, to support
    the localization and navigation of aircraft and spaceships, and to control robotic
    motion based on noisy sensor data, besides its use in time series analysis.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术被广泛用于计算机视觉中的对象跟踪，支持飞机和宇宙飞船的定位和导航，以及基于嘈杂传感器数据的机器人运动控制，除了在时间序列分析中的应用。
- en: Noise is used similarly in data science, finance, and other domains, implying
    that the raw data contains useful information, for instance, in terms of trading
    signals, that needs to be extracted and separated from irrelevant, extraneous
    information. Clearly, the fact that we do not know the true signal can make this
    separation rather challenging at times.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 噪声在数据科学、金融和其他领域中类似地使用，这意味着原始数据包含有用的信息，例如交易信号，需要从中提取并与无关的、外部的信息分离。显然，我们不知道真实信号可能会使这种分离有时相当具有挑战性。
- en: We will first review how the Kalman filter works and which assumptions it makes
    to achieve its objectives. Then, we will demonstrate how to apply it to financial
    data using the pykalman library.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先回顾卡尔曼滤波器的工作原理和其假设，以实现其目标。然后，我们将演示如何使用pykalman库将其应用于金融数据。
- en: How does the Kalman filter work?
  id: totrans-199
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 卡尔曼滤波器是如何工作的？
- en: The Kalman filter is a dynamic linear model of sequential data like a time series
    that adapts to new information as it arrives. Rather than using a fixed-size window
    like a moving average or a given set of weights like an exponential moving average,
    it incorporates new data into its estimates of the current value of the time series
    based on a probabilistic model.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 卡尔曼滤波器是一种适应新信息的动态线性模型，类似于时间序列，它会随着新信息的到来进行调整。它不像移动平均或指数移动平均那样使用固定大小的窗口，而是根据概率模型将新数据纳入其对时间序列当前值的估计中。
- en: 'More specifically, the Kalman filter is a probabilistic model of a sequence
    of observations *z*[1], *z*[2], …, *z*[T] and a corresponding sequence of hidden
    states *x*[1], *x*[2], …, *x*[T] (with the notation used by the pykalman library
    that we will demonstrate here). This can be represented by the following graph:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 更具体地说，卡尔曼滤波器是一系列观测*z*[1]，*z*[2]，…，*z*[T]和相应的隐藏状态*x*[1]，*x*[2]，…，*x*[T]的概率模型（使用我们将在这里演示的pykalman库的符号）。这可以用以下图表示：
- en: '![](img/B15439_04_05.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_05.png)'
- en: 'Figure 4.5: Kalman filter as a graphical model'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.5：卡尔曼滤波器作为图形模型
- en: Technically speaking, the Kalman filter takes a Bayesian approach that propagates
    the posterior distribution of the state variables *x* given their measurements
    *z* over time (see *Chapter 10*, *Bayesian ML – Dynamic Sharpe Ratios and Pairs
    Trading*, for more details on Bayesian inference). We can also view it as an unsupervised
    algorithm for tracking a single object in a continuous state space, where we will
    take the object to be, for example, the value of or returns on a security, or
    an alpha factor (see *Chapter 13*, *Data-Driven Risk Factors and Asset Allocation
    with Unsupervised Learning*).
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，卡尔曼滤波器采用贝叶斯方法，随着时间的推移传播状态变量*x*的后验分布，给定它们的测量*z*（有关贝叶斯推断的更多细节，请参见*第10章*，*贝叶斯ML-动态夏普比率和配对交易*）。我们也可以将其视为一种无监督算法，用于跟踪连续状态空间中的单个对象，其中我们将对象视为，例如，安全性的价值或回报，或者α因子（请参见*第13章*，*数据驱动的风险因子和无监督学习的资产配置*）。
- en: 'To recover the hidden states from a sequence of observations that may become
    available in real time, the algorithm iterates between two steps:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 为了从可能实时可用的一系列观测中恢复隐藏状态，算法在两个步骤之间迭代：
- en: '**Prediction step**: Estimate the current state of the process.'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**预测步骤**：估计过程的当前状态。'
- en: '**Measurement step**: Use noisy observations to update its estimate by averaging
    the information from both steps in a way that weighs more certain estimates higher.'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**测量步骤**：使用嘈杂的观测来更新其估计，通过以更加确定的估计为权重，平均两个步骤的信息。'
- en: 'The basic idea behind the algorithm is as follows: certain assumptions about
    a dynamic system and a history of corresponding measurements will allow us to
    estimate the system''s state in a way that maximizes the probability of the previous
    measurements.'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 该算法的基本思想如下：对动态系统和相应测量的某些假设将使我们能够估计系统的状态，以最大化先前测量的概率。
- en: 'To achieve its objective of recovering the hidden state, the Kalman filter
    makes the following assumptions:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现其恢复隐藏状态的目标，卡尔曼滤波器做出以下假设：
- en: The system that we are modeling behaves in a linear fashion.
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们建模的系统以线性方式运行。
- en: The hidden state process is a Markov chain so that the current hidden state
    *x*[t] depends only on the most recent prior hidden state *x*[t-1].
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐藏状态过程是马尔可夫链，因此当前隐藏状态*x*[t]仅取决于最近的先前隐藏状态*x*[t-1]。
- en: Measurements are subject to Gaussian, uncorrelated noise with constant covariance.
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量值受高斯、不相关的噪声影响，具有恒定的协方差。
- en: As a result, the Kalman filter is similar to a hidden Markov model, except that
    the state space of the latent variables is continuous, and both hidden and observed
    variables have normal distributions, denoted as ![](img/B15439_04_004.png) with
    mean ![](img/B15439_04_005.png) and standard
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，卡尔曼滤波器类似于隐马尔可夫模型，只是潜变量的状态空间是连续的，隐藏和观察变量都具有正态分布，表示为![](img/B15439_04_004.png)
    ，均值为![](img/B15439_04_005.png) 和标准
- en: 'In mathematical terms, the key components of the model (and corresponding parameters
    in the pykalman implementation) are:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在数学术语中，模型的关键组件（以及pykalman实现中的相应参数）是：
- en: 'The initial hidden state has a normal distribution: ![](img/B15439_04_007.png)
    with `initial_state_mean`, ![](img/B15439_04_005.png) and `initial_state_covariance`,
    ![](img/B15439_04_009.png).'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 初始隐藏状态具有正态分布：![](img/B15439_04_007.png) ，具有`initial_state_mean`，![](img/B15439_04_005.png)
    和`initial_state_covariance`，![](img/B15439_04_009.png)。
- en: 'The hidden state *x*[t+1] is an affine transformation of *x*[t] with `transition_matrix`
    *A*, `transition_offset` *b*, and added Gaussian noise with `transition_covariance`
    *Q*: ![](img/B15439_04_010.png).'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐藏状态*x*[t+1]是*x*[t]的仿射变换，具有`transition_matrix` *A*，`transition_offset` *b*，并且添加了具有`transition_covariance`
    *Q*的高斯噪声：![](img/B15439_04_010.png)。
- en: 'The observation *z*[t] is an affine transformation of the hidden state *x*[t]
    with `observation_matrix` *C*, `observation_offset` *d*, and added Gaussian noise
    with `observation_covariance` *R*: ![](img/B15439_04_011.png).'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 观测*z*[t]是隐藏状态*x*[t]的仿射变换，具有`observation_matrix` *C*，`observation_offset` *d*，并且添加了具有`observation_covariance`
    *R*的高斯噪声：![](img/B15439_04_011.png)。
- en: Among the advantages of a Kalman filter is that it flexibly adapts to non-stationary
    data with changing distributional characteristics (see *Chapter 9*, *Time-Series
    Models for Volatility Forecasts and Statistical Arbitrage*, for more details on
    stationarity).
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 卡尔曼滤波器的优点之一是它灵活地适应具有不断变化的分布特征的非平稳数据（有关平稳性的更多细节，请参见*第9章*，*波动率预测和统计套利的时间序列模型*）。
- en: Key disadvantages are the assumptions of linearity and Gaussian noise that financial
    data often violate. To address these shortcomings, the Kalman filter has been
    extended to systems with nonlinear dynamics in the form of the extended and the
    unscented Kalman filters. The particle filter is an alternative approach that
    uses sampling-based Monte Carlo approaches to estimate non-normal distributions.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 主要缺点是线性和高斯噪声的假设，而金融数据通常违反这些假设。为了解决这些缺点，卡尔曼滤波器已经扩展到具有非线性动力学的系统，形式为扩展和无迹卡尔曼滤波器。粒子滤波器是一种使用基于抽样的蒙特卡洛方法来估计非正态分布的替代方法。
- en: How to apply a Kalman filter using pykalman
  id: totrans-220
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 如何使用pykalman应用卡尔曼滤波器
- en: The Kalman filter is particularly useful for rolling estimates of data values
    or model parameters that change over time. This is because it adapts its estimates
    at every time step based on new observations and tends to weigh recent observations
    more heavily.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 卡尔曼滤波器特别适用于随时间变化的数据值或模型参数的滚动估计。这是因为它根据新的观察在每个时间步骤上调整其估计，并倾向于更加重视最近的观察。
- en: Except for conventional moving averages, the Kalman filter does not require
    us to specify the length of a window used for the estimate. Rather, we start out
    with our estimate of the mean and covariance of the hidden state and let the Kalman
    filter correct our estimates based on periodic observations. The code examples
    for this section are in the notebook `kalman_filter_and_wavelets.ipynb`.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 除了传统的移动平均值，卡尔曼滤波器不需要我们指定用于估计的窗口长度。相反，我们从隐藏状态的均值和协方差开始，让卡尔曼滤波器根据周期性观察来纠正我们的估计。本节的代码示例在笔记本`kalman_filter_and_wavelets.ipynb`中。
- en: 'The following code example shows how to apply the Kalman filter to smoothen
    the S&P 500 stock price series for the 2008-09 period:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码示例显示了如何将卡尔曼滤波器应用于平滑2008-09年间标普500股价系列：
- en: '[PRE14]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'We initialize the `KalmanFilter` with unit covariance matrices and zero means
    (see the pykalman documentation for advice on dealing with the challenges of choosing
    appropriate initial values):'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用单位协方差矩阵和零均值初始化`KalmanFilter`（有关选择适当初始值的挑战的建议，请参阅pykalman文档）：
- en: '[PRE15]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Then, we run the `filter` method to trigger the forward algorithm, which iteratively
    estimates the hidden state, that is, the mean of the time series:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们运行`filter`方法来触发前向算法，该算法迭代估计隐藏状态，即时间序列的均值：
- en: '[PRE16]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Finally, we add moving averages for comparison and plot the result:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们添加移动平均值进行比较并绘制结果：
- en: '[PRE17]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The resulting plot in *Figure 4.6* shows that the Kalman filter performs similarly
    to a 1-month moving average but is more sensitive to changes in the behavior of
    the time series:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: '*图4.6*中的结果图表显示，卡尔曼滤波器的性能与1个月移动平均值类似，但对时间序列行为的变化更敏感：'
- en: '![](img/B15439_04_06.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_06.png)'
- en: 'Figure 4.6: Kalman filter versus moving average'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.6：卡尔曼滤波器与移动平均值
- en: How to preprocess your noisy signals using wavelets
  id: totrans-234
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何使用小波预处理您的嘈杂信号
- en: Wavelets are related to Fourier analysis, which combines sine and cosine waves
    at different frequencies to approximate noisy signals. While Fourier analysis
    is particularly useful to translate signals from the time to the frequency domain,
    wavelets are useful for filtering out specific patterns that may occur at different
    scales, which, in turn, may correspond to a frequency range.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 小波与傅里叶分析有关，傅里叶分析将不同频率的正弦和余弦波形组合以逼近嘈杂的信号。虽然傅里叶分析特别适用于将信号从时间域转换到频率域，但小波适用于过滤可能出现在不同尺度的特定模式，这可能对应于一定的频率范围。
- en: Wavelets are functions or wave-like patterns that decompose a discrete or continuous-time
    signal into components of different scales. A wavelet transform, in turn, represents
    a function using wavelets as scaled and translated copies of a finite-length waveform.
    This transform has advantages over Fourier transforms for functions with discontinuities
    and sharp peaks, and to approximate non-periodic or non-stationary signals.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 小波是将离散或连续时间信号分解为不同尺度分量的函数或波形模式。小波变换反过来使用小波作为有限长度波形的缩放和平移副本来表示函数。与傅里叶变换相比，这种变换对于具有不连续和尖峰的函数以及近似非周期性或非平稳信号具有优势。
- en: To denoise a signal, you can use wavelet shrinkage and thresholding methods.
    First, you choose a specific wavelet pattern to decompose a dataset. The wavelet
    transform yields coefficients that correspond to details in the dataset.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 为了去噪信号，可以使用小波收缩和阈值方法。首先，选择特定的小波模式来分解数据集。小波变换产生与数据集中细节对应的系数。
- en: The idea of thresholding is simply to omit all coefficients below a particular
    cutoff, assuming that they represent minor details that are not necessary to represent
    the true signal. These remaining coefficients are then used in an inverse wavelet
    transformation to reconstruct the (denoised) dataset.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 阈值的概念很简单，即忽略所有低于特定截止值的系数，假设它们代表不必要表示真实信号的细节。然后，这些剩余系数用于逆小波变换以重构（去噪）数据集。
- en: We'll now use the pywavelets library to apply wavelets to noisy stock data.
    The following code example illustrates how to denoise the S&P 500 returns using
    a forward and inverse wavelet transform with a Daubechies 6 wavelet and different
    threshold values.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用pywavelets库将小波应用于嘈杂的股票数据。以下代码示例说明了如何使用Daubechies 6小波和不同阈值值进行前向和逆小波变换来去噪标普500收益。
- en: 'First, we generate daily S&P 500 returns for the 2008-09 period:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们生成2008-09年间的每日标普500收益：
- en: '[PRE18]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Then, we select one of the Daubechies wavelets from the numerous built-in wavelet
    functions:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们从众多内置小波函数中选择一个Daubechies小波之一：
- en: '[PRE19]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The Daubechies 6 wavelet is defined by a scaling function ![](img/B15439_04_012.png)
    and the wavelet function ![](img/B15439_04_013.png) itself (see the PyWavelet
    documentation for details and the accompanying notebook `kalman_filter_and_wavelets.ipynb`
    for plots of all built-in wavelet functions):'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: Daubechies 6小波由一个缩放函数![](img/B15439_04_012.png)和小波函数![](img/B15439_04_013.png)本身定义（有关详细信息，请参阅PyWavelet文档和附带的笔记本`kalman_filter_and_wavelets.ipynb`以查看所有内置小波函数的图）：
- en: '![](img/B15439_04_07.png)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_07.png)'
- en: 'Figure 4.7: Daubechies wavelets'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.7：Daubechies小波
- en: 'Given a wavelet function, we first decompose the return signal using the `.wavedec`
    function, which yields the coefficients for the wavelet transform. Next, we filter
    out all coefficients above a given threshold and then reconstruct the signal using
    only those coefficients using the inverse transform `.waverec`:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 给定一个小波函数，我们首先使用`.wavedec`函数分解返回信号，该函数产生小波变换的系数。接下来，我们过滤掉所有高于给定阈值的系数，然后使用只有这些系数的逆变换`.waverec`来重构信号：
- en: '[PRE20]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The notebook shows how to apply this denoising technique with different thresholds,
    and the resulting plot, shown in *Figure 4.8*, clearly shows how a higher threshold
    value yields a significantly smoother series:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 该笔记本展示了如何使用不同阈值应用这种去噪技术，以及结果图，显示在*图4.8*中，清楚地显示了更高的阈值值产生了一个明显更平滑的系列：
- en: '![](img/B15439_04_08.png)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_08.png)'
- en: 'Figure 4.8: Wavelet denoising with different thresholds'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.8：不同阈值的小波去噪
- en: From signals to trades – Zipline for backtests
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从信号到交易 - 用于回测的Zipline
- en: The open source library Zipline is an event-driven backtesting system. It generates
    market events to simulate the reactions of an algorithmic trading strategy and
    tracks its performance. A particularly important feature is that it provides the
    algorithm with historical point-in-time data that avoids look-ahead bias.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 开源库Zipline是一个事件驱动的回测系统。它生成市场事件以模拟算法交易策略的反应，并跟踪其表现。一个特别重要的特性是它为算法提供了历史的点对点数据，避免了前瞻性偏差。
- en: The library has been popularized by the crowd-sourced quantitative investment
    fund Quantopian, which uses it in production to facilitate algorithm development
    and live-trading.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 该库已经被众包的量化投资基金Quantopian所推广，Quantopian在生产中使用它来促进算法开发和实时交易。
- en: In this section, we'll provide a brief demonstration of its basic functionality.
    *Chapter 8*, *The ML4T Workflow – From Model to Strategy Backtesting*, contains
    a more detailed introduction to prepare us for more complex use cases.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将简要演示其基本功能。*第8章*，*ML4T工作流程 - 从模型到策略回测*，包含了更详细的介绍，为我们准备更复杂的用例。
- en: How to backtest a single-factor strategy
  id: totrans-256
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何回测单因子策略
- en: You can use Zipline offline in conjunction with data bundles to research and
    evaluate alpha factors. When using it on the Quantopian platform, you will get
    access to a wider set of fundamental and alternative data. We will also demonstrate
    the Quantopian research environment in this chapter, and the backtesting IDE in
    the next chapter. The code for this section is in the `01_factor_research_evaluation`
    sub-directory of the GitHub repo folder for this chapter, including installation
    instructions and an environment tailored to Zipline's dependencies.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在离线环境中使用Zipline与数据包一起研究和评估alpha因子。在Quantopian平台上使用时，您将获得更广泛的基本和替代数据。我们还将在本章中演示Quantopian研究环境，并在下一章中演示回测IDE。本节的代码位于GitHub存储库文件夹的`01_factor_research_evaluation`子目录中，包括安装说明和适用于Zipline依赖项的环境。
- en: For installation, please see the instructions in this chapter's `README` on
    GitHub. After installation and before executing the first algorithm, you need
    to ingest a data bundle that, by default, consists of Quandl's community-maintained
    data on stock prices, dividends, and splits for 3,000 US publicly traded companies.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 有关安装，请参阅GitHub上本章的`README`中的说明。安装后，在执行第一个算法之前，您需要摄取一个数据包，默认情况下，该数据包包括Quandl社区维护的3000家美国上市公司的股价、股息和拆分数据。
- en: 'You need a Quandl API key to run the following code, which stores the data
    in your `home` folder under `~/.zipline/data/<bundle>`:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要一个Quandl API密钥来运行以下代码，该代码将数据存储在您的`home`文件夹下的`~/.zipline/data/<bundle>`中：
- en: '[PRE21]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: A single alpha factor from market data
  id: totrans-261
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 市场数据的单个alpha因子
- en: We are first going to illustrate the Zipline alpha factor research workflow
    in an offline environment. In particular, we will develop and test a simple mean-reversion
    factor that measures how much recent performance has deviated from the historical
    average.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先将在离线环境中说明Zipline alpha因子研究工作流程。特别是，我们将开发和测试一个简单的均值回归因子，该因子衡量了最近表现与历史平均值的偏差程度。
- en: Short-term reversal is a common strategy that takes advantage of the weakly
    predictive pattern that stock prices are likely to revert back to a rolling mean
    over horizons from less than 1 minute to 1 month. See the notebook `single_factor_zipline.ipynb`
    for details.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 短期反转是一种常见的策略，利用了股票价格可能会在不到1分钟到1个月的时间段内回归到滚动均值的弱预测模式。有关详细信息，请参阅笔记本`single_factor_zipline.ipynb`。
- en: To this end, the factor computes the *z*-score for the last monthly return relative
    to the rolling monthly returns over the last year. At this point, we will not
    place any orders to simply illustrate the implementation of a `CustomFactor` and
    record the results during the simulation.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，该因子计算了最后一个月的收益相对于过去一年内滚动月收益的*z*-分数。在这一点上，我们不会下任何订单，只是简单地说明`CustomFactor`的实现并记录模拟过程中的结果。
- en: Zipline includes numerous built-in factors for many common operations (see the
    *Quantopian* documentation linked on GitHub for details). While this is often
    convenient and sufficient, in other cases, we want to transform our available
    data differently. For this purpose, Zipline provides the `CustomFactor` class,
    which offers a lot of flexibility for us to specify a wide range of calculations.
    It does this using the various features available for the cross-section of securities
    and custom lookback periods using NumPy.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: Zipline包括许多常见操作的内置因子（有关详细信息，请参见GitHub上链接的*Quantopian*文档）。虽然这通常很方便且足够，但在其他情况下，我们希望以不同的方式转换可用数据。为此，Zipline提供了`CustomFactor`类，为我们指定各种计算提供了很大的灵活性。它使用NumPy提供的各种特性来进行证券横截面和自定义回溯期的计算。
- en: To this end, after some basic settings, `MeanReversion` subclasses `CustomFactor`
    and defines a `compute()` method. It creates default inputs of monthly returns
    over an also default year-long window so that the `monthly_return` variable will
    have 252 rows and one column for each security in the Quandl dataset on a given
    day.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，在一些基本设置之后，`MeanReversion`子类`CustomFactor`并定义了一个`compute()`方法。它创建了默认的输入，即在默认的一年时间窗口内的月度收益，以便`monthly_return`变量在给定日期的Quandl数据集中有252行和每个证券一个列。
- en: 'The `compute_factors()` method creates a `MeanReversion` factor instance and
    creates long, short, and ranking pipeline columns. The former two contain Boolean
    values that can be used to place orders, and the latter reflects that overall
    ranking to evaluate the overall factor performance. Furthermore, it uses the built-in
    `AverageDollarVolume` factor to limit the computation to more liquid stocks:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '`compute_factors()`方法创建了一个`MeanReversion`因子实例，并创建了长、短和排名管道列。前两个包含布尔值，可用于下订单，而后者反映了用于评估整体因子性能的整体排名。此外，它使用内置的`AverageDollarVolume`因子来限制计算更流动的股票：'
- en: '[PRE22]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The result will allow us to place long and short orders. In the next chapter,
    we will learn how to build a portfolio by choosing a rebalancing period and adjusting
    portfolio holdings as new signals arrive.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 结果将允许我们下长仓和短仓订单。在下一章中，我们将学习如何通过选择再平衡周期和根据新信号调整投资组合持仓来构建投资组合。
- en: 'The `initialize()` method registers the `compute_factors()` pipeline, and the
    `before_trading_start()` method ensures the pipeline runs on a daily basis. The
    `record()` function adds the pipeline''s ranking column, as well as the current
    asset prices, to the performance DataFrame returned by the `run_algorithm()` function:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: '`initialize()`方法注册了`compute_factors()`管道，`before_trading_start()`方法确保管道每天运行。`record()`函数将管道的排名列以及当前资产价格添加到`run_algorithm()`函数返回的性能DataFrame中：'
- en: '[PRE23]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Finally, define the `start` and `end` Timestamp objects in UTC terms, set a
    capital base, and execute `run_algorithm()` with references to the key execution
    methods. The performance DataFrame contains nested data, for example, the prices
    column consists of a `pd.Series` for each cell. Hence, subsequent data access
    is easier when stored in pickle format:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在UTC时间中定义`start`和`end`时间戳对象，设置资本基础，并使用关键执行方法的引用执行`run_algorithm()`。性能DataFrame包含嵌套数据，例如，价格列由每个单元格的`pd.Series`组成。因此，将数据存储在pickle格式中后，后续数据访问更容易：
- en: '[PRE24]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: We will use the factor and pricing data stored in the `performance` DataFrame
    to evaluate the factor performance for various holding periods in the next section,
    but first, we'll take a look at how to create more complex signals by combining
    several alpha factors from a diverse set of data sources on the Quantopian platform.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将使用存储在`performance`DataFrame中的因子和定价数据来评估不同持有期的因子表现，但首先，我们将看看如何通过组合Quantopian平台上多种数据源的几个alpha因子来创建更复杂的信号。
- en: Built-in Quantopian factors
  id: totrans-275
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 内置的Quantopian因子
- en: The accompanying notebook `factor_library_quantopian.ipynb` contains numerous
    example factors that are either provided by the Quantopian platform or computed
    from data sources available using the research API from a Jupyter Notebook.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 附带的笔记本`factor_library_quantopian.ipynb`包含了许多示例因子，这些因子要么由Quantopian平台提供，要么是使用Jupyter
    Notebook的研究API从可用数据源计算得到的。
- en: There are built-in factors that can be used in combination with quantitative
    Python libraries—in particular, NumPy and pandas—to derive more complex factors
    from a broad range of relevant data sources such as US equity prices, Morningstar
    fundamentals, and investor sentiment.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 有内置因子可以与量化Python库（特别是NumPy和pandas）结合使用，从广泛的相关数据源（如美国股票价格、Morningstar基本面和投资者情绪）中导出更复杂的因子。
- en: For instance, the price-to-sales ratio is available as part of the Morningstar
    fundamentals dataset. It can be used as part of a pipeline that will be further
    described as we introduce the Zipline library.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，市销率作为Morningstar基本面数据集的一部分是可用的。它可以作为管道的一部分，随着我们介绍Zipline库时将进一步描述。
- en: Combining factors from diverse data sources
  id: totrans-279
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 组合来自不同数据源的因子
- en: The Quantopian research environment is tailored to the rapid testing of predictive
    alpha factors. The process is very similar because it builds on Zipline but offers
    much richer access to data sources. The following code sample illustrates how
    to compute alpha factors not only from market data, as done previously, but also
    from fundamental and alternative data. See the notebook `multiple_factors_quantopian_research.ipynb`
    for details.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: Quantopian研究环境专为快速测试预测alpha因子而设计。这个过程非常类似，因为它建立在Zipline之上，但提供了更丰富的数据源访问。以下代码示例说明了如何计算alpha因子，不仅来自市场数据，如之前所做的那样，还来自基本面和替代数据。有关详细信息，请参见笔记本`multiple_factors_quantopian_research.ipynb`。
- en: 'Quantopian provides several hundred Morningstar fundamental variables for free
    and also includes Stocktwits signals as an example of an alternative data source.
    There are also custom universe definitions such as `QTradableStocksUS`, which
    applies several filters to limit the backtest universe to stocks that were likely
    tradeable under realistic market conditions:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: Quantopian免费提供了几百个晨星基本变量，并且还包括Stocktwits信号作为替代数据源的示例。还有自定义宇宙定义，例如“QTradableStocksUS”，它应用了几个过滤器，以限制回测宇宙仅包括在现实市场条件下可能可交易的股票：
- en: '[PRE25]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'We will use a custom `AggregateFundamentals` class to use the last reported
    fundamental data point. This aims to address the fact that fundamentals are reported
    quarterly, and Quantopian does not currently provide an easy way to aggregate
    historical data, say, to obtain the sum of the last four quarters, on a rolling
    basis:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用自定义的“AggregateFundamentals”类来使用最后报告的基本数据点。这旨在解决基本面数据是季度报告的事实，Quantopian目前没有提供一种简单的方法来聚合历史数据，比如，以滚动方式获取最近四个季度的总和：
- en: '[PRE26]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'We will again use the custom `MeanReversion` factor from the preceding code.
    We will also compute several other factors for the given universe definition using
    the `rank()` method''s `mask` parameter:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将再次使用前面代码中的自定义“MeanReversion”因子。我们还将使用“rank（）”方法的“mask”参数计算给定宇宙定义的几个其他因子：
- en: '[PRE27]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: This algorithm simply averages how the six individual factors rank each asset
    to combine their information. This is a fairly naive method that does not account
    for the relative importance and incremental information each factor may provide
    when predicting future returns. The ML algorithms of the following chapters will
    allow us to do exactly this, using the same backtesting framework.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 该算法简单地平均了六个个别因子对每个资产的排名，以结合它们的信息。这是一种相当天真的方法，它没有考虑到每个因子在预测未来回报时可能提供的相对重要性和增量信息。以下章节的机器学习算法将允许我们做到这一点，使用相同的回测框架。
- en: Execution also relies on `run_algorithm()`, but the `return` DataFrame on the
    Quantopian platform only contains the factor values created by the `Pipeline`.
    This is convenient because this data format can be used as input for Alphalens,
    the library that's used for the evaluation of the predictive performance of alpha
    factors.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 执行还依赖于“run_algorithm（）”，但Quantopian平台上的“return” DataFrame仅包含由“Pipeline”创建的因子值。这很方便，因为这种数据格式可以用作Alphalens的输入，该库用于评估alpha因子的预测绩效。
- en: '**Using TA-Lib with Zipline**'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: '**使用TA-Lib与Zipline**'
- en: The TA-Lib library includes numerous technical factors. A Python implementation
    is available for local use, for example, with Zipline and Alphalens, and it is
    also available on the Quantopian platform. The notebook also illustrates several
    technical indicators available using TA-Lib.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: TA-Lib库包括众多技术因子。Python实现可供本地使用，例如，与Zipline和Alphalens一起使用，并且也可在Quantopian平台上使用。笔记本还说明了使用TA-Lib可用的几个技术指标。
- en: Separating signal from noise with Alphalens
  id: totrans-291
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用Alphalens分离信号和噪音
- en: Quantopian has open sourced the Python Alphalens library for the performance
    analysis of predictive stock factors. It integrates well with the Zipline backtesting
    library and the portfolio performance and risk analysis library pyfolio, which
    we will explore in the next chapter.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: Quantopian已经开源了Python Alphalens库，用于预测股票因子的绩效分析。它与Zipline回测库以及投资组合绩效和风险分析库pyfolio很好地集成，我们将在下一章中进行探讨。
- en: 'Alphalens facilitates the analysis of the predictive power of alpha factors
    concerning the:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: Alphalens便于分析alpha因子的预测能力，涉及：
- en: Correlation of the signals with subsequent returns
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信号与随后回报的相关性
- en: Profitability of an equal or factor-weighted portfolio based on a (subset of)
    the signals
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于信号的等权或因子加权组合的盈利能力（子集）
- en: Turnover of factors to indicate the potential trading costs
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 因子周转率以指示潜在的交易成本
- en: Factor performance during specific events
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特定事件期间的因子表现
- en: Breakdowns of the preceding by sector
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按行业分解
- en: The analysis can be conducted using tearsheets or individual computations and
    plots. The tearsheets are illustrated in the online repository to save some space.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 分析可以使用tearsheets或个别的计算和图表进行。在线存储库中有示例tearsheets以节省一些空间。
- en: Creating forward returns and factor quantiles
  id: totrans-300
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建前瞻回报和因子分位数
- en: 'To utilize Alphalens, we need to provide two inputs:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 为了利用Alphalens，我们需要提供两个输入：
- en: Signals for a universe of assets, like those returned by the ranks of the `MeanReversion`
    factor
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资产宇宙的信号，就像“MeanReversion”因子的排名所返回的那样
- en: The forward returns that we would earn by investing in an asset for a given
    holding period
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们通过投资于资产一定持有期间可以获得的前瞻回报
- en: See the notebook `06_performance_eval_alphalens.ipynb` for details.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 有关详细信息，请参阅笔记本“06_performance_eval_alphalens.ipynb”。
- en: 'We will recover the prices from the `single_factor.pickle` file as follows
    (and proceed in the same way for `factor_data`; see the notebook):'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从“single_factor.pickle”文件中恢复价格（并对“factor_data”采取相同的方式；请参阅笔记本）：
- en: '[PRE28]'
  id: totrans-306
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'We can generate the Alphalens input data, namely the factor signal and forward
    returns described previously, in the required format from the Zipline output using
    the `get_clean_factor_and_forward_returns` utility function. This function returns
    the signal quintiles and the forward returns for the given holding periods:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用“get_clean_factor_and_forward_returns”实用程序函数从Zipline输出中生成Alphalens输入数据，即先前描述的因子信号和前瞻回报，以所需的格式。该函数返回给定持有期的信号五分位数和前瞻回报：
- en: '[PRE29]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The `alphalens_data` DataFrame contains the returns on an investment in the
    given asset on a given date for the indicated holding period, as well as the factor
    value—that is, the asset''s `MeanReversion` ranking on that date and the corresponding
    quantile value:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: “alphalens_data” DataFrame包含给定日期对给定资产进行投资的回报以及所指定持有期的因子值，即该资产在该日期的“MeanReversion”排名和相应的分位数值：
- en: '| date | asset | 5D | 10D | 21D | 42D | factor | factor_quantile |'
  id: totrans-310
  prefs: []
  type: TYPE_TB
  zh: '| 日期 | 资产 | 5D | 10D | 21D | 42D | 因子 | 因子分位数 |'
- en: '| 1/2/2015 | A | -1.87% | -1.11% | -4.61% | 5.28% | 2618 | 4 |'
  id: totrans-311
  prefs: []
  type: TYPE_TB
  zh: '| 1/2/2015 | A | -1.87% | -1.11% | -4.61% | 5.28% | 2618 | 4 |'
- en: '| AAL | -0.06% | -8.03% | -9.63% | -10.39% | 1088 | 2 |'
  id: totrans-312
  prefs: []
  type: TYPE_TB
  zh: '| AAL | -0.06% | -8.03% | -9.63% | -10.39% | 1088 | 2 |'
- en: '| AAP | -1.32% | 0.23% | -1.63% | -2.39% | 791 | 1 |'
  id: totrans-313
  prefs: []
  type: TYPE_TB
  zh: '| AAP | -1.32% | 0.23% | -1.63% | -2.39% | 791 | 1 |'
- en: '| AAPL | -2.82% | -0.07% | 8.51% | 18.07% | 2917 | 5 |'
  id: totrans-314
  prefs: []
  type: TYPE_TB
  zh: '| AAPL | -2.82% | -0.07% | 8.51% | 18.07% | 2917 | 5 |'
- en: '| ABBV | -1.88% | -0.20% | -7.88% | -8.24% | 2952 | 5 |'
  id: totrans-315
  prefs: []
  type: TYPE_TB
  zh: '| ABBV | -1.88% | -0.20% | -7.88% | -8.24% | 2952 | 5 |'
- en: The forward returns and the signal quantiles are the basis for evaluating the
    predictive power of the signal. Typically, a factor should deliver markedly different
    returns for distinct quantiles, such as negative returns for the bottom quintile
    of the factor values and positive returns for the top quantile.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 前瞻性回报和信号分位数是评估信号预测能力的基础。通常，一个因子应该为不同的分位数提供明显不同的回报，例如因子值的底部分位数为负回报，而顶部分位数为正回报。
- en: Predictive performance by factor quantiles
  id: totrans-317
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 因子分位数的预测表现
- en: 'As a first step, we would like to visualize the average period return by factor
    quantile. We can use the built-in function `mean_return_by_quantile` from the
    performance module and `plot_quantile_returns_bar` from the plotting module:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 作为第一步，我们希望通过因子分位数的平均期间回报进行可视化。我们可以使用性能模块的内置函数`mean_return_by_quantile`和绘图模块的`plot_quantile_returns_bar`：
- en: '[PRE30]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: The result is a bar chart that breaks down the mean of the forward returns for
    the four different holding periods based on the quintile of the factor signal.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个条形图，根据因子信号的分位数，将四个不同持有期的前瞻回报的平均值进行了分解。
- en: 'As you can see in *Figure 4.9*, the bottom quintiles yielded markedly more
    negative results than the top quintiles, except for the longest holding period:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图4.9*所示，除了最长持有期外，底部分位数的结果明显更为负面，而不是顶部分位数：
- en: '![](img/B15439_04_09.png)'
  id: totrans-322
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_09.png)'
- en: 'Figure 4.9: Mean period return by factor quantile'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.9：因子分位数的平均期间回报
- en: The **10D** holding period provides slightly better results for the first and
    fourth quartiles on average across the trading period.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '**10D**持有期对整个交易期内的第一和第四分位数平均结果略有改善。'
- en: 'We would also like to see the performance over time of investments driven by
    each of the signal quintiles. To this end, we calculate daily as opposed to average
    returns for the **5D** holding period. Alphalens adjusts the period returns to
    account for the mismatch between daily signals and a longer holding period (for
    details, see the Alphalens documentation):'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还希望看到由每个信号分位驱动的投资随时间的表现。为此，我们计算**5D**持有期的每日而不是平均回报。Alphalens调整期间回报以解决每日信号和较长持有期之间的不匹配（有关详细信息，请参阅Alphalens文档）：
- en: '[PRE31]'
  id: totrans-326
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'The resulting line plot in *Figure 4.10* shows that, for most of this 3-year
    period, the top two quintiles significantly outperformed the bottom two quintiles.
    However, as suggested by the previous plot, the signals by the fourth quintile
    produced slightly better performance than those by the top quintile due to their
    relative performance during 2017:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: '*图4.10*中的结果线图显示，在这3年的大部分时间里，前两个分位数的表现明显优于后两个分位数。然而，如前面的图所示，第四分位数的信号产生的表现略优于顶分位数的信号，这是由于它们在2017年的相对表现：'
- en: '![](img/B15439_04_10.png)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_10.png)'
- en: 'Figure 4.10: Cumulative return by quantile for a 5-day holding period'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.10：5天持有期的分位累积回报
- en: A factor that is useful for a trading strategy shows the preceding pattern,
    where cumulative returns develop along clearly distinct paths, because this allows
    for a long-short strategy with lower capital requirements and, correspondingly,
    lower exposure to the overall market.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 一个对交易策略有用的因子应该显示出前述模式，其中累积回报沿着明显不同的路径发展，因为这允许使用更低的资本要求和相应地更低的整体市场暴露进行多空策略。
- en: 'However, we also need to take the dispersion of period returns into account,
    rather than just the averages. To this end, we can rely on the built-in `plot_quantile_returns_violin`:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我们还需要考虑期间回报的分散情况，而不仅仅是平均值。为此，我们可以依赖内置的`plot_quantile_returns_violin`：
- en: '[PRE32]'
  id: totrans-332
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This distributional plot, shown in *Figure 4.11*, highlights that the range
    of daily returns is fairly wide. Despite different means, the separation of the
    distributions is very limited so that, on any given day, the differences in performance
    between the different quintiles may be rather limited:'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 这个分布图，显示在*图4.11*中，突出显示了每日回报的范围相当广泛。尽管平均值不同，但分布的分离非常有限，因此在任何给定的一天，不同分位数之间的表现差异可能相当有限：
- en: '![](img/B15439_04_11.png)'
  id: totrans-334
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_11.png)'
- en: 'Figure 4.11: Distribution of the period-wise return by factor quintile'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.11：因子分位数的期间回报分布
- en: 'While we focus on the evaluation of a single alpha factor, we are simplifying
    things by ignoring practical issues related to trade execution that we will relax
    when we address proper backtesting in the next chapter. Some of these include:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们专注于评估单个alpha因子，但我们忽略了与交易执行相关的实际问题，我们将在下一章中处理适当的回测时放宽这些问题。其中一些包括：
- en: The transaction costs of trading
  id: totrans-337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交易成本
- en: Slippage, or the difference between the price at decision and trade execution,
    for example, due to the market impact
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 滑点，或者决策价格和交易执行价格之间的差异，例如由于市场影响
- en: The information coefficient
  id: totrans-339
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 信息系数
- en: Most of this book is about the design of alpha factors using ML models. ML is
    about optimizing some predictive objective, and in this section, we will introduce
    the key metrics used to measure the performance of an alpha factor. We will define
    **alpha** as *the average return in excess of a benchmark*.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的大部分内容都是关于使用ML模型设计alpha因子。ML是关于优化某种预测目标，本节中，我们将介绍用于衡量alpha因子表现的关键指标。我们将**alpha**定义为*超过基准的平均回报*。
- en: This leads to the **information ratio** (**IR**), which measures the average
    excess return per unit of risk taken by dividing alpha by the tracking risk. When
    the benchmark is the risk-free rate, the IR corresponds to the well-known Sharpe
    ratio, and we will highlight crucial statistical measurement issues that arise
    in the typical case when returns are not normally distributed. We will also explain
    the fundamental law of active management, which breaks the IR down into a combination
    of forecasting skill and a strategy's ability to effectively leverage these forecasting
    skills.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '这导致了**信息比率**（**IR**），它衡量了单位风险下的平均超额收益，通过将alpha除以跟踪风险。当基准是无风险利率时，IR对应于众所周知的夏普比率，我们将强调在典型情况下收益不服从正态分布时出现的关键统计测量问题。我们还将解释主动管理的基本法则，它将IR分解为预测技能和策略有效利用这些预测技能的组合。 '
- en: The goal of alpha factors is the accurate directional prediction of future returns.
    Hence, a natural performance measure is the correlation between an alpha factor's
    predictions and the forward returns of the target assets.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: Alpha因子的目标是准确地预测未来收益的方向。因此，一个自然的绩效度量是alpha因子预测与目标资产的未来收益之间的相关性。
- en: It is better to use the non-parametric Spearman rank correlation coefficient,
    which measures how well the relationship between two variables can be described
    using a monotonic function, as opposed to the Pearson correlation, which measures
    the strength of a linear relationship.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 最好使用非参数Spearman秩相关系数，它衡量了两个变量之间的关系如何可以使用单调函数来描述，而不是Pearson相关系数，后者衡量了线性关系的强度。
- en: 'We can obtain the **information coefficient** (**IC**) using Alphalens, which
    relies on `scipy.stats.spearmanr` under the hood (see the repo for an example
    of how to use `scipy` directly to obtain *p*-values). The `factor_information_coefficient`
    function computes the period-wise correlation and `plot_ic_ts` creates a time-series
    plot with a 1-month moving average:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用Alphalens获得**信息系数**（**IC**），它依赖于底层的`scipy.stats.spearmanr`（请参阅示例以直接使用`scipy`获得*p*-values）。`factor_information_coefficient`函数计算周期性相关性，`plot_ic_ts`创建一个带有1个月移动平均线的时间序列图表：
- en: '[PRE33]'
  id: totrans-345
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The time series plot in *Figure 4.12* shows extended periods with significantly
    positive moving average IC. An IC of 0.05 or even 0.1 allows for significant outperformance
    if there are sufficient opportunities to apply this forecasting skill, as the
    fundamental law of active management will illustrate:'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: '*图4.12*中的时间序列图显示了具有显着正移动平均IC的扩展时期。如果有足够的机会应用这种预测技能，0.05甚至0.1的IC将允许显着的超额收益，正如主动管理的基本法则将说明的那样：'
- en: '![](img/B15439_04_12.png)'
  id: totrans-347
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_12.png)'
- en: 'Figure 4.12: Moving average of the IC for 5-day horizon'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.12：5天视野的IC的移动平均线
- en: 'A plot of the annual mean IC highlights how the factor''s performance was historically
    uneven:'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 年均IC的图表突出显示了因子的绩效在历史上是不均匀的：
- en: '[PRE34]'
  id: totrans-350
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'This produces the chart shown in *Figure 4.13*:'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 这产生了*图4.13*中显示的图表：
- en: '![](img/B15439_04_13.png)'
  id: totrans-352
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15439_04_13.png)'
- en: 'Figure 4.13: IC by year'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.13：按年份划分的IC
- en: An information coefficient below 0.05, as in this case, is low but significant
    and can produce positive residual returns relative to a benchmark, as we will
    see in the next section. The command `create_summary_tear_sheet(alphalens_data)`
    creates IC summary statistics.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，低于0.05的信息系数是低的但显著的，并且可以产生相对于基准的正残差收益，我们将在下一节中看到。命令`create_summary_tear_sheet(alphalens_data)`创建IC摘要统计信息。
- en: 'The risk-adjusted IC results from dividing the mean IC by the standard deviation
    of the IC, which is also subjected to a two-sided *t*-test with the null hypothesis
    *IC = 0* using `scipy.stats.ttest_1samp`:'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 风险调整IC的结果是将平均IC除以IC的标准差，这也经过了一个双侧的*t*-test，零假设是*IC = 0*，使用`scipy.stats.ttest_1samp`：
- en: '|  | 5D | 10D | 21D | 42D |'
  id: totrans-356
  prefs: []
  type: TYPE_TB
  zh: '|  | 5D | 10D | 21D | 42D |'
- en: '| IC mean | 0.021 | 0.025 | 0.015 | 0.001 |'
  id: totrans-357
  prefs: []
  type: TYPE_TB
  zh: '| IC mean | 0.021 | 0.025 | 0.015 | 0.001 |'
- en: '| IC std. | 0.144 | 0.13 | 0.12 | 0.12 |'
  id: totrans-358
  prefs: []
  type: TYPE_TB
  zh: '| IC std. | 0.144 | 0.13 | 0.12 | 0.12 |'
- en: '| Risk-adjusted IC | 0.145 | 0.191 | 0.127 | 0.01 |'
  id: totrans-359
  prefs: []
  type: TYPE_TB
  zh: '| 风险调整IC | 0.145 | 0.191 | 0.127 | 0.01 |'
- en: '| t-stat (IC) | 3.861 | 5.107 | 3.396 | 0.266 |'
  id: totrans-360
  prefs: []
  type: TYPE_TB
  zh: '| t-stat (IC) | 3.861 | 5.107 | 3.396 | 0.266 |'
- en: '| p-value (IC) | 0 | 0 | 0.001 | 0.79 |'
  id: totrans-361
  prefs: []
  type: TYPE_TB
  zh: '| p-value (IC) | 0 | 0 | 0.001 | 0.79 |'
- en: '| IC skew | 0.384 | 0.251 | 0.115 | 0.134 |'
  id: totrans-362
  prefs: []
  type: TYPE_TB
  zh: '| IC skew | 0.384 | 0.251 | 0.115 | 0.134 |'
- en: '| IC kurtosis | 0.019 | -0.584 | -0.353 | -0.494 |'
  id: totrans-363
  prefs: []
  type: TYPE_TB
  zh: '| IC kurtosis | 0.019 | -0.584 | -0.353 | -0.494 |'
- en: Factor turnover
  id: totrans-364
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 因子周转
- en: '**Factor turnover** measures how frequently the assets associated with a given
    quantile change, that is, how many trades are required to adjust a portfolio to
    the sequence of signals. More specifically, it measures the share of assets currently
    in a factor quantile that was not in that quantile in the last period. The following
    table is produced by this command:'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: '**因子周转**衡量了与给定分位数相关的资产变化的频率，即调整投资组合以适应信号序列需要多少交易。更具体地说，它衡量了当前处于因子分位数中的资产的份额，而上一期不在该分位数中的资产。以下表格由此命令生成：'
- en: '[PRE35]'
  id: totrans-366
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The share of assets that were to join a quintile-based portfolio is fairly
    high, suggesting that the trading costs pose a challenge to reaping the benefits
    from the predictive performance:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 加入基于五分位数的投资组合的资产份额相当高，这表明交易成本对于获得预测绩效的好处构成了挑战：
- en: '| Mean turnover | 5D | 10D | 21D | 42D |'
  id: totrans-368
  prefs: []
  type: TYPE_TB
  zh: '| Mean turnover | 5D | 10D | 21D | 42D |'
- en: '| Quantile 1 | 0.587 | 0.826 | 0.828 | 0.41 |'
  id: totrans-369
  prefs: []
  type: TYPE_TB
  zh: '| Quantile 1 | 0.587 | 0.826 | 0.828 | 0.41 |'
- en: '| Quantile 2 | 0.737 | 0.801 | 0.81 | 0.644 |'
  id: totrans-370
  prefs: []
  type: TYPE_TB
  zh: '| Quantile 2 | 0.737 | 0.801 | 0.81 | 0.644 |'
- en: '| Quantile 3 | 0.764 | 0.803 | 0.808 | 0.679 |'
  id: totrans-371
  prefs: []
  type: TYPE_TB
  zh: '| Quantile 3 | 0.764 | 0.803 | 0.808 | 0.679 |'
- en: '| Quantile 4 | 0.737 | 0.803 | 0.808 | 0.641 |'
  id: totrans-372
  prefs: []
  type: TYPE_TB
  zh: '| Quantile 4 | 0.737 | 0.803 | 0.808 | 0.641 |'
- en: '| Quantile 5 | 0.565 | 0.802 | 0.809 | 0.393 |'
  id: totrans-373
  prefs: []
  type: TYPE_TB
  zh: '| Quantile 5 | 0.565 | 0.802 | 0.809 | 0.393 |'
- en: 'An alternative view on factor turnover is the correlation of the asset rank
    due to the factor over various holding periods, also part of the tear sheet:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 对因子周转的另一种观点是因子在不同持有期内的资产排名的相关性，这也是撕裂表的一部分：
- en: '|  | 5D | 10D | 21D | 42D |'
  id: totrans-375
  prefs: []
  type: TYPE_TB
  zh: '|  | 5D | 10D | 21D | 42D |'
- en: '| Mean factor rank autocorrelation | 0.713 | 0.454 | -0.011 | -0.016 |'
  id: totrans-376
  prefs: []
  type: TYPE_TB
  zh: '| Mean factor rank autocorrelation | 0.713 | 0.454 | -0.011 | -0.016 |'
- en: Generally, more stability is preferable to keep trading costs manageable.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，更稳定性更可取，以保持交易成本可控。
- en: Alpha factor resources
  id: totrans-378
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Alpha 因子资源
- en: The research process requires designing and selecting alpha factors with respect
    to the predictive power of their signals. An algorithmic trading strategy will
    typically build on multiple alpha factors that send signals for each asset. These
    factors may be aggregated using an ML model to optimize how the various signals
    translate into decisions about the timing and sizing of individual positions,
    as we will see in subsequent chapters.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 研究过程需要设计和选择 alpha 因子，以便根据其信号的预测能力构建算法交易策略。这些因子通常会使用 ML 模型进行聚合，以优化各种信号如何转化为关于个别头寸的时机和规模的决策，我们将在后续章节中看到。
- en: Alternative algorithmic trading libraries
  id: totrans-380
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 替代算法交易库
- en: 'Additional open source Python libraries for algorithmic trading and data collection
    include the following (see GitHub for links):'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 用于算法交易和数据收集的其他开源 Python 库包括以下内容（请参阅 GitHub 获取链接）：
- en: '**QuantConnect** is a competitor to Quantopian.'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**QuantConnect** 是 Quantopian 的竞争对手。'
- en: '**WorldQuant** offers online competition and recruits community contributors
    to a crowd-sourced hedge fund.'
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WorldQuant** 提供在线竞赛，并招募社区贡献者参与众包对冲基金。'
- en: '**Alpha Trading Labs** offers an s high-frequency focused testing infrastructure
    with a business model similar to Quantopian.'
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Alpha Trading Labs** 提供了一个以高频为重点的测试基础设施，其商业模式类似于 Quantopian。'
- en: The **Python Algorithmic Trading Library** (**PyAlgoTrade**) focuses on backtesting
    and offers support for paper trading and live trading. It allows you to evaluate
    an idea for a trading strategy with historical data and aims to do so with minimal effort.
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Python Algorithmic Trading Library**（**PyAlgoTrade**）专注于回测，并支持模拟交易和实盘交易。它允许您使用历史数据评估交易策略的想法，并旨在以最小的努力实现这一目标。'
- en: '**pybacktest** is a vectorized backtesting framework that uses pandas and aims
    to be compact, simple, and fast. (The project is currently on hold.)'
  id: totrans-386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**pybacktest** 是一个使用 pandas 的矢量化回测框架，旨在紧凑、简单和快速。（该项目目前暂停。）'
- en: '**ultrafinance** is an older project that combines real-time financial data
    collection and the analysis and backtesting of trading strategies.'
  id: totrans-387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ultrafinance** 是一个结合实时金融数据收集和交易策略分析和回测的旧项目。'
- en: '**Trading with Python** offers courses and a collection of functions and classes
    for quantitative trading.'
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Trading with Python** 提供量化交易的课程和一系列函数和类。'
- en: '**Interactive Brokers** offers a Python API for live trading on their platform.'
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Interactive Brokers** 提供了一个 Python API，用于在其平台上进行实时交易。'
- en: Summary
  id: totrans-390
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we introduced a range of alpha factors that have been used
    by professional investors to design and evaluate strategies for decades. We laid
    out how they work and illustrated some of the economic mechanisms believed to
    drive their performance. We did this because a solid understanding of how factors
    produce excess returns helps innovate new factors.
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了一系列专业投资者用来设计和评估策略的 alpha 因子。我们阐明了它们的工作原理，并举例说明了一些被认为推动其表现的经济机制。我们这样做是因为对于因子如何产生超额收益的坚实理解有助于创新新的因子。
- en: We also presented several tools that you can use to generate your own factors
    from various data sources and demonstrated how the Kalman filter and wavelets
    allow us to smoothen noisy data in the hope of retrieving a clearer signal.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还介绍了几种工具，您可以使用这些工具从各种数据源生成自己的因子，并演示了卡尔曼滤波器和小波如何帮助我们平滑嘈杂的数据，以期望获得更清晰的信号。
- en: Finally, we provided a glimpse of the Zipline library for the event-driven simulation
    of a trading algorithm, both offline and on the Quantopian online platform. You
    saw how to implement a simple mean reversion factor and how to combine multiple
    factors in a simple way to drive a basic strategy. We also looked at the Alphalens
    library, which permits the evaluation of the predictive performance and trading
    turnover of signals.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们介绍了 Zipline 库，用于事件驱动的交易算法模拟，既可以离线使用，也可以在 Quantopian 在线平台上使用。您看到了如何实现一个简单的均值回归因子，以及如何简单地结合多个因子来驱动基本策略。我们还研究了
    Alphalens 库，该库允许评估信号的预测性能和交易周转。
- en: The portfolio construction process, in turn, takes a broader perspective and
    is aims at the optimal sizing of positions from a risk and return perspective.
    In the next chapter, *Portfolio Optimization and Strategy Evaluation*, we will
    turn to various strategies to balance risk and returns in a portfolio process.
    We will also look in more detail at the challenges of backtesting trading strategies
    on a limited set of historical data, as well as how to address these challenges.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 而投资组合构建过程则从更广泛的角度出发，旨在从风险和回报的角度实现头寸的最佳规模。在下一章《投资组合优化和策略评估》中，我们将转向各种平衡风险和回报的策略，以及更详细地探讨在有限历史数据集上回测交易策略的挑战，以及如何解决这些挑战。
