["```\nuser@docker1:~$ curl -LO \\\nhttps://github.com/coreos/etcd/releases/download/v3.0.12/\\\netcd-v3.0.12-linux-amd64.tar.gz\n```", "```\nuser@docker1:~$ tar xzvf etcd-v3.0.12-linux-amd64.tar.gz\n```", "```\nuser@docker1:~$ cd etcd-v3.0.12-linux-amd64\nuser@docker1:~/etcd-v2.3.7-linux-amd64$ sudo mv etcd /usr/bin/\nuser@docker1:~/etcd-v2.3.7-linux-amd64$ sudo mv etcdctl /usr/bin/\n```", "```\nuser@docker1:~$  sudo vi /lib/systemd/system/etcd.service\n```", "```\n[Unit]\nDescription=etcd key-value store\nDocumentation=https://github.com/coreos/etcd\nAfter=network.target\n\n[Service]\nEnvironment=DAEMON_ARGS=\nEnvironment=ETCD_NAME=%H\nEnvironment=ETCD_ADVERTISE_CLIENT_URLS=http://0.0.0.0:2379\nEnvironment=ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379\nEnvironment=ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2378\nEnvironment=ETCD_DATA_DIR=/var/lib/etcd/default\nType=notify\nExecStart=/usr/bin/etcd $DAEMON_ARGS\nRestart=always\nRestartSec=10s\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\n```", "```\nuser@docker1:~$ sudo systemctl daemon-reload\nuser@docker1:~$ sudo systemctl enable etcd\nuser@docker1:~$ sudo systemctl start etcd\n```", "```\nuser@docker1:~$ systemctl status etcd\n  etcd.service - etcd key-value store\n   Loaded: loaded (/lib/systemd/system/etcd.service; enabled; vendor preset: enabled)\n   Active: active (running) since Tue 2016-10-11 13:41:01 CDT; 1h 30min ago\n     Docs: https://github.com/coreos/etcd\n Main PID: 17486 (etcd)\n    Tasks: 8\n   Memory: 8.5M\n      CPU: 22.095s\n   CGroup: /system.slice/etcd.service\n           \u2514\u250017486 /usr/bin/etcd\n\nOct 11 13:41:01 docker1 etcd[17486]: setting up the initial cluster version to 3.0\nOct 11 13:41:01 docker1 etcd[17486]: published {Name:docker1 **ClientURLs:[http://0.0.0.0:2379]}** to cluster cdf818194e3a8c32\nOct 11 13:41:01 docker1 etcd[17486]: ready to serve client requests\nOct 11 13:41:01 docker1 etcd[17486]: **serving insecure client requests on 0.0.0.0:2379, this is strongly  iscouraged!**\nOct 11 13:41:01 docker1 systemd[1]: Started etcd key-value store.\nOct 11 13:41:01 docker1 etcd[17486]: set the initial cluster version to 3.0\nOct 11 13:41:01 docker1 etcd[17486]: enabled capabilities for version 3.0\nOct 11 15:04:20 docker1 etcd[17486]: start to snapshot (applied: 10001, lastsnap: 0)\nOct 11 15:04:20 docker1 etcd[17486]: saved snapshot at index 10001\nOct 11 15:04:20 docker1 etcd[17486]: compacted raft log at 5001\nuser@docker1:~$\n```", "```\nuser@docker1:~$ etcdctl mk /coreos.com/network/config \\\n'{\"Network\":\"10.100.0.0/16\"}'\n```", "```\nuser@docker4:~$ cd /tmp/\nuser@docker4:/tmp$ curl -LO \\\nhttps://github.com/coreos/flannel/releases/download/v0.6.2/\\\nflannel-v0.6.2-linux-amd64.tar.gz\n```", "```\nuser@docker4:/tmp$ tar xzvf flannel-v0.6.2-linux-amd64.tar.gz\nuser@docker4:/tmp$ sudo mv flanneld /usr/bin/\n```", "```\nuser@docker4:/tmp$ sudo vi /lib/systemd/system/flanneld.service\n```", "```\n[Unit]\nDescription=Flannel Network Fabric\nDocumentation=https://github.com/coreos/flannel\nBefore=docker.service\nAfter=etcd.service\n\n[Service]\nEnvironment='DAEMON_ARGS=--etcd-endpoints=http://10.10.10.101:2379'\nType=notify\nExecStart=/usr/bin/flanneld $DAEMON_ARGS\nRestart=always\nRestartSec=10s\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\n```", "```\nuser@docker4:/tmp$ sudo systemctl daemon-reload\nuser@docker4:/tmp$ sudo systemctl enable flanneld\nuser@docker4:/tmp$ sudo systemctl start flanneld\n```", "```\nuser@docker4:/tmp$ systemctl status flanneld\n  flanneld.service - Flannel Network Fabric\n   Loaded: loaded (/lib/systemd/system/flanneld.service; enabled; vendor preset: enabled)\n   Active: active (running) since Wed 2016-10-12 08:50:54 CDT; 6s ago\n     Docs: https://github.com/coreos/flannel\n Main PID: 25161 (flanneld)\n    Tasks: 6\n   Memory: 3.3M\n      CPU: 12ms\n   CGroup: /system.slice/flanneld.service\n           \u2514\u250025161 /usr/bin/flanneld --etcd-endpoints=http://10.10.10.101:2379\n\nOct 12 08:50:54 docker4 systemd[1]: Starting Flannel Network Fabric...\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.409928 25161 main.go:126] Installing signal handlers\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.410384 25161 manager.go:133] Determining IP address of default interface\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.410793 25161 manager.go:163] Using 192.168.50.102 as external interface\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.411688 25161 manager.go:164] Using 192.168.50.102 as external endpoint\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.423706 25161 local_manager.go:179] **Picking subnet in range 10.100.1.0 ... 10.100.255.0**\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.429636 25161 manager.go:246] **Lease acquired: 10.100.15.0/24**\nOct 12 08:50:54 docker4 flanneld[25161]: I1012 08:50:54.430507 25161 network.go:98] Watching for new subnet leases\nOct 12 08:50:54 docker4 systemd[1]: **Started Flannel Network Fabric.**\nuser@docker4:/tmp$\n```", "```\nuser@docker4:~$ ip addr\n\u2026<loopback interface removed for brevity>\u2026\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n    link/ether d2:fe:5e:b2:f6:43 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.50.102/24 brd 192.168.50.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::d0fe:5eff:feb2:f643/64 scope link\n       valid_lft forever preferred_lft forever\n**3: flannel0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1472 qdisc pfifo_fast state UNKNOWN group default qlen 500**\n **link/none**\n **inet 10.100.15.0/16 scope global flannel0**\n **valid_lft forever preferred_lft forever**\n4: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default\n    link/ether 02:42:16:78:74:cf brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 scope global docker0\n       valid_lft forever preferred_lft forever \nuser@docker4:~$\n```", "```\nuser@docker4:~$ ethtool -i flannel0\n**driver: tun**\nversion: 1.6\nfirmware-version:\nbus-info: tun\nsupports-statistics: no\nsupports-test: no\nsupports-eeprom-access: no\nsupports-register-dump: no\nsupports-priv-flags: no\nuser@docker4:~$\n```", "```\nuser@docker4:~$ ip route\ndefault via 192.168.50.1 dev eth0\n**10.100.0.0/16 dev flannel0  proto kernel  scope link  src 10.100.93.0**\n172.17.0.0/16 dev docker0  proto kernel  scope link  src 172.17.0.1\n192.168.50.0/24 dev eth0  proto kernel  scope link  src 192.168.50.102\nuser@docker4:~$\n```", "```\nuser@docker4:~$ **ping 10.100.93.0 -c 2**\nPING 10.100.93.0 (10.100.93.0) 56(84) bytes of data.\n**64 bytes from 10.100.93.0: icmp_seq=1 ttl=62 time=0.901 ms**\n**64 bytes from 10.100.93.0: icmp_seq=2 ttl=62 time=0.930 ms**\n--- 10.100.93.0 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1001ms\nrtt min/avg/max/mdev = 0.901/0.915/0.930/0.033 ms\nuser@docker4:~$\n```", "```\nI0707 09:07:01.733912 02195 main.go:130] **Determining IP address of default interface**\nI0707 09:07:01.734374 02195 main.go:188] **Using 192.168.50.102 as external interface**\n\n```", "```\nuser@docker4:~$ more /run/flannel/subnet.env\nFLANNEL_NETWORK=10.100.0.0/16\n**FLANNEL_SUBNET=10.100.15.1/24**\n**FLANNEL_MTU=1472**\nFLANNEL_IPMASQ=false\nuser@docker4:~$\n```", "```\nuser@docker4:~$ cd /tmp\nuser@docker4:/tmp$ ls\nflannel-v0.6.2-linux-amd64.tar.gz  **mk-docker-opts.sh**  README.md  \nuser@docker4:~/flannel-0.5.5$ ./**mk-docker-opts.sh -c -d \\**\n**example_docker_config**\nuser@docker4:/tmp$ more example_docker_config\n**DOCKER_OPTS=\" --bip=10.100.15.1/24 --ip-masq=true --mtu=1472\"**\nuser@docker4:/tmp$\n```", "```\n[Service]\nEnvironmentFile=**/etc/default/docker**\nExecStart=\nExecStart=/usr/bin/dockerd **$DOCKER_OPTS**\n\n```", "```\n[Service]\nEnvironmentFile=/run/flannel/subnet.env\nExecStart=\nExecStart=/usr/bin/dockerd --bip=${FLANNEL_SUBNET} --mtu=${FLANNEL_MTU}\n```", "```\nuser@docker4:~$ ip addr show dev docker0\n8: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default\n    link/ether 02:42:24:0a:e3:c8 brd ff:ff:ff:ff:ff:ff\n    inet **10.100.15.1/24** scope global docker0\n       valid_lft forever preferred_lft forever\nuser@docker4:~$ \n```", "```\nuser@docker4:~$ ip route\ndefault via 192.168.50.1 dev eth0 onlink\n**10.100.0.0/16 dev flannel0**  proto kernel  scope link src 10.100.15.0\n**10.100.15.0/24 dev docker0**  proto kernel  scope link src 10.100.15.1 \n192.168.50.0/24 dev eth0  proto kernel  scope link src 192.168.50.102\nuser@docker4:~$\n```", "```\nuser@**docker1**:~$ docker run -dP **--name=web1** jonlangemak/web_server_1\n7e44a55c7ea7704d97a8804bfa211344c66f9fb83b3ac17f697c504b3b193e2d\nuser@**docker1**:~$\nuser@**docker4**:~$ docker run -dP **--name=web2** jonlangemak/web_server_2\n39a47920588b5e0d77ca9d2838988e2d8de893dee6198759f9ddbd3b38cea80d\nuser@**docker4**:~$\n```", "```\nuser@**docker1**:~$ docker exec -it **web1 ip addr show dev eth0**\n12: eth0@if13: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1472 qdisc noqueue state UP\n    link/ether 02:42:0a:64:5d:02 brd ff:ff:ff:ff:ff:ff\n    inet **10.100.93.2/24** scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:aff:fe64:5d02/64 scope link\n       valid_lft forever preferred_lft forever\nuser@**docker1**:~$\n```", "```\nuser@**docker4**:~$ docker exec -it web2 curl http://**10.100.93.2**\n<body>\n  <html>\n    <h1><span style=\"color:#FF0000;font-size:72px;\">**Web Server #1 - Running on port 80**</span>\n    </h1>\n</body>\n  </html>\nuser@**docker4**:~$\n```", "```\netcdctl mk /coreos.com/network/config '{\"Network\":\"10.10.0.0/16\"}'\n```", "```\netcdctl set /coreos.com/network/config '{\"Network\":\"10.100.0.0/16\", \"Backend\": {\"Type\": \"vxlan\"}}'\n```", "```\n{\n    \"Network\": \"10.100.0.0/16\",\n    \"Backend\": {\n        \"Type\": \"vxlan\",\n    }\n}\n```", "```\nuser@docker1:~$ etcdctl set /coreos.com/network/config \\\n'{\"Network\":\"10.100.0.0/16\", \"Backend\": {\"Type\": \"vxlan\",\"VNI\": 1, \"Port\": 8472}}'\n```", "```\n{\n    \"Network\": \"10.100.0.0/16\",\n    \"Backend\": {\n        \"Type\": \"vxlan\",\n        \"VNI\": 1,\n        \"Port\": 8472\n    }\n}\n```", "```\nuser@docker1:~$ etcdctl get /coreos.com/network/config\n{\"Network\":\"10.100.0.0/16\", \"Backend\": {\"Type\": \"vxlan\", \"VNI\": 1, \"Port\": 8472}}\nuser@docker1:~$\n```", "```\nuser@docker4:~$ sudo systemctl restart flanneld\n```", "```\nuser@docker4:~$ ip addr show\n\u2026<Additional output removed for brevity>\u2026 \n11: **flannel.1**: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1450 qdisc noqueue state UNKNOWN group default\n    link/ether 2e:28:e7:34:1a:ff brd ff:ff:ff:ff:ff:ff\n    inet **10.100.15.0/16** scope global flannel.1\n       valid_lft forever preferred_lft forever\n    inet6 fe80::2c28:e7ff:fe34:1aff/64 scope link\n       valid_lft forever preferred_lft forever \n```", "```\nuser@docker4:~$ **ethtool -i flannel.1**\ndriver: **vxlan**\nversion: 0.1\nfirmware-version:\nbus-info:\nsupports-statistics: no\nsupports-test: no\nsupports-eeprom-access: no\nsupports-register-dump: no\nsupports-priv-flags: no\nuser@docker4:~$\n```", "```\nuser@**docker4**:~$ docker exec -it **web2 curl http://10.100.93.2**\n<body>\n  <html>\n    <h1><span style=\"color:#FF0000;font-size:72px;\">**Web Server #1 - Running on port 80**</span>\n    </h1>\n</body>\n  </html>\nuser@**docker4**:~$\n```", "```\n    sudo systemctl stop etcd\n    sudo rm -rf /var/lib/etcd/default \n    sudo systemctl start etcd\n    ```", "```\n    sudo systemctl stop flanneld\n    sudo ip link delete flannel.1\n    sudo systemctl --no-block start flanneld\n    ```", "```\nuser@docker4:~$ journalctl -f -u flanneld\n-- Logs begin at Wed 2016-10-12 12:39:35 CDT. \u2013\nOct 12 12:39:36 docker4 flanneld[873]: I1012 12:39:36.843784 00873 manager.go:163] **Using 10.10.10.104 as external interface**\nOct 12 12:39:36 docker4 flanneld[873]: I1012 12:39:36.844160 00873 manager.go:164] **Using 10.10.10.104 as external endpoint**\nOct 12 12:41:22 docker4 flanneld[873]: E1012 12:41:22.102872 00873 network.go:106] **failed to retrieve network config: 100: Key not found (/coreos.com)** [4]\nOct 12 12:41:23 docker4 flanneld[873]: E1012 12:41:23.104904 00873 network.go:106] **failed to retrieve network config: 100: Key not found (/coreos.com)** [4] \n```", "```\nuser@docker4:~$ ip route\n**default via 10.10.10.1 dev eth0**\n10.10.10.0/24 dev eth0  proto kernel  scope link  src 10.10.10.104\nuser@docker4:~$\n```", "```\n{  \n   \"Network\":\"10.100.0.0/16\",\n   \"Backend\":{  \n      \"Type\":\"host-gw\"\n   }\n}\n```", "```\nuser@docker1:~$ etcdctl set /coreos.com/network/config \\\n'{\"Network\":\"10.100.0.0/16\", \"Backend\": {\"Type\": \"host-gw\"}}'\n```", "```\nuser@docker4:~$ journalctl -r -u flanneld\n-- Logs begin at Wed 2016-10-12 12:39:35 CDT, end at Wed 2016-10-12 12:55:38 CDT. --\nOct 12 12:55:06 docker4 flanneld[873]: I1012 12:55:06.797289 00873 network.go:83] **Subnet added: 10.100.23.0/24 via 10.10.10.103**\nOct 12 12:55:06 docker4 flanneld[873]: I1012 12:55:06.796982 00873 network.go:83] **Subnet added: 10.100.20.0/24 via 10.10.10.101**\nOct 12 12:55:06 docker4 flanneld[873]: I1012 12:55:06.796468 00873 network.go:83] **Subnet added: 10.100.43.0/24 via 10.10.10.102**\nOct 12 12:55:06 docker4 flanneld[873]: I1012 12:55:06.785464 00873 network.go:51] **Watching for new subnet leases**\nOct 12 12:55:06 docker4 flanneld[873]: I1012 12:55:06.784436 00873 manager.go:246] **Lease acquired: 10.100.3.0/24**\nOct 12 12:55:06 docker4 flanneld[873]: I1012 12:55:06.779349 00873 local_manager.go:179] **Picking subnet in range 10.100.1.0 ... 10.100.255.0**\n\n```", "```\nuser@docker4:~$ ip route\ndefault via 10.10.10.1 dev eth0 onlink\n10.10.10.0/24 dev eth0  proto kernel  scope link  src 10.10.10.104\n**10.100.20.0/24 via 10.10.10.101 dev eth0**\n**10.100.23.0/24 via 10.10.10.103 dev eth0**\n**10.100.43.0/24 via 10.10.10.102 dev eth0**\nuser@docker4:~$\n```", "```\n    sudo systemctl stop etcd\n    sudo rm -rf /var/lib/etcd/default \n    sudo systemctl start etcd\n    ```", "```\n    sudo systemctl stop flanneld\n    sudo ip link delete flannel.1\n    sudo systemctl --no-block start flanneld\n    ```", "```\n{  \n   \"Network\":\"10.100.0.0/16\",\n   \"SubnetLen\":25,\n   \"SubnetMin\":\"10.100.0.0\",\n   \"SubnetMax\":\"10.100.1.0\",\n   \"Backend\":{  \n      \"Type\":\"host-gw\"\n   }\n}\n```", "```\nuser@docker1:~$ etcdctl set /coreos.com/network/config \\\n '{\"Network\":\"10.100.0.0/16\",\"SubnetLen\": 25, \"SubnetMin\": \"10.100.0.0\", \"SubnetMax\": \"10.100.1.0\", \"Backend\": {\"Type\": \"host-gw\"}}'\n```", "```\nuser@docker4:~$ journalctl -r -u flanneld\n-- Logs begin at Wed 2016-10-12 12:39:35 CDT, end at Wed 2016-10-12 13:17:42 CDT. --\nOct 12 13:17:42 docker4 flanneld[1422]: E1012 13:17:42.650086 01422 network.go:106] **failed to register network: failed to acquire lease: out of subnets**\nOct 12 13:17:42 docker4 flanneld[1422]: I1012 13:17:42.649604 01422 local_manager.go:179] Picking subnet in range 10.100.0.0 ... 10.100.1.0\n```", "```\nuser@docker4:~$ journalctl -ru flanneld\n-- Logs begin at Wed 2016-10-12 14:24:51 CDT, end at Wed 2016-10-12 14:31:14 CDT. --\nOct 12 14:31:14 docker4 flanneld[1491]: E1012 14:31:14.463106 01491 network.go:116] **Error adding route to 10.100.1.128/25 via 10.10.10.102: network is unreachable**\nOct 12 14:31:14 docker4 flanneld[1491]: I1012 14:31:14.462801 01491 network.go:83] Subnet added: 10.100.1.128/25 via 10.10.10.102\nOct 12 14:31:14 docker4 flanneld[1491]: E1012 14:31:14.462589 01491 network.go:116] **Error adding route to 10.100.0.128/25 via 10.10.10.101: network is unreachable**\nOct 12 14:31:14 docker4 flanneld[1491]: I1012 14:31:14.462008 01491 network.go:83] Subnet added: 10.100.0.128/25 via 10.10.10.101\n```", "```\n[Unit]\nDescription=Flannel Network Fabric\nDocumentation=https://github.com/coreos/flannel\nBefore=docker.service\nAfter=etcd.service\n\n[Service]\nEnvironment= 'DAEMON_ARGS=--etcd-endpoints=http://10.10.10.101:2379 **--iface=eth1'**\nType=notify\nExecStart=/usr/bin/flanneld $DAEMON_ARGS\nRestart=always\nRestartSec=10s\nLimitNOFILE=65536\n\n[Install]\nWantedBy=multi-user.target\n```", "```\nsudo systemctl daemon-reload\nsudo systemctl restart flanneld\n```", "```\nuser@docker1:~$ sudo systemctl stop etcd\nuser@docker1:~$ sudo rm -rf /var/lib/etcd/default\nuser@docker1:~$ sudo systemctl start etcd\nuser@docker1:~$ etcdctl set /coreos.com/network/config \\\n '{\"Network\":\"10.100.0.0/16\",\"SubnetLen\": 25, \"SubnetMin\": \"10.100.0.0\", \"SubnetMax\": \"10.100.1.128\", \"Backend\": {\"Type\": \"host-gw\"}}'\n```", "```\nuser@docker1:~$ ip route\ndefault via 10.10.10.1 dev eth0 onlink\n10.10.10.0/24 dev eth0  proto kernel  scope link src 10.10.10.101\n10.11.12.0/24 dev eth1  proto kernel  scope link src 10.11.12.101\n**10.100.0.0/25 via 10.11.12.102 dev eth1**\n**10.100.1.0/25 via 10.11.12.104 dev eth1**\n**10.100.1.128/25 via 10.11.12.103 dev eth1**\n10.100.0.128/25 dev docker0  proto kernel  scope link src 10.100.75.1 \nuser@docker1:~$\n```"]