["```\n 1  cd k8s-specs\n 2\n 3  git pull\n```", "```\n 1  export NAME=devops25\n 2\n 3  ASG_NAME=$(aws autoscaling \\\n 4      describe-auto-scaling-groups \\\n 5      | jq -r \".AutoScalingGroups[] \\\n 6      | select(.AutoScalingGroupName \\\n 7      | startswith(\\\"eksctl-$NAME-nodegroup\\\")) \\\n 8      .AutoScalingGroupName\")\n 9\n10 echo $ASG_NAME\n```", "```\neksctl-devops25-nodegroup-0-NodeGroup-1KWSL5SEH9L1Y\n```", "```\n 1  aws autoscaling \\\n 2      create-or-update-tags \\\n 3      --tags \\\n 4      ResourceId=$ASG_NAME,ResourceType=auto-scaling-group,Key=k8s.io/\n    clusterautoscaler/enabled,Value=true,PropagateAtLaunch=true \\\n 5      ResourceId=$ASG_NAME,ResourceType=auto-scaling-\n    group,Key=kubernetes.io/cluster/$NAME,Value=true,PropagateAtLaunch=true\n```", "```\n 1  IAM_ROLE=$(aws iam list-roles \\\n 2      | jq -r \".Roles[] \\\n 3      | select(.RoleName \\\n 4      | startswith(\\\"eksctl-$NAME-nodegroup-0-NodeInstanceRole\\\")) \\\n 5      .RoleName\")\n 6  \n 7  echo $IAM_ROLE\n```", "```\neksctl-devops25-nodegroup-0-NodeInstanceRole-UU6CKXYESUES\n```", "```\n 1  cat scaling/eks-autoscaling-policy.json\n```", "```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"autoscaling:DescribeAutoScalingGroups\",\n        \"autoscaling:DescribeAutoScalingInstances\",\n        \"autoscaling:DescribeLaunchConfigurations\",\n        \"autoscaling:DescribeTags\",\n        \"autoscaling:SetDesiredCapacity\",\n        \"autoscaling:TerminateInstanceInAutoScalingGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n```", "```\n 1  aws iam put-role-policy \\\n 2      --role-name $IAM_ROLE \\\n 3      --policy-name $NAME-AutoScaling \\\n 4      --policy-document file://scaling/eks-autoscaling-policy.json\n```", "```\n 1  helm install stable/cluster-autoscaler \\\n 2      --name aws-cluster-autoscaler \\\n 3      --namespace kube-system \\\n 4      --set autoDiscovery.clusterName=$NAME \\\n 5      --set awsRegion=$AWS_DEFAULT_REGION \\\n 6      --set sslCertPath=/etc/kubernetes/pki/ca.crt \\\n 7      --set rbac.create=true\n 8\n9  kubectl -n kube-system \\\n10      rollout status \\\n11      deployment aws-cluster-autoscaler\n```", "```\n 1  kubectl get nodes\n```", "```\nNAME             STATUS ROLES  AGE   VERSION\ngke-devops25-... Ready  <none> 5m27s v1.9.7-gke.6\ngke-devops25-... Ready  <none> 5m28s v1.9.7-gke.6\ngke-devops25-... Ready  <none> 5m24s v1.9.7-gke.6\n```", "```\n 1  cat scaling/go-demo-5-many.yml\n```", "```\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  ...\n  template:\n    ...\n    spec:\n      containers:\n      - name: api\n        ...\n        resources:\n          limits:\n            memory: 1Gi\n            cpu: 0.1\n          requests:\n            memory: 500Mi\n            cpu: 0.01\n...\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api\n  namespace: go-demo-5\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: api\n  minReplicas: 15\n  maxReplicas: 30\n  ...\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5-many.yml \\\n 3      --record\n 4\n 5  kubectl -n go-demo-5 get hpa\n```", "```\nNAME   REFERENCE        TARGETS                        MINPODS   MAXPODS   REPLICAS   AGE\napi    Deployment/api   <unknown>/80%, <unknown>/80%   15        30        1          38s\ndb     StatefulSet/db   <unknown>/80%, <unknown>/80%   3         5         1          40s\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS            RESTARTS AGE\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   Pending           0        2s\napi-... 0/1   Pending           0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 1        32s\napi-... 0/1   Pending           0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   Pending           0        2s\napi-... 0/1   ContainerCreating 0        2s\napi-... 0/1   ContainerCreating 0        2s\ndb-0    2/2   Running           0        34s\ndb-1    0/2   ContainerCreating 0        34s\n```", "```\n 1  kubectl -n kube-system get cm \\\n 2      cluster-autoscaler-status \\\n 3      -o yaml\n```", "```\napiVersion: v1\ndata:\n  status: |+\n    Cluster-autoscaler status at 2018-10-03 ...\n    Cluster-wide:\n      ...\n      ScaleUp: InProgress (ready=3 registered=3)\n    ... \n    NodeGroups:\n      Name:    ...gke-devops25-default-pool-ce277413-grp\n      ...\n      ScaleUp: InProgress (ready=1 cloudProviderTarget=2)\n               ...\n```", "```\n 1  kubectl -n go-demo-5 \\\n 2      describe pods \\\n 3      -l app=api \\\n 4      | grep cluster-autoscaler\n```", "```\n  Normal TriggeredScaleUp 85s cluster-autoscaler pod triggered scale-up: [{... 1->2 (max: 3)}]\n  Normal TriggeredScaleUp 86s cluster-autoscaler pod triggered scale-up: [{... 1->2 (max: 3)}]\n  Normal TriggeredScaleUp 87s cluster-autoscaler pod triggered scale-up: [{... 1->2 (max: 3)}]\n  Normal TriggeredScaleUp 88s cluster-autoscaler pod triggered scale-up: [{... 1->2 (max: 3)}]\n```", "```\n 1  kubectl get nodes\n```", "```\nNAME                                     STATUS     ROLES    AGE     VERSION\ngke-devops25-default-pool-7d4b99ad-...   Ready      <none>   2m45s   v1.9.7-gke.6\ngke-devops25-default-pool-cb207043-...   Ready      <none>   2m45s   v1.9.7-gke.6\ngke-devops25-default-pool-ce277413-...   NotReady   <none>   12s     v1.9.7-gke.6\ngke-devops25-default-pool-ce277413-...   Ready      <none>   2m48s   v1.9.7-gke.6\n```", "```\n 1  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 0        75s\napi-... 1/1   Running 0        75s\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 3        105s\napi-... 1/1   Running 0        75s\napi-... 1/1   Running 0        75s\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 0        75s\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 0        75s\napi-... 1/1   Running 1        75s\napi-... 1/1   Running 0        75s\ndb-0    2/2   Running 0        107s\ndb-1    2/2   Running 0        67s\ndb-2    2/2   Running 0        28s\n```", "```\n 1  kubectl apply \\\n 2      -f scaling/go-demo-5.yml \\\n 3      --record\n 4\n 5  kubectl -n go-demo-5 get hpa\n```", "```\nNAME REFERENCE      TARGETS          MINPODS MAXPODS REPLICAS AGE\napi  Deployment/api 0%/80%, 0%/80%   2       5       15       2m56s\ndb   StatefulSet/db 56%/80%, 10%/80% 3       5       3        2m57s\n```", "```\n 1  kubectl -n go-demo-5 rollout status \\\n 2      deployment api\n 3\n 4  kubectl -n go-demo-5 get pods\n```", "```\nNAME    READY STATUS  RESTARTS AGE\napi-... 1/1   Running 0        104s\napi-... 1/1   Running 0        104s\napi-... 1/1   Running 0        104s\napi-... 1/1   Running 0        94s\napi-... 1/1   Running 0        104s\ndb-0    2/2   Running 0        4m37s\ndb-1    2/2   Running 0        3m57s\ndb-2    2/2   Running 0        3m18s\n```", "```\n 1  kubectl get nodes\n```", "```\n 1  kubectl -n kube-system \\\n 2      get configmap \\\n 3      cluster-autoscaler-status \\\n 4      -o yaml\n```", "```\napiVersion: v1\ndata:\n  status: |+\n    Cluster-autoscaler status at 2018-10-03 ...\n    Cluster-wide:\n      Health: Healthy (ready=4 ...)\n      ...\n      ScaleDown: CandidatesPresent (candidates=1)\n                 ...\n    NodeGroups:\n      Name:      ...gke-devops25-default-pool-f4c233dd-grp\n      ...\n      ScaleDown: CandidatesPresent (candidates=1)\n                 LastProbeTime:      2018-10-03 23:06:...\n                 LastTransitionTime: 2018-10-03 23:05:...\n      ...\n```", "```\n 1  kubectl -n kube-system \\\n 2      get configmap \\\n 3      cluster-autoscaler-status \\\n 4      -o yaml\n```", "```\napiVersion: v1\ndata:\n  status: |+\n    Cluster-autoscaler status at 2018-10-03 23:16:24...\n    Cluster-wide:\n      Health:    Healthy (ready=3 ... registered=4 ...)\n                 ...\n      ScaleDown: NoCandidates (candidates=0)\n                 ...\n    NodeGroups:\n      Name:      ...gke-devops25-default-pool-f4c233dd-grp\n      Health:    Healthy (ready=1 ... registered=2 ...)\n                 ...\n      ScaleDown: NoCandidates (candidates=0)\n                 ...\n```", "```\n 1  kubectl get nodes\n```", "```\nNAME    STATUS ROLES  AGE VERSION\ngke-... Ready  <none> 36m v1.9.7-gke.6\ngke-... Ready  <none> 36m v1.9.7-gke.6\ngke-... Ready  <none> 36m v1.9.7-gke.6\n```", "```\n 1  kubectl delete ns go-demo-5\n```"]