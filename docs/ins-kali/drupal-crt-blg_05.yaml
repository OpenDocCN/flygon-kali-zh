- en: Chapter 5. Users, Roles, and Permissions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第五章。用户、角色和权限
- en: It's time to look at an entirely different aspect of running a Drupal website.
    Up until now we have focused on adding and organizing the site's basic functionality.
    We have not yet given any thought to how this functionality is to be accessed,
    or by whom. As the site grows, you will most likely feel the need to delegate
    certain responsibilities to various people. Alternatively, you might organize
    a team of people to work on specific aspects of the site. Whatever your needs,
    at some stage you will have to make decisions about who can do what, and the good
    people at Drupal have made sure that it is possible to do precisely this.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候看看Drupal网站运行的一个完全不同的方面了。到目前为止，我们一直专注于添加和组织网站的基本功能。我们还没有考虑如何访问这些功能，或者由谁访问。随着网站的发展，你很可能会感到需要将某些责任委托给不同的人。或者，你可能会组织一个团队的人来处理网站的特定方面。无论你的需求是什么，总有一天你将不得不决定谁可以做什么，Drupal的优秀人员已经确保可以做到这一点。
- en: In the same vein as the previous chapter, having Drupal simplify the implementation
    of your access control policies does not mean that the task is a trivial one.
    There is still much thought that needs to go on behind the scenes in order to
    create a sophisticated, and above all, effective policy for controlling access
    to the site. Because of this, we will spend a bit of time exploring the ramifications
    of the various choices available, instead of simply listing them. Taking a holistic
    approach to your access control policy will ensure you don't end up with any nasty
    surprises down the line.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 与上一章的情况类似，虽然Drupal简化了访问控制策略的实施，并不意味着这项任务是微不足道的。仍然需要在幕后进行大量思考，以创建一个复杂且有效的控制网站访问的策略。因此，我们将花一些时间探讨各种选择的影响，而不仅仅是列举它们。对访问控制策略采取整体的方法将确保你不会在后续遇到任何不愉快的惊喜。
- en: 'Since we have now been working with Drupal for a little while we will start
    spreading our wings a bit and use some slightly more advanced methods provided
    by contributed modules. Specifically, this chapter will look at the following
    topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们已经使用Drupal一段时间了，我们将开始稍微扩展一下，并使用一些由贡献模块提供的稍微更高级的方法。具体来说，本章将涉及以下主题：
- en: Planning an access policy
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制定访问策略
- en: Roles
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 角色
- en: Permissions—including the use of the *Taxonomy Access Control* module
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 权限-包括使用*分类访问控制*模块
- en: Users
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户
- en: Access rules
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问规则
- en: Before we continue, it is worth pointing out that at the moment you are more
    than likely using the administrative user (user number 1) for all the site's development
    needs. That is absolutely fine, but once you have finished making any major changes
    to the site, you should begin using a normal administrative user that has only
    the permissions required to complete your day-to-day tasks. The next section will
    highlight the general philosophy behind user access, which should make the reason
    for this clear.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们继续之前，值得指出的是，目前你很可能正在使用管理用户（用户编号1）来满足网站的所有开发需求。这完全没问题，但一旦你完成了对网站的任何重大更改，你应该开始使用一个普通的管理用户，该用户只具有完成日常任务所需的权限。接下来的部分将强调用户访问背后的一般哲学，这应该能够清楚地说明这样做的原因。
- en: Planning an Access Policy
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 制定访问策略
- en: When you think about how your site should work, you need to focus in on what
    will be required of yourself, other community members, or even anonymous users.
    In other words, *will there be a team of moderators working to ensure that the
    content of the site conforms to the dictates of good taste and avoids material
    that is tantamount to hate speech and so on? Will there be subject experts who
    are allowed to create and maintain their own content? How much will anonymous
    visitors be allowed to become involved, or will they be forced to merely window
    shop without being able to contribute?*
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 当你考虑网站应该如何运作时，你需要专注于自己、其他社区成员或甚至匿名用户可能需要的内容。换句话说，*是否会有一支团队的管理员来确保网站的内容符合良好品味的规定，并避免类似仇恨言论的材料？是否会有允许创建和维护自己内容的主题专家？匿名访客将被允许参与多少，或者他们将被迫只能在窗口购物而不能做出贡献？*
- en: Some of you might feel that you want the use of the site to grow organically
    with the community, and so you want to be extremely flexible in your approach.
    However, you can take it as given that your site and access policies are already
    flexible, given how easy it is to make changes in Drupal. This means that no one
    is exempt from building a proper access control plan to begin with. If you need
    to change it as time goes by, so be it, but at least there will be a coherent
    set of roles from the start.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你们中的一些人可能觉得希望网站的使用与社区有机地增长，因此希望在方法上非常灵活。然而，可以认为Drupal已经非常灵活，因为在Drupal中很容易进行更改。这意味着没有人可以免除建立适当的访问控制计划。如果需要随着时间的推移进行更改，那就这样做，但至少从一开始就会有一套连贯的角色。
- en: 'So where do we begin? The first and foremost rule of security that can be applied
    directly to our situation is to:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 那么我们从哪里开始呢？可以直接应用于我们的情况的安全的首要规则是：
- en: Note
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Grant a user permissions sufficient for completing the intended task, and no
    more!
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 授予用户足以完成预期任务的权限，而不要过多！
- en: Our entire approach is going to be governed by this rule. With a bit of thought
    you should be able to see why this is so important. Obviously, the last thing
    anyone wants is for an anonymous user to be able to modify the personal blog of
    a respected industry expert. This means that each type of user should have carefully
    controlled permissions that effectively block their ability to act outside the
    scope of their role.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的整体方法将受到这一规则的支配。经过一番思考，你应该能够明白为什么这是如此重要的。显然，任何人都不希望匿名用户能够修改受尊敬的行业专家的个人博客。这意味着每种类型的用户都应该有仔细控制的权限，有效地阻止他们超出其角色范围的行为能力。
- en: 'One upshot of this is that you will find it better to create a larger number
    of specific roles rather than create a generic role or two, and allow everyone
    to use those catch-all permissions. Drupal gives us fine-grained control over
    what users can accomplish, and you should make good use of this facility. It may
    help to think of your access control using the following figure (this does not
    necessarily represent the actual roles on your site—it''s just an example):'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 由此产生的一个结果是，您会发现最好创建更多特定的角色，而不是创建一个或两个通用角色，并允许每个人使用这些通用权限。Drupal为我们提供了对用户可以完成的任务进行精细控制的能力，您应该充分利用这一功能。使用以下图表来思考您的访问控制可能会有所帮助（这不一定代表您网站上的实际角色，这只是一个例子）：
- en: '![Planning an Access Policy](graphics/1800_05_01.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![规划访问策略](graphics/1800_05_01.jpg)'
- en: The shaded region represents the total number of permissions available for the
    site. Contained within this set are the various roles that exist either by default,
    like the **Anonymous users** role, or those you create in order to cater for the
    different types of users the site will require—in this case, the **Blog Writer
    users** and **Forum Moderator users** roles. Each role can then contain any number
    of users.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 阴影区域代表了网站可用的权限总数。在这个集合中包含了各种角色，有些是默认存在的，比如**匿名用户**角色，或者你为了满足网站所需的不同类型用户而创建的角色——比如**博客作者用户**和**论坛管理员用户**角色。每个角色可以包含任意数量的用户。
- en: From the previous diagram you can see that the **Anonymous users** have the
    smallest set of permissions because they have the smallest area of the total diagram.
    This set of permissions is totally encapsulated by the **Forum Moderator users**
    and **Blog Writer users**—meaning that forum moderators and blog writers can do
    everything an anonymous user does, and a whole lot more.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的图表中，您可以看到**匿名用户**拥有最少的权限集，因为它们在总图中的面积最小。这个权限集完全被**论坛管理员用户**和**博客作者用户**所包含——这意味着论坛管理员和博客作者可以做任何匿名用户可以做的事情，还有更多。
- en: Of course, the blog writers have a slightly different remit. While they share
    some common permissions with the forum administrators, they also have a few of
    their own. Your permissions as the primary or administrative user encompass the
    entire set, because there should be nothing that you cannot control.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，博客作者有稍微不同的任务。虽然他们与论坛管理员共享一些常见权限，但他们也有一些自己的权限。作为主要或管理用户，您的权限涵盖了整个集合，因为没有什么是您不能控制的。
- en: 'It is up to you to decide on which roles are best for the site, but before
    you attempt this it is important to ask: *What are roles and how are they used
    in the first place?* To answer this, let''s take a look at the practical side
    of things in more detail.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 决定网站最适合哪些角色是由您来决定的，但在尝试之前，重要的是要问：*角色是什么，它们首先是如何使用的？*为了回答这个问题，让我们更详细地看一下实际情况。
- en: Roles
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 角色
- en: It may seem a bit odd that we are not beginning our practical look at access
    control with a discussion on users. After all, it is all about what users *can*
    and *cannot* do! The problem with immediately talking about users is that the
    focus of a single user is too narrow, and we can learn far more about controlling
    access by taking a more broad view using roles. Once we have learned everything
    there is to know about roles, actually working with users becomes a trivial matter.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们并没有立即从讨论用户开始实际查看访问控制。毕竟，这一切都关乎用户*可以*和*不可以*做什么！立即讨论用户的问题在于，单个用户的焦点太狭窄，我们可以通过使用角色来更广泛地控制访问，从而学到更多。一旦我们学会了关于角色的所有知识，实际上与用户一起工作就成了微不足道的事情。
- en: 'A user role, in Drupal, is akin to a character in a play. In a play, an actor
    must always be true to their character—in other words, there is a defined way
    to behave and the character never deviates (no matter which actor portrays the
    character), otherwise the illusion is broken. In the same way, Drupal allows defined
    roles that determine the behavior of a user. Creating a role in Drupal is very
    easy! Simply click the **access control** link under **administer** and select
    the **roles** tab to bring up the following simple interface:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在Drupal中，用户角色类似于戏剧中的角色。在戏剧中，演员必须始终忠于他们的角色——换句话说，有一种定义好的行为方式，角色永远不会偏离（无论哪个演员扮演角色），否则就会破坏幻觉。同样地，Drupal允许定义角色来确定用户的行为。在Drupal中创建角色非常容易！只需点击**管理**下的**访问控制**链接，然后选择**角色**选项卡，就会出现以下简单的界面：
- en: '![Roles](graphics/1800_05_02.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![角色](graphics/1800_05_02.jpg)'
- en: As you can see, we have two roles already defined by default—the **anonymous
    user** and the **authenticated user**. It is not possible to change these, and
    so the **Operations** column is permanently set to **locked**. To begin with,
    the anonymous user (this is any user who is browsing the site without logging
    in) has very few permissions set, and you would more than likely want to keep
    it this way despite the fact that it is possible to give them any and all permissions.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，我们已经默认定义了两个角色——**匿名用户**和**经过身份验证的用户**。这些是不可能更改的，因此**操作**列被永久设置为**锁定**。首先，匿名用户（这是任何未登录浏览网站的用户）拥有非常少的权限集，您很可能希望保持这种状态，尽管事实上可以给他们任何权限。
- en: Similarly, the authenticated user, by default, has only a few more permissions
    than the anonymous user, and it is also sensible to keep these to a minimum. We
    will see in a little while how to go about deciding who should have which permissions.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 同样地，经过身份验证的用户默认只比匿名用户多一些权限，也很明智地将这些权限保持在最低限度。我们很快就会看到如何决定谁应该拥有哪些权限。
- en: In order to add a new role, simply type in a name for the role and click **Add
    role**, and you're done! *But what name do you want to add?* That's the question!
    If you are unsure about what name to use, then it is most likely you haven't clearly
    defined what purpose you want that role to serve. To see how this is done, let's
    assume that the *Contechst Wildlife Community* requires a forum moderator who
    will be a normal user in every way except for the ability to work directly on
    **Conservation** forums (to take some of the burden of responsibility off the
    administrator's hands) to create new topics and to edit the content if necessary.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加新角色，只需输入角色名称，然后点击**添加角色**，完成！*但是您想要添加什么名称？* 这就是问题所在！如果您不确定要使用什么名称，那么很可能您还没有清楚地定义您希望该角色发挥的作用。为了了解如何做到这一点，让我们假设*Contechst
    Wildlife Community*需要一个论坛版主，除了在**保护**论坛上直接工作的能力之外，他将是一个普通用户，可以创建新主题并在必要时编辑内容，以减轻管理员的责任。
- en: So, to get the ball rolling, we type in **Forum Moderator user** and click **Add
    role**—actually, you might even want to be more specific and use something like
    **Conservation Forum Moderator user** in this case, but you get the general idea.
    That's it! We have added the role successfully. Now, when you are presented with
    the **roles** page you should be able to view the new role, with the option to
    edit it shown on the right-hand side of the page. You can click **edit** in order
    to change the name of the role or delete it completely.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，为了开始，我们输入**论坛版主用户**，然后点击**添加角色**——实际上，在这种情况下，您甚至可能希望更具体一些，比如使用**保护论坛版主用户**，但您大致明白了。就是这样！我们已成功添加了角色。现在，当您看到**角色**页面时，您应该能够查看新角色，并在页面右侧显示的选项中选择编辑。您可以点击**编辑**以更改角色的名称或完全删除它。
- en: Our work is just beginning, because now we need to grant or deny the various
    permissions that the **Forum Moderator user** role will need in order to successfully
    fulfill its purpose. New roles are not given any permissions at all to begin with—this
    makes sense if you think about it, because the last thing we want is to create
    a role only to find that it has the same permissions as the administrative user.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的工作才刚刚开始，因为现在我们需要授予或拒绝**论坛版主用户**角色需要的各种权限，以便成功履行其职责。新角色一开始不会被授予任何权限——如果您仔细考虑，这是有道理的，因为我们最不希望的是创建一个角色，然后发现它具有与管理员用户相同的权限。
- en: The chances are you will need to add several roles depending on the needs of
    the site. For the moment, let's move on and take a look at how we flesh out this
    new role by setting permissions.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能您需要根据网站的需求添加几个角色。暂时先继续，看看我们如何通过设置权限来完善这个新角色。
- en: Permissions
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 权限
- en: 'In order to work with permissions, click the **permissions** tab on the **access
    control** page and you should be presented with a screen much like this (notice
    the new **Forum Moderator user** role on the right-hand side of the page):'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 为了处理权限问题，请点击**访问控制**页面上的**权限**选项卡，然后您应该会看到一个类似于这样的屏幕（请注意页面右侧的新**论坛版主用户**角色）：
- en: '![Permissions](graphics/1800_05_03.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![权限](graphics/1800_05_03.jpg)'
- en: As you can see, this page lists all of the available permissions down the left-hand
    column and allows you to enable or disable that permission by checking or un-checking
    boxes in the relevant column. It is easy enough to see that one simply goes down
    the list selecting those permissions required to be given for each role. What
    is not so easy is actually determining what should and shouldn't be enabled in
    the first place.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所见，该页面列出了左侧列出了所有可用的权限，并允许您通过在相关列中选中或取消复选框来启用或禁用该权限。很容易看出，只需按照列表逐个选择每个角色所需的权限。不容易的是实际确定首先应该启用或禁用什么。
- en: 'Notice too that the permissions given in the list on the left-hand side pertain
    to specific modules. This means that if we change the site''s setup by adding
    or removing modules, then we will also have to change the permissions on this
    page. What this means is that:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 还要注意，左侧列表中给出的权限与特定模块有关。这意味着，如果我们通过添加或删除模块来更改网站的设置，那么我们还必须更改此页面上的权限。这意味着：
- en: Note
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Most times a module is added, you will need to ensure that the permissions are
    set as you require them for that module, because by default no permissions are
    granted.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，添加模块时，您需要确保权限设置为您需要的模块权限，因为默认情况下不会授予任何权限。
- en: '*What else can we learn from the permissions page shown in the previous screenshot?
    Well, what does each permission precisely mean?* There are quite a few verbs that
    allow for completely different actions. The following lists the more common, generic
    ones although you might find one or two others crop up every now and then to cater
    for a specific module:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '*从前面截图中显示的权限页面中还可以学到什么？嗯，每个权限具体意味着什么？* 有很多动词可以允许完全不同的操作。以下列出了更常见的通用动词，尽管您可能偶尔会发现一两个其他动词来满足特定模块的需求：'
- en: '**administer:** gives the user the ability to affect the function of a module.
    For example, granting administer rights to the locale module means that the user
    can add or remove languages, manage strings, and even export `.po` files. This
    permission should only ever be given to trusted users, and never to anonymous
    users.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理：** 给用户影响模块功能的能力。例如，授予对语言环境模块的管理权限意味着用户可以添加或删除语言，管理字符串，甚至导出`.po`文件。此权限只应授予受信任的用户，而不应授予匿名用户。'
- en: '**access:** gives the user the ability to make use of a module without being
    able to affect it in any way. For example, granting access rights to the comment
    module allows a user to view comments without being able to delete, edit, or reply
    to them.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问：** 给用户使用模块的能力，但不能以任何方式影响它。例如，授予对评论模块的访问权限允许用户查看评论，但不能删除、编辑或回复评论。'
- en: '**create:** gives the user the ability to create content of some sort. For
    example granting rights to create stories allows users to do so, but does not
    also give them the ability to edit those stories.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建：**赋予用户创建某种内容的能力。例如，授予创建故事的权限允许用户这样做，但不会给他们编辑这些故事的能力。'
- en: '**edit own:** gives the user the ability to work with the content *they have
    created*. For example, granting **edit own** rights to the *story* module means
    that the user can modify their own stories at will.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**编辑自己的内容：**赋予用户处理*他们创建的*内容的能力。例如，将**编辑自己的**权限授予*故事*模块意味着用户可以随意修改他们自己的故事。'
- en: There are also other module-specific permissions available, and it is recommended
    that you play around and understand any new permission(s) you set—most are pretty
    self explanatory.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他特定于模块的权限可用，建议您尝试并了解您设置的任何新权限——大多数都很容易理解。
- en: Now, as the permissions given to the default roles are pretty sparse, you will
    probably want to take a look at what those users can do at the same time as you
    work on any new roles. More than likely, you will want to allow anonymous users
    to access much of the site's content, without allowing them to modify it in any
    way. I'll leave those choices up to you. But how do we go about setting up the
    required permissions for the **Forum Moderator user?**
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，由于默认角色的权限非常有限，您可能会想要在处理任何新角色的同时查看这些用户可以做什么。很可能，您会希望允许匿名用户访问站点的大部分内容，而不允许他们以任何方式修改它。我会把这些选择留给您。但是我们如何设置**论坛管理员用户**所需的权限呢？
- en: 'If we look down the list of permissions shown on the **Permission** page, we
    see the following forum-related options (at the moment, the **Forum Moderator
    user** permissions are those in the outermost column):'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们查看**权限**页面上显示的权限列表，我们会看到以下与论坛相关的选项（目前，**论坛管理员用户**的权限是最外列的那些）：
- en: '![Permissions](graphics/1800_05_04.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![权限](graphics/1800_05_04.jpg)'
- en: Enabling these three options and then testing out what new powers are made available
    should quickly demonstrate that this is not quite what we want.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 启用这三个选项，然后测试一下新的权限能够提供什么新的功能，很快就能证明这并不是我们想要的。
- en: If you are wondering how to actually test this out, you will need to register
    a new user and assign them to the **Forum Moderator user** role. The following
    section on *Users* explains how to create new users and administer them properly,
    so if you are unsure as to how to do this, jump ahead quickly and check that out
    so that you have a new user to work with.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想知道如何实际测试这一点，您需要注册一个新用户并将其分配给**论坛管理员用户**角色。关于*用户*的以下部分解释了如何创建新用户并正确管理他们，所以如果您不确定如何做到这一点，快速跳过并检查一下，这样您就有一个新用户可以使用了。
- en: 'The following point might make your life a bit easier:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 以下一点可能会让您的生活变得更轻松：
- en: Tip
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Use two browsers to test out your site! The demo site's development machine
    has IE and Firefox. Keep one browser for the administrator and the other for anonymous
    or other users in order to test out changes. This will save you from having to
    log in and out whenever testing new permissions.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 使用两个浏览器来测试您的网站！演示网站的开发机器上有IE和Firefox。保持一个浏览器用于管理员，另一个用于匿名或其他用户，以便测试更改。这样可以避免在测试新权限时反复登录和退出。
- en: Assuming you are happy to test out the new permissions one way or another, you
    will find that the forum moderator can access and work with *all of the forums*,
    and we want to confine this particular user to only the **Conservation-related**
    topics. We need something more specific—perhaps *in one of the other modules?*
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您乐意以某种方式测试新的权限，您会发现论坛管理员可以访问和处理*所有的论坛*，而我们希望将这个特定用户限制在**与保护相关**的主题上。我们需要更具体的东西——也许*在其他模块中？*
- en: Looking over the remaining permissions we can see that there is an **administer
    nodes** option— let's try that. Disable the **administer forums** option and enable
    the **administer nodes** option for the anonymous user before saving and logging
    out. You should now find that the **Forum Administrator user** can edit *any posts*
    to the forum quite easily by selecting the **content** link in the main menu.
    *So, what's the problem?* Well, for a start this user can now also configure all
    the different types of content on the site, as well as edit any type of content
    including other people's blogs. This situation is worse than the first one!
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 查看剩下的权限，我们可以看到有一个**管理节点**选项——让我们试试。在保存并注销之前，禁用**管理论坛**选项并为匿名用户启用**管理节点**选项。您现在应该发现**论坛管理员用户**可以轻松编辑*任何帖子*到论坛，只需在主菜单中选择**内容**链接。*那么，问题出在哪里？*嗯，首先，这个用户现在还可以配置站点上所有不同类型的内容，以及编辑任何类型的内容，包括其他人的博客。这种情况比第一种情况还糟糕！
- en: Oh dear, despite the fact that we have quite a bit of control over who does
    what at the moment, there is already an indication that there are some things
    that are not easily done without help from elsewhere. In order to complete this
    task we will need to make use of the *Taxonomy Access Control* module that we
    downloaded and installed in the previous chapter, because the solution to the
    current problem lies in forcing Drupal to define users who can access and manipulate
    content based on its category.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 哦，尽管我们目前对谁做什么有相当大的控制权，但已经有迹象表明有一些事情不容易在没有其他帮助的情况下完成。为了完成这项任务，我们需要利用我们在上一章下载并安装的*分类访问控制*模块，因为当前问题的解决方案在于强制Drupal根据其类别定义可以访问和操作内容的用户。
- en: Setting Permissions with Taxonomy Access Control
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用分类访问控制设置权限
- en: 'Assuming you have this module enabled, head on over to the **access control**
    section under the **administer** link (you will need to be logged in as the administrator
    again). You should notice that there is a new tab on this page entitled **category
    permissions**. This page should contain a list of the available roles and the
    ability to edit their category permissions. Straight off the bat, however, it
    probably won''t work because you need to enable the module first. If this is the
    case, the following link should be shown:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你已经启用了这个模块，前往**管理**链接下的**访问控制**部分（你需要再次以管理员身份登录）。你会注意到这个页面上有一个名为**类别权限**的新选项卡。这个页面应该包含一个可用角色的列表和编辑他们的类别权限的能力。然而，一开始可能不会起作用，因为你需要先启用该模块。如果是这种情况，应该显示以下链接：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_05.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_05.jpg)'
- en: 'They''re the boss! Head on over to the **taxonomy_access** page under **settings**
    and enable the module. Now when you view the **category permissions** page in
    **access control**, you will see a list of the available roles, ready for you
    to work with. Click the **Forum Moderator user** in this list to see the permissions
    for any and all types of categorized content (incidentally, don''t worry if you
    are unsure about content taxonomy and categories as yet—all this will be discussed
    in the following few chapters), like this:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 他们是老板！前往**设置**下的**taxonomy_access**页面并启用该模块。现在当你在**访问控制**中查看**类别权限**页面时，你会看到一个可用角色的列表，准备让你使用。在这个列表中点击**论坛版主用户**，你会看到任何类型的分类内容的权限（顺便说一句，如果你还不确定内容分类和类别，不用担心，这些将在接下来的几章中讨论）。
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_06.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_06.jpg)'
- en: There is a lot to think about here! Now there is a taxonomy access help page
    at **taxonomy_access** under **help** in the **administer** section, which you
    should read along with this. Let's take a quick look at all of these options in
    action as well.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有很多要考虑的事情！现在在**管理**部分的**帮助**下有一个**taxonomy_access**的分类访问帮助页面，你应该和这个一起阅读。让我们快速看一下所有这些选项的操作。
- en: The first three column-options available are **View, Update**, and **Delete**.
    These are fairly self explanatory and allow the user to view, work with, or remove
    content respectively. The next option, **Create**, allows users to fix the specified
    term to a post. **List** causes the specified term to be displayed on a posting's
    page, in a category list or even in the breadcrumb navigation. Ensure that you
    have **List** enabled if you want that term to actually appear in, on, or around
    your pages—leaving it disabled could have some unexpected results.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 可用的前三列选项是**查看，更新**和**删除**。这些都相当容易理解，允许用户查看、处理或删除内容。下一个选项**创建**允许用户将指定的术语固定到帖子上。**列表**会导致指定的术语显示在帖子页面上，类别列表甚至面包屑导航中。如果你希望该术语实际上出现在页面上、周围或周围，请确保你已经启用了**列表**，否则可能会产生一些意想不到的结果。
- en: 'The first three options have three settings to choose from:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 前三个选项有三个可选设置：
- en: '**Allow** (A): Grants the user the associated permission for any given category'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**允许**（A）：为任何给定类别授予用户相关权限'
- en: '**Ignore** (I): Effectively denies the user the associated permission but can
    be overridden by using other **Allow** commands'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**忽略**（I）：有效地拒绝用户相关权限，但可以通过使用其他**允许**命令来覆盖'
- en: '**Deny** (D): Denies the user the associated permission for any given category'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拒绝**（D）：拒绝用户对任何给定类别的相关权限'
- en: 'The second bullet in this list brings us to an important point concerning precedence:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 列表中的第二个项目提醒我们一个重要的点：
- en: Note
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The **Deny** directive takes precedence over **Allow!**
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**拒绝**指令优先于**允许**！'
- en: '*Why is this important?* Think about what would happen if at some stage a posting
    is linked to several categories (this scenario is possible, and we will come across
    it later in the book). If permissions are set up such that a user has the **Allow**
    directive set for a term in one *vocabulary* (vocabulary, and other taxonomy-related
    terms are all discussed in detail in [Chapter 7](ch07.html "Chapter 7. Advanced
    Content") on *Advanced Content)*, but **Deny** set for that term in the other,
    then the **Deny** directive takes precedence. This is why **Ignore** is so important
    because it allows you to effectively deny a permission for a term in one category
    without affecting others.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '*为什么这很重要？*想想如果在某个阶段，一篇帖子链接到了几个类别会发生什么（这种情况是可能的，我们将在书的后面遇到）。如果权限设置为用户在一个*词汇*（词汇和其他与分类相关的术语在[第7章](ch07.html
    "第7章.高级内容")中详细讨论）中对一个术语设置了**允许**指令，但在另一个术语中对该术语设置了**拒绝**，那么**拒绝**指令将优先。这就是为什么**忽略**如此重要，因为它允许你有效地拒绝一个类别中的权限而不影响其他类别。'
- en: Note
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Use **Deny** only if you are sure that a given role will *never* need access
    to that term.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在确定某个角色*永远*不需要访问该术语时才使用**拒绝**。
- en: The drop-down lists shown at the top of each vocabulary allow you to make generalized
    statements that influence the entire column. For example, you might want to allow
    a user to view all the terms in a vocabulary rather than have to change each and
    every setting manually. If this is the case, simply select **Allow all** from
    the drop-down list and away you go. Below the drop-down list is the **Default**
    option, which causes any new terms in that column to be automatically endowed
    with the permission you set here—if you are not sure what you want here, stick
    to **Ignore.**
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个词汇表顶部显示的下拉列表允许你做出影响整个列的概括性陈述。例如，你可能希望允许用户查看词汇表中的所有术语，而不必手动更改每个设置。如果是这种情况，只需从下拉列表中选择**全部允许**，然后开始。在下拉列表下方是**默认**选项，这会导致该列中的任何新术语自动获得你在这里设置的权限——如果你不确定你想要什么，请坚持**忽略**。
- en: 'Now, if you attempted to access the forums using your **Forum Moderator** user
    with the default permissions set, you will more than likely be disappointed:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果您尝试使用默认权限设置的**论坛版主**用户访问论坛，您很可能会感到失望：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_07.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_07.jpg)'
- en: 'This is really to be expected (despite the fact that we know that the forums
    do exist) because by default the forum moderator has only **Ignore** directives
    set. Set your page to look like the following, and ensure that your **Forum Moderator**
    user has permission to **create forum topics** and **edit own forum topics** (set
    on the **permissions** tab of the **access control** page):'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 这是可以预料到的（尽管我们知道论坛确实存在），因为默认情况下，论坛版主只设置了**忽略**指令。将您的页面设置如下，并确保您的**论坛版主**用户有权限**创建论坛主题**和**编辑自己的论坛主题**（在**访问控制**页面的**权限**选项卡上设置）：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_08.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_08.jpg)'
- en: Clicking **Save category permissions** captures these settings, and you can
    now try out the new permissions. Specifically, we need to check whether this user
    can perform the expected operations. *What are the expected operations?* Given
    the settings, we want the user to be able to access only the **Commercial Fishing**
    forum within the **Conservation** container. The user should be able to post to
    this forum as well as edit any posts within this forum (even if they are not the
    user's own posts).
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**保存类别权限**保存这些设置，现在您可以尝试新的权限。具体来说，我们需要检查这个用户是否能执行预期的操作。*预期的操作是什么？* 根据设置，我们希望用户只能访问**保护**容器中的**商业捕鱼**论坛。用户应该能够在此论坛发布帖子，并编辑此论坛中的任何帖子（即使它们不是用户自己的帖子）。
- en: 'Looking at the **Forums** page from the perspective of the forum moderator,
    we get the following:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 从论坛版主的角度查看**论坛**页面，我们得到以下结果：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_09.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_09.jpg)'
- en: 'This is perfect! The user can only access the one forum as expected, but the
    real test lies in whether we can edit someone else''s posts. In this case, I used
    my administrator user to post a note to this forum, and accessing it via the **Forum
    Administrator user** brings up the following page:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 这很完美！用户只能像预期的那样访问一个论坛，但真正的测试在于我们是否可以编辑别人的帖子。在这种情况下，我使用我的管理员用户在这个论坛上发布了一个帖子，通过**论坛管理员用户**访问它会出现以下页面：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_10.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_10.jpg)'
- en: From this you can see that the **List** directive that was enabled is working
    correctly because the taxonomy term **Commercial Fishing** is displayed. Obviously,
    the **View** and **Update** directives are working fine because we can see the
    post and can edit it. If you would like to confirm that the **Delete** directive
    is working, simply click on **edit** and check that the option to **Delete** the
    post is available at the bottom of the page.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里可以看出，启用的**列表**指令正常工作，因为显示了分类术语**商业捕鱼**。显然，**查看**和**更新**指令正常工作，因为我们可以看到帖子并对其进行编辑。如果您想确认**删除**指令是否有效，只需点击**编辑**，然后检查页面底部是否有**删除**帖子的选项。
- en: This is great news! Having tested the simplest case of granting permissions
    on a single forum, you now have to go back and set all the permission that will
    be needed. In doing so, it is likely that you will come across a few other interesting
    points. I will cover a couple of them here in detail—ultimately, you need to practice
    working with taxonomies and permissions to be able to achieve exactly what you
    want. I suggest waiting until we have covered taxonomies in more detail before
    diving in, though.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这是个好消息！在测试了在单个论坛上授予权限的最简单情况后，现在您需要返回并设置所有需要的权限。在这样做的过程中，很可能会遇到一些其他有趣的点。我将在这里详细介绍其中的一些——最终，您需要练习使用分类和权限来确切地实现您想要的效果。不过，我建议在深入研究分类之前等待一下。
- en: 'Go back to the **category permissions** page for the **Forum Moderator** user,
    disable all of the **Create** directives, and save your settings. Now try post
    a new forum topic using the **Forum administrator** user. You should be presented
    with a page like this:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 返回**论坛版主**用户的**类别权限**页面，禁用所有**创建**指令，并保存您的设置。现在尝试使用**论坛管理员**用户发布一个新的论坛主题。您应该会看到这样的页面：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_11.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_11.jpg)'
- en: '*What''s the problem?* **Submit** this message and then go back to the forums
    to view it. *Do you see the issue?* We have disabled **Create**, so we are not
    given the option of specifying which term this post should be associated with.
    So, because we can only view the **Conservation** container and the **Commercial
    Fishing** forum, the new content is not available to us.*"But we would ultimately
    allow the forum moderator to "View" all of the forum topics anyway"*, you might
    counter. This is true, and doing so would certainly make the post accessible,
    but it wouldn''t help the forum moderator to actually post to the forum he or
    she is in charge of.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '*问题在哪里？* **提交**此消息，然后返回论坛查看它。*您看到问题了吗？* 我们已经禁用了**创建**，因此我们没有选择指定此帖子应与哪个术语相关联的选项。因此，因为我们只能查看**保护**容器和**商业捕鱼**论坛，新内容对我们不可用。*“但最终我们会允许论坛版主“查看”所有论坛主题”*，您可能会反驳。这是正确的，这样做肯定会使帖子可访问，但这并不会帮助论坛版主实际上在他或她负责的论坛上发布帖子。'
- en: 'This has hopefully demonstrated that choosing your settings is quite a subtle
    task. Re-enabling the **Create** directive and attempting the post again brings
    up the following extra option, which then does the trick:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这希望已经证明了选择您的设置是一个相当微妙的任务。重新启用**创建**指令并再次尝试发布帖子会出现以下额外选项，然后问题就解决了：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_12.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_12.jpg)'
- en: Now when this content is submitted, it is correctly displayed in the **Commercial
    Fishing** forum. We will leave taxonomy permissions there because we have yet
    to discuss taxonomy in any detail, and you will be able to practice more effectively
    once we have discussed the ins and outs of taxonomies. Some of you may be wondering,
    for example, how to post this note to *all* the forums within the forum administrator's
    remit instead of *one at a time—tasks* like this will be dealt with in [Chapter
    7](ch07.html "Chapter 7. Advanced Content").
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，当这个内容被提交时，它会正确显示在**商业捕鱼**论坛中。我们将保留分类权限，因为我们还没有详细讨论分类，一旦我们讨论了分类的各个方面，你将能够更有效地练习。例如，有些人可能会想知道如何将这个笔记发布到*所有*论坛而不是*一次一个*——这样的任务将在[第7章](ch07.html
    "第7章.高级内容")中处理。
- en: 'Once you are happy that you can control the **Forum Moderator user**, let''s
    try something slightly different. Click the **permissions** tab of the **access
    control** page under **administer** and ensure that your **anonymous user** has
    all the available **forum module** permissions selected. Save these changes and
    log out of Drupal. Now, you have already seen what these permissions do; the anonymous
    user, most likely, will be able to administer all the forums. Sure enough, the
    main menu shows us the link to go to the forums as well as a link to administer
    forums. Click on the bottom link, which leads to the administration page for the
    forums. You should notice something fairly odd, like this:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你确定你可以控制**论坛版主用户**，让我们尝试一些稍微不同的东西。点击**管理**下的**访问控制**页面的**权限**选项卡，确保你的**匿名用户**已选择了所有可用的**论坛模块**权限。保存这些更改并退出Drupal。现在，你已经看到这些权限的作用；匿名用户很可能能够管理所有的论坛。果然，主菜单显示了链接去论坛以及管理论坛的链接。点击底部的链接，进入论坛的管理页面。你应该注意到一些相当奇怪的东西，就像这样：
- en: '![Setting Permissions with Taxonomy Access Control](graphics/1800_05_13.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类访问控制设置权限](graphics/1800_05_13.jpg)'
- en: Hmm, that's strange because we know there are forums there. Let's try the other
    **forum** link in the main menu. This time, following that link simply brings
    up a blank page. That's very odd, we have full administrative permissions on the
    forums, yet Drupal is acting like they don't exist. *Can you figure out why?*
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 嗯，这很奇怪，因为我们知道那里有论坛。让我们尝试主菜单中的另一个**论坛**链接。这一次，点击该链接只会出现一个空白页面。这非常奇怪，我们对论坛有完全的管理权限，但Drupal却表现得好像它们不存在一样。*你能想出原因吗？*
- en: As the administrator, remove the **forum module** permissions for the **anonymous
    user** in the **access control** section and save the settings. Now, click on
    the **category permissions** tab and then select the **edit** link for the **anonymous
    user**. You will be presented with the same untouched settings page that we initially
    saw for the **Forum Moderator user**. The answer should now be apparent. As the
    anonymous user has no permissions set here, we were effectively giving Drupal
    conflicting instructions by saying that this user is a forum administrator who
    is not allowed to access anything related to the taxonomy terms within the forums.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 作为管理员，在**访问控制**部分删除**匿名用户**对**论坛模块**的权限，然后保存设置。现在，点击**类别权限**选项卡，然后选择**匿名用户**的**编辑**链接。你将看到与我们最初为**论坛版主用户**看到的相同未更改的设置页面。答案现在应该显而易见了。由于匿名用户在这里没有设置权限，我们实际上是在给Drupal提供冲突的指示，即这个用户是一个论坛管理员，但不允许访问与论坛内的分类术语相关的任何内容。
- en: In our case, we would like anonymous users to be able to view all the content
    in the forums (although, if there were any topics you wanted to hide you could
    simply leave them unchecked) so we choose **Select all** from the **List** drop-down
    and **Allow all** in the **View** column drop-down and save the settings. Take
    a look at the results as the anonymous user. You should find that it is possible
    to view all the forums as expected, but you are required to login in order to
    post anything.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的情况下，我们希望匿名用户能够查看论坛中的所有内容（尽管，如果有任何你想隐藏的主题，你可以简单地不选中它们），所以我们从**列表**下拉菜单中选择**全选**，在**查看**列下拉菜单中选择**允许所有**，然后保存设置。以匿名用户的身份查看结果。你应该发现可以按预期查看所有的论坛，但是在发布任何内容之前需要登录。
- en: 'This has exemplified the need to thoroughly test your site regularly so that
    unforeseen changes don''t have disastrous effects. You may have asked yourself
    at some stage during the discussion on permissions: *Can one user belong to several
    roles?* The follow-up question to this is of course *What permissions does a user
    who belongs to more than one role receive?* In order to answer these very important
    questions, let us take a look at the next topic in our discussion.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这已经说明了定期彻底测试您的网站的必要性，以防意想不到的变化产生灾难性的影响。在讨论权限的过程中，你可能会问自己：*一个用户可以属于多个角色吗？* 这个问题的后续问题当然是*属于多个角色的用户会获得什么权限？*
    为了回答这些非常重要的问题，让我们看看我们讨论中的下一个主题。
- en: Users
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户
- en: A single user account can be given as many or as few permissions as you like
    via the use of roles. Drupal users are not really anything unless they already
    have a role that defines the manner in which they can operate within the Drupal
    framework. Hence, we discussed roles first.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 通过角色的使用，单个用户帐户可以被赋予尽多或尽少的权限。Drupal用户实际上并不是任何东西，除非他们已经有一个定义了他们在Drupal框架内操作方式的角色。因此，我们首先讨论了角色。
- en: Users can be created in two ways. The most common way is by registering on the
    site—if you haven't already, go ahead and register a new user on your site by
    clicking the **Create new account** link on the homepage just to test things out
    for yourself. Remember to supply a valid email address otherwise you won't be
    able to sign in properly. This will create an authenticated user, with any and
    all permissions that have been assigned to the **authenticated user** role.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以通过两种方式创建。最常见的方式是在网站上注册——如果还没有，请点击主页上的**创建新帐户**链接在您的网站上注册一个新用户，以便自己测试一下。记得提供有效的电子邮件地址，否则您将无法正确登录。这将创建一个已认证用户，拥有已分配给**已认证用户**角色的所有权限。
- en: The second way is to use your administrative user to create a new user. In order
    to do this, log on as the administrative user and click on **users** under **administer**.
    Select the **add user** tab and follow the instructions on that page—you will
    need to supply Drupal with usernames, email addresses, and passwords. Once you
    have a couple of users to play around with, it's time to begin working with them.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种方法是使用管理员用户创建新用户。为了做到这一点，以管理员用户身份登录，点击**管理**下的**用户**。选择**添加用户**选项卡，按照页面上的说明进行操作——您需要提供Drupal的用户名、电子邮件地址和密码。一旦您有了一些用户可以操作，就是时候开始与他们一起工作了。
- en: Administering Users
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 管理用户
- en: As the site's administrator, you are given complete access to the other users'
    account information. By clicking on the **edit** link shown to the right of each
    user account (under the **Operations** column heading) in the **users** page under
    **administer**, you can make any changes you require to a given user.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 作为网站的管理员，您可以完全访问其他用户的帐户信息。通过点击**管理**下的**用户**页面中每个用户帐户右侧显示的**编辑**链接（在**操作**列标题下），您可以对给定用户进行任何所需的更改。
- en: 'Now, we have already looked over this page briefly when we initially set up
    our administrative user in [Chapter 2](ch02.html "Chapter 2. Setting Up the Development
    Environment"), but it is worth looking over it in slightly more depth now as it
    has an important setting that was not there the first time round. If you scroll
    down the page a bit, you will notice that you now have the option to stipulate
    which roles this user belongs to. At present the demo site''s **Roles** section
    looks like this:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经在[第2章](ch02.html "第2章。设置开发环境")中初步查看了这个页面，但是现在值得更深入地查看一下，因为它有一个在第一次出现时不存在的重要设置。如果您向下滚动页面，您会注意到现在有一个选项可以指定该用户属于哪些角色。目前演示站点的**角色**部分如下所示：
- en: '![Administering Users](graphics/1800_05_14.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![管理用户](graphics/1800_05_14.jpg)'
- en: 'Reading the lines below the checkboxes in this screenshot, you can see that
    whenever you add a user to another role, the user obtains the combined permissions
    of these roles. So, that answers the questions we had in the earlier section on
    *Permissions. But what''s all the fuss about?* By knowing this, you should go
    about delegating roles in the following fashion:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在此截图中的复选框下面的行中，您可以看到每当将用户添加到另一个角色时，用户将获得这些角色的组合权限。这回答了我们在*权限*一节中提出的问题。但是这是怎么回事呢？通过了解这一点，您应该按照以下方式进行角色委派：
- en: Define the most basic user of the site by setting the **anonymous user** permissions.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义网站的最基本用户，通过设置**匿名用户**权限来实现。
- en: Set permissions for a basic **authenticated user—most** likely for people who
    have registered on your site.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为基本的**已认证用户**设置权限——这很可能是在您的网站上注册的人。
- en: Create special roles by only adding the specific additional permissions that
    are required by that role, and no more. Don't re-assign permissions that the authenticated
    user already has.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过添加特定的额外权限来创建特殊角色，而不是更多。不要重新分配已认证用户已经拥有的权限。
- en: Create new users by combining whatever roles are required for their duties or
    needs.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过组合所需的角色或需要的权限来创建新用户。
- en: 'If you follow the steps above, you will be sure to always give the correct
    permissions to each role. This is because you are building up a user''s permissions
    from the most basic to the most complex without having to assign every single
    permission each time. It should be obvious that a forum moderator would have all
    the permissions of an anonymous and authenticated user plus a few more. So, if
    you look back to the first diagram in the chapter you can see that, in this case,
    we would:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您按照上述步骤操作，您将确保始终为每个角色分配正确的权限。这是因为您正在从最基本的权限逐步构建用户的权限，而无需每次分配每个权限。显然，论坛版主将拥有匿名用户和已认证用户的所有权限，再加上一些额外的权限。因此，如果您回顾一下本章的第一个图表，您会发现，在这种情况下，我们将：
- en: Define the **anonymous user** and **authenticated user** role permissions—an
    authenticated user should have all the permissions of an anonymous user, plus
    whatever else is needed by your basic site user.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义**匿名用户**和**已认证用户**角色权限——已认证用户应该拥有匿名用户的所有权限，以及基本网站用户所需的其他权限。
- en: Create new roles with only the additional permissions needed for both the **Forum
    Moderator user** and **Blog Writer user** other than those given to the authenticated
    user
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建新角色，只为**论坛版主用户**和**博客作者用户**提供额外的权限，而不是授予已认证用户的权限
- en: Assign blog writers to the **Blog Writer user** role (they are automatically
    given the permissions granted to an authenticated user), and do the same for forum
    moderators and their role.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将博客作者分配到**博客作者用户**角色（他们会自动获得授予已认证用户的权限），并对论坛版主和他们的角色做同样的操作。
- en: Other than using that strategy for assigning roles to users, the information
    in this section is pretty easy to intuit; so let's move on.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用该策略为用户分配角色之外，本节中的信息都很容易理解；所以让我们继续。
- en: Configuring Users
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置用户
- en: 'This section really discusses how the site treats users rather than discussing
    what users can and cannot do. However, you will find that some of the information
    in this section is important for the look and feel of the site. Click on **settings**
    under the **administer** link and then click **users**. You will be provided with
    set of options beginning with user registration settings as follows:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分实际上讨论了站点对待用户的方式，而不是讨论用户可以做什么或不能做什么。但是，您会发现本节中的一些信息对站点的外观和感觉非常重要。单击**管理**链接下的**设置**，然后单击**用户**。您将获得一系列选项，从用户注册设置开始，如下所示：
- en: '![Configuring Users](graphics/1800_05_15.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![配置用户](graphics/1800_05_15.jpg)'
- en: You might want to consider which of the first three options to select quite
    carefully depending on how you envisage the site functioning. For example, you
    might wish to allow everyone to read and post comments to the forums, or do whatever,
    without needing to register first. If this is the case, then it is likely that
    the only people who would need to register are going to be performing some sort
    of administrative duties, in which case you would probably want to select the
    first option, or at least the third option.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能需要仔细考虑选择前三个选项中的哪一个，这取决于您设想站点的功能。例如，您可能希望允许每个人在不需要先注册的情况下阅读和发布论坛评论，或者做任何事情。如果是这种情况，那么可能需要注册的人只会执行某种管理职责，这种情况下，您可能希望选择第一个选项，或者至少选择第三个选项。
- en: For the demo site's sake, the second option is fine as we would like to make
    it easy for as many people as possible to become involved in the community without
    allowing absolutely everyone to post content and potentially cause problems. A
    helpful message is also added to explain the registration process to potential
    users.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 对于演示站点来说，第二个选项是可以的，因为我们希望尽可能让更多的人参与社区，而不允许绝对每个人发布内容并潜在地引起问题。还添加了一条有用的消息，以解释注册流程给潜在用户。
- en: The next section on this page deals with the process of user email customization.
    There is an interesting facet to this however, in that Drupal makes certain variables
    available for use within the static text that is entered. Let's take a look at
    how to modify a line or so in order to get the feel for how this works.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 该页面的下一部分涉及用户电子邮件定制的过程。然而，有一个有趣的方面是，Drupal提供了一些变量供在输入的静态文本中使用。让我们看看如何修改一行或者以便了解它是如何工作的。
- en: 'By way of example, we will change the **Subject of welcome e-mail** text from:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 举例来说，我们将把**欢迎电子邮件主题**文本更改为：
- en: '**Account details for %username at %site** to a slightly sprightlier:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '**%site的%username帐户详细信息**稍微活泼一些：'
- en: '**Congratulations %username, you have registered with the %site on %date!**'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '**恭喜%username，您已于%date在%site注册！**'
- en: 'Nothing too complicated here! The keywords preceded by the **%** sign are simply
    placeholders for other values, which are inserted into your email according to
    how they are set at that particular time. This gives you the ability to personalize
    your correspondence. In this case, the subject of the welcome email for a user
    registered as **David** is now displayed as follows:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 这里没有太复杂的东西！以**%**符号开头的关键词只是其他值的占位符，根据它们在特定时间的设置方式，将插入到您的电子邮件中。这使您能够个性化您的通信。在这种情况下，注册为**David**的用户的欢迎电子邮件主题现在显示如下：
- en: '![Configuring Users](graphics/1800_05_16.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![配置用户](graphics/1800_05_16.jpg)'
- en: As you can see, the **%username, %site**, and **%date** placeholders have been
    correctly changed to reflect the contents of the variables for that particular
    setup. There are settings available for several standard emails such as **password
    recovery** and **welcome (awaiting admin approval)**. The defaults are of course
    fairly sensible and easy to change should you need to. Remember the placeholders
    that are available for each piece of text are mentioned below the text area so
    play around with them until you are comfortable with their usage.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，**%username, %site**和**%date**占位符已经正确更改以反映该特定设置的变量内容。有一些标准电子邮件的设置可供选择，例如**密码恢复**和**欢迎（等待管理员批准）**。默认设置当然相当合理，如果需要更改，也很容易。请记住，每个文本区域下方都提到了可用于每个文本的占位符，因此请尝试使用它们，直到您对它们的使用感到满意。
- en: The final section deals with **Pictures**. Now, if you wish to enable **Picture
    support** for users, then select **Enabled** from the list, provide a default
    picture if you want one, and click **Save configuration** (the other settings
    are fairly self explanatory and sensible, and you can come back at any stage to
    change them if they are not suitable for you).
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一部分涉及**图片**。现在，如果您希望为用户启用**图片支持**，则从列表中选择**已启用**，如果需要默认图片，则提供一个，并单击**保存配置**（其他设置都相当简单明了，如果不适合您，随时可以回来更改）。
- en: 'Drupal will set up a `pictures` folder to hold all of the pictures within the
    `files` folder in your Drupal installation. Once everything is done, users will
    have a new section added to the **edit** tab of their **my account** page, like
    so:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal将设置一个`pictures`文件夹来保存Drupal安装中`files`文件夹中的所有图片。一切都完成后，用户将在其**我的帐户**页面的**编辑**选项卡中添加一个新的部分，如下所示：
- en: '![Configuring Users](graphics/1800_05_17.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![配置用户](graphics/1800_05_17.jpg)'
- en: When the picture has been successfully uploaded, it will appear on the **my
    account** page, and with the user's blog and forum posts on the site.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 成功上传图片后，它将出现在**我的帐户**页面上，并与用户的博客和论坛帖子一起显示在站点上。
- en: 'If the image does not appear and you end up seeing a link, something like this:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果图片未显示，而是出现了链接，类似于这样：
- en: '![Configuring Users](graphics/1800_05_18.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![配置用户](graphics/1800_05_18.jpg)'
- en: 'then you will need to ensure that you set the correct **upload module** permissions
    on the **access control** page, as follows:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，您需要确保在**访问控制**页面上设置正确的**上传模块**权限，如下所示：
- en: '![Configuring Users](graphics/1800_05_19.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![配置用户](graphics/1800_05_19.jpg)'
- en: Remember that since the **Forum Administrator** user automatically receives
    all the permissions of the **authenticated** user, it is not necessary to enable
    the **view uploaded files** permission for the **Forum Administrator** as this
    would be redundant and would make the purpose of your user less clear.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，由于**论坛管理员**用户自动获得**经过身份验证**用户的所有权限，因此不需要为**论坛管理员**启用**查看上传的文件**权限，因为这将是多余的，并且会使您的用户的目的不够清晰。
- en: Allowing users to incorporate pictures into a site is a good way for people
    to be able to personalize their contributions, and also gives everyone something
    visual to associate posts with. This is a great way to foster a community, as
    it helps give different users an identity of sorts.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 允许用户将图片纳入网站是让人们能够个性化其贡献的好方法，也让每个人都有一些视觉上的东西与帖子相关联。这是促进社区的好方法，因为它有助于给不同的用户一种身份。
- en: 'Editing the picture is easy! Simply modify it in the **Picture** section of
    the user''s edit page as shown here:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 编辑图片很容易！只需在用户编辑页面的**图片**部分进行修改，如下所示：
- en: '![Configuring Users](graphics/1800_05_20.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![配置用户](graphics/1800_05_20.jpg)'
- en: That is pretty much the end of the line for configuring users. There are still
    a few more things we need to discuss with regards to security before we can move
    on though.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 这基本上是配置用户的终点。在我们继续之前，还有一些关于安全性的事情需要讨论。
- en: Access Rules
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问规则
- en: So far it should seem like Drupal has things more or less covered when it comes
    to ensuring that it is possible to control who does what on the site. This is
    certainly the case, but there are a few more situations that we have not yet discussed,
    and may well end up affecting the site at some stage. For example, *what happens
    if you find that there is a company that repeatedly spams your forums with advertisements
    and marketing information?* Or, *what happens if you want only people from a certain
    company to access your site?*
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，Drupal似乎在确保能够控制谁在网站上做什么方面已经做得差不多了。当然，情况是这样的，但还有一些情况我们还没有讨论，可能最终会影响到网站。例如，*如果你发现有一家公司反复在你的论坛上发布广告和营销信息会怎么样？*或者，*如果你只想让某家公司的人访问你的网站呢？*
- en: Problems of this nature can really be a thorn in your side. Access problems
    can even end up driving community members away—unless you have the ability to
    set access rules.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这类问题确实可能成为你的一大困扰。访问问题甚至可能会导致社区成员离开，除非你有能力设置访问规则。
- en: 'There are some techniques that can be used to set access rules via the **access
    rules** tab on the **access control** page under the **administer** main menu
    item. To implement any access rules you will need to select the **add rule** option,
    which brings up the following page:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些技术可以通过**管理**主菜单项下的**访问控制**页面上的**访问规则**选项卡来设置访问规则。要实施任何访问规则，您需要选择**添加规则**选项，这将带来以下页面：
- en: '![Access Rules](graphics/1800_05_21.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![访问规则](graphics/1800_05_21.jpg)'
- en: From this you can see that I am in the process of making a rule that denies
    access based on an email address. Before we continue on this line, it is important
    to note that there are both **Allow** and **Deny** options available, and these
    will act based on a supplied **Username, E-mail**, or **Host** address given in
    the **Rule type** section. The final option, **Mask**, allows you to specify the
    actual name of the user or host to which the rule will apply.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里你可以看到，我正在制定一个基于电子邮件地址的拒绝访问规则。在我们继续这条线之前，重要的是要注意，有**允许**和**拒绝**选项可用，这些选项将根据**规则类型**部分中给定的**用户名、电子邮件**或**主机**地址进行操作。最后一个选项**掩码**允许你指定规则将应用的实际用户或主机的名称。
- en: In the above case, the email address`bad_user@contechst.com` will have a **deny**
    rule created after **Add rule** has been clicked.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述情况中，电子邮件地址`bad_user@contechst.com`将在单击**添加规则**后创建一个**拒绝**规则。
- en: Go ahead and create a rule like this one, and once you are done you will see
    that the rule now appears under the **list** tab. Now that there is a deny rule
    in place, how do we go about using it? The answer is that it is already being
    used. If someone tries to register with the email address supplied in the rule,
    they will be denied access. As it stands, this is probably not very helpful, because
    it is unlikely you will know ahead of time what specific email addresses to block.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 继续创建一个像这样的规则，一旦完成，你会发现该规则现在出现在**列表**选项卡下。既然有了一个拒绝规则，我们该如何使用它呢？答案是它已经在使用中。如果有人尝试使用规则中提供的电子邮件地址注册，他们将被拒绝访问。就目前而言，这可能并不是很有帮助，因为你不太可能提前知道要阻止哪些具体的电子邮件地址。
- en: 'In order to cater for the times when you aren''t entirely sure of the specific
    address, there are two wildcard characters provided that can serve as generic
    strings or characters. Let''s say that you wanted to ban someone who runs a small
    spamming business. Simply blocking their current email address is not really sufficient,
    because they can simply create another address and use that one to register with
    Drupal. If you know that the addresses come from one location, such as:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 为了满足你不确定具体地址的时候，提供了两个通配符，可以作为通用字符串或字符。比如说，你想要禁止一个小型垃圾邮件业务的人。简单地阻止他们当前的电子邮件地址并不够，因为他们可以简单地创建另一个地址并用它来注册Drupal。如果你知道这些地址来自一个地方，比如：
- en: '[PRE0]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You could use the `%` character to match whatever characters are present before
    the `@` sign, effectively stopping anyone from that email server from registering,
    like so:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用`％`字符来匹配`@`符号之前存在的任何字符，有效地阻止来自该电子邮件服务器的任何人注册，就像这样：
- en: '[PRE1]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'If you have a Hotmail account, or something similar, try blocking any address
    that ends in `@hotmail.com` and then attempt to register an account on the site.
    You should find that Drupal presents you with the following message:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个Hotmail账户，或者类似的账户，尝试阻止任何以`@hotmail.com`结尾的地址，然后尝试在网站上注册一个账户。你应该会发现Drupal向你呈现以下消息：
- en: '![Access Rules](graphics/1800_05_22.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![访问规则](graphics/1800_05_22.jpg)'
- en: A new problem rears its ugly head when it so happens that you don't want to
    allow Hotmail addresses on the site with the exception of a close personal friend
    who is traveling around the world and can only access a Hotmail address. In this
    case, you need to set an **Allow** rule as well. If it so happens that the email
    address of the person is `good_friend@hotmail.com`, then you could set the allow
    rule by selecting the appropriate options to cater for this on the **add rule**
    page.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 当出现这样的情况时，您不希望在站点上允许Hotmail地址，但有一个正在世界各地旅行且只能访问Hotmail地址的亲密朋友的例外情况。在这种情况下，您还需要设置一个**允许**规则。如果这个人的电子邮件地址是`good_friend@hotmail.com`，那么您可以通过在**添加规则**页面上选择适当的选项来设置允许规则。
- en: 'Your rules would then look something like this:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 您的规则可能如下所示：
- en: '![Access Rules](graphics/1800_05_23.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![访问规则](graphics/1800_05_23.jpg)'
- en: What this does is ban all Hotmail addresses on the site. However, because *an
    allow rule takes precedence over a deny rule*, the one and only Hotmail address
    specified in the single **allow** rule shown in the screenshot will work fine.
    Now when your good friend attempts to register, everything will go swimmingly
    well.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 这样做会禁止站点上的所有Hotmail地址。但是，由于*允许规则优先于拒绝规则*，在屏幕截图中显示的单个**允许**规则中指定的唯一Hotmail地址将正常工作。现在，当您的好朋友尝试注册时，一切都会顺利进行。
- en: After some time, you might find that the set of rules that are in place can
    become slightly confusing, or alternatively, it is simply not feasible to continue
    attempting to register new names all the time to ensure that they work according
    to plan. In this case, use the **check rules** tab on the right-hand side of the
    **access rules** page. This allows names of users, email addresses, and hosts
    to be entered in order to check whether they have access or not. Simply compare
    these results with your expectations to determine if everything is working as
    planned.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 一段时间后，您可能会发现已经制定的规则集有点令人困惑，或者说，不断尝试注册新名称以确保其按计划工作根本不可行。在这种情况下，请使用**访问规则**页面右侧的**检查规则**选项卡。这允许输入用户、电子邮件地址和主机的名称，以检查它们是否具有访问权限。只需将这些结果与您的期望进行比较，以确定一切是否按计划工作。
- en: One final thing to bear in mind is that if you deny access using the host criteria,
    then this will be enforced throughout the site and not just on the registration
    pages. For the case of the spammer, you would probably want to deny access to
    the site in general; so you would select the **host** option with something like
    this for the **Mask:**
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 最后要记住的一件事是，如果使用主机标准拒绝访问，那么这将在整个站点上执行，而不仅仅是在注册页面上。对于垃圾邮件发送者，您可能希望一般拒绝站点访问；因此，您可以选择**主机**选项，并使用以下内容进行**掩码：**
- en: '[PRE2]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This would then match to any host with `irritating_spammer` in it. For example:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这将与任何包含`irritating_spammer`的主机匹配。例如：
- en: '[PRE3]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: and so on. Remember to check that all the rules you add have the desired affect
    on the site's access policy. It would be a shame to make a rule that prevented
    potentially valuable community members from accessing content, causing them to
    go elsewhere.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 等等。请记住检查您添加的所有规则对站点访问策略的影响是否符合预期。如果制定了阻止潜在有价值的社区成员访问内容的规则，这将是一件遗憾，因为他们可能会转而去其他地方。
- en: I would be remiss if I didn't mention, before finishing off, that there are
    a number of other **user access/authentication-related** modules available on
    the Drupal website. It is probably worthwhile to check these out at `http://drupal.org/project/Modules/category/74`
    in case there is something you find that is particularly suited to your needs.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我要提到的是，在结束之前，Drupal网站上还有许多其他**用户访问/身份验证相关**的模块可用。可能值得在`http://drupal.org/project/Modules/category/74`上查看这些模块，以防有特别适合您需求的模块。
- en: Of special interest are the *node privacy byrole* and *Path Access* modules,
    which provide an alternative method of controlling access to content. Having seen
    how the *Taxonomy Access* module worked, you should feel confident enough to work
    with any of these contributions assuming you are not able to achieve precisely
    what you want already.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 特别感兴趣的是*节点角色隐私*和*路径访问*模块，它们提供了一种替代方法来控制内容的访问。通过了解*分类访问*模块的工作原理，您应该有足够的信心来处理任何这些贡献，假设您目前无法准确实现您想要的内容。
- en: Summary
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter has given you a good grounding in the basics of controlling access
    to your site's content. You have seen that Drupal comes with a large number of
    facilities and options to ensure proper maintenance of the site by retaining overall
    control with the administrative user, as well as delegate important jobs to trusted
    users via the use of roles.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 本章为您提供了控制站点内容访问的基础知识。您已经了解到Drupal提供了大量的设施和选项，以确保通过管理员用户保持整体控制，并通过角色委派重要工作给受信任的用户。
- en: We looked at how to go about planning an access policy. This is not only an
    important requirement, in terms of making sure the site runs smoothly, but also
    helps to solidify how the site will eventually work by forcing you to consider
    many eventualities. Following this, a tour of the fundamental aspects of access
    control in Drupal saw us discussing roles, permissions, and users, and learning
    how to plan and implement an access policy based on the requirements of the site.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看了如何规划访问策略。这不仅是一个重要的要求，以确保站点顺利运行，而且还有助于通过迫使您考虑许多可能性来巩固站点最终的工作方式。在此之后，我们讨论了Drupal中访问控制的基本方面，包括角色、权限和用户，并学习了如何根据站点的要求规划和实施访问策略。
- en: A discourse on how to use the contributed module that controls access based
    on taxonomy showed us how to implement even further fine-grained control over
    the content's access permissions. However, you probably also found out that creating
    a well-designed and coherent access policy takes a bit of time. Planning, and
    above all, testing, will help ensure that everything works as intended.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 关于如何使用基于分类法控制访问的贡献模块的讨论向我们展示了如何进一步细化对内容访问权限的控制。然而，您可能也发现，创建一个设计良好且连贯的访问策略需要一些时间。规划，最重要的是测试，将有助于确保一切按预期运行。
- en: Access rules were then introduced as a further way of controlling who gets into
    the site, with a discussion on how to use the wildcard characters effectively.
    With that, we are done with access control although you are strongly urged to
    spend some time playing around with the various options until you are comfortable
    with being able to make changes and knowing their effects.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 接入规则随后被引入，作为进一步控制谁可以进入网站的一种方式，讨论了如何有效地使用通配符字符。有了这个，我们就完成了访问控制，尽管强烈建议您花一些时间尝试各种选项，直到您能够轻松地进行更改并了解其影响。
- en: The next two chapters take an in-depth look at content—the beating heart of
    Drupal!
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的两章将深入探讨内容——Drupal的核心！
