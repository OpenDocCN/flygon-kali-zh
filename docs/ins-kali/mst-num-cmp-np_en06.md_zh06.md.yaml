- en: Chapter 6. NumPy, SciPy, Pandas, and Scikit-Learn
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第六章：NumPy，SciPy，Pandas 和 Scikit-Learn
- en: By now, you should be able to write small implementations with NumPy. Throughout
    the chapters, we aim to provide examples using other libraries as well and in
    this chapter, we should step back and look at the surrounding libraries that you
    can use along with NumPy for your projects.
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您应该能够使用 NumPy 编写小型实现。 在整个章节中，我们旨在提供使用其他库的示例，在本章中，我们应退后一步，看看可以与 NumPy 一起用于项目的周围库。
- en: 'We will be covering how other Python libraries complement NumPy in this chapter.
    We will be looking at the following topics:'
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍其他 Python 库如何对 NumPy 进行补充。 我们将研究以下主题：
- en: NumPy and SciPy
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NumPy 和 SciPy
- en: NumPy and pandas
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NumPy 和 Pandas
- en: SciPy and scikit-learn
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SciPy 和 Scikit-learn
- en: NumPy and SciPy
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: NumPy 和 SciPy
- en: Until now, you have seen numerous examples of NumPy usage and only a few of
    SciPy. NumPy has array data type, which allows you to perform various array operations,
    such as sorting and reshaping.
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您已经看到了许多有关 NumPy 用法的示例，而只有少数 SciPy。 NumPy 具有数组数据类型，它允许您执行各种数组操作，例如排序和整形。
- en: NumPy has some numerical algorithms that can be used for tasks such as calculating
    norms, eigenvalues, and eigenvectors. However, if numerical algorithms are your
    focus, you should ideally use SciPy, as it includes a more comprehensive algorithm
    set, as well as the latest versions of the algorithms. SciPy has a lot of useful
    subpackages for certain kinds of analysis.
  prefs: []
  type: TYPE_NORMAL
  zh: NumPy 具有一些数值算法，可用于执行诸如计算范数，特征值和特征向量之类的任务。 但是，如果数值算法是您的重点，则理想情况下应使用 SciPy，因为它包含更全面的算法集以及最新版本的算法。
    SciPy 有许多有用的子程序包可用于某些类型的分析。
- en: 'The following list will give you an overall idea of the subpackages:'
  prefs: []
  type: TYPE_NORMAL
  zh: 以下列表将使您对子软件包有一个整体的了解：
- en: '`Cluster`: This subpackage includes clustering algorithms. It has two submodules,
    `vq` and `hierarchy`. The `vq` module provides functions for *k*-means clustering.
    The *hierarchy* module includes functions for hierarchical clustering.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Cluster`：此子程序包包含聚类算法。 它具有两个子模块`vq`和`hierarchy`。`vq`模块提供用于 K 均值聚类的函数。 *层次结构*模块包括用于层次结构聚类的函数。'
- en: '`Fftpack`: This subpackage includes functions and algorithms for fast Fourier
    transforms, as well as differential and pseudodifferential operators.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Fftpack`：此子程序包包含用于快速傅立叶变换的函数和算法，以及差分和伪差分算符。'
- en: '`Interpolate`: This subpackage provides functions for univariate and multivariate
    interpolation: 1D and 2D splines.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Interpolate`：此子程序包提供用于单变量和多变量插值的函数：1D 和 2D 样条曲线。'
- en: '`Linalg`: This subpackage provides functions and algorithms for linear algebra,
    such as `matrix` operations and functions, eigenvalue and -vector calculations,
    matrix decompositions, matrix equation solvers, and special matrices.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Linalg`：此子程序包提供用于线性代数的函数和算法，例如`matrix`运算和函数，特征值和-向量计算，矩阵分解，矩阵方程求解器和特殊矩阵。'
- en: '`Ndimage`: This subpackage provides functions and algorithms for multidimensional
    image processing, such as filters, interpolation, measurements, and morphology.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Ndimage`：此子程序包提供用于多维图像处理的函数和算法，例如滤镜，插值，测量和形态。'
- en: '`Optimize`: This subpackage provides functions and algorithms for function-local
    and -global optimization, function fitting, root finding, and linear programming.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Optimize`：此子程序包提供函数和算法，用于函数局部和全局优化，函数拟合，求根和线性编程。'
- en: '`Signal`: This subpackage provides functions and algorithms for signal processing,
    such as convolution, *b*-splines, filtering, continuous and discrete-time linear
    systems, waveforms, wavelets, and spectral analysis.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Signal`：此子程序包提供信号处理的函数和算法，例如卷积，B 样条，滤波，连续和离散时间线性系统，波形，小波和频谱分析。'
- en: '`Stats`: This subpackage provides probability distributions, such as continuous,
    multivariate, and discrete distributions, and statistical functions that can find
    the mean, mode, variance, skewness, kurtosis, and correlation coefficients.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Stats`：此子程序包提供概率分布，例如连续分布，多元分布和离散分布，以及可以找到均值，众数，方差，偏度，峰度和相关系数的统计函数。'
- en: 'Let''s see one of these subpackages in action. The following code shows a `cluster`
    package, used in cluster analysis:'
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下其中的一个子包。 以下代码显示了用于簇分析的`cluster`程序包：
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This will give you the following output:'
  prefs: []
  type: TYPE_NORMAL
  zh: 这将为您提供以下输出：
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Here, you can see the plot:'
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以看到该图：
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'You get the following plot from the preceding code block:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从前面的代码块中获得以下图表：
- en: '![](img/545138a3-1597-4e73-ac37-c900364a3514.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/545138a3-1597-4e73-ac37-c900364a3514.png)'
- en: 'Convert image array to a 2-dimensional dataset, by using this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下代码将图像数组转换为二维数据集：
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You get the following output from the preceding code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您从前面的代码中获得以下输出：
- en: '![](img/2b717041-1181-43d5-9a52-88acdfba12d0.png)# Chapter'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2b717041-1181-43d5-9a52-88acdfba12d0.png)'
- en: 'Linear regression with SciPy and NumPy'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SciPy 和 NumPy 和线性回归
- en: 'You have already seen how to code a linear regression algorithm from scratch
    with NumPy. The `Scipy.stats` module has a `linregress` function to calculate
    the slope, intercept, correlation coefficient (*r*-value), two-sided *p*-value,
    and standard error of the estimate, as shown here:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经了解了如何使用 NumPy 从头开始编写线性回归算法。`Scipy.stats`模块具有`linregress`函数，用于计算斜率，截距，相关系数（*R*
    值），两侧 *P* 值以及标准差估计，如下所示：
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We get the following plot from the output of the preceding code, as shown in
    this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从前面代码的输出中获得以下图表，如下图所示：
- en: '![](img/689cca38-243b-492a-886a-0f3b418eeed8.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/689cca38-243b-492a-886a-0f3b418eeed8.png)'
- en: 'You can also have a look at the relationship between *average number of rooms* and
    the house prices. Following code block prints out the performance metric:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以查看*平均房间数*与房价之间的关系。 以下代码块打印出性能指标：
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following code block plots the fitted line:'
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码块绘制了拟合线：
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'We get the following output from the preceding code, as shown in this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从前面的代码中获得以下输出，如下图所示：
- en: '![](img/28064f39-39a5-4056-be40-7912e65b6dcf.png)# Chapter'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/28064f39-39a5-4056-be40-7912e65b6dcf.png)'
- en: 'NumPy and pandas'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: NumPy 和 Pandas
- en: When you think about it, NumPy is a fairly low-level array-manipulation library,
    and the majority of other Python libraries are written on top of it.
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一下时，NumPy 是一个相当低级的数组操作库，大多数其他 Python 库都写在它的顶部。
- en:  One of these libraries is `pandas`, which is a high-level data-manipulation
    library. When you are exploring a dataset, you usually perform operations such
    as calculating descriptive statistics, grouping by a certain characteristic, and
    merging. The `pandas` library has many friendly functions to perform these various
    useful operations.
  prefs: []
  type: TYPE_NORMAL
  zh: 这些库之一是`pandas`，它是一个高级数据处理库。 浏览数据集时，通常会执行诸如计算描述性统计数据，按特定特征分组以及合并之类的操作。`pandas`库具有许多友好的函数来执行这些各种有用的操作。
- en: Let's use a diabetes dataset in this example. The diabetes dataset in `sklearn.datasets`
    is standardized with a zero mean and unit L2 norm.
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，我们使用糖尿病数据集。`sklearn.datasets`中的糖尿病数据集使用零均值和 L2 范数标准化。
- en: 'The dataset contains 442 records with 10 features: age, sex, body mass index,
    average blood pressure, and six blood serum measurements.'
  prefs: []
  type: TYPE_NORMAL
  zh: 该数据集包含 442 条记录，这些记录具有 10 个特征：年龄，性别，体重指数，平均血压和 6 个血清测量值。
- en: The target represents the disease progression after these baseline measures
    are taken. You can look at the data description at [https://www4.stat.ncsu.edu/~boos/var.select/diabetes.html](https://www4.stat.ncsu.edu/~boos/var.select/diabetes.html)
    and a related paper at [http://web.stanford.edu/~hastie/Papers/LARS/LeastAngle_2002.pdf](http://web.stanford.edu/~hastie/Papers/LARS/LeastAngle_2002.pdf).
  prefs: []
  type: TYPE_NORMAL
  zh: 目标代表采取这些基准措施后的疾病进展。 您可以在[`www4.stat.ncsu.edu/~boos/var.select/diabetes.html`](https://www4.stat.ncsu.edu/~boos/var.select/diabetes.html)
    和相关论文中查看数据描述，位于[`web.stanford.edu/~hastie/Papers/LARS/LeastAngle_2002.pdf`](http://web.stanford.edu/~hastie/Papers/LARS/LeastAngle_2002.pdf)。
- en: 'We start with our operation, as follows:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从操作开始，如下所示：
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'We get the following output from the preceding code, as shown in this table:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从前面的代码中获得以下输出，如下表所示：
- en: '![](img/bde1f31c-2242-48f3-9595-9b5573236667.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bde1f31c-2242-48f3-9595-9b5573236667.png)'
- en: 'This code shows you how to create a target column in DataFrame:'
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码向您展示了如何在数据帧中创建目标列：
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](img/05017bb6-90a0-4304-99bc-b92f2a81d26c.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/05017bb6-90a0-4304-99bc-b92f2a81d26c.png)'
- en: 'Pandas helps us to work with tabular data easily and supports our analysis
    with various helper methods and visualizations. Take a look at the code:'
  prefs: []
  type: TYPE_NORMAL
  zh: Pandas 帮助我们轻松地处理表格数据，并通过各种辅助方法和可视化支持我们的分析。 看一下代码：
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'We get the following output from the preceding code, as shown in this table:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从前面的代码中获得以下输出，如下表所示：
- en: '![](img/c4ae24f8-f89e-42c4-b444-731c70aaaa26.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c4ae24f8-f89e-42c4-b444-731c70aaaa26.png)'
- en: 'Let''s see how target is distributed, by using this line of code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用以下代码行，看看目标的分布方式：
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The following diagram shows the output from the preceding line:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了上一行的输出：
- en: '![](img/cc3d1506-c053-4b96-9664-5f6996dcc72b.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cc3d1506-c053-4b96-9664-5f6996dcc72b.png)'
- en: 'You can see that the target variable is skewed to the right. Take a look at
    this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到目标变量向右倾斜。 看一下这段代码：
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Output from the preceding code block:'
  prefs: []
  type: TYPE_NORMAL
  zh: 前一个代码块的输出：
- en: '![](img/8c302060-2632-4875-ba97-297f22708c38.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8c302060-2632-4875-ba97-297f22708c38.png)'
- en: Feature distributions
  prefs: []
  type: TYPE_NORMAL
  zh: 特征分布
- en: 'You can examine the distribution of several of the features and decide which
    of them looks similar. For this example, features s1, s2, and s6 seem to have
    a similar distribution, as you can see from this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以检查其中一些特征的分布，并确定其中哪些看起来相似。 对于此示例，特征`s1`，`s2`和`s6`似乎具有相似的分布，如从此代码中可以看到的：
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The following diagram shows the output from the preceding line:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了上一行的输出：
- en: '![](img/432ec7dc-28c7-42b2-aec2-4e1cb680b93c.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/432ec7dc-28c7-42b2-aec2-4e1cb680b93c.png)'
- en: 'You can better represent this relationship by using a `heatmap`, as shown here:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`heatmap`更好地表示这种关系，如下所示：
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The following diagram is a heatmap that was generated by the preceding code
    block:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图是由前面的代码块生成的热图：
- en: '![](img/3052dc7f-46c9-40d8-b086-1d681af5fbb6.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3052dc7f-46c9-40d8-b086-1d681af5fbb6.png)'
- en: 'Correlations heatmap'
  prefs: []
  type: TYPE_NORMAL
  zh: 相关性热力图
- en: 'You can also filter correlations in the following way:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过以下方式过滤相关性：
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'This diagram shows the filtered correlations:'
  prefs: []
  type: TYPE_NORMAL
  zh: 此图显示了过滤后的相关性：
- en: '![](img/9a1ecb64-ffa6-419d-bbde-3dc360fddc4a.png)Filtered correlations heatmap'
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/9a1ecb64-ffa6-419d-bbde-3dc360fddc4a.png)'
- en: 'There are other useful visualizations that you can use to examine statistical
    relationships, as shown here:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用其他有用的可视化来检查统计关系，如下所示：
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This diagram shows the following output from the preceding code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 该图显示了前面代码的以下输出：
- en: '![](img/0667393f-c07d-4474-ab67-85ba7c7b7aa1.png)Regression Plots'
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/0667393f-c07d-4474-ab67-85ba7c7b7aa1.png)'
- en: You can see that using `pandas` makes exploratory data analysis relatively simpler.
    Using `pandas`, you can inspect features and their relationships.
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到，使用`pandas`使探索性数据分析相对简单。 使用`pandas`，您可以检查特征及其关系。
- en: Quantitative modeling with stock prices using pandas
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Pandas 和股票价格的定量建模
- en: '`pandas` was first written to be used in financial datasets, and it includes
    many convenient functions for dealing with time series data. In this section,
    you will see how you can handle stock price series, using the `pandas` library.'
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas`最初是为在金融数据集中使用而编写的，它包含许多用于处理时间序列数据的便捷函数。 在本节中，您将看到如何使用`pandas`库处理股票价格序列。'
- en: 'You will use the `quandl` Python library to get financial data for companies.
    Take a look at this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您将使用`quandl` Python 库获取公司的财务数据。 看一下这段代码：
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'This table shows the output of `msft.tail()`:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下表显示了`msft.tail()`的输出：
- en: '![](img/886d9310-a3b9-4f9d-b4d8-3ee461df7f72.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/886d9310-a3b9-4f9d-b4d8-3ee461df7f72.png)'
- en: 'Let''s customize our plot with the following settings import:'
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过导入以下设置来自定义绘图：
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This diagram shows the plot from the preceding settings:'
  prefs: []
  type: TYPE_NORMAL
  zh: 该图显示了来自先前设置的图：
- en: '![](img/329ac184-fb7f-46c2-aa1f-9c910e9b692d.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/329ac184-fb7f-46c2-aa1f-9c910e9b692d.png)'
- en: 'You can use this code to calculate daily change:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用以下代码来计算每日变化：
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'This diagram shows the output of `msft.tail(10)`:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了`msft.tail(10)`的输出：
- en: '![](img/1f3615cd-31a2-4102-bb3d-ede8046d35cd.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1f3615cd-31a2-4102-bb3d-ede8046d35cd.png)'
- en: 'Try using this histogram of daily returns:'
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试使用此每日收益的直方图：
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'It will give you the following plot, as shown in this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，它将为您提供以下图表：
- en: '![](img/4a4095c3-b531-4704-b8ed-2bfc803dcee4.png)Distribution of daily returns'
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/4a4095c3-b531-4704-b8ed-2bfc803dcee4.png)'
- en: The returned distribution has long tails, especially on the negative side, and
    this is a known phenomenon in financial analysis. The risk that it creates is
    referred to as the tail risk, and it contradicts the assumption that the market
    returns follow normal distribution. This basically tells you that the probability
    of extreme events happening is more likely than that of a more normal distribution.
  prefs: []
  type: TYPE_NORMAL
  zh: 返回的分布具有较长的尾巴，尤其是在负侧，这是财务分析中的已知现象。 它产生的风险称为尾部风险，它与市场收益服从正态分布的假设相矛盾。 这基本上告诉您，极端事件发生的可能性比更正态分布的可能性更大。
- en: 'In terms of visualizations, it''s helpful to make them interactive. For this, `plotly`
    offers a great alternative to current plotting libraries, as shown here:'
  prefs: []
  type: TYPE_NORMAL
  zh: 在可视化方面，使它们具有交互性很有帮助。 为此，`plotly`提供了一个很好的替代当前绘图库的方法，如下所示：
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'We get the following plot from the preceding code, as shown in this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从前面的代码中获得以下图表，如下图所示：
- en: '![](img/d68b592e-855e-48d0-846c-43277a2935c7.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d68b592e-855e-48d0-846c-43277a2935c7.png)'
- en: 'You can create an **open-high-low-close** (**OHLC**) chart, where each date
    has 4 different price values, which are open, high, low and close. Take a look
    at this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以创建**开盘-最高-最低-收盘价**（**OHLC**）的图表，其中每个日期都有 4 个不同的价格值，它们是开，高，低和关。 看一下这段代码：
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'This diagram shows the plot from the preceding code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 该图显示了先前代码的图：
- en: '![](img/a5cf9226-e77d-4bb5-908b-7c11c7241c00.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a5cf9226-e77d-4bb5-908b-7c11c7241c00.png)'
- en: 'You can define custom ranges in which to inspect a specific region by selecting
    them on the chart. Take a look at this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过在图表上选择自定义范围来检查特定区域。 看一下这个图：
- en: '![](img/59f2162c-bdf9-426b-a3d2-216a3bc94d4b.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/59f2162c-bdf9-426b-a3d2-216a3bc94d4b.png)'
- en: 'Similarly, you can create `Candlestick` charts, by using this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，您可以使用以下代码创建`Candlestick`图表：
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'This diagram shows the output of this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了此代码的输出：
- en: '![](img/9d1f6097-f58a-4ff8-8e1f-db34ad7f3ae4.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9d1f6097-f58a-4ff8-8e1f-db34ad7f3ae4.png)'
- en: 'You can select specific ranges in `Candlestick` charts as well. Take a look
    at this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在`Candlestick`图表中选择特定范围。 看一下这个图：
- en: '![](img/39a01243-e40b-4aff-a059-db2b42e33b07.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/39a01243-e40b-4aff-a059-db2b42e33b07.png)'
- en: 'The distribution plot is as follows:'
  prefs: []
  type: TYPE_NORMAL
  zh: 分布图如下：
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following diagram shows the output of the preceding code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了前面代码的输出：
- en: '![](img/d49a8f10-1559-47d2-860b-83faf46b9716.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d49a8f10-1559-47d2-860b-83faf46b9716.png)'
- en: 'We can create three moving averages, as follows:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以创建三个移动平均线，如下所示：
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'This table shows the output of `msft.tail(10)`:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下表显示了`msft.tail(10)`的输出：
- en: '![](img/f3050952-395c-49ad-8076-64fa13ba7813.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3050952-395c-49ad-8076-64fa13ba7813.png)'
- en: 'Based on sliced data, the last 2,000 days will be included. Take a look at
    this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: 根据切片的数据，将包括最近 2,000 天。 看一下这段代码：
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'This diagram shows the plot from preceding code block:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了前面代码块中的图：
- en: '![](img/242fa07e-9351-4d35-8078-8d80075930ca.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/242fa07e-9351-4d35-8078-8d80075930ca.png)'
- en: Moving averages are used to monitor trends in financial markets. In this example,
    there are three moving averages, and each has a different period. You can set
    the number of days for your analysis for short, medium, and long-term trend monitoring.
  prefs: []
  type: TYPE_NORMAL
  zh: 移动平均线用于监视金融市场的趋势。 在此示例中，有三个移动平均线，每个移动线均具有不同的周期。 您可以设置分析天数，以进行短期，中期和长期趋势监视。
- en: 'When you start working with financial time series, you will quickly realize
    that you need aggregations based on different periods, and it''s super easy to
    create these in `pandas`. The following snippet will aggregate records monthly
    by calculating the mean:'
  prefs: []
  type: TYPE_NORMAL
  zh: 当您开始使用财务时间序列时，您会很快意识到您需要基于不同期间的汇总，并且在`pandas`中创建这些汇总非常容易。 以下代码段将通过计算平均值每月汇总记录：
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'This diagram shows the output of `msft_monthly.tail(10)`:'
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了`msft_monthly.tail(10)`的输出：
- en: '![](img/e54a85cb-898d-4b7a-a9eb-996e8360618d.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e54a85cb-898d-4b7a-a9eb-996e8360618d.png)'
- en: 'Here is a simple time-series plot:'
  prefs: []
  type: TYPE_NORMAL
  zh: '这是一个简单的时间序列图：'
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'This will give you the following plot, as shown in this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，这将为您提供以下图表：
- en: '![](img/8d35cdbf-b546-43ce-bfa4-5b2d2cc1f17c.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d35cdbf-b546-43ce-bfa4-5b2d2cc1f17c.png)'
- en: 'When you are inspecting a relationship between features, you can use a correlation
    matrix, which we have seen in previous examples. In time series, practitioners
    are interested in autocorrelation, which shows the correlation of the time series
    with itself. For example, you ideally expect to have periodic peaks in the time
    series that show where you have seasonality. Let''s see whether the daily percentage
    change has any significant peaks, by using this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: '在检查要素之间的关系时，可以使用我们在前面的示例中已经看到的相关矩阵。 在时间序列中，从业者对自相关感兴趣，自相关显示了时间序列与其自身的相关性。 例如，理想情况下，您希望时间序列中出现周期性的峰值，以显示您的季节性。
    通过使用以下代码，让我们看看每日百分比变化是否有任何明显的峰值：'
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'We get the following plot from the preceding code, as shown in this diagram:'
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从前面的代码中获得以下图表，如下图所示：
- en: '![](img/4f88b706-cb1a-465a-95b5-cfe7c8802673.png)'
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4f88b706-cb1a-465a-95b5-cfe7c8802673.png)'
- en: 'Monthly autocorrelation plot'
  prefs: []
  type: TYPE_NORMAL
  zh: '月度自相关绘图'
- en: There are no meaningful significant lags in this series, but if you try it with
    macroeconomic variables, such as the GDP, inflation rate, and unemployment level,
    you might observe significant quarterly or yearly peaks.
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个系列中没有有意义的显着滞后，但是如果您使用宏观经济变量（例如 GDP，通货膨胀率和失业水平）进行尝试，则可能会看到显着的季度或年度峰值。
- en: SciPy and scikit-learn
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SciPy 和 Scikit-learn
- en: '**Scikit-learn** is one of the SciKit libraries for machine learning, and it''s
    built on top of SciPy. You can use it to perform regression analysis, as you''ve
    done in previous chapters with the scikit-learn library. Take a look at this code:'
  prefs: []
  type: TYPE_NORMAL
  zh: '**Scikit-learn** 是用于机器学习的 SciKit 库之一，它建立在 SciPy 之上。 您可以使用它执行回归分析，就像在前几章中使用
    scikit-learn 库所做的那样。 看一下这段代码：'
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: K-means clustering in housing data with scikit-learn
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 'scikit-learn 和住房数据的 K 均值聚类'
- en: 'In this section, we will cluster housing data with scikit-learn''s k-means
    algorithm, as shown here:'
  prefs: []
  type: TYPE_NORMAL
  zh: '在本节中，我们将使用 scikit-learn 的 K 均值算法对房屋数据进行聚类，如下所示：'
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The output of the preceding code is as follows:'
  prefs: []
  type: TYPE_NORMAL
  zh: '前面代码的输出如下：'
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'You can examine the cluster centers, using this line of code:'
  prefs: []
  type: TYPE_NORMAL
  zh: '您可以使用以下代码行检查簇中心：'
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This is the console''s output:'
  prefs: []
  type: TYPE_NORMAL
  zh: '这是控制台的输出：'
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: In terms of the evaluation of clustering algorithms, you will usually use techniques
    such as silhouette analysis or the elbow method to assess the quality of clusters
    and to determine the right hyperparameters (such as the *k* for *k*-means). With
    the simple API that scikit-learn provides, you will also find such analysis easy
    to perform. You are strongly encouraged to build on what you have learned from
    these examples through practice, which will improve your knowledge and skills.
  prefs: []
  type: TYPE_NORMAL
  zh: '关于聚类算法的评估，通常将使用诸如轮廓分析或弯头方法之类的技术来评估聚类的质量并确定正确的超参数（例如 K 均值）。 使用 scikit-learn 提供的简单
    API，您还将发现这种分析易于执行。 强烈建议您通过实践从这些示例中学到的知识为基础，这将提高您的知识和技能。'
- en: Summary
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '总结'
- en: In this chapter, you practiced NumPy, SciPy, Pandas, and scikit-learn, using
    various examples, mainly for machine learning tasks. When you use Python data
    science libraries, there is usually more than one way of performing given task,
    and it usually helps to know more than one method.
  prefs: []
  type: TYPE_NORMAL
  zh: '在本章中，您使用各种示例（主要用于机器学习任务）练习了 NumPy，SciPy，Pandas 和 scikit-learn。 使用 Python 数据科学库时，通常有不止一种执行给定任务的方法，而且通常有助于了解不止一种方法。'
- en: You can either use alternatives for better implementations or for the sake of
    comparison. While trying different methods for a given task, you may either find
    different options that will allow you to further customize the implementation
    or simply observe some performance improvements.
  prefs: []
  type: TYPE_NORMAL
  zh: '您可以使用替代方法以获得更好的实现，也可以出于比较的目的。 在为给定任务尝试不同的方法时，您可能会找到不同的选项，这些选项将允许您进一步自定义实现，或者只是观察到一些性能改进。'
- en: The aim of this chapter was to show you these different options, and how flexible
    the Python language is because of its rich ecosystem of analytics libraries. In
    the next chapter, you will learn more about NumPy internals, such as how numpy
    manages data structures and memory, code profiling, and also tips for efficient
    programming.
  prefs: []
  type: TYPE_NORMAL
  zh: '本章的目的是向您展示这些不同的选项，以及 Python 语言由于其丰富的分析库生态系统而具有的灵活性。 在下一章中，您将了解有关 NumPy 内部的更多信息，例如
    numpy 如何管理数据结构和内存，代码概要分析以及有效编程的技巧。'
