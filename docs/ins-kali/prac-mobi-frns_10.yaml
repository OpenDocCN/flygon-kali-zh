- en: Android Forensic Setup and Pre-Data Extraction Techniques
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Android取证设置和数据提取前技术
- en: In the previous chapter, we covered the fundamentals of the Android architecture,
    security features, filesystems, and other capabilities. Having an established
    forensic environment before the start of an examination is important, as it ensures
    that the data is protected while you, as the examiner, maintain control of the
    workstation. This chapter will explain the process of—and what to consider when—setting
    up a digital forensic examination environment. It is paramount that you maintain
    control of the forensic environment at all times; this prevents the introduction
    of contaminants that could affect the forensic investigation.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了Android架构、安全功能、文件系统和其他功能的基础知识。在开始审查之前建立一个完善的取证环境非常重要，因为这可以确保数据在您作为审查员的控制下得到保护。本章将解释建立数字取证审查环境的过程以及需要考虑的事项。在整个取证过程中，保持对取证环境的控制至关重要；这可以防止引入可能影响取证调查的污染物。
- en: 'We will cover the following topics in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Setting up a forensic environment for Android
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Android建立取证环境
- en: Connecting an Android device to a workstation
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接Android设备到工作站
- en: Screen lock bypassing techniques
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 屏幕锁定绕过技术
- en: Gaining root access
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取root权限
- en: Setting up a forensic environment for Android
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为Android建立取证环境
- en: 'As a forensic examiner, you may encounter a wide range of mobiles over the
    course of your investigation. Therefore, it is necessary to have a basic environment
    set up on top of which you can build based on requirements. It is also very important
    that you maintain complete control over the environment at all times to avoid
    any unexpected situations. Setting up a proper lab environment is an essential
    part of the forensic process. The Android forensic setup usually involves the
    following steps:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 作为取证员，在调查过程中可能会遇到各种手机。因此，有必要在基础环境上建立一个基本环境，以满足需求。同时，您始终保持对环境的完全控制以避免任何意外情况。建立适当的实验室环境是取证过程的重要组成部分。Android取证设置通常包括以下步骤：
- en: Start with a fresh or forensically sterile computer environment. This means
    that other data is either not present on the system or is contained in a manner
    that prevents it from contaminating the present investigation.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从一个全新或取证上的计算机环境开始。这意味着系统上要么没有其他数据，要么以一种方式包含，以防止其污染当前的调查。
- en: Install the basic software necessary to connect to the device. Android forensic
    tools and methodologies will work on the Windows, Linux, and macOS platforms.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装连接到设备所需的基本软件。Android取证工具和方法可以在Windows、Linux和macOS平台上运行。
- en: Obtain access to the device. You must be able to enable settings or bypass them
    in order to allow the data to be extracted from the Android device.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取设备访问权限。您必须能够启用设置或绕过设置，以允许从Android设备中提取数据。
- en: Issue commands to the device using the methods defined in this chapter and in
    [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml), *Android Data Extraction
    Techniques*.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用本章和第9章《Android数据提取技术》中定义的方法向设备发出命令。
- en: The following sections provide guidance on setting up a basic Android forensic
    workstation.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分提供了设置基本Android取证工作站的指导。
- en: Installing the software
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装软件
- en: The Android **Software Development Kit** (**SDK**) helps the development world
    to build, test, and debug applications to run on Android. The Android SDK comes
    with Android Studio, the official **integrated development environment** (**IDE**)
    for developing Android apps. Android Studio provides valuable documentation and
    other tools that can be of great help during the investigation of an Android device.
    Alternatively, you can download just the platform tools, which are components
    of the Android SDK and include tools that can interact with the Android platform,
    such as the ADB, fast boot, and so on; these will be described in more detail
    in the following sections.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Android软件开发工具包（SDK）帮助开发世界构建、测试和调试在Android上运行的应用程序。Android SDK附带Android Studio，这是官方的集成开发环境（IDE），用于开发Android应用程序。Android
    Studio提供了有价值的文档和其他工具，在调查Android设备时可以提供很大帮助。或者，您也可以仅下载平台工具，这是Android SDK的组件，包括可以与Android平台交互的工具，如ADB、fastboot等；这些将在接下来的部分中更详细地描述。
- en: A good understanding of the Android SDK will help you to get to grips with the
    particulars of a device and its data on the device.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 对Android SDK的深入了解将有助于您了解设备及其数据的特点。
- en: Android Studio consists of software libraries, APIs, tools, emulators, and other
    reference material. It can be downloaded for free from [https://developer.android.com/studio/index.html](https://developer.android.com/studio/index.html).
    The platform tools can be downloaded from [https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Android Studio包括软件库、API、工具、模拟器和其他参考资料。可以免费从[https://developer.android.com/studio/index.html](https://developer.android.com/studio/index.html)下载。平台工具可以从[https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools)下载。
- en: During a forensic investigation, having these tools helps you connect to and
    access data on Android devices. The Android SDK is updated very frequently, so
    it's important to verify that your workstation also remains up to date. The Android
    SDK can run on Windows, Linux, and macOS.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在取证调查期间，拥有这些工具可以帮助您连接并访问Android设备上的数据。Android SDK经常更新，因此验证您的工作站也保持最新非常重要。Android
    SDK可以在Windows、Linux和macOS上运行。
- en: Installing the Android platform tools
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Android平台工具
- en: A working installation of the Android SDK or Android platform tools is a must
    during the investigation of a forensic device. The Windows version of Android
    Studio is around 718 MB, and rather heavy compared to the software for the platform
    tools, which is just 20 MB.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在对法医设备进行调查时，必须使用Android SDK或Android平台工具的工作安装。与平台工具软件相比，Windows版本的Android Studio约为718
    MB，而且相对较重，后者只有20 MB。
- en: 'The following is the step-by-step procedure to install the Android platform
    tools on a Windows 10 machine:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows 10机器上安装Android平台工具的逐步过程如下：
- en: Before you install Android Studio or the platform tools, make sure that your
    system has **Java Development Kit** (JDK) installed, because the Android SDK relies
    on Java SE Development Kit.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装Android Studio或平台工具之前，请确保系统已安装Java开发工具包（JDK），因为Android SDK依赖于Java SE开发工具包。
- en: JDK can be downloaded from [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: JDK可以从[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载。
- en: Download the latest version of the platform tools from [https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools).
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools)下载平台工具的最新版本。
- en: Right-click and extract the ZIP files to a folder. The installation location
    is your choice and must be remembered for future access. In this example, we will
    extract it to the `C:\ folder`.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击并将ZIP文件解压缩到一个文件夹中。安装位置由您选择，并且必须记住以供将来访问。在此示例中，我们将其解压缩到`C:\`文件夹中。
- en: 'Open the directory (`C:\platform-tools`) and note that the following tools
    are listed:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开目录（`C:\platform-tools`），注意列出了以下工具：
- en: '![](img/54c05c40-3681-41ec-a4a0-e1cccabeda46.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](img/54c05c40-3681-41ec-a4a0-e1cccabeda46.png)'
- en: Android platform tools
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Android平台工具
- en: This completes the basic Android tool installation. If you're installing the
    full-blown Android Studio version, you should still see the platform tools folder
    under the newly installed Android directory.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了基本的Android工具安装。如果您安装了完整版的Android Studio版本，您仍然应该在新安装的Android目录下看到平台工具文件夹。
- en: Creating an Android virtual device
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建Android虚拟设备
- en: With Android Studio you can create an **Android virtual device** (**AVD**),
    also called an emulator, which is often used by developers when creating new applications;
    however, an emulator has significance from a forensic perspective, too. Emulators
    are useful when trying to understand how applications behave and execute on a
    device. This could be helpful in confirming certain findings that are unearthed
    during a forensic investigation.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Android Studio，您可以创建一个Android虚拟设备（AVD），也称为模拟器，开发人员在创建新应用程序时经常使用它；然而，从法医角度来看，模拟器也具有重要意义。在尝试了解应用程序在设备上的行为和执行方式时，模拟器非常有用。这在确认法医调查中发现的某些发现时可能会有所帮助。
- en: 'Also, while working on a device that is running on an older platform, you can
    design an emulator for the same platform. Furthermore, before installing a forensic
    tool on a real device, the emulator can be used to find out how a forensic tool
    works and changes the content on an Android device. To create a new AVD (on the
    Windows workstation), go through the following steps:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在运行在较旧平台上的设备上工作时，可以为相同平台设计一个模拟器。此外，在在真实设备上安装法医工具之前，可以使用模拟器来了解法医工具的工作方式以及如何更改Android设备上的内容。要在Windows工作站上创建一个新的AVD，按照以下步骤进行：
- en: 'Open Android Studio and navigate to Tools | AVD Manager. The Android Virtual
    Device Manager window is shown in the following screenshot:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Android Studio，导航到工具 | AVD Manager。Android虚拟设备管理器窗口如下截图所示：
- en: '![](img/4257f6b5-0d95-4100-aed7-5d37f6e47317.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4257f6b5-0d95-4100-aed7-5d37f6e47317.png)'
- en: Android Virtual Device Manager
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: Android虚拟设备管理器
- en: 'Click on Create Virtual Device to create a new virtual device. In the screens
    that follow, select the appropriate hardware, system image, API level, AVD name,
    and so on, and proceed further. For example, the following screenshot shows Android
    Pie being selected:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击创建虚拟设备以创建一个新的虚拟设备。在随后的屏幕中，选择适当的硬件、系统映像、API级别、AVD名称等，然后继续。例如，以下截图显示选择了Android
    Pie：
- en: '![](img/a1949229-9e65-4b11-b025-4a31e41aafb9.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a1949229-9e65-4b11-b025-4a31e41aafb9.png)'
- en: Virtual device configuration
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟设备配置
- en: A confirmation message is shown once the device is successfully created. Now,
    select the AVD and click on the Play button.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设备成功创建后会显示确认消息。现在，选择AVD并单击播放按钮。
- en: 'This should launch the emulator. Note that this could take a few minutes, or
    even longer, depending on the workstation''s CPU and RAM. The emulator does consume
    a significant amount of resources on the system. After a successful launch, the
    AVD will run, as shown in the following screenshot:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这应该启动模拟器。请注意，这可能需要几分钟，甚至更长时间，这取决于工作站的CPU和RAM。模拟器在系统上消耗大量资源。成功启动后，AVD将运行，如下截图所示：
- en: '![](img/fd474902-3666-403e-8416-48c3af41e24c.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fd474902-3666-403e-8416-48c3af41e24c.png)'
- en: The Android emulator
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: Android模拟器
- en: From a forensic perspective, analysts and security researchers can leverage
    the functionality of an emulator to understand the file system, data storage,
    and so on. The data created when working on an emulator is stored in your home
    directory in a folder named `android`. For instance, in our example, the details
    about the Pixel_XL_API_28 emulator that we created earlier are stored under `C:\Users\Rohit\.android\avd\Pixel_XL_API_28.avd`.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 从法医角度来看，分析师和安全研究人员可以利用模拟器的功能来了解文件系统、数据存储等。在模拟器上工作时创建的数据存储在名为`android`的文件夹中的主目录中。例如，在我们的示例中，我们之前创建的Pixel_XL_API_28模拟器的详细信息存储在`C:\Users\Rohit\.android\avd\Pixel_XL_API_28.avd`下。
- en: 'Among the various files present under this directory, the following are those
    that are of interest to a forensic analyst:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在此目录下存在各种文件，以下是法医分析师感兴趣的文件：
- en: '`cache.img`: This is the disk image of the `/cache` partition (remember that
    we discussed the `/cache` partition of an Android device in [*Chapter 7*](eb3f20e0-270d-4e7d-bb69-3bfd1e707f38.xhtml),
    *Understanding Android*).'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cache.img`：这是`/cache`分区的磁盘映像（记住我们在[*第7章*](eb3f20e0-270d-4e7d-bb69-3bfd1e707f38.xhtml)中讨论过安卓设备的`/cache`分区）。'
- en: '`sdcard.img`: This is the disk image of the SD card partition.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sdcard.img`：这是SD卡分区的磁盘映像。'
- en: '`Userdata-qemu.img`: This is the disk image of the `/data` partition. The `/data`
    partition contains valuable information about the device user.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Userdata-qemu.img`：这是`/data`分区的磁盘映像。`/data`分区包含有关设备用户的宝贵信息。'
- en: Now that we have understood the steps to set up the environment, let's connect
    the Android device to a forensic workstation.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了设置环境的步骤，让我们将安卓设备连接到取证工作站。
- en: Connecting an Android device to a workstation
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将安卓设备连接到工作站
- en: Forensic acquisition of an Android device using open source tools requires you
    to connect the device to a forensic workstation. Forensic acquisition of any device
    should be conducted on a forensically sterile workstation. This means that the
    workstation is strictly used for forensics and not for personal use.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 使用开源工具对安卓设备进行取证需要将设备连接到取证工作站。任何设备的取证都应该在取证工作站上进行。这意味着工作站严格用于取证，而不是个人使用。
- en: Note that any time a device is plugged into a computer, changes can be made
    to the device; you must have full control of all interactions with the Android
    device at all times.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，每次将设备插入计算机时，都可能对设备进行更改；您必须始终全面控制与安卓设备的所有交互。
- en: The following steps should be performed by you in order to successfully connect
    the device to a workstation. Note that write protection may prevent the successful
    acquisition of the device, since commands may need to be pushed to the device
    in order to pull information. All the following steps should be validated on a
    test device prior to attempting them on real evidence.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该按照以下步骤成功地将设备连接到工作站。请注意，写保护可能会阻止成功获取设备，因为可能需要向设备发送命令以获取信息。在尝试在真实证据上进行之前，应该在测试设备上验证所有以下步骤。
- en: Identifying the device cable
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 识别设备电缆
- en: The physical USB interface of an Android device allows it to connect to a computer
    to share data, such as songs, videos, and photos. This USB interface might change
    from manufacturer to manufacturer and also from device to device. For example,
    some devices use mini-USB while some others use micro-USB and USB Type C. Apart
    from this, some manufacturers use their own proprietary formats, such as EXT-USB,
    EXT micro-USB, and so on. The first step in acquiring an Android device is to
    determine what kind of device cable is required.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 安卓设备的物理USB接口允许它连接到计算机共享数据，如歌曲、视频和照片。这个USB接口可能会因制造商和设备而有所不同。例如，一些设备使用迷你USB，而另一些使用微型USB和USB
    Type C。除此之外，一些制造商使用自己的专有格式，如EXT-USB、EXT微型USB等。获取安卓设备的第一步是确定需要什么样的设备电缆。
- en: 'There are different types, such as mini-USB, micro-USB, and other proprietary
    formats. The following is a brief description of the most widely used connector
    types:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 有不同类型，如迷你USB、微型USB和其他专有格式。以下是最常用连接器类型的简要描述：
- en: '| **Connector type** | **Description** |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| **连接器类型** | **描述** |'
- en: '| Mini - A USB | It is approximately 7 x 3 mm in size, with two of the corners
    on one long side lifted out. |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| Mini - A USB | 大约7 x 3毫米大小，其中一个长边的两个角被抬起。 |'
- en: '| Micro - B USB | It is approximately 6 x 1.5 mm in size, with two corners
    cut off to form a trapezoid. |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| Micro - B USB | 大约6 x 1.5毫米大小，两个角被切掉形成梯形。 |'
- en: '| Co-axial | It has a circular hole with a pin sticking up in the middle. There
    are different sizes in this category, varying from 2 to 5 mm in diameter. Widely
    used with Nokia models. |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 同轴 | 它有一个中间竖起的圆孔。这个类别有不同大小，直径从2到5毫米不等。广泛用于诺基亚型号。'
- en: '| D Sub-miniature | It has the shape of a rectangle with two rounded corners.
    The length of the rectangle varies, but the height is always 1.5 to 2 mm. Used
    mostly by Samsung and LG devices. |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| D子迷你 | 它呈矩形形状，两个圆角。矩形的长度各不相同，但高度始终为1.5到2毫米。主要由三星和LG设备使用。'
- en: Next, let's have a quick look at how to install device drivers.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们快速看一下如何安装设备驱动程序。
- en: Installing device drivers
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装设备驱动程序
- en: In order to identify the device properly, the computer may need certain drivers
    to be installed. Without the necessary drivers, the computer may not identify
    and work with the connected device. The issue is that, since Android is allowed
    to be modified and customized by manufacturers, there is no single generic driver
    that works for all Android devices. Each manufacturer writes its own proprietary
    drivers and distributes them over the internet, so it's important to identify
    the specific device drivers that need to be installed. Of course, some Android
    forensic toolkits (which we will discuss in the following chapters) do come with
    some generic drivers or a set of the most widely used drivers; they may not work
    with all models of the Android phone.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 为了正确识别设备，计算机可能需要安装某些驱动程序。没有必要的驱动程序，计算机可能无法识别并与连接的设备一起工作。问题在于，由于安卓允许制造商进行修改和定制，没有适用于所有安卓设备的通用驱动程序。每个制造商都会编写自己的专有驱动程序并通过互联网分发，因此重要的是识别需要安装的特定设备驱动程序。当然，一些安卓取证工具包（我们将在接下来的章节中讨论）确实带有一些通用驱动程序或一组最常用的驱动程序；它们可能无法与所有型号的安卓手机一起使用。
- en: Some Windows operating systems are able to autodetect and install drivers once
    the device is plugged in, but more often than not they fail. The device drivers
    for all manufacturers can be found on their respective websites.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 一些Windows操作系统可以在设备插入后自动检测并安装驱动程序，但更多时候会失败。所有制造商的设备驱动程序都可以在它们各自的网站上找到。
- en: Accessing the connected device
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问连接的设备
- en: 'If you haven''t done so already, connect the unlocked Android device to the
    computer directly using the USB cable. The Android device will appear as a new
    drive and you will be able to access the files on the external storage. If the
    device is locked, then at this point, you will not be able to access any files
    and may need to use the Turn on USB storage option, which can be enabled on the
    phone, as shown in the following screenshot:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您还没有这样做，使用USB电缆将解锁的安卓设备直接连接到计算机。安卓设备将显示为新的驱动器，您将能够访问外部存储上的文件。如果设备被锁定，那么在这一点上，您将无法访问任何文件，并且可能需要使用“打开USB存储”选项，该选项可以在手机上启用，如下面的屏幕截图所示：
- en: '![](img/32c7722a-6859-4e09-8d09-922b25024de5.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/32c7722a-6859-4e09-8d09-922b25024de5.png)'
- en: USB mass storage in Android 4.1 version
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 安卓4.1版本中的USB大容量存储
- en: 'With some Android phones (especially with HTC), the device may expose more
    than one functionality when connected with a USB cable. For instance, as shown
    in the following screenshot, when an HTC device is connected it presents a menu
    with four options. The default selection is Charge only. When the Disk drive option
    is selected, it is mounted as a disk drive:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一些安卓手机（尤其是HTC），当使用USB电缆连接时，设备可能会暴露多个功能。例如，如下面的屏幕截图所示，当连接HTC设备时，它会显示一个具有四个选项的菜单。默认选择是仅充电。当选择磁盘驱动器选项时，它会被挂载为磁盘驱动器：
- en: '![](img/ec34f18c-7553-44e3-a6db-d8f1d6205684.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ec34f18c-7553-44e3-a6db-d8f1d6205684.png)'
- en: HTC mobile USB options
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: HTC手机USB选项
- en: When the device is mounted as a disk drive, you will be able to access the SD
    card present on the device. From a forensic point of view, the SD card has significant
    value as it may contain files that are important to an investigation; however,
    the core application data stored under `/data/data` will remain on the device
    and cannot be accessed with these methods.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 当设备被挂载为磁盘驱动器时，您将能够访问设备上的SD卡。从取证的角度来看，SD卡具有重要价值，因为它可能包含对调查重要的文件；然而，存储在`/data/data`下的核心应用数据将保留在设备上，并且无法通过这些方法访问。
- en: The Android debug bridge
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安卓调试桥
- en: Considered to be one of the most crucial components in Android forensics, the
    **Android debug bridge** (**ADB**) is a command-line tool that allows you to communicate
    with the Android device and control it. We will learn about the ADB in detail
    in upcoming chapters; for now, we will focus on a basic introduction to the ADB.
    You can access the ADB tool under `/platform-tools/`.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 被认为是安卓取证中最关键的组件之一，**安卓调试桥**（**ADB**）是一个命令行工具，允许您与安卓设备进行通信和控制。我们将在接下来的章节中详细了解ADB；现在，我们将专注于对ADB的基本介绍。您可以在`/platform-tools/`下访问ADB工具。
- en: Before we discuss anything about the ADB, we need to have an understanding of
    the **USB debugging** option.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们讨论ADB之前，我们需要了解**USB调试**选项。
- en: USB debugging
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: USB调试
- en: 'The primary function of this option is to enable communication between the
    Android device and the workstation on which the Android SDK is installed. On a
    Samsung phone, you can access this under Settings | Developer Options, as shown
    in the following screenshot:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 此选项的主要功能是在安装了安卓SDK的工作站和安卓设备之间启用通信。在三星手机上，您可以在设置|开发者选项下访问此选项，如下面的屏幕截图所示：
- en: '![](img/73540294-59bb-4c6c-8649-a885589841b8.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/73540294-59bb-4c6c-8649-a885589841b8.png)'
- en: The USB debugging option in a Samsung S8 device
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 三星S8设备中的USB调试选项
- en: Other Android phones may have different environments and configuration features.
    You may have to force the Developer Options option by accessing build mode.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 其他安卓手机可能有不同的环境和配置功能。您可能需要通过访问构建模式来强制启用**开发者选项**选项。
- en: However, starting from Android 4.2, the Developer Options menu is hidden to
    make sure that users do not enable it by accident. To enable it, go to Settings
    | About Phone and then tap the Build Number field seven times. After this, Developer
    Options will be available in the Settings menu. Prior to Android 4.2.2, enabling
    this option was the only requirement for communicating with the device over ADB;
    however, starting from Android 4.2.2, Google has introduced the secure USB debugging
    option. This feature only allows hosts that are explicitly authorized by the user
    to connect to the device using ADB.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，从Android 4.2开始，开发者选项菜单被隐藏起来，以确保用户不会意外启用它。要启用它，进入设置|关于手机，然后点击构建号字段七次。之后，开发者选项将在设置菜单中可用。在Android
    4.2.2之前，启用此选项是与设备通过ADB通信的唯一要求；然而，从Android 4.2.2开始，Google引入了安全的USB调试选项。此功能只允许用户明确授权的主机使用ADB连接到设备。
- en: 'Thus, when you connect the device to a new workstation via USB in order to
    access ADB, you need to first unlock the device and authorize access by pressing
    OK in the confirmation window, as shown in the following screenshot. If Always
    allow from this computer is checked, the device will not prompt for authorization
    in the future:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，当您通过USB将设备连接到新的工作站以访问ADB时，您需要首先解锁设备，并通过在确认窗口中按下OK来授权访问，如下面的屏幕截图所示。如果选中了“始终允许此计算机”，设备将不会在将来提示授权：
- en: '![](img/4df919bd-ed19-45c7-8caa-4800946a8835.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4df919bd-ed19-45c7-8caa-4800946a8835.png)'
- en: Secure USB debugging
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 安全的USB调试
- en: When the USB debugging option is selected, the device will run the **adb daemon**
    (`adbd`) in the background and will continuously look for a USB connection. The
    daemon will usually run under a nonprivileged shell user account and thus will
    not provide access to the complete data; however, on rooted phones, `adbd` will
    run under the root account and therefore provide access to all the data. It is
    not recommended that you root a device to gain full access unless all other forensic
    methods fail. Should you elect to root an Android device, the methods must be
    well-documented and tested prior to attempting it on real evidence. Rooting will
    be discussed at the end of this chapter.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 当选择USB调试选项时，设备将在后台运行**adb守护程序**（`adbd`），并将不断寻找USB连接。该守护程序通常在非特权shell用户帐户下运行，因此不会提供对完整数据的访问；但是，在rooted手机上，`adbd`将在root帐户下运行，因此可以访问所有数据。不建议您root设备以获得完全访问权限，除非所有其他取证方法均失败。如果选择root
    Android设备，则必须在尝试在真实证据上进行之前对方法进行充分记录和测试。Rooting将在本章末讨论。
- en: On the workstation where the Android SDK is installed, `adbd` will run as a
    background process. Also, on the same workstation, a client program, which can
    be invoked from a shell by issuing the `adb` command, will run. When the `adb`
    client is started, it first checks whether an `adb` daemon is already running.
    If the response is negative, it initiates a new process to start the `adb` daemon.
    The `adb` client program communicates with local `adbd` over port `5037`.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装了Android SDK的工作站上，`adbd`将作为后台进程运行。同样，在同一工作站上，可以通过发出`adb`命令从shell调用的客户端程序也将运行。当启动`adb`客户端时，它首先检查是否已经运行`adb`守护程序。如果响应是否定的，则启动新进程来启动`adb`守护程序。`adb`客户端程序通过端口`5037`与本地`adbd`通信。
- en: Accessing the device using adb
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用adb访问设备
- en: Once the environment setup is complete and the Android device is in USB debugging
    mode, connect the Android device to the forensic workstation with a USB cable
    and start using `adb`.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦环境设置完成并且Android设备处于USB调试模式，就可以使用USB电缆将Android设备连接到取证工作站并开始使用`adb`。
- en: Detecting connected devices
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检测连接的设备
- en: 'The following `adb` command provides a list of all the devices connected to
    the forensic workstation. This will also list the emulator if it is running at
    the time of issuing the command. Also remember that, if the necessary drivers
    are not installed, then the following command will show a blank message. If you
    encounter this situation, download the necessary drivers from the manufacturer
    and install them:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 以下`adb`命令提供了连接到取证工作站的所有设备的列表。如果模拟器正在运行，则此命令也将列出模拟器。还要记住，如果未安装必要的驱动程序，则以下命令将显示空白消息。如果遇到这种情况，请从制造商处下载必要的驱动程序并安装它们：
- en: '![](img/6b952415-ff44-418b-9067-88e9374f0c87.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b952415-ff44-418b-9067-88e9374f0c87.png)'
- en: We now have a list of devices connected to the workstation. Next, we will see
    how to kill the local ADB server.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了连接到工作站的设备列表。接下来，我们将看到如何终止本地ADB服务器。
- en: Killing the local ADB server
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 终止本地ADB服务器
- en: 'The following command kills the local `adb` service:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令终止本地`adb`服务：
- en: '[PRE0]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'After killing the local `adb` service, issue the `adb` devices command. You
    will see that the server is started, as shown in the following screenshot:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 终止本地`adb`服务后，发出`adb devices`命令。您将看到服务器已启动，如下截图所示：
- en: '![](img/b2236193-c3b2-47d0-8782-3c6d0ff11c66.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b2236193-c3b2-47d0-8782-3c6d0ff11c66.png)'
- en: We will now access the ADB shell on the Android device.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将访问Android设备上的ADB shell。
- en: Accessing the adb shell
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问adb shell
- en: The ADB shell command allows you to access the shell on an Android device and
    interact with the device.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ADB shell命令允许您访问Android设备上的shell并与设备交互。
- en: 'The following is the command to access the `adb` shell and execute a basic
    `ls` command to see the contents of the current directory:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是访问`adb` shell并执行基本`ls`命令以查看当前目录内容的命令：
- en: '[PRE1]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The Android emulator can be used by you to execute and understand `adb` commands
    before using them on the device. In [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*, we will explain more about leveraging adb
    to install applications, copy files and folders from the device, view device logs,
    and so on.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Android模拟器可以用来在设备上使用`adb`命令之前执行和理解`adb`命令。在[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)中，*Android数据提取技术*，我们将更详细地解释如何利用adb来安装应用程序，从设备复制文件和文件夹，查看设备日志等。
- en: Basic Linux commands
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基本的Linux命令
- en: 'We will now take a quick look at some commonly used Linux commands and their
    usage with respect to an Android device:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将快速查看一些常用的Linux命令及其在Android设备上的用法：
- en: '`ls`: The `ls` command (with no option) lists the files and directories present
    in the current directory. With the `-l` option, this command shows files and directories
    and also their size, modified date and time, the owner of the file and its permission,
    and so on, as shown in the following command-line output:'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ls`：`ls`命令（无选项）列出当前目录中存在的文件和目录。使用`-l`选项，该命令显示文件和目录以及它们的大小、修改日期和时间、文件所有者及其权限等信息，如下面的命令行输出所示：'
- en: '[PRE2]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Similarly, the following are a few options that can be used along with the `ls`
    command:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，以下是可以与`ls`命令一起使用的一些选项：
- en: '| **Option** | **Description** |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | **描述** |'
- en: '| `a` | Lists hidden files |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| `a` | 列出隐藏文件 |'
- en: '| `c` | Displays files by timestamp |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| `c` | 根据时间戳显示文件 |'
- en: '| `d` | Displays only directories |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| `d` | 仅显示目录 |'
- en: '| `n` | Displays the long-format listing, with GID and UID numbers. |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| `n` | 显示长格式列表，包括GID和UID号码。 |'
- en: '| `R` | Displays subdirectories as well |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| `R` | 显示子目录 |'
- en: '| `t` | Displays files based on timestamp |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| `t` | 根据时间戳显示文件 |'
- en: '| `u` | Displays the file access time |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| `u` | 显示文件访问时间 |'
- en: 'Depending on the requirements, one or more of the following options can be
    used by the investigator to view the details:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 根据要求，调查人员可以使用以下一个或多个选项来查看详细信息：
- en: '`cat`: The `cat` command reads one or more files and prints them to standard
    output, as shown in the following command lines:'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cat`：`cat`命令读取一个或多个文件，并将它们打印到标准输出，如下面的命令行所示：'
- en: '[PRE3]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: To combine multiple files into one, we can use the `>` operator. To append to
    an existing file, we can use the `>>` operator.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 要将多个文件合并为一个文件，可以使用`>`运算符。要追加到现有文件，可以使用`>>`运算符。
- en: '`cd`: The `cd` command is used to change from one directory to another. This
    is more frequently used while navigating from one folder to another. The following
    example shows the commands used to change to the `system` folder:'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cd`：`cd`命令用于从一个目录切换到另一个目录。在从一个文件夹导航到另一个文件夹时经常使用。以下示例显示了用于切换到`system`文件夹的命令：'
- en: '[PRE4]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '`cp`: The `cp` command can be used to copy a file from one location to another.
    The syntax for this command is as follows:'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cp`：`cp`命令可用于将文件从一个位置复制到另一个位置。此命令的语法如下：'
- en: '[PRE5]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '`chmod`: The `chmod` command is used to change the access permissions to filesystem
    objects (files and directories). It may also alter special mode flags. The syntax
    for this command is as follows:'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`chmod`：`chmod`命令用于更改文件系统对象（文件和目录）的访问权限。它也可以更改特殊模式标志。此命令的语法如下：'
- en: '[PRE6]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: For example, `chmod 777` on a file gives read, write, and execute permissions
    to everyone.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，对文件执行`chmod 777`会为所有人提供读取、写入和执行权限。
- en: '`dd`: The `dd` command is used to copy a file, converting and formatting it
    according to the operands. With Android, the `dd` command can be used to create
    a bit-by-bit image of the Android device. More details of imaging are covered
    in [*Chapter 4*](f082adcc-6892-4e66-80cc-49b9752cb56a.xhtml), *Data Acquisition
    from iOS Backups*. The following is the syntax that needs to be used with this
    command:'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dd`：`dd`命令用于复制文件，并根据操作数进行转换和格式化。在Android中，`dd`命令可用于创建Android设备的逐位图像。有关成像的更多细节在[*第4章*](f082adcc-6892-4e66-80cc-49b9752cb56a.xhtml)，*从iOS备份中获取数据*中有所涵盖。以下是使用此命令所需的语法：'
- en: '[PRE7]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '`rm`: The `rm` command can be used to delete files or directories. The following
    is the syntax for this command:'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rm`：`rm`命令可用于删除文件或目录。此命令的语法如下：'
- en: '[PRE8]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '`grep`: The `grep` command is used to search files or output for a particular
    pattern. The syntax for this command is as follows:'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`grep`：`grep`命令用于在文件或输出中搜索特定模式。此命令的语法如下：'
- en: '[PRE9]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '`pwd`: The `pwd` command displays the current working directory. For example,
    the following command-line output shows that the current working directory is
    `/system`:'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pwd`：`pwd`命令显示当前工作目录。例如，以下命令行输出显示当前工作目录为`/system`：'
- en: '[PRE10]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '`mkdir`: The `mkdir` command is used to create a new directory. The following
    is the syntax for this command:'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mkdir`：`mkdir`命令用于创建新目录。此命令的语法如下：'
- en: '[PRE11]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '`exit`: The `exit` command can be used to exit the shell you are in. Just type
    `exit` in the shell to exit from it.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exit`：`exit`命令可用于退出当前所在的shell。只需在shell中键入`exit`即可退出。'
- en: Next, we will see how to handle an Android device efficiently before the investigation.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将看到如何在调查之前有效地处理Android设备。
- en: Handling an Android device
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理Android设备
- en: Handling an Android device in a proper manner prior to the forensic investigation
    is a very important task. Care should be taken to make sure that our unintentional
    actions don't result in data modification or any other unwanted happenings. The
    following sections throw light on certain issues that need to be considered while
    handling the device in the initial stages of a forensic investigation.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行取证调查之前，妥善处理Android设备是一项非常重要的任务。应该注意确保我们的无意行为不会导致数据修改或任何其他不需要的事件发生。以下部分重点介绍了在取证调查的初期阶段处理设备时需要考虑的某些问题。
- en: With improvements in technology, the concept of *device locking* has effectively
    changed over the last few years. Most users now have a passcode locking mechanism
    enabled on their device because of the increase in general security awareness.
    Before we look at some of the techniques used to bypass locked Android devices,
    it is important for us not to miss an opportunity to disable the passcode when
    there is a chance.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 随着技术的进步，*设备锁定*的概念在过去几年中发生了有效的变化。由于一般安全意识的增加，大多数用户现在在其设备上启用了密码锁定机制。在我们查看一些用于绕过锁定的Android设备的技术之前，重要的是我们不要错过在有机会时禁用密码的机会。
- en: 'When an Android device that is to be analyzed is first accessed, check whether
    the device is still active (unlocked). If so, change the settings of the device
    to enable greater access to the device. When the device is still active, consider
    performing the following tasks:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 当首次访问要分析的Android设备时，请检查设备是否仍处于活动状态（未锁定）。如果是，则更改设备的设置以便更大程度地访问设备。当设备仍处于活动状态时，考虑执行以下任务：
- en: '**Enabling USB debugging**: Once the USB debugging option is enabled, it gives
    greater access to the device through the `adb` connection. This is of great significance
    when it comes to extracting data from the device. The location of the option to
    enable USB debugging might change from device to device, but it''s usually under
    Developer Options in Settings. Most methods for physically acquiring Android devices
    require USB debugging to be enabled.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启用USB调试**：一旦启用USB调试选项，它通过`adb`连接为设备提供更大的访问权限。这在从设备中提取数据时非常重要。启用USB调试选项的位置可能因设备而异，但通常在设置的开发者选项下。大多数物理获取Android设备的方法都要求启用USB调试。'
- en: '**Enabling the Stay awake setting**: If the Stay awake option is selected and
    the device is connected for charging, then the device never locks. Again, if the
    device locks, the acquisition can be halted.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启用保持唤醒设置**：如果选择了保持唤醒选项并且设备已连接充电，则设备永远不会锁定。同样，如果设备锁定，取证可能会中断。'
- en: '**Increasing screen timeout**: This is the time for which the device will be
    effectively active once it is unlocked. The location to access this setting varies
    depending upon the model of the device. On a Samsung Galaxy S3 phone, you can
    access this setting by navigating to Settings | Display | ScreenTimeout.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增加屏幕超时时间**：这是设备解锁后有效活动的时间。访问此设置的位置取决于设备型号。在三星Galaxy S3手机上，您可以通过导航到设置|显示|屏幕超时来访问此设置。'
- en: Apart from these, as mentioned in [*Chapter 1*](3bd35df5-095f-4aac-a214-31a25983715b.xhtml),
    *Introduction to Mobile Forensics*, the device needs to be isolated from the network
    to make sure that remote wipe options do not work on the device. The Android Device
    Manager allows the phone to be remotely wiped or locked. This can be done by signing
    in to the Google account, which is configured on the mobile. More details about
    this are supplied in the following section. If the Android device is not set up
    to allow remote wiping, the device can only be locked using the Android Device
    Manager. There are also several **mobile device management** (**MDM**) software
    products available on the market, which allow users to remotely lock or wipe the
    Android device. Some of these may not require specific settings to be enabled
    on the device.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 除此之外，如[*第1章*](3bd35df5-095f-4aac-a214-31a25983715b.xhtml)中所述，*移动取证简介*，需要将设备与网络隔离，以确保远程擦除选项不适用于设备。安卓设备管理器允许远程擦除或锁定手机。这可以通过登录配置在手机上的谷歌账户来完成。关于此的更多细节将在以下部分提供。如果安卓设备未设置允许远程擦除，只能使用安卓设备管理器锁定设备。市场上还有一些**移动设备管理**（**MDM**）软件产品，允许用户远程锁定或擦除安卓设备。其中一些可能不需要在设备上启用特定设置。
- en: Using the available remote wipe software, it is possible to delete all the data,
    including emails, applications, photos, contacts, and other files, as well as
    those found on the SD card. To isolate the device from the network, you can put
    the device in airplane mode and disable Wi-Fi as an extra precaution. Enabling
    airplane mode and disabling Wi-Fi works well, as the device will not be able to
    communicate over a cellular network and cannot be accessed via Wi-Fi. Removing
    the SIM card from the phone is also an option, but that does not effectively stop
    the device from communicating over Wi-Fi or other cellular networks. To place
    the device in airplane mode, press and hold the Power Off button and select Airplane
    mode.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 使用可用的远程擦除软件，可以删除所有数据，包括电子邮件、应用程序、照片、联系人和其他文件，以及存储在SD卡上的文件。为了使设备与网络隔离，您可以将设备置于飞行模式并禁用Wi-Fi作为额外预防措施。启用飞行模式并禁用Wi-Fi效果很好，因为设备将无法通过蜂窝网络进行通信，也无法通过Wi-Fi访问。从手机中取出SIM卡也是一个选择，但这并不能有效地阻止设备通过Wi-Fi或其他蜂窝网络进行通信。要将设备置于飞行模式，按住关机按钮并选择飞行模式。
- en: All these steps can be done when the Android device is not locked; however,
    during the investigation, we commonly encounter devices that are locked. Therefore,
    it's important to understand how to bypass the lock code if it is enabled on an
    Android device.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些步骤都可以在安卓设备未锁定时完成；然而，在调查过程中，我们经常遇到已锁定的设备。因此，了解如何绕过安卓设备上启用的锁定代码是很重要的。
- en: Screen lock bypassing techniques
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 屏幕锁定绕过技术
- en: Because of the increase in user awareness and the ease of functionality, there
    has been an exponential increase in the usage of passcode options to lock Android
    devices. This means that bypassing the device's screen lock during a forensic
    investigation becomes increasingly important. The applicability of the screen
    lock bypass techniques discussed so far is based on the situation. Note that some
    of these methods may result in us making changes to the device. Make sure that
    you test and validate all the steps listed on non-evidentiary Android devices.
    You must have authorization to make the required changes to the device, document
    all steps taken, and be able to describe the steps taken if courtroom testimony
    is required.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 由于用户意识的增加和功能的便利性，使用密码选项锁定安卓设备的使用量呈指数级增长。这意味着在法证调查中绕过设备的屏幕锁定变得越来越重要。迄今为止讨论的屏幕锁定绕过技术的适用性取决于情况。请注意，其中一些方法可能导致我们对设备进行更改。确保您在非证据性安卓设备上测试和验证所有列出的步骤。您必须获得授权对设备进行必要的更改，记录所有采取的步骤，并能够描述采取的步骤，如果需要法庭证词。
- en: 'Currently, there are three types of screen lock mechanisms offered by Android.
    Although there are some devices that have voice-lock, face-lock, and fingerprint-lock
    options, we will limit our discussion to the following three options, since these
    are the most widely used on all Android devices:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，安卓提供了三种屏幕锁定机制。虽然有一些设备提供了语音锁定、面部识别锁定和指纹锁定选项，但我们将限制讨论以下三种选项，因为这些是所有安卓设备上最广泛使用的：
- en: '**Pattern lock**: The user sets a pattern or design on the phone and the same
    pattern must be drawn to unlock the device. Android was the first smartphone to
    introduce a pattern lock.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**图案锁定**：用户在手机上设置一个图案或设计，必须绘制相同的图案才能解锁设备。安卓是第一款引入图案锁定的智能手机。'
- en: '**PIN code**: This is the most common lock option and is found on many mobile
    phones. The PIN code is a four-digit number that needs to be entered to unlock
    the device.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PIN码**：这是最常见的锁定选项，在许多手机上都可以找到。PIN码是一个需要输入的四位数字，用于解锁设备。'
- en: '**Passcode**: This is an alphanumeric passcode. Unlike the PIN, which takes
    four digits, the alphanumeric passcode includes letters as well as digits.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：这是一个包含字母和数字的密码。与需要四位数字的PIN码不同，包含字母和数字的密码更加安全。'
- en: The following section details some techniques you can use to bypass these Android
    lock mechanisms. Depending on the situation, these techniques might help an investigator
    to bypass the screen lock.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分详细介绍了一些绕过这些安卓锁定机制的技术。根据情况，这些技术可能有助于调查人员绕过屏幕锁定。
- en: Using ADB to bypass the screen lock
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用ADB绕过屏幕锁定
- en: If USB debugging appears to be enabled on the Android device, it is wise to
    take advantage of it by connecting with `adb` using a USB connection, as discussed
    in the earlier sections of this chapter. You should connect the device to the
    forensic workstation and issue the `adb` devices command. If the device shows
    up, it implies that USB debugging is enabled. If the Android device is locked,
    you must attempt to bypass the screen lock. The following two methods may allow
    you to bypass the screen lock when USB debugging is enabled.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Android设备上似乎启用了USB调试，最好利用它通过USB连接与`adb`连接，如本章前面讨论的那样。您应该将设备连接到取证工作站并发出`adb`设备命令。如果设备出现，这意味着USB调试已启用。如果Android设备被锁定，您必须尝试绕过屏幕锁定。当USB调试启用时，以下两种方法可能允许您绕过屏幕锁定。
- en: Deleting the gesture.key file
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除gesture.key文件
- en: 'Deleting the `gesture.key` file will remove the pattern lock on the device;
    however, it''s important to note that this will permanently change the device,
    as the pattern lock is gone. This should be considered if you are conducting covert
    operations. The following shows how the process is done:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 删除`gesture.key`文件将删除设备上的图案锁定；然而，重要的是要注意，这将永久改变设备，因为图案锁已经消失。如果您正在进行秘密行动，应该考虑这一点。以下显示了该过程的执行方式：
- en: Connect the device to the forensic workstation (a Windows machine, in our example)
    using a USB cable.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用USB电缆将设备连接到取证工作站（在我们的示例中是Windows机器）。
- en: 'Open the command prompt and execute the following instructions:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符并执行以下指令：
- en: '[PRE12]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Reboot the device. If the pattern lock still appears, just draw any random design
    and the device should unlock without any trouble.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动设备。如果图案锁仍然出现，只需绘制任意设计，设备应该可以轻松解锁。
- en: This method works when the device is rooted. This method may not be successful
    on unrooted devices. Rooting an Android device should not be performed without
    proper authorization, as the device is altered.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 此方法仅在设备已获取root权限时有效。此方法可能在未获取root权限的设备上无法成功。未经适当授权不应对Android设备进行root操作，因为这会改变设备。
- en: Updating the settings.db file
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新settings.db文件
- en: 'To update the `settings.db` file, go through the following steps:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新`settings.db`文件，请按以下步骤操作：
- en: Connect the device to the forensic workstation using a USB cable.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用USB电缆将设备连接到取证工作站。
- en: 'Open the command prompt and execute the following: `/data/data/com.android.providers.settings/databases
    sqlite3 settings.db`:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符并执行以下操作：`/data/data/com.android.providers.settings/databases sqlite3
    settings.db`：
- en: '![](img/856dc999-8d82-45b4-9d57-11c9c6f1abe4.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![](img/856dc999-8d82-45b4-9d57-11c9c6f1abe4.png)'
- en: Exit and reboot the device.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 退出并重新启动设备。
- en: The Android device should be unlocked. If it is not, attempt to remove the `gesture.key`
    as explained earlier.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Android设备应该是解锁的。如果没有解锁，请尝试按照前面解释的方法删除`gesture.key`。
- en: We will have a look at the recovery mode and ADB connection in the following
    section.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一节中查看恢复模式和ADB连接。
- en: Checking for the modified recovery mode and ADB connection
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查修改后的恢复模式和ADB连接
- en: In Android, recovery refers to the dedicated partition where the recovery console
    is present. The two main functions of recovery are deleting all user data and
    installing updates. For instance, when you factory-reset your phone, recovery
    boots up and deletes all the data. Similarly, when updates are to be installed
    on the phone, it is done in recovery mode.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在Android中，恢复是指专用分区，恢复控制台位于其中。恢复的两个主要功能是删除所有用户数据和安装更新。例如，当您恢复出厂设置手机时，恢复启动并删除所有数据。同样，当要在手机上安装更新时，就在恢复模式下进行。
- en: 'There are many enthusiastic Android users who install custom ROM through a
    modified recovery module. This modified recovery module is mainly used to make
    the process of installing custom ROM easy. Recovery mode can be accessed in different
    ways, depending on the manufacturer of the device; information on which method
    is right for which manufacturer''s devices is easily available on the internet.
    Usually, this is done by holding different keys together, such as the Volume button
    and Power button. Once in recovery mode, connect the device to the workstation
    and try to access the `adb` connection. If the device has a recovery mode that
    is not modified, you may not be able to access the `adb` connection. Modified
    recovery versions of the device present the user with different options as shown
    in the following screenshot:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多热心的Android用户通过修改后的恢复模块安装自定义ROM。这个修改后的恢复模块主要用于简化安装自定义ROM的过程。恢复模式可以通过不同的方式访问，具体取决于设备制造商；关于哪种方法适用于哪种制造商的设备的信息在互联网上很容易找到。通常，这是通过同时按下不同的键来完成的，例如音量按钮和电源按钮。一旦进入恢复模式，将设备连接到工作站并尝试访问`adb`连接。如果设备的恢复模式没有被修改，您可能无法访问`adb`连接。设备的修改后的恢复版本向用户提供不同的选项，如下图所示：
- en: '![](img/b241b78f-fe58-44e5-b75a-fd1984664839.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b241b78f-fe58-44e5-b75a-fd1984664839.png)'
- en: Next, we will see how to flash the recovery partition.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将看到如何刷入恢复分区。
- en: Flashing a new recovery partition
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 刷入新的恢复分区
- en: There are mechanisms available to flash the recovery partition of an Android
    device with a modified image. The fastboot utility facilitates this process. Fastboot
    is a diagnostic protocol that comes with the SDK package and is used primarily
    to modify the flash filesystem through a USB connection from a host computer.
    For this, you need to start the device in boot loader mode, in which only the
    most basic hardware initialization is performed.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 有机制可用于使用修改后的镜像刷入Android设备的恢复分区。fastboot实用程序简化了这一过程。Fastboot是一个诊断协议，随SDK软件包一起提供，主要用于通过USB连接从主机计算机修改闪存文件系统。为此，您需要在启动加载程序模式下启动设备，其中只执行最基本的硬件初始化。
- en: Once the protocol is enabled on the device, it will accept a specific set of
    commands that are sent to it via the USB cable using a command line. Flashing
    or rewriting a partition with a binary image stored on the computer is one such
    command that is allowed. Once the recovery is flashed, boot the device in recovery
    mode, mount the `/data` and `/system` partitions, and use `adb` to remove the
    `gesture.key` file. Reboot the phone and you should be able to bypass the screen
    lock; however, this works only if the device bootloader is unlocked. Also, flashing
    permanently alters the device. Instead of flashing, you could use the fastboot
    `boot` command to boot to a recovery image temporarily to delete the key file
    without permanently changing the recovery partition.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦在设备上启用了协议，它将通过命令行接收到的特定一组命令，这些命令是通过USB电缆发送的。刷新或使用存储在计算机上的二进制映像重写分区是允许的一种命令。刷新恢复后，将设备引导到恢复模式，挂载`/data`和`/system`分区，并使用`adb`删除`gesture.key`文件。重新启动手机，您应该能够绕过屏幕锁定；但是，这仅在设备引导加载程序已解锁时才有效。此外，刷新会永久更改设备。您可以使用fastboot
    `boot`命令临时引导到恢复映像以删除密钥文件，而不会永久更改恢复分区。
- en: Using automated tools
  id: totrans-182
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用自动化工具
- en: 'There are several automated solutions available on the market for unlocking
    Android devices. Commercial tools, such as Cellebrite and XRY, are capable of
    bypassing the screen locks, but most of them require USB debugging to be enabled.
    We will now examine how to unlock an Android device using the UFED user lock code
    recovery tool. This tool only works on those devices that support USB OTG. This
    process also requires a UFED camera, Cable No. 500-Bypass lock, and Cable No.
    501-Bypass lock. Once the tool is installed on the workstation, go through the
    following steps to unlock the Android device:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 市场上有几种用于解锁Android设备的自动化解决方案。商业工具，如Cellebrite和XRY，能够绕过屏幕锁定，但大多数工具需要启用USB调试。现在我们将介绍如何使用UFED用户锁代码恢复工具解锁Android设备。该工具仅适用于支持USB
    OTG的设备。此过程还需要UFED摄像头、Cable No. 500-Bypass lock和Cable No. 501-Bypass lock。安装工具后，请按以下步骤解锁Android设备：
- en: 'Run the tool on the workstation and press `1`, as shown in the following screenshot:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工作站上运行该工具，并按照下面的屏幕截图按`1`。
- en: '![](img/d451d87c-63de-4905-a9cb-34ee27dae914.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d451d87c-63de-4905-a9cb-34ee27dae914.png)'
- en: UFED user lock code recovery tool
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: UFED用户锁代码恢复工具
- en: Now, connect side A of Cable No. 500-Bypasslock to a USB port of the workstation.
    Also, connect side B of Cable No. 500-Bypasslock to Cable No. 501- OTG and then
    connect the other end to the device.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将Cable No. 500-Bypasslock的A端连接到工作站的USB端口。还要将Cable No. 500-Bypasslock的B端连接到Cable
    No. 501-OTG，然后将另一端连接到设备。
- en: Once connected, the tool prompts you to select the recovery profile. Select
    `[1] Manually select the recovery profile.`.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接后，该工具会提示您选择恢复配置文件。选择`[1]手动选择恢复配置文件`。
- en: Now, select the lock type used on the device and the recovery profile, and proceed
    by following the instructions on the screen.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，选择设备上使用的锁类型和恢复配置文件，并按照屏幕上的说明进行操作。
- en: After this, make sure that the keypad appears on the device screen and that
    it's ready to accept the PIN code.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，请确保键盘出现在设备屏幕上，并且已准备好接受PIN码。
- en: Close any message windows that may appear. Press `1` and hit *Enter*. Now, make
    five incorrect login attempts by entering random input, and click on Forgot pattern
    at the bottom of the device.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭可能出现的任何消息窗口。按`1`并按*Enter*。现在，通过输入随机输入进行五次错误的登录尝试，并在设备底部单击忘记图案。
- en: Follow the instructions on the screen, wait for the camera window to open, and
    then click on the camera window.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照屏幕上的说明操作，等待摄像头窗口打开，然后单击摄像头窗口。
- en: Use the cursor to select any nonempty area on the device's screen by placing
    the green square over it—for example, select any number on the screen. This is
    used by the tool to detect whether the device is unlocked. Press *Enter* to start
    the process.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用光标通过将绿色方块放在设备屏幕上的任何非空区域上来选择该区域，例如，在屏幕上选择任何数字。这是工具用来检测设备是否已解锁的方法。按*Enter*开始该过程。
- en: The tool will try a number of combinations to unlock the device. Once unlocked,
    it will prompt you to end the process.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该工具将尝试多种组合来解锁设备。一旦解锁，它将提示您结束该过程。
- en: We will now learn about the Android Device Manager and how to unlock a device
    using it.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将学习Android设备管理器以及如何使用它来解锁设备。
- en: Using Android Device Manager
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Android设备管理器
- en: 'Most of the latest Android phones come with a service called Android Device
    Manager, which helps the owner of a device to locate their lost phone. This service
    can also be used to unlock a device; however, this is possible only when you know
    the Google account credentials that are configured on the device. If you have
    access to the account credentials, then follow these steps to unlock the device:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数最新的Android手机都配备了一个名为Android设备管理器的服务，它可以帮助设备所有者找到他们丢失的手机。该服务还可以用于解锁设备；但是，只有在您知道在设备上配置的Google帐户凭据时才能实现。如果您可以访问帐户凭据，那么请按照以下步骤解锁设备：
- en: Visit [http://google.com/android/devicemanager](http://google.com/android/devicemanager)
    on your workstation.
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的工作站上访问[http://google.com/android/devicemanager](http://google.com/android/devicemanager)。
- en: Sign in using the Google account that is configured on the device.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用在设备上配置的Google帐户登录。
- en: 'Select the device you need to unlock and click on Lock, as shown in the following
    screenshot:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您需要解锁的设备，然后单击锁定，如下面的屏幕截图所示：
- en: '![](img/96e9d1fa-43c6-4269-8d04-a531816e05b6.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](img/96e9d1fa-43c6-4269-8d04-a531816e05b6.png)'
- en: Android Device Manager
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: Android设备管理器
- en: Enter a temporary password and click on Lock again.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入临时密码，然后再次单击锁定。
- en: Once it's successful, enter the temporary password on the device to unlock it.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 成功后，在设备上输入临时密码以解锁它。
- en: This can be done without knowing the credentials of the computer that the login
    is saved on (that is, the suspect's PC).
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以在不知道登录保存在哪台计算机上的凭据的情况下完成（即，嫌疑人的PC）。
- en: Bypass using Find My Mobile (for Samsung phones only)
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Find My Mobile绕过（仅适用于三星手机）
- en: Using Find My Mobile is a technique that's worth attempting if you're handling
    a Samsung device; however, it only works if the device owner is already logged
    into the Samsung account on the device and you know the Samsung credentials that
    are configured on the device.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在处理三星设备，使用“查找我的手机”是一种值得尝试的技术；但是，只有在设备所有者已经登录到设备上的三星帐户并且您知道在设备上配置的三星凭据时才能使用。
- en: 'To start the process, access the Find My Mobile service from the web browser
    and then log in using the Samsung account credentials registered on the device,
    as follows:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始该过程，请从Web浏览器访问“查找我的手机”服务，然后使用在设备上注册的Samsung帐户凭据登录，如下所示：
- en: 'Tap on the Lock My Screen option located on the left side.:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于左侧的锁定我的屏幕选项：
- en: '![](img/6bf2591e-f260-40e7-8fb0-50ff9711e467.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6bf2591e-f260-40e7-8fb0-50ff9711e467.png)'
- en: Now, enter any temporary PIN and then tap on the Lock button. (You may also
    see the unlock my screen option for some devices, which also serves the same purpose). The
    phone can now be unlocked with the temporary PIN that was set earlier.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，输入任何临时PIN码，然后点击“锁定”按钮。（对于某些设备，您也可能会看到“解锁我的屏幕”选项，它也具有相同的作用）。现在可以使用之前设置的临时PIN码解锁手机。
- en: Next, let's take a look at a smudge attack.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们来看一下污迹攻击。
- en: Smudge attack
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 指纹攻击
- en: In rare cases, a smudge attack may be used to deduce the password of a touchscreen
    mobile device. This attack relies on identifying the smudges left behind by the
    user's fingers. While this may present a bypass method, it must be said that a
    smudge attack is unlikely to work since most Android devices are touchscreen and
    smudges will also be present from using the device; however, it has been demonstrated
    that, under proper lighting, the smudges that are left behind can be easily detected,
    as shown in the following screenshot.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在极少数情况下，污迹攻击可能用于推断触摸屏移动设备的密码。这种攻击依赖于识别用户手指留下的污迹。虽然这可能提供了一种绕过方法，但必须说，污迹攻击不太可能成功，因为大多数Android设备都是触摸屏，并且使用设备时也会留下污迹；然而，已经证明，在适当的光线下，留下的污迹可以很容易地被检测到，如下截图所示。
- en: 'By analyzing the smudge marks, we can discern the pattern that is used to unlock
    the screen. This attack is more likely to work while discerning the pattern lock
    on the Android device. In some cases, PIN codes can also be recovered depending
    upon the cleanliness of the screen. So, during a forensic investigation, care
    should be taken when the device is first handled to make sure that the screen
    is not touched:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析污迹，我们可以辨别用于解锁屏幕的图案。这种攻击更有可能在识别Android设备上的图案锁时起作用。在某些情况下，根据屏幕的清洁程度，也可以恢复PIN码。因此，在取证调查期间，应该在首次处理设备时注意确保屏幕没有被触摸：
- en: '![](img/53acfd74-b095-4bf7-a99d-10bac648fb6b.png)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![](img/53acfd74-b095-4bf7-a99d-10bac648fb6b.png)'
- en: Smudges visible on a device under proper lighting
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在适当的光线下可见的设备上的污渍
- en: We will now be looking at the next method, which is the forgot password option.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将看一下下一个方法，即忘记密码选项。
- en: Using the forgot password/forgot pattern option
  id: totrans-219
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用忘记密码/忘记图案选项
- en: 'If you know the username and password of the primary Gmail address that is
    configured on the device, you can change the PIN, password, or swipe on the device.
    After making a certain number of failed attempts to unlock the screen, Android
    provides an option called Forgot pattern? or Forgot password?, as shown in the
    following screenshot:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您知道设备上配置的主要Gmail地址的用户名和密码，您可以更改设备上的PIN码、密码或滑动。在尝试多次解锁屏幕失败后，Android会提供一个名为“忘记图案？”或“忘记密码？”的选项，如下截图所示：
- en: '![](img/43b264a2-7044-445f-9ae5-40705fd65345.png)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![](img/43b264a2-7044-445f-9ae5-40705fd65345.png)'
- en: Forgot pattern option on an Android device
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: Android设备上的忘记图案选项
- en: Tap on that link and sign in using the Gmail username and password. This will
    allow you to create a new pattern lock or passcode for the device.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 点击该链接并使用Gmail用户名和密码登录。这将允许您为设备创建新的图案锁或密码。
- en: Note that this works only on devices running Android 4.4 or earlier.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，这仅适用于运行Android 4.4或更早版本的设备。
- en: Bypassing third-party lock screens by booting into safe mode
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绕过第三方锁屏，进入安全模式
- en: 'If the screen lock is a third-party app, rather than the in-built lock, it
    can be bypassed by booting into safe mode and disabling it. To boot into safe
    mode on an Android device 4.1 or later, press and hold the *Power* button until
    the Power options menu appears. Then, press and hold the *Power* button and you''ll
    be prompted to reboot your Android device into safe mode. Tap the OK button, as
    shown in the following screenshot:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 如果屏幕锁是第三方应用程序而不是内置锁，则可以通过进入安全模式并禁用它来绕过它。要在Android 4.1或更高版本的设备上进入安全模式，请按住*电源*按钮直到出现电源选项菜单。然后，按住*电源*按钮，系统会提示您重新启动Android设备进入安全模式。点击确定按钮，如下截图所示：
- en: '![](img/45d280e4-f582-47e0-bd32-d10c8af469f6.png)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![](img/45d280e4-f582-47e0-bd32-d10c8af469f6.png)'
- en: Safe mode in Android
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: Android中的安全模式
- en: Once you're in safe mode, you can disable the third-party lock screen app or
    uninstall it completely. After this, reboot the device and you should be able
    to access it without any lock screen.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 进入安全模式后，您可以禁用第三方锁屏应用程序或完全卸载它。之后，重新启动设备，您应该能够在没有任何锁屏的情况下访问它。
- en: Secure USB debugging bypass using ADB keys
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用ADB密钥进行安全USB调试绕过
- en: As mentioned earlier, while using USB debugging, if the Always allow from this
    computer option is checked, the device will not prompt for authorization in the
    future. This is done by storing certain keys, namely `adbkey` and `adbkey.pub`,
    on the computer. Any attempt to connect to `adb` from an untrusted computer is
    denied. In this case, the `adbkey` and the `adbkey.pub` files can be pulled from
    the suspect's computer and copied to the investigator's workstation. The device
    will then assume that it is communicating with a known, authorized computer. The
    `adbkey` and `adbkey.pub` files can be found at `C:Users<username>.android` on
    Windows machines.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，当使用USB调试时，如果选中了“始终允许从此计算机”选项，设备将不会在将来提示授权。这是通过在计算机上存储某些密钥，即`adbkey`和`adbkey.pub`来完成的。任何尝试从不受信任的计算机连接到`adb`的尝试都将被拒绝。在这种情况下，`adbkey`和`adbkey.pub`文件可以从嫌疑人的计算机中提取并复制到调查人员的工作站。然后，设备将假定它正在与已知的授权计算机通信。`adbkey`和`adbkey.pub`文件可以在Windows机器上的`C:Users<username>.android`中找到。
- en: Secure USB debugging bypass in Android 4.4.2
  id: totrans-232
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Android 4.4.2中的安全USB调试绕过
- en: 'As explained in earlier sections, the secure USB debugging feature introduced
    in Android 4.4.2 allows only authorized workstations to connect to the device;
    however, there''s a bug in this feature, as reported at [https://labs.mwrinfosecurity.com/](https://labs.mwrinfosecurity.com/),
    which allows a user to bypass the Secure USB debugging feature and connect the
    device to any workstation. Here are the steps to follow to bypass Secure USB debugging
    on an Android device:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，Android 4.4.2中引入的安全USB调试功能只允许授权的工作站连接到设备；然而，这个功能存在一个错误，如[https://labs.mwrinfosecurity.com/](https://labs.mwrinfosecurity.com/)所报告的，允许用户绕过安全USB调试功能并将设备连接到任何工作站。以下是绕过Android设备上的安全USB调试的步骤：
- en: On an unlocked device, attempt to use `adb`. An error message will be shown
    by the device.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在解锁的设备上，尝试使用`adb`。设备将显示错误消息。
- en: 'Now, navigate to either the emergency dialer or the lock-screen camera and
    execute the following commands:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，转到紧急拨号器或锁屏相机，并执行以下命令：
- en: '[PRE13]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The confirmation dialog will be triggered and the workstation can now be authorized
    without unlocking the device. The confirmation dialog box will be displayed on
    the emergency dialer, as shown in the following screenshot:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将触发确认对话框，工作站现在可以在不解锁设备的情况下获得授权。确认对话框将显示在紧急拨号器上，如下截图所示：
- en: '![](img/c1ae9227-03b0-4a25-b965-ae68de0b7608.png)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c1ae9227-03b0-4a25-b965-ae68de0b7608.png)'
- en: Secure USB debugging in Android 4.2.2
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在Android 4.2.2中的安全USB调试
- en: 'Once connected to the device through `adb`, try to bypass the lock screen using
    the following command:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过`adb`连接到设备后，尝试使用以下命令绕过锁定屏幕：
- en: '[PRE14]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Next, let's see how to bypass the screen lock by crashing the lock screen.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们看看如何通过崩溃锁定屏幕来绕过屏幕锁定。
- en: Crashing the lock screen UI in Android 5.x
  id: totrans-243
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Android 5.x中崩溃锁定屏幕UI
- en: 'On devices running Android 5.0 to 5.1.1, the password lock screen (not the
    PIN or pattern locks) can be bypassed by crashing the screen UI. This can be accomplished
    by performing the following steps, as explained at [https://android.gadgethacks.com/](https://android.gadgethacks.com/):'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行Android 5.0至5.1.1的设备上，可以通过崩溃屏幕UI来绕过密码锁屏（而不是PIN或图案锁）。可以通过执行以下步骤来实现，如[https://android.gadgethacks.com/](https://android.gadgethacks.com/)所述：
- en: Click on the Emergency Call option on the lock screen and then enter any random
    input (for example, 10 asterisks) on the dialer screen.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在锁定屏幕上点击紧急呼叫选项，然后在拨号屏幕上输入任意随机输入（例如，10个星号）。
- en: 'Double-tap the field to highlight the entered text, as shown in the following
    screenshot, and select Copy. Now, paste it into the same field:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击字段以突出显示输入的文本，如下截图所示，并选择复制。现在，将其粘贴到相同的字段中：
- en: '![](img/efbd2799-8164-4768-8b11-fc83fec2cc35.png)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![](img/efbd2799-8164-4768-8b11-fc83fec2cc35.png)'
- en: Crashing lock screen UI
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 崩溃锁定屏幕UI
- en: Repeat this process to add more characters. Do this until the field no longer
    highlights the characters on double-tapping.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复此过程以添加更多字符。直到双击字段不再突出显示字符为止。
- en: Go back to the lock screen and open the camera shortcut. Now, pull down the
    notifications screen and tap the Settings icon. You will then be prompted to enter
    a password.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到锁定屏幕，打开相机快捷方式。现在，下拉通知屏幕，点击设置图标。然后会提示你输入密码。
- en: Press and hold the input field and select Paste, repeat this process multiple
    times. Once enough characters are pasted into the field, the lock screen will
    crash, allowing you to access the device.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按住输入字段并选择粘贴，多次重复此过程。一旦足够的字符被粘贴到字段中，锁定屏幕将崩溃，允许您访问设备。
- en: Now, let's look at some more techniques.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看一些更多的技术。
- en: Other techniques
  id: totrans-253
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他技术
- en: All of the aforementioned techniques and available commercial tools are useful
    to any forensic examiner, like you, trying to get access to the data on an Android
    device; however, there could be situations where none of these techniques work.
    To obtain a complete physical image of the device, techniques such as chip-off
    and JTAG may be required when commercial and open source solutions fail. A short
    description of these techniques is included here.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 所有上述技术和可用的商业工具对任何法医检查员都是有用的，比如你，试图访问Android设备上的数据；然而，可能会出现这些技术都无法使用的情况。在商业和开源解决方案失败时，可能需要使用芯片脱落和JTAG等技术来获取设备的完整物理镜像。这里包括了这些技术的简要描述。
- en: While the chip-off technique removes the memory chip from a circuit and tries
    to read it, the JTAG technique involves probing the JTAG **test access ports**
    (**TAPs**) and soldering connectors to the JTAG ports in order to read data from
    the device memory. The chip-off technique is more destructive because, once the
    chip is removed from a device, it is difficult to restore the device to its original
    functional state. Also, expertise is needed to carefully remove the chip from
    the device by desoldering the chip from the circuit board. The heat required to
    remove the chip can also damage or destroy the data stored on that chip, which
    means that this technique should be used only when the data is not retrievable
    by open source or commercial tools or the device is damaged beyond repair. When
    using the JTAG technique, JTAG ports help you to access the memory chip to retrieve
    a physical image of the data without needing to remove the chip. To turn off screen
    lock on a device, you can identify where the lock code is stored in the physical
    memory dump, turn off the locking, and copy that data back to the device. Commercial
    tools, such as Cellebrite Physical Analyzer, can accept `.bin` files from chip-off
    and JTAG acquisitions and crack the lock code for you. Once the code is either
    manually removed or cracked, you can analyze the device using normal techniques.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 芯片取下技术是从电路中取下存储芯片并尝试读取它，而JTAG技术涉及探测JTAG测试访问端口（TAPs）并焊接连接器到JTAG端口，以便从设备存储器中读取数据。芯片取下技术更具破坏性，因为一旦芯片从设备中取下，就很难将设备恢复到其原始的功能状态。此外，需要专业知识小心地从电路板上去除芯片。取下芯片所需的热量也可能损坏或破坏存储在芯片上的数据，这意味着只有在数据无法通过开源或商业工具检索或设备已经损坏无法修复时才应使用这种技术。使用JTAG技术时，JTAG端口帮助您访问存储芯片，以检索数据的物理图像，而无需取下芯片。要关闭设备上的屏幕锁定，您可以确定锁定代码存储在物理存储转储中的位置，关闭锁定，并将数据复制回设备。商业工具，如Cellebrite
    Physical Analyzer，可以接受来自芯片取下和JTAG获取的`.bin`文件，并为您破解锁定代码。一旦代码被手动移除或破解，您可以使用正常的技术分析设备。
- en: Both the chip-off and JTAG techniques require extensive research and experience
    to be attempted on a real device. A great resource for JTAG and chip-off on devices
    can be found at [https://forensicswiki.xyz/page/Main_Page](https://forensicswiki.xyz/page/Main_Page).
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 芯片取下和JTAG技术都需要进行广泛的研究和经验，才能在真实设备上尝试。关于设备上的JTAG和芯片取下的重要资源可以在[https://forensicswiki.xyz/page/Main_Page](https://forensicswiki.xyz/page/Main_Page)找到。
- en: In this section, we looked into various ways to bypass a screen lock on Android
    device. We will now learn what Android rooting is all about.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们研究了绕过Android设备屏幕锁定的各种方法。现在我们将了解什么是Android Root。
- en: Gaining root access
  id: totrans-258
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获得Root访问权限
- en: As a mobile device forensic examiner, it is essential for you to know everything
    that relates to twisting and tweaking the device. This will help you to understand
    the internal workings of the device in detail and understand many issues that
    you may face during your investigation. Rooting Android phones has become a common
    phenomenon, and you can expect to encounter rooted phones during forensic examinations.
    Where applicable, you may also need to root the device in order to acquire data
    for forensic examination. This means that it's important to know the ins and outs
    of rooted devices and how they are different from other phones. The following
    sections cover information about Android rooting and other related concepts.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 作为移动设备取证检查员，了解与扭曲和调整设备有关的一切是至关重要的。这将帮助您详细了解设备的内部运作，并了解您在调查过程中可能遇到的许多问题。对Android手机进行Root已经成为一种常见现象，您可以预期在取证检查中会遇到已Root的手机。在适用的情况下，您可能还需要对设备进行Root以获取取证检查的数据。这意味着了解Root设备的方方面面以及它们与其他手机的区别非常重要。以下部分涵盖了有关Android
    Root和其他相关概念的信息。
- en: What is rooting?
  id: totrans-260
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是Rooting？
- en: The default administrative account in Unix-like operating systems is called
    **root**. In Linux, the root user has the power to start/stop any system service,
    edit/delete any file, change the privileges of other users, and so on. We have
    already learned that Android uses the Linux kernel, and so most Linux concepts are
    applicable to Android as well; however, most Android phones do not let you log
    in as a root user by default.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 类Unix操作系统中的默认管理帐户称为**root**。在Linux中，root用户有权启动/停止任何系统服务，编辑/删除任何文件，更改其他用户的权限等。我们已经了解到Android使用Linux内核，因此大多数Linux概念也适用于Android；但是，大多数Android手机默认情况下不允许您以root用户身份登录。
- en: Rooting an Android phone is all about gaining access to the device to perform
    actions that are not normally allowed on the device. Manufacturers want devices
    to function in a certain manner for normal users. Rooting a device may void a
    warranty, since using root opens the system to vulnerabilities and provides the
    user with superuser capabilities.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: Rooting Android手机就是为了获得对设备的访问权限，以执行在设备上通常不允许的操作。制造商希望设备对普通用户以某种方式进行功能。Rooting设备可能会使保修失效，因为使用Root会使系统面临漏洞，并为用户提供超级用户功能。
- en: Imagine a malicious application gaining access to an entire Android system with
    root access. Remember that, in Android, each application is treated as a separate
    user and is issued a UID. This means that applications have access to limited
    resources and the concept of application isolation is enforced. Essentially, rooting
    an Android device allows superuser capabilities and provides open access to the
    Android device.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，一个恶意应用程序获得了对整个Android系统的Root访问权限。请记住，在Android中，每个应用程序都被视为单独的用户，并被分配一个UID。这意味着应用程序只能访问有限的资源，并且应用程序隔离的概念得到了执行。基本上，Rooting
    Android设备允许超级用户功能，并为Android设备提供开放访问。
- en: Superuser capabilities are similar to the admin capability on a Windows machine,
    and give privileged access to perform actions that may not be done by a normal
    user. In mobiles, this superuser access is disabled by design, but rooting a phone
    allows you to gain this privilege.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 超级用户权限类似于Windows机器上的管理员权限，并且允许特权访问以执行普通用户无法执行的操作。在移动设备中，这种超级用户访问是被设计禁用的，但对手机进行root可以让您获得这种特权。
- en: Understanding the rooting process
  id: totrans-265
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解root过程
- en: Even though hardware manufacturers try to impose enough restrictions to restrict
    access to the root, hackers have always found different ways to get access to
    the root. The process of rooting varies depending on the underlying device manufacturer;
    however, rooting any device usually involves exploiting a security bug in the
    device's firmware, then copying the `su` (superuser) binary to a location in the
    current process's path (`/system/xbin/su`), and granting it executable permissions
    with the `chmod` command.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管硬件制造商试图施加足够的限制来限制对root的访问，但黑客们总是找到不同的方法来获取root权限。获取root权限的过程取决于底层设备制造商的不同；然而，root任何设备通常涉及利用设备固件中的安全漏洞，然后将`su`（超级用户）二进制文件复制到当前进程路径中的位置（`/system/xbin/su`），并使用`chmod`命令授予它可执行权限。
- en: For the sake of simplicity, imagine that an Android device has three to four
    partitions, which run programs not entirely related to Android (Android being
    one among them).
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简单起见，想象一下一个Android设备有三到四个分区，其中运行的程序与Android并不完全相关（Android只是其中之一）。
- en: The boot loader is present in the first partition and is the first program that
    runs when the phone is powered on. The primary job of this boot loader is to boot
    other partitions and load the Android partition, commonly referred to as ROM by
    default. To see the boot loader menu, a specific key combination is required,
    such as holding the power button and pressing the volume up button. This menu
    provides options for you to boot into other partitions, such as the recovery partition.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 引导加载程序位于第一个分区中，是手机开机时运行的第一个程序。这个引导加载程序的主要工作是引导其他分区并加载Android分区，默认情况下通常称为ROM。要查看引导加载程序菜单，需要特定的按键组合，例如按住电源按钮并按音量上按钮。此菜单提供选项，让您可以引导到其他分区，如恢复分区。
- en: 'The recovery partition deals with installing upgrades to the phone, which are
    written directly to the Android ROM partition. This is the mode that you see when
    you install any official update on the device. Device manufacturers make sure
    that only official updates are installed through the recovery partition. This
    means that bypassing this restriction would allow you to install/flash any unlocked
    Android ROM. Modified recovery programs are those that not only allow an easier
    rooting process, but also provide various options that are not seen in the normal
    recovery mode. The following screenshot shows the normal recovery mode:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复分区处理安装手机升级的工作，这些升级直接写入Android ROM分区。这是您在设备上安装任何官方更新时看到的模式。设备制造商确保只有通过恢复分区安装官方更新。这意味着绕过此限制将允许您安装/刷写任何解锁的Android
    ROM。修改后的恢复程序不仅允许更容易的root过程，还提供了在正常恢复模式中看不到的各种选项。以下截图显示了正常恢复模式：
- en: '![](img/276340e8-f14d-469a-969a-61d74a747da6.png)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![](img/276340e8-f14d-469a-969a-61d74a747da6.png)'
- en: Normal Android system recovery mode
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 正常的Android系统恢复模式
- en: 'The following screenshot shows the modified recovery mode:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了修改后的恢复模式：
- en: '![](img/b2aad127-aa2e-48cd-94df-bc7dab921af8.png)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b2aad127-aa2e-48cd-94df-bc7dab921af8.png)'
- en: The modified recovery mode
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 修改后的恢复模式
- en: The most commonly used recovery program in the Android world is Clockwork recovery,
    also called **ClockworkMod**. Most rooting methods begin by flashing a modified
    recovery to the recovery partition. After that, you can issue an update, which
    can root the device; however, you don't need to perform all the actions manually,
    as software is available for most models that can root your phone with a single
    click.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 在Android世界中最常用的恢复程序是Clockwork恢复，也称为**ClockworkMod**。大多数root方法都是通过向恢复分区刷写修改后的恢复开始的。之后，您可以发出更新，这可以对设备进行root；但是，您不需要手动执行所有操作，因为大多数型号都提供了可以一键root您的手机的软件。
- en: Starting from Android 7.x, Google started strictly enforcing **verified boot**
    on devices. Verified boot guarantees that the software on the device is not modified
    before booting into the normal mode. This is implemented in such a way that each
    stage verifies the integrity and authenticity of the next stage before executing
    it. If a particular partition or segment is modified, the integrity check fails
    and the mobile may not boot into normal mode. More information about verified
    boot can be found at [https://source.android.com/security/verifiedboot/verified-boot](https://source.android.com/security/verifiedboot/verified-boot).
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 从Android 7.x开始，Google开始严格执行设备上的**验证启动**。验证启动保证设备上的软件在启动到正常模式之前没有被修改。这是以这样一种方式实现的，即每个阶段在执行之前都会验证下一个阶段的完整性和真实性。如果特定分区或段被修改，完整性检查将失败，手机可能无法启动到正常模式。有关验证启动的更多信息，请访问[https://source.android.com/security/verifiedboot/verified-boot](https://source.android.com/security/verifiedboot/verified-boot)。
- en: This also means that rooting such Android devices is going to be extremely difficult
    because rooting involves tweaking the Android OS. Marshmallow was the first Android
    version to provide alerts on system integrity, but since Android 7.x, this has
    been made mandatory.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 这也意味着对这些Android设备进行root将会非常困难，因为root涉及调整Android操作系统。Marshmallow是第一个提供系统完整性警报的Android版本，但自Android
    7.x以来，这已成为强制性的。
- en: Rooting an Android device
  id: totrans-278
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对Android设备进行root
- en: We will now look at the different methods available to root an Android device.
    The primary factor that influences your choice of method is whether the underlying
    boot loader is locked or unlocked. Gaining root access on a device with an unlocked
    boot loader is very easy, while gaining root access to a device with a locked
    boot loader is not so straightforward, which means that unlocking your Android
    phone’s bootloader is often the first step to rooting and flashing custom ROMs.
    This can be done either through fastboot mode (discussed in earlier sections)
    or by following a vendor-specific boot loader unlock procedure. Once the device
    bootloader is unlocked, the next step is to copy the `su` binary and grant it
    executable permissions. This can be done in many ways.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将看看root Android设备的不同方法。影响您选择方法的主要因素是底层引导加载程序是否已锁定。在具有解锁引导加载程序的设备上获得root访问权限非常容易，而在具有锁定引导加载程序的设备上获得root访问权限则不那么直接，这意味着解锁Android手机的引导加载程序通常是rooting和刷写自定义ROM的第一步。这可以通过fastboot模式（在前面的部分中讨论）或按照特定供应商的引导加载程序解锁过程来完成。一旦设备的引导加载程序已解锁，下一步是复制`su`二进制文件并授予其可执行权限。有很多种方法可以做到这一点。
- en: 'The following is how to root a Samsung Galaxy S7 (International SM-G930F/FD/X,
    Korean SM-G930K/L/S, and Canadian SM-G930W8 Exynos models):'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何root三星Galaxy S7（国际版SM-G930F/FD/X，韩国版SM-G930K/L/S和加拿大版SM-G930W8 Exynos型号）：
- en: Make sure OEM unlock is enabled in the Developer options.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保在开发者选项中启用OEM解锁。
- en: Download ODIN (available at [https://build.nethunter.com/samsung-tools/Odin_3.12.3.zip](https://build.nethunter.com/samsung-tools/Odin_3.12.3.zip))
    and extract the contents of the archive to the directory of your choice.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载ODIN（可在[https://build.nethunter.com/samsung-tools/Odin_3.12.3.zip](https://build.nethunter.com/samsung-tools/Odin_3.12.3.zip)找到），并将存档内容提取到您选择的目录中。
- en: Download the TWRP image (available at [https://twrp.me/samsung/samsunggalaxys7.html](https://twrp.me/samsung/samsunggalaxys7.html)).
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载TWRP镜像（可在[https://twrp.me/samsung/samsunggalaxys7.html](https://twrp.me/samsung/samsunggalaxys7.html)找到）。
- en: Reboot your device into download mode. To do this, hold the Volume down + Home
    buttons while your device reboots. Once you see the download mode warning screen,
    press Volume up to continue.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将您的设备重新启动到下载模式。要做到这一点，当您的设备重新启动时，按住音量减+主页按钮。一旦看到下载模式警告屏幕，请按音量上键继续。
- en: Start Odin and put the TWRP image in the AP slot; don't forget to disable Auto-Reboot.
    Start flashing the recovery.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 启动Odin并将TWRP镜像放入AP插槽；不要忘记禁用自动重启。开始刷写恢复。
- en: To exit download mode, hold Volume down + Home + Power; when the screen blanks,
    immediately change Volume down to Volume up.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要退出下载模式，请按住音量减+主页+电源键；当屏幕变黑时，立即将音量减换成音量加。
- en: Allow system modifications by swiping right.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过向右滑动允许系统修改。
- en: Download SuperSU (available at [https://download.chainfire.eu/supersu](https://download.chainfire.eu/supersu)).
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载SuperSU（可在[https://download.chainfire.eu/supersu](https://download.chainfire.eu/supersu)找到）。
- en: Transfer the archive with SuperSU to the device via MTP and install it via the
    corresponding TWRP option.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过MTP将带有SuperSU的存档传输到设备，并通过相应的TWRP选项进行安装。
- en: 'Rooting is a highly device-specific process and hence the forensic investigator
    needs to be cautious before applying these techniques on any Android device. Rooting
    a device has both advantages and disadvantages associated with it. The following
    are the advantages of rooting:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: Rooting是一个高度特定于设备的过程，因此取证调查人员在对任何Android设备应用这些技术之前需要谨慎。对设备进行root处理既有优点也有缺点。以下是rooting的优点：
- en: Rooting allows modification of the software on the device to the deepest level—for
    example, you can overclock or underclock the device's CPU.
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Rooting允许修改设备上的软件到最深层次，例如，您可以对设备的CPU进行超频或降频。
- en: It allows restrictions imposed on the device by carriers, manufacturers, and
    so on, to be bypassed.
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它允许绕过运营商、制造商等对设备施加的限制。
- en: For extreme customization, new customized ROMs can be downloaded and installed.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于极端定制，可以下载并安装新的定制ROM。
- en: 'The following are the disadvantages of rooting:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是rooting的缺点：
- en: Rooting a device must be done with extreme care as errors may result in irreparable
    damage to the software on the phone, turning the device into a useless brick.
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对设备进行root处理必须非常小心，因为错误可能导致手机软件无法修复，使设备变成无用的砖头。
- en: Rooting might void the warranty of a device.
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Rooting可能会使设备的保修失效。
- en: Rooting results in increased exposure to malware and other attacks. Malware
    with access to the entire Android system can create havoc.
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Rooting会增加对恶意软件和其他攻击的暴露。具有对整个Android系统访问权限的恶意软件可能会造成严重破坏。
- en: 'Once the device is rooted, applications such as the **Superuser app** are available
    to provide and deny root privileges. This app helps you to grant and manage superuser
    rights on the device, as shown in the following screenshot:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦设备被rooted，诸如**超级用户应用**之类的应用程序就可以提供和拒绝root权限。该应用程序可以帮助您在设备上授予和管理超级用户权限，如下面的屏幕截图所示：
- en: '![](img/d7232d9e-6d6f-415a-b11f-fad93ceda817.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d7232d9e-6d6f-415a-b11f-fad93ceda817.png)'
- en: Application requesting root access
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序请求root访问权限
- en: We will now look at root access.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看看root访问权限。
- en: Root access - ADB shell
  id: totrans-302
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Root访问权限 - ADB shell
- en: 'A normal Android phone does not allow you to access certain directories and
    files on the device. For example, try to access the `/data/data` folder on an
    Android device that is not rooted. You will see the following message:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 普通的Android手机不允许您访问设备上的某些目录和文件。例如，尝试在未root的Android设备上访问`/data/data`文件夹。您将看到以下消息：
- en: '![](img/a8a87e66-a5db-4249-b65a-61d8702c50f8.png)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a8a87e66-a5db-4249-b65a-61d8702c50f8.png)'
- en: Permission denial without root access
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 未经root访问权限的权限拒绝
- en: 'On a rooted phone, you can run the `adb` shell as root by issuing the following
    command:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 在rooted手机上，您可以通过发出以下命令以root身份运行`adb` shell：
- en: '[PRE15]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The following screenshot shows the output of the preceding command:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了前面命令的输出：
- en: '![](img/0139ceda-331a-4745-bbb0-b8658299a245.png)'
  id: totrans-309
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0139ceda-331a-4745-bbb0-b8658299a245.png)'
- en: Successful execution of shell command on a rooted device
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 在rooted设备上成功执行shell命令
- en: Thus, rooting a phone enables you to access folders and data that are otherwise
    not accessible. Also note that `#` symbolizes root or superuser access, while
    `$` reflects a normal user, as shown in the preceding command lines.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，对手机进行root操作可以让您访问通常无法访问的文件夹和数据。还要注意，`#`符号表示root或超级用户访问权限，而`$`表示普通用户，如前面的命令行所示。
- en: Android 7.0 (Nougat) and later versions support **file-based encryption** (**FBE**),
    which allows the encryption of different files with different keys. For a forensic
    investigator like you, it is important to note that it is not possible to apply
    a permanent root to an FBE-enabled device for acquisition purposes. Instead, it
    is recommended that you use a custom recovery methodology, because the recovery
    partition runs with root privileges.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 安卓7.0（牛轧糖）及更高版本支持**基于文件的加密**（**FBE**），允许使用不同的密钥加密不同的文件。对于像您这样的取证调查人员，重要的是要注意，不可能对启用FBE的设备应用永久的root以进行获取。相反，建议您使用自定义恢复方法，因为恢复分区以root权限运行。
- en: Summary
  id: totrans-313
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we learned how to set up a proper forensic workstation before
    conducting investigations on an Android device. Start with a sterile forensic
    workstation that has the necessary basic software and device drivers installed
    on it. If the method of forensic acquisition requires the Android device to be
    unlocked, you need to determine the best method by which to gain access to the
    device. If the device has the USB debugging feature enabled, then bypassing the
    screen-lock is just a cakewalk. We learned about the various screen lock bypass
    techniques and helped you to determine which one to use under different circumstances.
    Depending on the forensic acquisition method and the scope of the investigation,
    rooting the device should provide complete access to the files present on the
    device. We also learned about rooting and how it can be used to gain complete
    access to the device's filesystem and perform actions that are not normally allowed.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了如何在对安卓设备进行调查之前设置适当的取证工作站。首先要有一个干净的取证工作站，上面安装了必要的基本软件和设备驱动程序。如果取证获取的方法需要解锁安卓设备，你需要确定最佳的方法来获取设备访问权限。如果设备启用了USB调试功能，那么绕过屏幕锁定就很容易。我们学习了各种屏幕锁定绕过技术，并帮助您确定在不同情况下使用哪种技术。根据取证获取的方法和调查的范围，对设备进行root操作应该可以完全访问设备上的文件。我们还学习了关于root操作以及如何使用它来完全访问设备文件系统并执行通常不允许的操作。
- en: Now that the basic concepts of gaining access to an Android device have been
    covered, we will cover acquisition techniques and describe how data is pulled
    using each method in [*Chapter 9*](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，已经涵盖了获取安卓设备访问权限的基本概念，我们将介绍获取技术，并描述如何使用每种方法提取数据，详见《第9章》《安卓数据提取技术》。
