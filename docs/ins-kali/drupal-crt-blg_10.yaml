- en: Chapter 10. Running Your Website
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章。运行您的网站
- en: By now, the vast majority of the development for the new site is complete! You
    should also feel confident that, from a development perspective, you can respond
    to whatever demands the site throws at you and work with Drupal with a high degree
    of proficiency. Like all things in the computing world, however, it is never sufficient
    to build something and then leave your creation to run by itself. There is always
    work to be done to ensure that everything runs smoothly.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，新网站的大部分开发工作已经完成！您还应该对从开发角度来看，能够应对网站提出的任何需求并且能够高效地使用Drupal感到自信。然而，就像计算世界中的所有事物一样，仅仅构建出某些东西然后让您的创作自行运行是不够的。总是有工作要做，以确保一切运行顺利。
- en: Often, you will find that there are certain jobs that need to be performed every
    now and then that are not specifically related to Drupal, but are intrinsic to
    working with websites in general. These tasks can vary greatly in nature, but
    all those discussed here will be useful at some stage during the life of your
    website, even if you don't need them right now.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您会发现有一些工作需要定期执行，这些工作并不特别与Drupal相关，但是与一般网站工作有关。这些任务的性质各不相同，但在您的网站生命周期中的某个阶段，这里讨论的所有任务都将是有用的，即使您现在不需要它们。
- en: One of the problems with presenting a chapter like this is that we can't possibly
    hope to cover each and every nuance of the huge array of different platforms on
    which Drupal can be run. Internet Service Providers (ISPs) offer wildly varying
    packages, which can either be totally bereft of any type of helpful functionality,
    or packed full with all the latest gadgets—most ISPs offer a large variety of
    packages under one roof.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 提出这样一章的问题之一是，我们不可能希望覆盖Drupal可以运行的各种不同平台的每一个微妙之处。互联网服务提供商（ISP）提供各种各样的套餐，有些可能完全没有任何有用的功能，而有些则装满了最新的小工具——大多数ISP在一个平台下提供各种各样的套餐。
- en: Because of this, we will look at functionality that is in common use and that,
    in the event you do not have access to the same software, will clearly demonstrate
    the tasks you need to perform so that you can still successfully operate with
    the software you *do have access to*. For example, by using the Apache2Triad package,
    we already have certain useful technologies that we can make use of on the development
    machine, such as phpMyAdmin.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们将研究常用的功能，如果您无法访问相同的软件，将清楚地演示您需要执行的任务，以便您仍然可以成功地使用您*可以访问的*软件。例如，通过使用Apache2Triad软件包，我们已经在开发机器上使用了某些有用的技术，比如phpMyAdmin。
- en: Note
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: It may be helpful to read through this chapter before selecting a hosting package
    (assuming you haven't already) so that you can get a feel for the type of functionality
    that you will need in the future.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择托管套餐之前（假设您还没有选择），阅读本章可能会有所帮助，这样您就可以了解将来需要的功能类型。
- en: 'There are also a few other web-related activities inherent to Drupal that we
    should take the time to look over quickly. As a result, this chapter will talk
    about:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些与Drupal相关的其他网络活动，我们应该花时间快速浏览一下。因此，本章将讨论：
- en: Making backups
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行备份
- en: Cron and scheduled tasks
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cron和定时任务
- en: Throttling
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限速
- en: Patching
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修补
- en: Website activities—including search engine optimization and user maintenance
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站活动——包括搜索引擎优化和用户维护
- en: Armed with the information presented in this the final chapter, you will be
    a fully equipped Drupal-website administrator. However, the experience you gain
    from running a live website in itself should prove to be far more valuable than
    this humble book. Hopefully, you will find the entire experience richly rewarding
    and share your hard-won knowledge with the rest of the community in the future.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的最后一章中提供的信息的支持下，您将成为一个装备齐全的Drupal网站管理员。然而，您从运行实时网站中获得的经验本身应该比这本谦逊的书更有价值。希望您会发现整个经验非常有价值，并在未来与社区的其他成员分享您辛苦获得的知识。
- en: We're on the home straight, so let's get on with it.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经接近尾声，让我们继续下去吧。
- en: Backups
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 备份
- en: There are plenty of reasons to make backups of both the file system and database.
    As mentioned several times throughout the course of the book, you should back
    up anything that is at risk of being damaged whenever you modify code, or add
    a new module, or even upgrade versions of Drupal. It sounds like a real pain to
    do this because the vast majority of the time, nothing goes wrong with the application.
    However, sooner or later, for some unfathomable reason, if you don't make backups,
    you *will* get stung in precisely the most painful spot.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 有很多理由备份文件系统和数据库。正如本书中多次提到的那样，您应该备份任何在修改代码、添加新模块，甚至升级Drupal版本时有风险受损的内容。这听起来像是一件真正痛苦的事情，因为绝大多数情况下，应用程序都不会出现问题。然而，迟早，由于某种难以理解的原因，如果您不进行备份，您*将*在最痛苦的地方受到伤害。
- en: Most especially, corrupting or breaking a database, which in turn leads to a
    loss of precious data, can be a real pain in the… back end of your application!
    So, while it is fairly easy to back up the files on the file system by simply
    making copies of the directories in question, or indeed copying the entire `drupal`
    folder (whatever you have named it), it is of paramount importance that you learn
    how to back up the database too, because this is not as trivial—it will become
    easy with practice, though.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 尤其是，损坏或破坏数据库，进而导致宝贵数据的丢失，可能会让您的应用程序后端真正痛苦！因此，虽然通过简单地复制相关目录或整个`drupal`文件夹（无论您将其命名为什么）很容易备份文件系统上的文件，但您学会如何备份数据库同样至关重要，因为这并不是一件微不足道的事情——不过随着实践，这将变得容易。
- en: Before continuing, it is important to have a *strategy* for backing up files,
    folders, and data. It is good idea to back up the entire site at regular intervals,
    as well as backing up the database even more frequently. These backups should
    be clearly marked so that you know when they were made, making it easy to determine
    which one to use in the event of some sort of disaster. You might also consider
    holding these backups away from the main file system, perhaps on a CD, so that
    if something really bad happens, you don't have to rely on your host's disaster-recovery
    policy; you have your own.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，备份文件、文件夹和数据的*策略*是很重要的。定期备份整个站点是个好主意，更频繁地备份数据库更好。这些备份应该清楚地标记，这样你就知道它们是何时制作的，这样在发生某种灾难时就很容易确定要使用哪一个。你可能还考虑将这些备份保存在主文件系统之外，也许是在CD上，这样如果发生真正糟糕的事情，你就不必依赖于主机的灾难恢复政策；你有自己的备份。
- en: There are two ways of backing up your database (or any part of it) that we will
    consider here. One way is to make use of phpMyAdmin, which comes as part of the
    Apache2Triad package. Let's start with that.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在这里考虑两种备份数据库（或其中任何部分）的方法。一种方法是使用作为Apache2Triad软件包的一部分的phpMyAdmin。让我们从这开始。
- en: phpMyAdmin
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: phpMyAdmin
- en: phpMyAdmin is an exceptionally popular and commonplace tool for interacting
    with MySQL via the Web. Instead of having to learn how to use the MySQL command-line
    client, phpMyAdmin provides us with a graphical interface, which makes it a lot
    easier to view and maintain databases tables and content. Issuing commands is
    also made easier with the interface for many of the most commonplace data-related
    tasks.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: phpMyAdmin是一个非常受欢迎和常见的工具，用于通过Web与MySQL进行交互。与学习如何使用MySQL命令行客户端不同，phpMyAdmin为我们提供了一个图形界面，这样就更容易查看和维护数据库表和内容。对于许多最常见的与数据相关的任务，界面也使得发出命令更容易。
- en: 'The following steps can be followed in order to create a backup with phpMyAdmin:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤可以用来使用phpMyAdmin创建备份：
- en: Log into phpMyAdmin and select the relevant Drupal database.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录phpMyAdmin并选择相关的Drupal数据库。
- en: Click on the **Export** tab along the top of the page, and set up the options
    as shown here:![phpMyAdmin](graphics/1800_10_01.jpg)
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击页面顶部的**导出**选项卡，并设置如下选项：![phpMyAdmin](graphics/1800_10_01.jpg)
- en: In the screenshot, all the tables were selected for backup, all the Structure
    checkboxes were selected in order to prevent us having to manually drop a corrupted
    database, and a useful name (which automatically contains the database name once
    the backup file is generated) was provided—appending the date as shown is a good
    idea as it will help you to keep track of which backup is which.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在屏幕截图中，所有表都被选中备份，所有结构复选框也被选中，以防止我们不得不手动删除损坏的数据库，并提供了一个有用的名称（一旦生成备份文件，自动包含数据库名称），如图所示添加日期是个好主意，这将帮助你跟踪备份的内容。
- en: Click **Go** once you are satisfied with your options, and this will then create
    a SQL file (although there are other formats to choose from such as LaTeX or XML)
    from which you can recreate the database if needed.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你对你的选项感到满意，点击**Go**，然后这将创建一个SQL文件（虽然还有其他格式可供选择，如LaTeX或XML），你可以根据需要重新创建数据库。
- en: 'Once you have a backup file, it is a simply matter of causing MySQL to run
    its contents in order to recreate the database. In order to do this, click on
    the **SQL** tab at the top of the page, and enter the name of the `.sql` file
    you would like to run against the database, as shown here:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你有了备份文件，只需让MySQL运行其内容以重新创建数据库。为了做到这一点，点击页面顶部的**SQL**选项卡，并输入你想要运行的`.sql`文件的名称，如图所示：
- en: '![phpMyAdmin](graphics/1800_10_02.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![phpMyAdmin](graphics/1800_10_02.jpg)'
- en: 'That makes life fairly simple, but it isn''t the only way. If you have gotten
    used to using the command line, or simply prefer it, then we have already seen
    how it is done, when we issued the command to load the original database:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得生活相当简单，但这并不是唯一的方法。如果你已经习惯使用命令行，或者只是喜欢它，那么我们已经看到了如何做，当我们发出命令加载原始数据库时：
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You would simply modify the path and filename to reflect the specifics of your
    new backup file, like so:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 你只需修改路径和文件名以反映你的新备份文件的具体情况，如下所示：
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Another way of creating backups is by using the `mysqldump` utility from the
    command line.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种创建备份的方法是使用命令行中的`mysqldump`实用程序。
- en: The mysqldump Utility
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: mysqldump实用程序
- en: It is probably worthwhile spending some time using this because it provides
    greater flexibility should you ever need to perform anything out of the ordinary.
    I will confess, though, that for most database‑related tasks phpMyAdmin will perform
    admirably. If you don't have access to phpMyAdmin on your hosted site, or if you
    are keen to get to know `mysqldump`, then by all means continue…
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 也许值得花一些时间使用这个工具，因为它提供了更大的灵活性，如果你需要执行一些非常规操作。我必须承认，对于大多数与数据库相关的任务，phpMyAdmin都能很好地完成。如果你在托管站点上没有访问phpMyAdmin，或者你想了解`mysqldump`，那么请继续…
- en: 'To create a backup, simply type in something like the following at the command
    line:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建备份，只需在命令行中输入以下内容：
- en: '[PRE2]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This will create a backup file called `drupal_06_11_05.sql` in the current
    directory. You can then ensure that this has worked by viewing the contents of
    the file, which will contain reams and reams of SQL statements. There are plenty
    of different options that you can use to get a variety of different types of backup
    file; you can simply type in:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在当前目录中创建一个名为`drupal_06_11_05.sql`的备份文件。然后你可以通过查看文件的内容来确保它已经起作用，文件中将包含大量的SQL语句。你可以使用许多不同的选项来获得各种不同类型的备份文件；你只需输入：
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: in order to obtain a list of what's available. `mysqldump` is a powerful and
    flexible tool, and knowing how it works will benefit you in the long run if you
    are going to attempt some more advanced backup options.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获得可用内容的列表。`mysqldump`是一个强大而灵活的工具，了解它的工作原理将在长远来看对你有好处，如果你打算尝试一些更高级的备份选项。
- en: To reiterate, it is good practice to back up your database on a regular basis,
    regardless of whether your need to do so for upgrading purposes as doing this
    will protect you from a total loss of data in the event that some sort of disaster
    destroys the database or loses its information.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 重申一下，定期备份数据库是一个好习惯，无论您是否需要出于升级目的这样做，因为这样做将保护您免受某种灾难摧毁数据库或丢失信息的完全损失。
- en: Cron and Scheduled Tasks
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cron和Scheduled Tasks
- en: In order to keep the site running smoothly and keep it up to date, there are
    a variety of chores that need to be performed on a regular basis. For example,
    we saw earlier in the book that the aggregator module needed to be run on a regular
    basis so that it could update all its feeds and so forth. The Drupal developers
    are well aware of all the tasks that need to be handled; so they bundled everything
    up into one handy script—cron.php.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使站点顺利运行并保持最新，需要定期执行各种任务。例如，我们在本书的前面看到，聚合器模块需要定期运行，以便它可以更新所有其源等。Drupal开发人员非常了解需要处理的所有任务；因此，他们将所有内容打包到一个方便的脚本cron.php中。
- en: You need to set the **crontab** or **scheduled task** to execute the `cron.php`
    script, which is housed in the main folder of your Drupal installation, so that
    it can perform all the necessary tasks. The cron script basically searches through
    the site and executes any tasks that apply to modules or other things (like log
    handling) so that they all stay updated.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要设置**crontab**或**scheduled task**来执行`cron.php`脚本，该脚本位于Drupal安装的主文件夹中，以便执行所有必要的任务。cron脚本基本上会搜索站点并执行适用于模块或其他内容（如日志处理）的任何任务，以便它们保持更新。
- en: Let's take a look at how to control the crontab, followed by setting up a scheduled
    task for the Windows users among us.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何控制crontab，然后为我们中的Windows用户设置定期任务。
- en: The Crontab
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Crontab
- en: If you are not particularly keen to learn how to make use of the crontab on
    your hosted site, then feel free to skip to the section entitled *Poormanscron*
    a little later on in this chapter. It is recommended that you do learn how to
    make use of the crontab regardless, because it will no doubt come in handy someday
    when your Drupal site is not immediately available.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不是特别热衷于学习如何在托管站点上使用crontab，那么可以随时跳到本章稍后的*Poormanscron*部分。建议您无论如何都学习如何使用crontab，因为在您的Drupal站点无法立即使用时，它无疑会派上用场。
- en: 'All the variables set in the crontab are numerical constants, with the exception
    of the asterisk character, which is a wildcard that allows any value. The ranges
    permitted for each field are as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在crontab中设置的所有变量都是数字常量，除了星号字符，它是一个通配符，允许任何值。每个字段允许的范围如下：
- en: 'Minutes: 0-59'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分钟：0-59
- en: 'Hours: 0-23'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 小时：0-23
- en: 'Day of month: 1-31'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 月份的日期：1-31
- en: 'Month: 1-12'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 月份：1-12
- en: 'Weekday: 0-7 (Sunday is either 0 or 7)'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工作日：0-7（星期日为0或7）
- en: 'You can include multiple values for each entry, simply by separating each value
    with a comma. The command you wish to issue can be any shell command, and can
    be used to execute web pages, like the `cronfeed.php` file. Many hosting companies
    will have an interface such as the following one, which allows you to work with
    the crontab easily:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过用逗号分隔每个值来包含每个条目的多个值。您希望发出的命令可以是任何shell命令，并且可以用于执行网页，如`cronfeed.php`文件。许多托管公司将拥有一个类似以下界面的界面，可以轻松使用crontab：
- en: '![The Crontab](graphics/1800_10_03.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![The Crontab](graphics/1800_10_03.jpg)'
- en: 'In the final entry you can see (hopefully) that the `cron.php` script is set
    to run at midnight every day using the command:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后一个条目中，您可以看到（希望如此）`cron.php`脚本设置为每天午夜运行，使用命令：
- en: '[PRE4]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: whereas, for example, the first task is set to run every hour (remember to substitute
    your own site's URL in place of the highlighted code in the previous snippet).
    Notice too that the `php` command was not used to execute the cron script as it
    was for the other two scripts—this is because the `cron.php` file needs to be
    accessed as a web page so that certain environment variables are properly set.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，第一个任务设置为每小时运行（请记住在前面片段中突出显示的代码的位置替换为您自己站点的URL）。还要注意，与其他两个脚本不同，没有使用`php`命令来执行cron脚本——这是因为需要将`cron.php`文件作为网页访问，以便正确设置某些环境变量。
- en: Tip
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Set your cron job to run at regular intervals to ensure that your site is kept
    as up to date as possible! It is recommended that `cron.php` is run several times
    a day.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 设置您的cron作业以定期间隔运行，以确保您的站点尽可能保持最新！建议多次运行`cron.php`。
- en: Windows Scheduled Tasks
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Windows定期任务
- en: 'On the off chance you are using a Windows-based server, or simply wish to enable
    scheduled tasks on your Windows PC while you are developing, you can make use
    of the **Scheduled Task** wizard. The following instructions, taken from the Drupal
    site, explain exactly how this is done:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在使用基于Windows的服务器，或者只是希望在开发时在Windows PC上启用定期任务，您可以使用**Scheduled Task**向导。以下说明来自Drupal网站，详细解释了如何操作：
- en: Go to **Start | Programs | Accessories | System Tools | Scheduled Tasks**.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**开始 | 程序 | 附件 | 系统工具 | 定期任务**。
- en: Double-click **Add Scheduled Task**.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击**添加定期任务**。
- en: The **Scheduled Task** wizard will appear. Click **Next**.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**Scheduled Task**向导将出现。点击**下一步**。'
- en: Select the program to run. Choose your **browser** from the list (for example,
    Internet Explorer or Firefox). Click **Next**.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要运行的程序。从列表中选择您的**浏览器**（例如，Internet Explorer或Firefox）。点击**下一步**。
- en: Give the task a **Name**, such as **Drupal Cron Job**, and choose the **Frequency**
    with which to perform the task (for example, **Daily)**. Click **Next**.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给任务取一个**名称**，比如**Drupal Cron Job**，并选择执行任务的**频率**（例如，**每天**）。点击**下一步**。
- en: Choose specific **date and time options** (this step will vary, depending on
    the option selected in the previous step). When finished, click **Next**.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择特定的**日期和时间选项**（此步骤将根据上一步中选择的选项而变化）。完成后，点击**下一步**。
- en: Enter your **password** if prompted. Change the **username** if required (for
    example, if you'd like the task to run under a user with few privileges for security
    reasons). Click **Next**.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果提示，输入你的**密码**。如果需要（例如，出于安全原因，你想让任务在权限较低的用户下运行），更改**用户名**。点击**下一步**。
- en: On the final page, select the checkbox **Open advanced properties for this task
    when I click Finish** and click **Finish**.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在最后一页，选择**单击完成时打开此任务的高级属性**复选框，然后单击**完成**。
- en: Go to the task's setting page either by checking the checkbox at the end of
    the last step, or by double-clicking on the task.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过勾选最后一步的复选框或双击任务来进入任务设置页面。
- en: In the **Run** box, after the text that is there now (for example, **C:\PROGRA~1\MOZILL~1\firefox.exe)**,
    enter a space and then type the address of your website's `cron.php` page in double
    quotation marks (for example, **C:\PROGRA~1\MOZILL~1\**firefox.exe **"http://localhost/drupal/cron.php")**
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**运行**框中，在现有文本之后（例如，**C:\PROGRA~1\MOZILL~1\firefox.exe)**，输入一个空格，然后用双引号输入你网站的`cron.php`页面的地址（例如，**C:\PROGRA~1\MOZILL~1\**firefox.exe
    **"http://localhost/drupal/cron.php"**）
- en: To set a frequency higher than **Daily** (for example, **Hourly)**, click the
    **Schedule** tab, and then click **Advanced**. Here you can set options such as
    **Repeat** task, every **1 hour** for **23 hours**. Click **OK** when finished.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要设置比**每天**更频繁的频率（例如，**每小时**），点击**计划**选项卡，然后点击**高级**。在这里，你可以设置选项，比如**重复**任务，每**1小时**重复**23小时**。完成后点击**确定**。
- en: Change the **start time** on the task to **one minute from the current time**.
    This will allow you to test the task and make sure that it is working.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将任务的**开始时间**更改为**当前时间后一分钟**。这将允许你测试任务并确保它正常工作。
- en: When all settings have been configured to your liking, click **Apply** and **OK**
    (note that you may be prompted for your password).
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当所有设置都按照你的喜好配置好后，点击**应用**和**确定**（注意，可能会提示你输入密码）。
- en: If you find that you are unable to set a cron job to run on your host site once
    it is live, then you can use a neat trick and set your Windows scheduled task
    to access the `cron.php` script directly from your home PC instead using the instructions
    just listed. This means that the cron script is executed, depending on your settings,
    as often as your PC is online and able to access web pages.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你发现无法在主机网站上线后设置cron作业运行，那么你可以使用一个巧妙的技巧，设置你的Windows定期任务从你的家用PC直接访问`cron.php`脚本，而不是使用刚才列出的指令。这意味着，根据你的设置，cron脚本将在你的PC在线并能够访问网页时执行。
- en: This last point highlights how easy Drupal has made things when it comes to
    performing necessary tasks on a regular basis. All that's required is a browser
    application of some sort to access the `cron.php` script, and any tasks that need
    to be run by the Drupal site will be run. You could access this script from your
    own browser, or set your own PC to do it whenever you start it up, or any other
    number of things.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 这最后一点突显了Drupal在定期执行必要任务方面的简易性。所需的只是一种浏览器应用程序来访问`cron.php`脚本，Drupal网站需要运行的任何任务都将被执行。你可以从自己的浏览器访问这个脚本，或者在启动PC时设置自己的PC执行它，或者其他任何方式。
- en: Poormanscron
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Poormanscron
- en: It should come as no surprise that there is a contribution that can make life
    even easier. **Poormanscron** is a contributed module that does away with the
    need to set the crontab or a scheduled task entirely.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 毫不奇怪，有一个可以让生活更加轻松的贡献。**Poormanscron**是一个贡献模块，它消除了设置crontab或定期任务的需要。
- en: It works by checking whether the cron script has been run in the last unit of
    time (whatever you have set this to be; by default it is every hour) each time
    a web page is browsed. If it finds that there is a cron run due, it will cause
    this to happen after the page has been served (so that the user does not have
    to wait for the tasks to complete before viewing the page).
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 它的工作原理是在每次浏览网页时检查cron脚本在最后一个时间单位（无论你将其设置为什么；默认情况下是每小时）内是否已运行。如果发现有cron运行，它将在页面提供后（这样用户在查看页面之前不必等待任务完成）执行这个任务。
- en: 'Basically, Poormanscron means that you are freed from having to learn anything
    about cron jobs. This is convenient, but is also a double edged sword! It is quite
    likely that you will need to make use of cron jobs for other tasks, and if you
    use Poormanscron for Drupal, then all you are doing is postponing the time when
    you have to sit down and learn how to use the crontab or scheduled tasks. At any
    rate, you have seen examples of how to use all the options; so all that remains
    is for us to take a look at how to work with Poormanscron:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，Poormanscron意味着你无需了解任何关于cron作业的知识。这很方便，但也是一把双刃剑！很可能你需要使用cron作业来完成其他任务，如果你在Drupal中使用Poormanscron，那么你所做的就是推迟学习如何使用crontab或定期任务的时间。无论如何，你已经看到了如何使用所有的选项；现在我们来看看如何使用Poormanscron：
- en: Download the Poormanscron module from the Drupal website.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Drupal网站下载Poormanscron模块。
- en: Extract the files to your `modules` folder.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文件提取到你的`modules`文件夹中。
- en: Enable the module in the **modules** section under **administer**.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**管理**下的**模块**部分启用该模块。
- en: That's all there is to it—provided your site has regular use, your cron tasks
    will run smoothly and you need not worry about accessing the `cron.php` script
    manually or setting the crontab.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 就是这样——只要你的网站有定期使用，你的cron任务就会顺利运行，你不需要担心手动访问`cron.php`脚本或设置crontab。
- en: 'After some time, however, you might get a bit sick of seeing logged cron messages
    all the time. If you want to administer the Poormanscron module, then head on
    over to **poormanscron** under **settings** in the administration area, to bring
    up the following page:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，过了一段时间，你可能会厌倦一直看到记录的cron消息。如果你想管理Poormanscron模块，那么请前往管理区域中的**设置**下的**poormanscron**，打开以下页面：
- en: '![Poormanscron](graphics/1800_10_04.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![Poormanscron](graphics/1800_10_04.jpg)'
- en: As you can see from this, there are a number of options available to control
    how often cron jobs should be run, how long to wait before retrying after an error,
    and what your logging policy should be. In this instance logging is disabled because
    there is nothing that urgently requires manual verification on the demo site (for
    the moment). If you added new software and had to confirm that it was being properly
    executed by the `cron.php` script, then you might consider switching logging back
    on.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 从中可以看出，有许多选项可用于控制cron作业的运行频率，错误后重试的等待时间以及日志记录策略。在这种情况下，由于演示站点上没有急需手动验证的内容（目前），因此禁用了日志记录。如果您添加了新软件并且必须确认`cron.php`脚本是否被正确执行，那么您可能会考虑重新启用日志记录。
- en: Throttling
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 节流
- en: Every once in a while someone makes a site that becomes wildly popular. Having
    loads of people visiting a site can put some serious strain on the server's resources
    and cause all sorts of problems as the congestion builds. Even if a site is not
    exceedingly popular, it is possible that it may come under a **denial of service**
    attack from somewhere.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 偶尔会有人制作一个非常受欢迎的网站。大量访问网站的人可能会给服务器的资源带来严重压力，并在拥堵加剧时引发各种问题。即使一个网站并不非常受欢迎，也有可能会受到来自某个地方的**拒绝服务**攻击。
- en: 'Before even thinking about setting up the throttling mechanism on a site, it
    is important that you know what resources are at your disposal:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑在网站上设置节流机制之前，重要的是要了解您可以使用的资源：
- en: Note
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you have already ensured that there are facilities in place to handle a *large
    amount of traffic*, then you have made the throttle module redundant in effect.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经确保有设施来处理*大量的流量*，那么实际上您已经使节流模块变得多余。
- en: If you are unsure about what resources are available on your site, check with
    the hosting service and find out what they are giving you.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不确定网站上有哪些资源，请与托管服务商联系，了解他们提供了什么。
- en: 'Assuming you anticipate there will be a need for some sort of congestion control,
    a good way to deal with surges in traffic or bandwidth usage is to enable the
    throttling mechanism that comes with Drupal, in the form of the aforementioned
    throttle module. This is easy enough to accomplish by enabling it in the **modules**
    section of the administration tool. Once that is done, you can configure how the
    module acts on the site in general by navigating to the **throttle** page under
    settings in the administration area. This will bring up the following page:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您预计会需要某种拥塞控制，应对流量激增或带宽使用情况，一种好的方法是启用Drupal自带的节流机制，即前面提到的节流模块。通过在管理工具的**模块**部分启用它，这是很容易实现的。完成后，您可以通过导航到管理区域中设置下的**节流**页面来配置模块在站点上的一般操作。这将带来以下页面：
- en: '![Throttling](graphics/1800_10_05.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![节流](graphics/1800_10_05.jpg)'
- en: This page deals with congestion from the point of view of how many people are
    using the site. In this case, Drupal is instructed to engage the auto-throttle
    on anonymous users provided there are **300** or more online, and the same for
    authenticated users provided there are more than **100** of them online. The final
    option deals with actually limiting the amount of work the throttle mechanism
    has to do so that it itself does not become a resource hog.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这个页面从使用网站的人数的角度来处理拥堵问题。在这种情况下，Drupal被指示在有300个或更多的匿名用户在线时启用自动节流，对于已认证用户，只要有100个以上的用户在线，也是一样。最后一个选项实际上限制了节流机制需要做的工作量，以免它本身成为资源消耗者。
- en: '*But what if you know that it is a specific module that is consuming more than
    its fair share of resources?* In this case, you would simply enable the auto-throttle
    for that specific module in the **modules** section of the administration tool,
    as shown here:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*但是如果您知道是特定模块消耗的资源超出了其公平份额怎么办？*在这种情况下，您只需在管理工具的**模块**部分启用该特定模块的自动节流，如下所示：'
- en: '![Throttling](graphics/1800_10_06.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![节流](graphics/1800_10_06.jpg)'
- en: This can be done on a block-by-block basis as well, by navigating over to the
    **blocks** section and doing the same thing. *But what does throttling blocks
    ultimately mean?* Basically, if your server is under strain and you have set a
    block to be automatically throttled, it will be disabled and not contribute to
    the load on the server.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这也可以逐个区块进行，方法是导航到**区块**部分并执行相同的操作。*但是节流区块最终意味着什么？*基本上，如果您的服务器承受压力，并且已将区块设置为自动节流，则它将被禁用，并且不会增加服务器的负载。
- en: 'You can take a look at your log message to determine what the throttle module
    is up to at any given time. For example, I set the throttle mechanism to engage
    after only one user visited the site. The following log message was then created:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以查看日志消息，以确定节流模块在任何给定时间正在做什么。例如，我将节流机制设置为仅在一个用户访问站点后启用。然后创建了以下日志消息：
- en: '![Throttling](graphics/1800_10_07.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![节流](graphics/1800_10_07.jpg)'
- en: It's not much, but at least it makes it clear when the throttle is on. Once
    the load has dropped sufficiently, a corresponding message will be sent stating
    that the throttle can be disengaged and things can return to normal.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 这并不多，但至少清楚了何时启用了节流。一旦负载降低到足够程度，将发送相应的消息，说明可以解除节流，一切可以恢复正常。
- en: 'While this next point is not directly related to throttling, it is important
    that you gain some idea about the performance of your site and what you can do
    to ensure it is good. Take a look at [http://drupal.org/node/2601](http://drupal.org/node/2601)
    to learn about how to:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然下一个要点与节流没有直接关系，但重要的是要对站点的性能有所了解，并采取措施确保其良好。访问[http://drupal.org/node/2601](http://drupal.org/node/2601)了解如何：
- en: Analyze your site's performance
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析您网站的性能
- en: Reduce the load on your servers by preventing access to certain parts of your
    site for web crawlers of various kinds, using the `robot.txt` file
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`robot.txt`文件，阻止各种类型的网络爬虫访问站点的某些部分，从而减轻服务器的负载
- en: Learn about Apache performance and PHP and MySQL tuning
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解Apache性能和PHP和MySQL调优
- en: Any knowledge you gain now can be put to good use preemptively to guard against
    poor performance which may discourage users in the future—even though it is unlikely
    that you will notice any performance-related issues early on.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在获得的任何知识都可以被预防性地用于防范未来可能会使用户感到沮丧的性能不佳——尽管您可能不会在早期注意到任何与性能相关的问题。
- en: Patching
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 打补丁
- en: From time to time, it becomes clear that there is a bug in a module or some
    other aspect of Drupal. This is especially a concern whenever there is a major
    overhaul of the software and everyone is working frantically to keep up—since
    Drupal is only just moving to the new 4.7 version at the time of writing, this
    is more pertinent now than at any other time. When this happens, invariably people
    head to the forums to find out if anyone else has had the same problem. Often,
    as is the case with a bug, other people have also been stricken with the same
    problem and it may be that someone has been able to fix the problem.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，很明显Drupal的某个模块或其他方面存在错误。每当软件进行重大改革并且每个人都在拼命跟进时，这尤其令人担忧——因为在撰写本文时，Drupal刚刚开始迁移到新的4.7版本，这比以往任何时候都更相关。当这种情况发生时，人们总是前往论坛查看是否有其他人遇到了同样的问题。通常情况下，就像错误一样，其他人也遇到了同样的问题，可能有人已经能够解决问题。
- en: 'If some kind soul has sorted out the problem on their machine, then it is most
    likely that they will submit a **patch** file to the forum so that it can be used
    by everyone else in order to fix their code. At this point it is important to
    realize several things:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有善良的人在他们的机器上解决了问题，那么他们很可能会向论坛提交一个**补丁**文件，以便其他人可以使用它来修复他们的代码。在这一点上，重要的是要意识到几件事：
- en: If you don't want to have any problems, ensure you only download well-tested
    and stable software for use on your site. Often CVS versions of a module still
    contain bugs or errors, and so it may be better to wait until a module is *released
    and tested for your specific version of Drupal*.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您不想遇到任何问题，请确保只下载经过充分测试和稳定的软件用于您的网站。通常模块的CVS版本仍然包含错误或错误，因此最好等到模块*发布并针对您的特定Drupal版本进行测试*。
- en: Patch files are not specific to Drupal. They are simply files that explain a
    list of lines of code that should be added or removed in such a way that it is
    possible for a **patch utility** to implement those changes without the need for
    human intervention.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 补丁文件并不特定于Drupal。它们只是解释应该以一种使**补丁工具**能够在不需要人工干预的情况下实施这些更改的方式添加或删除的代码行的文件。
- en: Patch utilities are not native to Windows machines—they come with Unix-based
    operating systems such as Linux.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 补丁工具不是Windows机器的本机工具——它们随Unix操作系统（如Linux）一起提供。
- en: Linux users will need to take some time to learn how to make use of the patch
    utility if they find they need to implement it. Windows users need to go a step
    further and download a patch utility first. Luckily there is a download of common
    Unix utilities available at [http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/).
    This contains the patch utility among other things, and you will need to extract
    the content to a folder—the `patch.exe` file will be within the `usr\local\wbin`
    folder in whichever directory you extracted the files to.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: Linux用户需要花一些时间学习如何使用补丁工具，如果他们发现需要实施补丁。Windows用户需要更进一步，首先下载补丁工具。幸运的是，在[http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)上有常见Unix实用程序的下载。其中包括补丁工具，您需要将内容提取到一个文件夹中——`patch.exe`文件将在您提取文件的任何目录中的`usr\local\wbin`文件夹中。
- en: 'The `patch.exe` file can now be used just like any other command-line utility.
    We have already used the `mysql` command utility several times, so you have some
    experience with this. The general syntax when using patch is as follows:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '`patch.exe`文件现在可以像任何其他命令行实用程序一样使用。我们已经多次使用了`mysql`命令实用程序，因此您对此有一些经验。使用补丁的一般语法如下：'
- en: '[PRE5]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In this case the `originalfile` is the file to which the changes should be
    applied, and `patchfile` is clearly the patch file that contains the changes to
    be implemented. There are a host of options that you can look through, so check
    out the man page for the patch before working with it. You can find one at [http://www.hmug.org/man/1/patch.php](http://www.hmug.org/man/1/patch.php).
    A typical command might look something like this (of course, you need to ensure
    that you enter the correct file paths to your files if you are not working in
    one directory):'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，`originalfile`是应该应用更改的文件，而`patchfile`显然是包含要实施的更改的补丁文件。您可以查看一系列选项，因此在使用之前请查看补丁的man页面。您可以在[http://www.hmug.org/man/1/patch.php](http://www.hmug.org/man/1/patch.php)找到一个。一个典型的命令可能看起来像这样（当然，如果您不是在一个目录中工作，您需要确保输入正确的文件路径）：
- en: '[PRE6]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Now there is an important path-related issue that needs to be resolved here.
    If you would like to use `patch` from anywhere on the command line, you need to
    add its file path to your **Path** system variable—otherwise, you would have to
    navigate to the `usr\local\wbin` folder on the command line before using `patch`
    each time (you could alternatively add `patch.exe` to a folder already in your
    **Path**, but it is probably better to keep everything separate).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 现在有一个重要的与路径相关的问题需要在这里解决。如果您希望在命令行的任何位置使用`patch`，您需要将其文件路径添加到**Path**系统变量中——否则，您每次使用`patch`之前都需要在命令行中导航到`usr\local\wbin`文件夹（您也可以将`patch.exe`添加到已在**Path**中的文件夹中，但最好保持一切分开）。
- en: 'To do this:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要做到这一点：
- en: Open up the **Control Panel** and click on **System**.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**控制面板**，点击**系统**。
- en: Click on the **Advanced** tab and click on **Environment Variables**
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**高级**选项卡，然后点击**环境变量**
- en: Add the path to the `patch.exe` file into the **Path** environment variable
    in the **System variables** section as shown here:![Patching](graphics/1800_10_08.jpg)
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`patch.exe`文件的路径添加到**系统变量**部分的**Path**环境变量中，如下所示：![Patching](graphics/1800_10_08.jpg)
- en: Once you are done, click **OK**.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，点击**确定**。
- en: Note that each path set in the **Path** environment variable is separated by
    a semi-colon. You must ensure that you do not change anything other than adding
    the single path; otherwise you may well break other important applications.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，**Path**环境变量中的每个路径都用分号分隔。您必须确保除了添加单个路径之外，不要更改任何其他内容；否则，您可能会破坏其他重要的应用程序。
- en: With that done, you now have access to the patch utility from anywhere on the
    command line. The important question now becomes whether or not to use a patch
    file. *How do you know whether you need a patch?* The answer to this really lies
    in searching Drupal for an answer to any given problem you might have—often there
    are patches submitted on the module's download page, so make sure you search through
    this as well as look through the forums for more info.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，您现在可以从命令行的任何位置访问补丁实用程序。现在重要的问题是是否要使用补丁文件。*您如何知道自己是否需要一个补丁？*这个问题的答案实际上在于搜索Drupal以找到您可能遇到的任何问题的答案——通常在模块的下载页面上提交了补丁，因此请确保您搜索这一点，并在论坛中寻找更多信息。
- en: 'Finally, just because a patch has been made available does not necessarily
    mean that it will fix the problem. Often, you will find that patches themselves
    create other problems. For example, viewing the issues page for the Flexinode
    module shows the following:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，仅仅因为提供了一个补丁并不一定意味着它会修复问题。通常，您会发现补丁本身会产生其他问题。例如，查看Flexinode模块的问题页面显示如下：
- en: '![Patching](graphics/1800_10_09.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![修补](graphics/1800_10_09.jpg)'
- en: 'At the time of writing, there were several patches available for several different
    things. Depending on what you needed done, you would:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，有几个不同事物的补丁可用。根据您需要的内容，您可以：
- en: Find the relevant patch file.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到相关的补丁文件。
- en: Download it to your machine.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将其下载到您的计算机。
- en: Use the patch utility to implement the patch.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用补丁实用程序来实施补丁。
- en: Attempt to use the updated code.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试使用更新后的代码。
- en: Make sure that it is in fact a patch file you are downloading and not an entire
    file that is intended as a replacement. Patch files will more often that not end
    with a `.patch` extension. As mentioned, the best way to avoid problems is to
    only use code that has been proven to be reliable, failing which, it is more than
    likely you will need to practice implementing patches—enjoy!
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您下载的确实是一个补丁文件，而不是一个作为替换的整个文件。补丁文件往往以`.patch`扩展名结尾。正如前面提到的，避免问题的最佳方法是只使用经过验证可靠的代码，否则，您很可能需要练习实施补丁——祝您好运！
- en: Website Activities
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网站活动
- en: Once you have developed your site and have it up and running on the live servers,
    you will find that your ISP probably offers a fair amount of toys for you to play
    around with. Some of these can be very useful for the budding website administrator.
    *But what could we possibly need, now that the entire site has been built?*
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您开发了您的网站并在实时服务器上运行，您会发现您的ISP可能为您提供了相当多的工具供您使用。其中一些对于新手网站管理员来说非常有用。*但是，既然整个网站已经建好了，我们可能还需要什么呢？*
- en: There are plenty of different tasks that still lie ahead of you. For example,
    are you sure that malicious people out there can't hotlink to your site and reduce
    your bandwidth? *What is hotlinking? What is bandwidth?* These questions constitute
    only a very small part of the types of concerns that must take focus once development
    is completed. I have to admit, that while the subject of the book was to *build
    a site*, that task is only one side of the coin!
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 还有许多不同的任务等着您。例如，您确定恶意人士无法热链接到您的网站并减少您的带宽吗？*什么是热链接？什么是带宽？*这些问题只是完成开发后必须关注的问题的一小部分。我必须承认，尽管本书的主题是*构建一个网站*，但这只是问题的一面！
- en: 'In the case of the demo site, the following administration panel is provided
    by the hosting service provider:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在演示站点的情况下，托管服务提供商提供了以下管理面板：
- en: '![Website Activities](graphics/1800_10_10.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![网站活动](graphics/1800_10_10.jpg)'
- en: Obviously, there are a lot of toys to play with here and it is recommended that
    you spend some time finding out what is available for you to use and how to use
    it. Knowing what you have available is very important because it means you are
    better able to plan *how you work*. For example, the demo site's hosts offer an
    automated **Search Engine submit** facility that allows the new website to be
    submitted for indexing to *all the major search engines—much* better than simply
    waiting around for the site to begin appearing on them.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，这里有很多可以玩耍的玩具，建议您花些时间找出您可以使用的内容以及如何使用它。知道您可以使用什么非常重要，因为这意味着您更能够计划*您的工作*。例如，演示站点的主机提供了一个自动的**搜索引擎提交**功能，允许将新网站提交到*所有主要搜索引擎进行索引——比仅仅等待网站开始出现在搜索引擎上要好得多。*
- en: Another important thing to note here is that most hosting services will offer
    a full array of statistics for your website. Things like where people have come
    from, how many accessed the site, which pages are being accessed, and so on. Drupal
    comes with modules that do pretty much the same thing, so check to see whether
    the site's native statistics are sufficient or whether you need to consider installing
    a new module—something like the **GraphStat, Tracker, Watchdog**, or **Recorder**
    modules may be more what you have in mind.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 这里还有一件重要的事情需要注意，大多数托管服务都会为您的网站提供完整的统计数据。例如，访问者来自何处，有多少人访问了网站，正在访问哪些页面等等。Drupal带有几个几乎相同的功能的模块，因此请检查一下站点的原生统计数据是否足够，或者您是否需要考虑安装新的模块——例如**GraphStat，Tracker，Watchdog**或**Recorder**模块可能更符合您的需求。
- en: 'Since it is possible you have an entirely different set of options available
    on your hosted site, we won''t discuss this any further here, but there are still
    a couple of other matters that warrant attention. Let''s begin with one of the
    most commonly requested: **Search Engine Optimization**, or **SEO**.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 由于您的托管站点可能具有完全不同的选项集可用，我们不会在这里进一步讨论，但仍有一些其他事项值得关注。让我们从最常见的一个开始：**搜索引擎优化**，或者**SEO**。
- en: Search Engine Optimization
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 搜索引擎优化
- en: One of the most common goals for a website is to appear high up on the big search
    engine rankings. As you should know, having a good ranking increases the chances
    of potential users finding your site among the mass of other sites. *So what is
    it that you can do to make your site rank as highly as possible without actually
    having to pay anyone to do it for you?*
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 网站最常见的目标之一就是在大型搜索引擎排名中高居榜首。正如你应该知道的那样，有一个良好的排名会增加潜在用户在众多其他网站中找到你的网站的机会。*那么，你能做些什么来使你的网站尽可能高地排名，而不必实际支付任何人来为你做呢？*
- en: 'There is no straight answer to this, unfortunately, and many people will give
    you just as many different answers. However, there is a core set of tasks you
    can take up that are known to help—they might vary in importance, but it is probably
    worth performing all of them. The following table highlights the most important
    optimizations or tasks, which you should consider performing (where possible):'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 很遗憾，对于这个问题并没有直接的答案，很多人会给你很多不同的答案。然而，有一系列已知可以帮助的核心任务，它们的重要性可能有所不同，但执行所有这些任务可能是值得的。下表列出了最重要的优化或任务，你应该考虑执行（如果可能的话）：
- en: '| Optimization | Explanation |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: 优化 | 解释
- en: '| --- | --- |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Write web-enhanced copy | IMPORTANT: Think about how your target users would
    find your site. *What type of words would they use to find a site like yours?*
    Once you have come up with a list of key words and phrases, ensure that the writing
    on your site makes use of these phrases whenever possible.If you are using Google
    AdWords, then you can check the popularity of various search terms yourself—simply
    put them forward as potential target keywords and check on their stats, which
    Google provides before they are added.For example, if you had a site that deals
    with mobile gadgets, and you wanted to make the phrase **cellular phone** a term
    that you rank highly on, then instead of writing something like:**This device
    can be used to call other people**, you should write:**This G1 super cellular
    phone, can call any other cellular phone from wherever you are**.Admittedly, you
    cannot control the content of other people''s comments and pages, but this would
    still apply to any and all standard pages you write—such as the *introduction*
    page, *about us*, or *FAQ*, or even your own personal blog. |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| 编写网页增强复制 | 重要提示：考虑你的目标用户如何找到你的网站。*他们会用什么样的词语来找到类似你的网站？* 一旦你列出了关键词和短语的清单，确保你的网站上的写作尽可能地使用这些短语。如果你正在使用Google
    AdWords，那么你可以自己检查各种搜索词的流行度 - 只需将它们提出作为潜在的目标关键词，并在它们被添加之前检查它们的统计数据，这是Google提供的。例如，如果你有一个处理移动设备的网站，并且你想让短语**手机**成为你排名很高的一个词，那么你应该写成：**这款G1超级手机，可以从任何地方拨打任何其他手机**。可以肯定的是，你无法控制其他人的评论和页面内容，但这仍然适用于你写的任何和所有标准页面
    - 比如*介绍*页面，*关于我们*，或*常见问题*，甚至你自己的个人博客。'
- en: '| Use meaningful file names | While this is not as important as the first point,
    it certainly will help to have everything named meaningfully, because search engines
    do look at file names. Instead of naming a page `19`, you should name it something
    like `awesome_webpage.html`. Don''t go overboard on this because it is not too
    important.Look through the modules available with help for renaming files if this
    appeals to you—something like **Node (key)words** should do the trick. |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| 使用有意义的文件名 | 虽然这不像第一点那么重要，但给所有东西都起一个有意义的名字肯定会有所帮助，因为搜索引擎确实会查看文件名。你应该将页面命名为`awesome_webpage.html`，而不是`19`。不要过分强调这一点，因为它并不是太重要。如果你对此感兴趣，可以查看帮助重命名文件的模块
    - 例如**Node (key)words**应该可以解决问题。|'
- en: '| Use meaningful anchor text | IMPORTANT: Search engines, in particular Google,
    place a large amount of emphasis on the anchor text used in links. As a result,
    make sure all your links have meaningful text associated with them. For example,
    you would rewrite the following sentence:`Donate to the Wildlife community <a
    href ="<yourlink>">here</a>`.to:`Donate to the <a href ="<yourlink>">Wildlife
    community</a> here`.The reason for this is that the word **here** is not particularly
    meaningful to a search engine, even though humans can easily make the connection.
    For the sake of your rankings, simply move the link to the key phrase **Wildlife
    community** to place more emphasis on it for the search engine. |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| 使用有意义的锚文本 | 重要提示：搜索引擎，特别是Google，对链接中使用的锚文本非常重视。因此，请确保所有的链接都有与之相关的有意义的文本。例如，你会重写以下句子：`向野生动物社区<a
    href ="<yourlink>">捐赠</a>`。改成：`向<a href ="<yourlink>">野生动物社区</a>捐赠`。原因是**这里**这个词对搜索引擎来说并不是特别有意义，尽管人类可以很容易地建立联系。为了你的排名，只需将链接移到关键短语**野生动物社区**上，以便更多地强调它对搜索引擎的重要性。'
- en: '| Write meaningful metatags | As many people will tell you, metatags have become
    less and less important as time goes by. However, they are still useful, and you
    should at least go to the effort of filling them out properly. The two metatags
    that you should consider making use of are the `keyword` and `description` tags.
    For example, the following shows a possible tag:`<meta name="keywords" content="CWC
    wildlife conservation biosphere">`Metatags have been the subject of some abuse,
    and you should view the W3C consortium''s guidelines for their usage: `http://www.w3.org`.In
    order to make these changes, you would have to work with your theme—most likely
    the `page.tpl` file, or whatever is its equivalent! |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| 编写有意义的元标记 | 正如很多人会告诉你的那样，随着时间的推移，元标记变得越来越不重要。然而，它们仍然有用，你至少应该努力填写它们。你应该考虑使用的两个元标记是`关键词`和`描述`标记。例如，下面显示了一个可能的标记：`<meta
    name="keywords" content="CWC wildlife conservation biosphere">`元标记已经成为一些滥用的对象，你应该查看W3C联盟关于它们使用的指南：`http://www.w3.org`。为了进行这些更改，你需要与你的主题一起工作
    - 很可能是`page.tpl`文件，或者它的等价物！'
- en: '| Manage your links | IMPORTANT: A high level of importance is placed on the
    perceived popularity of a website. Search engines can judge the popularity of
    a website by looking at how many links there are to the site, and how popular
    the sites that link to it themselves are. For this reason, you should ensure that
    you link to and link from only sites that you feel are suitable partners.Effectively,
    you should search for as many relevant link pages as possible, or actually speak
    to the relevant sites to determine whether you can provide mutual links. The more
    links you have from popular sites, the better your ranking will be. You can also
    try to get one-way links to your site—these are also rated highly by search engines.
    |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 管理你的链接 | 重要提示：网站的受欢迎程度被赋予了很高的重要性。搜索引擎可以通过查看网站有多少链接以及链接到它的网站有多受欢迎来判断一个网站的受欢迎程度。因此，你应该确保只链接到和从你认为合适的网站。实际上，你应该尽可能多地搜索相关的链接页面，或者实际上与相关网站交谈，确定你是否可以提供相互链接。你从受欢迎的网站获得的链接越多，你的排名就会越好。你也可以尝试让你的网站获得单向链接——这些也受到搜索引擎的高度评价。|'
- en: '| Write meaningful `alt` tags for images | Search engines don''t see pictures
    like humans do, so there is nothing you can do about images… *or is there?* Instead
    of naming your images `02_03.jpg`, you might consider giving them names like `cruel_hunter.jpg`.
    Don''t stop there either. Instead of adding an image like this:`<img src="cruel_hunter.jpg">`write
    it like this:`<img src="cruel_hunter.jpg" alt="Hunter making his kill ">` |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 为图片编写有意义的`alt`标签 | 搜索引擎不像人类那样看图片，所以你对图片无能为力...或者？与其给你的图片命名为`02_03.jpg`，你可以考虑给它们起名字，比如`cruel_hunter.jpg`。不要止步于此。不要像这样添加一个图片：`<img
    src="cruel_hunter.jpg">`，而是像这样写：`<img src="cruel_hunter.jpg" alt="猎人正在猎杀">` |'
- en: '| Submit your site to search engines and online directories | Make sure your
    site is listed wherever possible. Most hosting packages provide an automated SE-submission
    facility, which will automatically forward your site to search engines for indexing.
    Otherwise, look for other SE web page submission tools, or search out your own
    lists and directories to become part of. |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 将你的网站提交给搜索引擎和在线目录 | 确保你的网站尽可能多地列出。大多数托管套餐提供自动的SE提交功能，这将自动将你的网站转发给搜索引擎进行索引。否则，寻找其他SE网页提交工具，或者寻找自己的列表和目录加入。
    |'
- en: '| Read up on lists, forums, and online tutorials | There is a lot of helpful
    information out there. Make sure you do your own research and come up with an
    SEO policy that is right for you. |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 阅读列表、论坛和在线教程 | 那里有很多有用的信息。确保你自己进行研究，并制定适合你的SEO政策。 |'
- en: You will find that if you are prepared to put in the time to develop your links
    and constantly upgrade your site, you will eventually recoup the benefits that
    accrue over time. However, don't expect everything to happen overnight—gaining
    popularity can be a tedious process!
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你愿意花时间发展你的链接并不断升级你的网站，你会发现随着时间的推移，你最终会收回累积的好处。然而，不要指望一夜之间就会发生一切——变得受欢迎可能是一个乏味的过程！
- en: Maintaining Users
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 维护用户
- en: It is quite likely that while some people register with the full intention of
    making regular use of your site, they will move on and their account remains hanging
    around without actually doing anything. It might be prudent to add the **User
    Maintenance** module early on to keep track of how and whether your users are
    active, so that you can remove those who don't meet certain criteria.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能有些人注册时完全打算经常使用你的网站，但他们会离开，他们的账户仍然挂在那里没有实际做任何事情。在早期添加**用户维护**模块可能是明智的，以便跟踪你的用户如何以及是否活跃，这样你就可以删除那些不符合某些标准的用户。
- en: 'Go ahead and download the module off the site. It requires a bit of work to
    get ready:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 继续在网站上下载模块。需要一些准备工作：
- en: Extract the files to your `modules` folder.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文件提取到你的`modules`文件夹中。
- en: 'Run the `.sql` script against the database (remember to have a backup available)
    with the following command:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令对数据库运行`.sql`脚本（记得备份可用）：
- en: '[PRE7]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Ensure that you replace the highlighted file path with the one that reflects
    your setup if need be.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果需要，确保用反映你设置的文件路径替换高亮显示的文件路径。
- en: Enable the module in the **modules** section under **administer**.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**管理**下的**模块**部分启用该模块。
- en: 'To use the module, head on over to the **settings** section under **administer**
    once the module is enabled. In the drop-down list in the menu you will notice
    that there is now a new **user_maintenance** menu item available. Click on that
    to bring up the following page:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用该模块，一旦启用，前往**管理**下的**设置**部分。在菜单的下拉列表中，你会注意到现在有一个新的**用户维护**菜单项可用。点击它会弹出以下页面：
- en: '![Maintaining Users](graphics/1800_10_11.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![维护用户](graphics/1800_10_11.jpg)'
- en: As you can see, it is now quite easy to select how long you are prepared to
    keep an active account on your site despite the fact that the user has not logged
    on after registering. The reason it is wise to get this contribution up and running
    as soon as possible is that it cannot work retrospectively. In other words, if
    you run into this problem after three years of collecting wasted accounts, this
    contribution cannot tell which accounts it should delete; it only works for those
    accounts that were created while it is enabled.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，现在很容易选择你愿意在你的网站上保留一个活跃账户的时间，尽管用户注册后没有登录。尽快启用这个贡献的原因是它不能以回顾的方式工作。换句话说，如果你在收集了三年的废弃账户后遇到这个问题，这个贡献无法告诉它应该删除哪些账户；它只对在启用时创建的账户起作用。
- en: Summary
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter has rounded off the picture painted by the previous chapters by
    taking a look at some of the most important website-related chores that you will
    have to undertake. Knowing how to make backups at the click of a button, or being
    able to tell who is using your site for what purposes and when, gives you the
    power to maintain and manage your site efficiently and with a minimum of fuss.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 这一章通过查看一些最重要的与网站相关的任务，为前几章描绘的画面做了一个圆满的收尾。知道如何一键备份，或者能够知道谁在什么时候以及出于什么目的使用你的网站，让你有能力以最小的麻烦高效地维护和管理你的网站。
- en: With the end of this chapter, we come to the end of the book. For those of you
    who now need to upload your new site your live domain, the appendix contains further
    instructions on deployment.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 随着这一章的结束，我们也迎来了这本书的结束。对于那些现在需要将新网站上传到实际域名的人，附录中包含了部署的进一步说明。
- en: Congratulations on finishing the book, and I wish you all the best in your future
    endeavors on the Web. Please remember to take the time to give back to the Drupal
    community so that it can continue to flourish and help others.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜你完成了这本书，祝你在网络上的未来努力一切顺利。请记得抽出时间回馈Drupal社区，这样它才能继续茁壮成长，帮助他人。
