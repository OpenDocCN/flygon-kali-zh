- en: Chapter 2. Setting Up an Android Forensic Environment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章。设置Android法庭环境
- en: 'It is crucial to have an established forensic environment set up before the
    start of any forensic examination. The forensic analyst needs to be in total control
    of the workstation at all times. This chapter will take you through everything
    that is necessary to have an established forensic set up to examine Android devices.
    In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始任何法庭审查之前，建立一个已经建立的法庭环境是至关重要的。法庭分析师需要始终完全控制工作站。本章将带您了解建立法庭设置以检查Android设备所必需的一切。在本章中，我们将涵盖以下主题：
- en: Installation of necessary software on the workstation
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在工作站上安装必要的软件
- en: Connecting and accessing an Android device from the workstation
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从工作站连接和访问Android设备
- en: Using ADB commands on the device
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在设备上使用ADB命令
- en: Rooting Android devices
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对Android设备进行Root
- en: The Android forensic setup
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Android法庭设置
- en: 'Setting up a sound and well-controlled forensic environment is crucial before
    the start of any investigation. Start with a fresh and **forensically sterile**
    computer. A forensically sterile computer is one that prevents the potential of
    cross contamination, does not introduce unwanted data, and is free from viruses
    and other malware. This is to ensure that the software present on the machine
    does not interfere with the current investigation. Install basic software, such
    as the following ones; they are necessary to connect to the device and perform
    analysis:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始任何调查之前，建立一个声音和良好控制的法庭环境是至关重要的。从一个新的和**法庭无菌**的计算机开始。一个法庭无菌的计算机是一个可以防止交叉污染的潜力，不会引入不需要的数据，并且没有病毒和其他恶意软件的计算机。这是为了确保机器上的软件不会干扰当前的调查。安装基本软件，比如以下这些；它们是连接设备和进行分析所必需的：
- en: Android SDK
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android SDK
- en: Mobile drivers
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动驱动程序
- en: MS Office packages
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MS Office软件包
- en: Tools used for analysis
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于分析的工具
- en: The Android SDK
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Android SDK
- en: It is important that we begin the discussion with the Android SDK. The Android
    **Software Development Kit** (**SDK**) helps developers build, test, and debug
    applications to run on Android. It includes software libraries, APIs, emulator,
    reference material, and many other tools. These tools not only help create Android
    applications but also provide documentation and utilities that help significantly
    in forensic analysis of Android devices. Having sound knowledge of the Android
    SDK can help you understand the particulars of a device. This, in turn, will help
    you during an investigation.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是我们从Android SDK开始讨论。Android **软件开发工具包**（**SDK**）帮助开发人员构建、测试和调试在Android上运行的应用程序。它包括软件库、API、模拟器、参考资料和许多其他工具。这些工具不仅帮助创建Android应用程序，还提供文档和实用程序，这些对Android设备的法庭分析非常有帮助。对Android
    SDK有扎实的了解可以帮助您了解设备的细节。这反过来将在调查中帮助您。
- en: During forensic examination, the SDK helps us connect the device and access
    the data present on the device. The SDK is supported in most of environments,
    including Windows, Linux, and OS X. It can be downloaded for free from [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在法庭审查期间，SDK帮助我们连接设备并访问设备上的数据。SDK在大多数环境中都受支持，包括Windows、Linux和OS X。可以从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)免费下载。
- en: Installing the Android SDK
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装Android SDK
- en: 'Google now offers Android Studio and SDK tools only as download options. Android
    studio contains the Android IDE, SDK tools, Android 5.0 (Lollipop) platform, Android
    5.0 system image with Google APIs, and other newly introduced features. However,
    for a forensic lab setup, downloading the SDK tools package alone would be sufficient.
    The following is a step-by-step procedure to install the Android SDK on a Windows
    8 machine:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌现在只提供Android Studio和SDK工具作为下载选项。Android Studio包含Android IDE，SDK工具，Android
    5.0（棒棒糖）平台，带有谷歌API的Android 5.0系统映像，以及其他新引入的功能。然而，对于法庭实验室的设置，仅下载SDK工具包就足够了。以下是在Windows
    8机器上安装Android SDK的逐步过程：
- en: Before starting the Android SDK installation, make sure that the system has
    the **Java Development Kit** (**JDK**) installed, because the Android SDK is dependent
    on the Java SE Development Kit. JDK can be downloaded from [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html).
    Select the correct download based on your operating system.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在开始安装Android SDK之前，请确保系统已安装**Java开发工具包**（**JDK**），因为Android SDK依赖于Java SE开发工具包。JDK可以从[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载。根据您的操作系统选择正确的下载。
- en: Download the latest version of the SDK tools package from [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html).
    The `.exe` version of the package is recommended for download.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载最新版本的SDK工具包。建议下载`.exe`版本的软件包。
- en: Run the installer file downloaded in step 2\. A wizard window will appear, as
    shown in the following screenshot. Then, click on **Next**.![Installing the Android
    SDK](img/image00268.jpeg)
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行在步骤2中下载的安装程序文件。将出现一个向导窗口，如下截图所示。然后，点击**下一步**。![Installing the Android SDK](img/image00268.jpeg)
- en: The Android SDK setup wizard
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Android SDK设置向导
- en: The setup will automatically detect whether Java is installed on the system
    and select the path where Java is installed.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置将自动检测系统上是否安装了Java，并选择安装Java的路径。
- en: Choose the installation location and remember it for future use. In this example,
    we will install it in `C:\Program Files (x86)`. In the case of a 32-bit operating
    system, the default location would be `C:\Program Files`. All the necessary files
    will be extracted to this location, as shown in the following screenshot:![Installing
    the Android SDK](img/image00269.jpeg)
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择安装位置并记住以备将来使用。在本例中，我们将其安装在`C:\Program Files (x86)`。在32位操作系统的情况下，默认位置将是`C:\Program
    Files`。所有必要的文件将被提取到这个位置，如下截图所示：![Installing the Android SDK](img/image00269.jpeg)
- en: The Android SDK tools installation
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Android SDK工具安装
- en: Once the installation is complete, open the `C:\Program Files (x86)\Android\android-sdk`
    directory and double-click on `SDK Manager.exe`. Make sure that you select the
    Android SDK Platform tools and any one release platform version of Android, as
    shown in the following screenshot. Some of the items are automatically selected.
    For instance, Google USB Driver is necessary to work with Android devices on Windows
    and is selected by default. Accept the license terms and then proceed to install
    it by clicking the **Install** button:![Installing the Android SDK](img/image00270.jpeg)
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，打开`C:\Program Files (x86)\Android\android-sdk`目录，并双击`SDK Manager.exe`。确保选择Android
    SDK平台工具和任何一个Android的发布平台版本，如下面的屏幕截图所示。有些项目会自动选择。例如，Google USB驱动程序在Windows上与Android设备一起使用时是必需的，并且默认已选择。接受许可证条款，然后点击**安装**按钮进行安装：![安装Android
    SDK](img/image00270.jpeg)
- en: Android packages installation
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: Android软件包安装
- en: The last step in the preceding process takes some time to complete. Once it
    is done, the Android SDK installation is complete. You can now update the system's
    environment variables (path) by pointing to the executable files.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 前面过程的最后一步需要一些时间来完成。完成后，Android SDK安装就完成了。现在可以通过指向可执行文件来更新系统的环境变量（路径）。
- en: Note
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The minimal ADB and fastboot tool, which is only 2 MB in size and available
    freely on XDA forums ([http://forum.xda-developers.com/showthread.php?t=2317790](http://forum.xda-developers.com/showthread.php?t=2317790)),
    can be used without installing the complete Android SDK. This tool is a Windows
    installer that will install the latest version of ADB and fastboot quickly and
    easily.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 仅2MB大小的最小ADB和fastboot工具可在XDA论坛（[http://forum.xda-developers.com/showthread.php?t=2317790](http://forum.xda-developers.com/showthread.php?t=2317790)）上免费获得，无需安装完整的Android
    SDK。这个工具是一个Windows安装程序，可以快速轻松地安装最新版本的ADB和fastboot。
- en: Android Virtual Device
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Android虚拟设备
- en: With the Android SDK installed, you can create an **Android Virtual Device**
    (**AVD**), which is an **emulator** that runs on the workstation. An emulator
    is often used by developers when creating new applications. However, an emulator
    is also considered helpful during forensic investigations. It allows the investigator
    to understand how certain applications behave and how the installation of an application
    affects the device. Another advantage is that you can design an emulator with
    the desired version. This is especially helpful when working with devices running
    on older versions of Android. Also, AVD comes with root as default.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了Android SDK后，您可以创建一个**Android虚拟设备**（**AVD**），这是一个在工作站上运行的**模拟器**。开发人员在创建新应用程序时通常会使用模拟器。然而，在取证调查中，模拟器也被认为是有帮助的。它允许调查人员了解某些应用程序的行为以及应用程序的安装如何影响设备。另一个优点是您可以设计一个具有所需版本的模拟器。这在处理运行较旧版本Android的设备时特别有帮助。此外，AVD默认带有root权限。
- en: 'The following steps will guide you to create an AVD on the workstation:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将指导您在工作站上创建AVD：
- en: 'Open command prompt (`cmd.exe`). To start AVD manager from the command line,
    navigate to the path where SDK is installed and call the android tool with the
    `avd` option as shown here:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符（`cmd.exe`）。要从命令行启动AVD管理器，请导航到SDK安装的路径，并按照以下所示使用`avd`选项调用android工具：
- en: '[PRE0]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This will automatically open AVD manager, as shown in the following screenshot.
    AVD manager can also be started using the graphical AVD manager. To start it,
    navigate to the location where the SDK is installed and double-click on `AVD Manager`.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这将自动打开AVD管理器，如下面的屏幕截图所示。AVD管理器也可以使用图形AVD管理器启动。要启动它，请导航到SDK安装的位置，并双击`AVD Manager`。
- en: '![Android Virtual Device](img/image00271.jpeg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![Android虚拟设备](img/image00271.jpeg)'
- en: The Android Virtual Device Manager
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: Android虚拟设备管理器
- en: Click on **Create** in the **AVD Manager** window to create a new virtual device.
    Click on **Edit** to change the configuration of an existing virtual device, as
    shown in the following screenshot:![Android Virtual Device](img/image00272.jpeg)
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**AVD管理器**窗口中单击**创建**以创建新的虚拟设备。单击**编辑**以更改现有虚拟设备的配置，如下面的屏幕截图所示：![Android虚拟设备](img/image00272.jpeg)
- en: AVD details
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: AVD详细信息
- en: 'Enter the necessary details based on the following information:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据以下信息输入必要的详细信息：
- en: '**AVD Name**: Provide any name for the virtual device, for example, `MyAVD`.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AVD名称**：为虚拟设备提供任何名称，例如`MyAVD`。'
- en: '**Device**: Select any device from the available options based on the screen
    size.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设备**：根据屏幕大小从可用选项中选择任何设备。'
- en: '**Target**: This option helps you select the platform of the device. Note that
    only those versions that were selected and installed during the SDK installation
    will be shown here for you to select. The platform version can be selected based
    on the OS of the seized device. For our example, the Android 4.4.2 platform is
    selected.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**目标**：此选项可帮助您选择设备的平台。请注意，只有在SDK安装期间选择并安装的那些版本才会显示在此处供您选择。平台版本可以根据所占设备的操作系统进行选择。例如，我们选择了Android
    4.4.2平台。'
- en: '**Hardware**: You can select hardware features to customize the emulator, for
    example, the size of internal storage memory, SD card, and so on. Once again,
    details such as screen resolution, hardware, and so on can be selected based on
    the details corresponding to the seized device.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**硬件**：您可以选择硬件功能来自定义模拟器，例如内部存储器的大小，SD卡等。再次，可以根据所占设备的详细信息选择屏幕分辨率、硬件等详细信息。'
- en: Once this is done, the **AVD Manager** screen appears with the newly created
    AVD listed under the **Android Virtual Devices** tab. Select the AVD and click
    on **Start**. Then, click on **Launch**.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，**AVD管理器**屏幕将显示新创建的AVD列在**Android虚拟设备**选项卡下。选择AVD并单击**启动**。然后，单击**启动**。
- en: The emulator will be automatically launched. This could take several minutes,
    depending on the workstation's CPU and RAM. Here is a screenshot of an AVD after
    its successful launch:![Android Virtual Device](img/image00273.jpeg)
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模拟器将自动启动。这可能需要几分钟，具体取决于工作站的CPU和RAM。以下是AVD成功启动后的截图：![Android虚拟设备](img/image00273.jpeg)
- en: The Android emulator
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 安卓模拟器
- en: 'An emulator can be used to configure e-mail accounts, install applications,
    surf the Internet, send text messages, and so on. Forensic analysts and security
    engineers can learn a great deal about Android and how it operates by leveraging
    the emulator and examining the network, filesystem, and data artifacts. The data
    created when working on an emulator is stored in your home directory, in a folder
    named .android. For instance, in our example, the details about `MyAVD` emulator
    that we created earlier are stored in `C:\Users\Rohit\.android\avd\MyAVD.avd`.
    There are several files present under this directory, and here are some files
    of interest for a forensic analyst:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟器可用于配置电子邮件帐户、安装应用程序、浏览互联网、发送短信等。取证分析师和安全工程师可以通过利用模拟器并检查网络、文件系统和数据遗物来学习关于安卓及其运行方式的大量知识。在模拟器上工作时创建的数据存储在您的主目录中，名为.android的文件夹中。例如，在我们的示例中，我们之前创建的`MyAVD`模拟器的详细信息存储在`C:\Users\Rohit\.android\avd\MyAVD.avd`中。在此目录下有几个文件，以下是取证分析师感兴趣的一些文件：
- en: '`cache.img`: This is the disk image of the `/cache` partition.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cache.img`：这是`/cache`分区的磁盘映像。'
- en: '`sdcard.img`: This is the disk image of the SD card partition.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sdcard.img`：这是SD卡分区的磁盘映像。'
- en: '`Userdata-qemu.img`: This is the disk image of `/data` partition. The `/data`
    partition contains valuable information about the device user.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Userdata-qemu.img`：这是`/data`分区的磁盘映像。`/data`分区包含有关设备用户的宝贵信息。'
- en: '`config.ini`: This is the configuration file that stores hardware options in
    AVD''s local directory.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config.ini`：这是存储AVD本地目录中硬件选项的配置文件。'
- en: '`emulator-user.ini`: This file contains values that can reset the position
    of the window.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`emulator-user.ini`：此文件包含可以重置窗口位置的值。'
- en: '`Androidtool.cfg`: This file can be used to manually set proxy settings for
    the Android SDK.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Androidtool.cfg`：此文件可用于手动设置Android SDK的代理设置。'
- en: Connecting and accessing an Android device from the workstation
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接并从工作站访问安卓设备
- en: In order to extract information from an Android device, it first needs to be
    connected to the workstation. As mentioned earlier, care should be taken to make
    sure that the workstation is forensically sterile and used only for the purpose
    of investigation. A forensically sterile workstation is one that has a proper
    build and is free from viruses and other malware. When a device is connected to
    the computer, changes can be made to the device. Hence, it is crucial that the
    forensic examiner maintains control over the device at all times. In the world
    of mobile forensics, using write-protection mechanisms may not be of great help,
    as they prevent successful acquisition of the device. This is because during acquisition,
    certain commands need to be pushed to the device to extract the necessary data.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 为了从安卓设备中提取信息，首先需要将其连接到工作站。如前所述，应注意确保工作站在法庭上是无菌的，并且仅用于调查目的。无菌的工作站是指具有适当构建并且没有病毒和其他恶意软件的工作站。当设备连接到计算机时，可以对设备进行更改。因此，法庭鉴定人员必须始终控制设备。在移动取证领域，使用写保护机制可能并不是很有帮助，因为它们会阻止成功获取设备。这是因为在获取过程中，需要向设备发送某些命令以提取必要的数据。
- en: Identifying the device cable
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 识别设备电缆
- en: 'An Android device can be connected to the workstation using the physical USB
    interface of the device. This physical USB interface allows the device to connect,
    share data, and recharge from a computer. USB interfaces might change from manufacturer
    to manufacturer and also from device to device. There are different types, such
    as mini-USB, micro-USB, and other proprietary formats. Here is a brief description
    of the most widely used connector types:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用设备的物理USB接口将安卓设备连接到工作站。这个物理USB接口允许设备与计算机连接、共享数据并充电。USB接口可能会因制造商和设备而异。有不同类型，如迷你USB、微型USB和其他专有格式。以下是最常用连接器类型的简要描述：
- en: '| Connector type | Description |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '|连接器类型|描述|'
- en: '| --- | --- |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '|---|---|'
- en: '| Mini—A USB | It is approximately 7 x 3 mm in size, with two of the corners
    on one long side lifted out. |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '|Mini—A USB|大约7 x 3毫米大小，其中一长边的两个角被抬起。|'
- en: '| Micro—B USB | It is approximately 6 x 1.5 mm in size, with two corners cut
    off to form a trapezoid. |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '|Micro—B USB|大约6 x 1.5毫米大小，两个角被切掉形成梯形。|'
- en: '| Co-axial | It has a circular hole with a pin sticking up in the middle. There
    are different sizes, varying from 2 to 5 mm in diameter. This type is widely used
    with Nokia models. |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '|同轴|它有一个圆形孔，中间竖立着一个针。有不同尺寸，直径从2到5毫米不等。这种类型广泛用于诺基亚手机。'
- en: '| D Sub-miniature | It has a rectangular shape with two rounded corners. The
    length of the rectangle varies, but the height is always 1.5 to 2 mm. This type
    is used mostly by Samsung and LG devices. |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '|D亚迷你|它呈矩形，两个圆角。矩形的长度不等，但高度始终为1.5到2毫米。这种类型主要由三星和LG设备使用。|'
- en: Hence, the first step in acquisition is to identify what kind of device cable
    is required.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，获取的第一步是确定需要什么类型的设备电缆。
- en: Installing device drivers
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装设备驱动程序
- en: A mobile device can communicate with the computer only when the necessary device
    drivers are installed on the computer. Without the necessary drivers, the computer
    may not be able to identify and work with the connected device. Since Android
    may be modified and customized by the manufacturers, there is no single generic
    driver that would work for all the Android devices. Each manufacturer has their
    own proprietary drivers and distributes them along with the phone. So, it is important
    to identify the specific device driver that needs to be installed. Of course,
    some of the Android forensic toolkits come with some generic drivers or a set
    of most used drivers. They may not work with all models of Android phones. Some
    Windows operating systems are able to auto detect and install the drivers once
    the device is plugged in but, more often than not, Windows fails. The device drivers
    for each manufacturer can be found on their respective websites.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在电脑上安装了必要的设备驱动程序时，移动设备才能与电脑通信。如果没有必要的驱动程序，电脑可能无法识别和使用连接的设备。由于安卓可能会被制造商修改和定制，没有一个通用的驱动程序适用于所有的安卓设备。每个制造商都有自己的专有驱动程序，并随手机一起分发。因此，识别需要安装的特定设备驱动程序是很重要的。当然，一些安卓取证工具包带有一些通用驱动程序或一组最常用的驱动程序。它们可能无法与所有型号的安卓手机一起使用。一些Windows操作系统能够在设备插入后自动检测并安装驱动程序，但往往情况并非如此。每个制造商的设备驱动程序可以在他们各自的网站上找到。
- en: Accessing the device
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 访问设备
- en: 'After installing the necessary device drivers, connect the Android device to
    the computer, directly using the USB cable in order to access it. It is important
    to use genuine manufacturer-specific cables, because universal cables may not
    work properly with certain devices. Also, the investigator may encounter certain
    driver issues. Some of the devices may not be USB 3.0 compatible, which may lead
    to failed driver installations. In this case, it is recommended that you try switching
    to USB 2.0 ports. Once the device is connected, it will appear as a new drive,
    and you can access the files on the external storage. Some older Android devices
    may not be accessible unless the **Connect storage to PC** option (navigate to
    **Settings** | **USB utilities**) is enabled on the device. In this case, after
    connecting the device through a USB, the **Turn on USB storage** option needs
    to be selected, as shown in the following screenshot:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 安装必要的设备驱动程序后，使用USB电缆直接将安卓设备连接到电脑以访问它是很重要的。使用正宗的制造商特定电缆很重要，因为通用电缆可能无法正常使用某些设备。此外，调查人员可能会遇到某些驱动程序问题。一些设备可能不兼容USB
    3.0，这可能导致驱动程序安装失败。在这种情况下，建议尝试切换到USB 2.0端口。一旦设备连接，它将出现为一个新的驱动器，你可以访问外部存储上的文件。一些旧的安卓设备可能无法访问，除非在设备上启用了**连接存储到PC**选项（转到**设置**
    | **USB工具**）。在这种情况下，连接设备后，需要选择**打开USB存储**选项，如下图所示：
- en: '![Accessing the device](img/image00274.jpeg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![访问设备](img/image00274.jpeg)'
- en: USB mass storage connection
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: USB大容量存储连接
- en: This is because older Android devices required USB mass storage mode to transfer
    files between a computer and the device. Latest Android devices use the **Media
    Transfer Protocol** (**MTP**) or the **Picture Transfer Protocol** (**PTP**),
    as there were some issues with the USB mass storage protocol. With USB mass storage,
    the drive makes itself completely available to the computer, just as if it were
    an internal drive.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为旧的安卓设备需要USB大容量存储模式来在电脑和设备之间传输文件。最新的安卓设备使用**媒体传输协议**（**MTP**）或**图片传输协议**（**PTP**），因为USB大容量存储协议存在一些问题。使用USB大容量存储，驱动器会完全向电脑开放，就像它是一个内部驱动器一样。
- en: However, the problem is that the device that is accessing the storage needs
    exclusive access to it. In other words, when the device drive is connected to
    the computer, it has to be disconnected from the Android operating system running
    on the device in order to work. So, any files or apps stored on the SD card or
    USB storage will be unavailable when it is connected to the computer. In MTP,
    the Android device doesn't expose its entire storage to Windows. Instead, when
    you connect a device to your computer, the computer queries the device, and the
    device responds with a list of files and directories it offers. If the computer
    has to download a file, it would send a request to the file from the device, and
    the device would send the file over the connection. PTP is also similar to MTP
    and is commonly used by digital cameras. In this mode, the Android device will
    work with digital camera applications that support PTP but not MTP. On the latest
    devices, you can select either MTP or PTP options by going to **Settings** | **Storage**
    | **USB computer connection**.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，问题在于访问存储的设备需要对其进行独占访问。换句话说，当设备驱动连接到电脑时，必须断开与设备上运行的安卓操作系统的连接才能工作。因此，当连接到电脑时，存储在SD卡或USB存储上的任何文件或应用将无法使用。在MTP中，安卓设备不会将其整个存储暴露给Windows。相反，当你将设备连接到电脑时，电脑会查询设备，设备会以文件和目录列表的形式回应。如果电脑需要下载文件，它会向设备发送文件请求，设备会通过连接发送文件。PTP也类似于MTP，通常被数码相机使用。在这种模式下，安卓设备将与支持PTP而不支持MTP的数码相机应用程序一起工作。在最新的设备上，你可以通过转到**设置**
    | **存储** | **USB计算机连接**来选择MTP或PTP选项。
- en: Tip
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: On some Android devices, the option to select MTP and PTP protocols is provided
    only after connecting the device to the computer. After the device is connected,
    watch out for the Notifications bar at the top of your screen, and you will see
    a USB symbol appear. Pull down the notifications bar, and you will find an option
    to switch between MTP and PTP.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些安卓设备上，只有在连接设备到电脑后才能提供选择MTP和PTP协议的选项。设备连接后，留意屏幕顶部的通知栏，你会看到一个USB符号出现。下拉通知栏，你会找到在MTP和PTP之间切换的选项。
- en: 'As shown in the following screenshot, the **MTP** and **PTP** options are shown
    only after connecting the device to a computer and pulling down the notifications
    bar:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，只有在将设备连接到计算机并拉下通知栏后，才会显示**MTP**和**PTP**选项：
- en: '![Accessing the device](img/image00275.jpeg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![访问设备](img/image00275.jpeg)'
- en: USB PC connection in an Android device
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Android设备中的USB PC连接
- en: 'In the case of certain Android devices (especially with HTC), the device may
    expose more than one functionality when connected with a USB cable. For instance,
    as shown in the following screenshot, when an HTC device is connected to the workstation,
    it presents a menu with four options:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些Android设备（尤其是HTC）的情况下，连接USB电缆时，设备可能会暴露多个功能。例如，如下截图所示，当HTC设备连接到工作站时，会显示一个包含四个选项的菜单：
- en: '![Accessing the device](img/image00276.jpeg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![访问设备](img/image00276.jpeg)'
- en: Disk drive option on a HTC device
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: HTC设备上的磁盘驱动器选项
- en: The default selection is **Charge only**. When the **Disk drive** option is
    selected, it is mounted as a disk drive. When the device is mounted as a disk
    drive, you will be able to access the SD card present on the device.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 默认选择是**仅充电**。选择**磁盘驱动器**选项时，它将被挂载为磁盘驱动器。当设备被挂载为磁盘驱动器时，您将能够访问设备上的SD卡。
- en: From a forensic point of view, the SD card has a significant value, as it may
    contain files that are important for an investigation. Most of the images and
    large files related to multimedia are stored in this external storage. SD cards
    are commonly formatted with the FAT16 filesystem, but you might also encounter
    some SD cards that have FAT32 and other filesystems. As discussed in [Chapter
    1](part0014.xhtml "Chapter 1. Introducing Android Forensics"), *Introducing Android
    Forensics*, note that most of the recent devices have the emulated SD card feature
    that uses the device's NAND flash to create a non-removable SD card. Thus, all
    the sensitive files present on the external storage can be accessed in this way.
    However, the core application data stored under `/data/data` will remain on the
    device and cannot be accessed in this way.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 从法庭的角度来看，SD卡具有重要价值，因为它可能包含对调查重要的文件。大多数与多媒体相关的图像和大文件都存储在这个外部存储设备中。SD卡通常使用FAT16文件系统格式化，但您可能也会遇到一些使用FAT32和其他文件系统的SD卡。正如在[第1章](part0014.xhtml
    "第1章。介绍Android取证")中讨论的那样，*介绍Android取证*，请注意，大多数最近的设备都具有模拟SD卡功能，该功能使用设备的NAND闪存创建一个不可移动的SD卡。因此，可以通过这种方式访问外部存储中的所有敏感文件。但是，存储在`/data/data`下的核心应用程序数据将保留在设备上，无法通过这种方式访问。
- en: Android Debug Bridge
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Android调试桥
- en: 'In Android forensics, **Android Debug Bridge** (**ADB**) plays a very crucial
    role. It is present at `<sdk_path>/platform-tools`. In order to work with ADB,
    the **USB-debugging** option needs to be enabled. On a Samsung phone, you can
    access this by going to **Settings** | **Developer** options; as shown in the
    following screenshot:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在Android取证中，**Android调试桥**（**ADB**）起着非常关键的作用。它位于`<sdk_path>/platform-tools`。要使用ADB，需要启用**USB调试**选项。在三星手机上，可以通过转到**设置**
    | **开发者**选项来访问此选项；如下截图所示：
- en: '![Android Debug Bridge](img/image00277.jpeg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![Android调试桥](img/image00277.jpeg)'
- en: The USB debugging option in Android
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: Android中的USB调试选项
- en: However, this may not be the case with all the devices, as different devices
    have different environments and configuration features. Sometimes, the examiner
    might have to use certain techniques to access the developer options on a few
    devices. These techniques are device specific and need to be researched and determined
    by the forensic analyst, based on the device type and model.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，并非所有设备都是如此，因为不同的设备具有不同的环境和配置功能。有时，检查人员可能需要使用某些技术来访问一些设备上的开发者选项。这些技术是特定于设备的，需要根据设备类型和型号由取证分析师进行研究和确定。
- en: Note
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: On some devices, the **Developer options** menu is hidden and can be turned
    on by tapping on the **Build Number** field (navigate to **Settings** | **About
    Device**) *seven* times.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些设备上，**开发者选项**菜单是隐藏的，可以通过点击**构建号**字段（导航到**设置** | **关于设备**）*七*次来打开。
- en: Once the **USB debugging** option is selected, the device will run the **adb
    daemon** (**adbd**) in the background and will continuously look for a USB connection.
    The daemon usually runs under a non-privileged shell user account and thus does
    not provide access to internal application data. However, on rooted phones, adbd
    will run under the root account and thus provide access to the entire data. On
    the workstation (where the Android SDK) is installed, adbd will run as a background
    process. Also, on the same workstation, a client program will run that can be
    invoked from a shell by issuing the `adb` command. We are going to see this in
    the following sections. When the adb client is started, it first checks whether
    the adbd is already running. If it isn't, it initiates a new process to start
    the abdb. The daemons communicate over their local host on ports 5555 through
    5585\. The even port communicates with the device's console, while the odd port
    is for adb connections. The adb client program communicates with the local adbd
    over port 5037\.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 选择**USB调试**选项后，设备将在后台运行**adb守护程序**（**adbd**），并将不断寻找USB连接。该守护程序通常在非特权shell用户帐户下运行，因此不提供对内部应用程序数据的访问。但是，在rooted手机上，adbd将在root帐户下运行，因此可以访问整个数据。在安装了Android
    SDK的工作站上，adbd将作为后台进程运行。此外，在同一工作站上，将运行一个客户端程序，可以通过发出`adb`命令来调用。我们将在接下来的章节中看到这一点。当启动adb客户端时，首先检查adbd是否已经运行。如果没有，它将启动一个新的进程来启动abdb。这些守护程序通过它们的本地主机在端口5555到5585之间进行通信。偶数端口与设备的控制台通信，而奇数端口用于adb连接。adb客户端程序通过端口5037与本地adbd通信。
- en: Using adb to access the device
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用adb访问设备
- en: As stated earlier, adb is a powerful tool that allows you to communicate with
    the Android device. We will now look at how to use adb and access certain parts
    of the device that cannot be accessed normally. It is important to note that the
    collection of data through adb may or may not be accepted as evidence in court.
    This will depend on the laws of respective countries. The following sections list
    some of the commonly used adb commands, their meanings, and usage in a logical
    sequence.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，adb是一个强大的工具，允许您与Android设备通信。我们现在将看一下如何使用adb并访问通常无法正常访问的设备的某些部分。重要的是要注意，通过adb收集的数据可能会或可能不会被法庭接受为证据。这将取决于各国的法律。以下部分列出了一些常用的adb命令，它们的含义以及在逻辑顺序中的用法。
- en: Detecting a connected device
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检测连接的设备
- en: 'After connecting the device to the workstation and before issuing other adb
    commands, it is helpful to know whether the Android device is properly connected
    to the adb server. This can be done using the `adb.exe` devices command, which
    lists out all the devices that are connected to the computer, as shown in the
    following command. This would also list the emulator if it is running at the time
    of issuing the command:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 将设备连接到工作站后，在发出其他adb命令之前，了解Android设备是否正确连接到adb服务器是有帮助的。这可以使用`adb.exe` devices命令来完成，该命令列出连接到计算机的所有设备，如下命令所示。如果模拟器正在运行，它也会列出模拟器：
- en: '[PRE1]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Note
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Remember that if the necessary drivers are not installed, then the preceding
    command would show a blank message. If you encounter this situation, download
    the necessary drivers from the manufacturer and install them.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，如果没有安装必要的驱动程序，那么前述命令将显示空白消息。如果遇到这种情况，请从制造商处下载必要的驱动程序并安装它们。
- en: 'As seen in the preceding commands, the output contains the serial number of
    the device, followed by the connection state. The serial number is a unique string
    used by ADB to identify each Android device. The possible values of the connection
    state and their meaning is explained in the following lines:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述命令所示，输出包含设备的序列号，后跟连接状态。序列号是ADB用于识别每个Android设备的唯一字符串。连接状态的可能值及其含义在以下行中解释：
- en: '`offline`: The instance is not connected to adb or is not responding.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`offline`：实例未连接到adb或未响应。'
- en: '`device`: The instance is connected to the adb server.'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`device`：实例已连接到adb服务器。'
- en: '`no device`: There is no device connected.'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`no device`：没有连接的设备。'
- en: Directing commands to a specific device
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 将命令定向到特定设备
- en: 'If more than one device is connected to the system, you must specify the target
    device while issuing the commands. For example, consider the following case:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有多个设备连接到系统，您必须在发出命令时指定目标设备。例如，考虑以下情况：
- en: '[PRE2]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'As shown in the preceding command-line output, there are two devices attached
    to the workstation. In this case, `adb` needs to be used along with the `–s` option
    to issue commands to the device of your choice:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述命令行输出所示，有两个设备连接到工作站。在这种情况下，`adb`需要与`-s`选项一起使用，以向您选择的设备发出命令：
- en: '[PRE3]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Similarly, the `–d` command can be used to direct an `adb` command to the only
    attached USB device, and the `–e` command can be used to direct an `adb` command
    to the only running emulator instance.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，`-d`命令可用于将`adb`命令定向到唯一连接的USB设备，`-e`命令可用于将`adb`命令定向到唯一运行的模拟器实例。
- en: Issuing shell commands
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 发出shell命令
- en: As mentioned in [Chapter 1](part0014.xhtml "Chapter 1. Introducing Android Forensics"),
    *Introducing Android Forensics*, Android runs on a Linux kernel and provides a
    way to access the shell. Using ADB, you can access a shell to run several commands
    on an Android device. For those who are not familiar with the Linux environment,
    the Linux shell refers to a special program that allows you to interact with it
    by entering certain commands from the keyboard. The shell will execute the commands
    and display their output.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 如[第1章](part0014.xhtml "第1章。介绍Android取证")中所述，*介绍Android取证*，Android运行在Linux内核上，并提供了访问shell的方法。使用ADB，您可以访问一个shell，在Android设备上运行多个命令。对于不熟悉Linux环境的人来说，Linux
    shell是指一个特殊的程序，允许您通过键盘输入某些命令与其交互。shell将执行命令并显示它们的输出。
- en: 'More details about how things work on the Linux environment have been provided
    under the *Rooting Android device* section in this chapter. The `adb` shell command
    can be used to enter into a remote shell, as shown in the following command-line
    output. Once you enter the shell, you can execute most of the Linux commands:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 有关Linux环境中工作原理的更多详细信息已在本章的*Rooting Android设备*部分中提供。`adb` shell命令可用于进入远程shell，如下命令行输出所示。一旦进入shell，您可以执行大多数Linux命令：
- en: '[PRE4]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'After executing the command, observe that the shell prompt is displayed to
    the user. In this shell prompt, commands can be executed on the device. For instance,
    as shown in the following command line, the `ls` command can be used to view all
    the files within a directory:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 执行命令后，观察到shell提示显示给用户。在这个shell提示中，可以在设备上执行命令。例如，如下命令行所示，`ls`命令可用于查看目录中的所有文件：
- en: '[PRE5]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The following section explains some of the widely used Linux commands that are
    very helpful while interacting with an Android device.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分解释了一些在与Android设备交互时非常有用的广泛使用的Linux命令。
- en: Basic Linux commands
  id: totrans-115
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 基本的Linux命令
- en: 'We will now take a look at some of the Linux commands and their usage with
    respect to an Android device:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将看一些Linux命令及其在Android设备上的使用：
- en: '`ls`: The ls command (with no option) lists files and directories present in
    the current directory. With the `-l` option, it also shows their size, modified
    date and time, owner of file and it''s permission, and so on as shown in the following
    command-line output:'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ls`：ls命令（无选项）列出当前目录中存在的文件和目录。使用`-l`选项，它还显示它们的大小，修改日期和时间，文件所有者及其权限等，如下命令行输出所示：'
- en: '[PRE6]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Similarly, here are a few options that can be used along with the `ls` command.
    Depending on the requirement, one or more of these options can be used by the
    investigator to view the details:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，以下是可以与 `ls` 命令一起使用的一些选项。根据需求，调查人员可以使用其中一个或多个选项来查看详细信息：
- en: '| Option | Description |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| 选项 | 描述 |'
- en: '| --- | --- |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `a` | Lists hidden files |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| `a` | 列出隐藏文件 |'
- en: '| `c` | Displays files by timestamp |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| `c` | 根据时间戳显示文件 |'
- en: '| `d` | Displays only directories |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| `d` | 仅显示目录 |'
- en: '| `n` | Displays the long format listing, with GID and UID numbers |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| `n` | 显示长格式列表，包括 GID 和 UID 号码 |'
- en: '| `R` | Displays subdirectories as well |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| `R` | 同时显示子目录 |'
- en: '| `t` | Displays files based on timestamp |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| `t` | 根据时间戳显示文件 |'
- en: '| `u` | Displays the file access time |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| `u` | 显示文件访问时间 |'
- en: '`cat`: The cat command reads one or more files and prints them to standard
    output, as shown in the following command lines:'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cat`：cat 命令读取一个或多个文件并将它们打印到标准输出，如下面的命令行所示：'
- en: '[PRE7]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The `>` operator can be used to combine multiple files into one. The `>>` operator
    can be used to append to an existing file.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '`>` 运算符可用于将多个文件合并为一个。`>>` 运算符可用于追加到现有文件中。'
- en: '`cd`: The `cd` command is used to change from one directory to another. This
    is used while navigating from one folder to another. The following example shows
    commands used to change to the system folder:'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cd`：`cd` 命令用于从一个目录切换到另一个目录。在从一个文件夹导航到另一个文件夹时使用。以下示例显示了用于切换到系统文件夹的命令：'
- en: '[PRE8]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '`cp`: The `cp` command can be used to copy a file from one location to another.
    The syntax for this command is as follows:'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cp`：`cp` 命令可用于将文件从一个位置复制到另一个位置。该命令的语法如下：'
- en: '[PRE9]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '`chmod`: The `chmod` command is used to change the access permissions to filesystem
    objects (files and directories). It may also alter special mode flags. The syntax
    for this command is as follows:'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`chmod`：`chmod` 命令用于更改文件系统对象（文件和目录）的访问权限。它也可以更改特殊模式标志。该命令的语法如下：'
- en: '[PRE10]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: For example, `chmod 777` on a file gives permission to everyone to read, write,
    and execute it.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，对文件执行 `chmod 777` 可以让所有人都有读取、写入和执行的权限。
- en: '`dd`: The `dd` command is used to copy a file, converting and formatting according
    to the operands. With Android, the `dd` command can be used to create a bit-by-bit
    image of the Android device. More details about the imaging are covered in [Chapter
    5](part0040.xhtml "Chapter 5. Extracting Data Physically from Android Devices"),
    *Extracting Data Physically from Android Devices*. Here is the syntax that needs
    to be used with this command:'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dd`：`dd` 命令用于复制文件，根据操作数进行转换和格式化。在 Android 中，`dd` 命令可用于创建 Android 设备的逐位图像。有关成像的更多细节在[第5章](part0040.xhtml
    "第5章。从 Android 设备物理上提取数据")中有所涵盖，*从 Android 设备物理上提取数据*。以下是需要与此命令一起使用的语法：'
- en: '[PRE11]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '`rm`: The `rm` command can be used to delete files or directories. Here is
    the syntax for this command:'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rm`：`rm` 命令可用于删除文件或目录。以下是该命令的语法：'
- en: '[PRE12]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '`grep`: The `grep` command is used to search files or output for a particular
    pattern. The following example shows searching a `default.prop` file for the word
    `secure`:'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`grep`：`grep` 命令用于搜索特定模式的文件或输出。以下示例显示了在 `default.prop` 文件中搜索单词 `secure`：'
- en: '[PRE13]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '`pwd`: The `pwd` command displays the current working directory. For example,
    the following command-line output shows that the current working directory is
    `/system`:'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pwd`：`pwd` 命令显示当前工作目录。例如，以下命令行输出显示当前工作目录为 `/system`：'
- en: '[PRE14]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '`mkdir`: The `mkdir` command is used to create a new directory. The syntax
    for this command is as follows:'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mkdir`：`mkdir` 命令用于创建新目录。该命令的语法如下：'
- en: '[PRE15]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '`exit`: The `exit` command can be used to exit the shell you are in. Just type
    `exit` in the shell to exit from it.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exit`：`exit` 命令可用于退出当前所在的 shell。只需在 shell 中输入 `exit` 即可退出。'
- en: Installing an application
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装应用程序
- en: 'During forensic analysis, there might be cases where you need to install a
    few applications on the device in order to extract some data. To do so, you can
    use the `adb.exe install` command. Along with this command, as shown in the following
    command-line output, you need to specify the path to the `.apk` file that you
    want to install:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在取证分析过程中，可能会有需要在设备上安装一些应用程序以提取一些数据的情况。为此，您可以使用 `adb.exe install` 命令。除此命令之外，如下面的命令行输出所示，您需要指定要安装的
    `.apk` 文件的路径：
- en: '[PRE16]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: However, it is important to note that installing third-party apps may not be
    accepted in a court of law. Hence, a forensic investigator needs to be cautious
    before installing any third-party app on the device.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，需要注意的是，在法庭上可能不接受安装第三方应用程序。因此，在设备上安装任何第三方应用程序之前，取证调查人员需要谨慎。
- en: Pulling data from the device
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从设备中提取数据
- en: 'You can use the `adb pull` command to pull the files present on the Android
    device to the local workstation. Here is the syntax to use this command:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 `adb pull` 命令将 Android 设备上的文件拉取到本地工作站。以下是使用此命令的语法：
- en: '[PRE17]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Here, `<remote>` refers to path of the file on the Android device, and `<local>`
    refers to the location on the local workstation where the file needs to be stored.
    For instance, the following command-line output shows a `Sample.png` file being
    pulled from the Android device to a `temp` folder on computer:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，`<remote>` 指的是 Android 设备上文件的路径，`<local>` 指的是需要存储文件的本地工作站位置。例如，以下命令行输出显示了从
    Android 设备中将 `Sample.png` 文件拉取到计算机上的 `temp` 文件夹中：
- en: '[PRE18]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: However, on a normal Android phone, you will not be able to download all the
    files using the `adb pull` command, because of the inherent security features
    enforced by the operating system. For example, files present under the `/data/data`
    folder cannot be accessed in this manner on an Android device that is not rooted.
    More details about this topic have been covered in [Chapter 4](part0031.xhtml
    "Chapter 4. Extracting Data Logically from Android Devices"), *Extracting Data
    Logically from Android Devices*.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在普通的Android手机上，您将无法使用`adb pull`命令下载所有文件，因为操作系统强制执行的固有安全功能。例如，在未经root的Android设备上，无法以这种方式访问`/data/data`文件夹中的文件。有关此主题的更多详细信息已在[第4章](part0031.xhtml
    "第4章。从Android设备逻辑提取数据")中进行了介绍，*从Android设备逻辑提取数据*。
- en: Pushing data to the device
  id: totrans-160
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 将数据推送到设备
- en: 'You can use the `adb push` command to copy files from the local workstation
    to the Android device. Here is the syntax to use this command:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用`adb push`命令将文件从本地工作站复制到Android设备。以下是使用此命令的语法：
- en: '[PRE19]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Here, `<local>` refers to location of the file on the local workstation, and
    `<remote>` refers to the path on the Android device where the file needs to be
    stored. For instance, the following command-line output shows a `test.png` file
    copied from the computer to the `Pictures` folder of an Android device:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，`<local>`指的是本地工作站上文件的位置，`<remote>`指的是Android设备上需要存储文件的路径。例如，以下命令行输出显示了从计算机复制到Android设备的`Pictures`文件夹中的`test.png`文件：
- en: '[PRE20]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: You can only push the files to the folders for which the user account has privileges.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 您只能将文件推送到用户帐户具有特权的文件夹。
- en: Restarting the adb server
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 重新启动adb服务器
- en: In some cases, you might need to terminate the adb server process and then restart
    it. For example, if adb does not respond to a command. This may resolve the problem.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，您可能需要终止adb服务器进程，然后重新启动它。例如，如果adb不响应命令。这可能会解决问题。
- en: To stop the adb server, use the `kill-server` command. You can then restart
    the server by issuing any other adb command.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 要停止adb服务器，请使用`kill-server`命令。然后，您可以通过发出任何其他adb命令来重新启动服务器。
- en: Viewing log data
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 查看日志数据
- en: 'In Android, the `logcat` command provides a way to view the system debug output.
    Logs from various applications and portions of the system are collected in a series
    of circular buffers which then can be viewed and filtered by this command:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在Android中，`logcat`命令提供了一种查看系统调试输出的方式。来自各种应用程序和系统部分的日志被收集在一系列循环缓冲区中，然后可以通过此命令查看和过滤：
- en: '[PRE21]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The log message shown here is just a sample message. During investigation,
    logs need to be carefully analyzed to gather information on location details,
    data/time information, application details, and so on. Each log begins with a
    message type indicator, as described in the following table:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 这里显示的日志消息只是一个示例消息。在调查过程中，需要仔细分析日志，以收集有关位置详细信息、日期/时间信息、应用程序详细信息等的信息。每个日志都以消息类型指示器开头，如下表所述：
- en: '| Message Type | Description |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| 消息类型 | 描述 |'
- en: '| --- | --- |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `V` | Verbose |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| `V` | 冗长 |'
- en: '| `D` | Debug |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| `D` | 调试 |'
- en: '| `I` | Information |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| `I` | 信息 |'
- en: '| `W` | Warning |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| `W` | 警告 |'
- en: '| `E` | Error |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| `E` | 错误 |'
- en: '| `F` | Fatal |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| `F` | 致命 |'
- en: '| `S` | Silent |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| `S` | 静默 |'
- en: 'The `logcat` command can also be used to view full cellular radio debugging,
    as shown in the following command-line output:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '`logcat`命令也可用于查看完整的蜂窝无线电调试，如下面的命令行输出所示：'
- en: '[PRE22]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Rooting Android
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Rooting Android
- en: '"Rooting" is a word that is very often heard with respect to Android devices.
    As a forensic examiner, it is essential to understand this in detail. This will
    help you gain the knowledge that is required to understand the internals of the
    device. It will also help you gain expertise on several issues that are encountered
    during an investigation. Rooting Android phones has become a common phenomenon
    and rooted phones are very often encountered during investigations. Also, depending
    on the situation and data to be extracted, the examiner himself has to root the
    device in order to extract certain data. The following sections talk about rooting
    an Android device and other related concepts.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '"Rooting"是一个在Android设备方面经常听到的词。作为法医检查员，深入了解这一点至关重要。这将帮助您获得了解设备内部所需的知识。这也将帮助您在调查过程中遇到的几个问题上获得专业知识。Rooting
    Android手机已经成为一种常见现象，在调查过程中经常遇到rooted手机。此外，根据情况和要提取的数据，检查员本身必须root设备才能提取某些数据。以下各节讨论了rooting
    Android设备和其他相关概念。'
- en: What is rooting?
  id: totrans-186
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 什么是rooting？
- en: 'To understand rooting, it is essential to understand how Unix-like systems
    work. The original Unix operating system on which Linux and other Unix-like systems
    are based was designed from the very beginning as a multiuser system. This is
    primarily because personal computers did not yet exist, and hence, it was necessary
    to have a mechanism to separate and protect the resources of the individual users
    while allowing them to use the system simultaneously. However, in order to perform
    privileged tasks, such as granting and revoking powers for ordinary users, accessing
    critical system files to repair or upgrade the system, and so on, it was necessary
    to have a system administrator account that has superuser access. So we have two
    types of accounts: normal user accounts, which have fewer privileges, and a superuser
    or root account, which has all the privileges.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解rooting，了解类Unix系统的工作原理至关重要。Linux和其他类Unix系统所基于的原始Unix操作系统从一开始就被设计为多用户系统。这主要是因为个人计算机尚不存在，因此有必要有一种机制来分离和保护各个用户的资源，同时允许他们同时使用系统。但是，为了执行特权任务，例如授予和撤销普通用户的权限，访问关键系统文件以修复或升级系统等，有必要拥有具有超级用户访问权限的系统管理员帐户。因此，我们有两种类型的帐户：普通用户帐户，权限较少，以及超级用户或根帐户，具有所有权限。
- en: Hence, root is the user name or account that, by default, has access to all
    commands and files on a Linux or other Unix-like operating system. It is also
    referred to as the root account, root user, and the superuser. So, in Linux, the
    root user has the power to start or stop any system service, edit or delete any
    file, change the privileges of other users, and so on. You have learned that Android
    uses the Linux kernel, and hence, most of the concepts present in Linux are applicable
    to Android as well. However, when you buy an Android phone, normally, it does
    not let you log in as a root user. Rooting an Android phone is all about gaining
    this root access on the device to perform actions that are not normally allowed
    on the device.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，root是默认情况下具有对Linux或其他类Unix操作系统上的所有命令和文件的访问权限的用户名或帐户。它也被称为根帐户、根用户和超级用户。因此，在Linux中，根用户有权启动或停止任何系统服务，编辑或删除任何文件，更改其他用户的权限等。您已经了解到Android使用Linux内核，因此，Linux中的大多数概念也适用于Android。然而，当您购买Android手机时，通常不允许您以根用户身份登录。对Android手机进行root操作就是为了在设备上获得这种根访问权限，以执行通常不允许在设备上执行的操作。
- en: It is also important to understand the difference between rooting and **jailbreaking**,
    as they are often wrongly assumed to be the same. Jailbreaking a device that runs
    Apple iOS allows you to remove certain restrictions and limitations put in place
    by Apple. For instance, Apple does not allow us to sideload an unsigned application
    on the device. So, by jailbreaking, you can install applications that are not
    approved by Apple. In contrast, Android allows sideloading of applications. Jailbreaking
    a phone involves bypassing several security restrictions simultaneously. Thus,
    gaining root access on the device is only one of the aspects of jailbreaking a
    device.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 理解root和**越狱**之间的区别也很重要，因为它们经常被错误地认为是相同的。越狱运行Apple iOS的设备允许您删除苹果设置的某些限制和限制。例如，苹果不允许我们在设备上安装未签名的应用程序。因此，通过越狱，您可以安装未经苹果批准的应用程序。相比之下，Android允许应用程序的侧载。越狱手机涉及同时绕过多个安全限制。因此，在设备上获得根访问权限只是越狱设备的一个方面。
- en: Why root?
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为什么要root？
- en: Rooting is often performed by many people with the goal of overcoming limitations
    that carriers and hardware manufacturers put on Android devices. By rooting an
    Android device, you can alter or replace system applications and settings, run
    specialized apps that require administrator-level permissions, or perform operations
    that are otherwise inaccessible to a normal Android user. These actions include
    uninstalling the default apps (especially the bloatware) that come along with
    the phone. Rooting is also done for extreme customization; for instance, new customized
    ROMs could be downloaded and installed. However, from a forensic analysis point
    of view, the main reason for rooting is to gain access to those parts of the system
    that are normally not accessible. Most of the public root tools will result in
    a permanent root, where the changes persist even after rebooting the device. In
    the case of a temporary root, the changes are lost once the device reboots. Temporary
    roots should always be preferred in forensic cases.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 许多人进行root操作的目标是克服运营商和硬件制造商对Android设备设置的限制。通过对Android设备进行root操作，您可以更改或替换系统应用程序和设置，运行需要管理员级权限的专门应用程序，或执行通常对普通Android用户不可访问的操作。这些操作包括卸载默认应用程序（特别是随手机附带的垃圾应用程序）。root操作也是为了进行极端定制；例如，可以下载和安装新的定制ROM。然而，从取证分析的角度来看，进行root操作的主要原因是获得对通常无法访问的系统部分的访问权限。大多数公共root工具将导致永久root，即使在重新启动设备后更改仍然存在。在临时root的情况下，设备重新启动后更改将丢失。在取证案例中应始终首选临时root。
- en: As explained in [Chapter 1](part0014.xhtml "Chapter 1. Introducing Android Forensics"),
    *Introducing Android Forensics*, in Linux systems, each user is assigned a **unique
    user ID** (**UID**), and users are segregated so that one user does not access
    the data of another user. Similarly, in Android, each application is assigned
    a UID and is run as a separate process. App UIDs are assigned usually in the order
    they are installed, starting from 10001\. These IDs are stored in the `packages.xml`
    file in `/data/system`. This file, in addition to storing UIDs, stores the Android
    permissions of each program as described in its manifest file.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 如[第1章](part0014.xhtml "第1章.介绍Android取证")*介绍Android取证*中所解释的，在Linux系统中，每个用户被分配一个**唯一用户ID**（**UID**），用户被隔离开，以便一个用户无法访问另一个用户的数据。同样，在Android中，每个应用程序被分配一个UID，并作为一个单独的进程运行。应用程序UID通常按安装顺序分配，从10001开始。这些ID存储在`/data/system`中的`packages.xml`文件中。除了存储UID，该文件还存储了每个程序的Android权限，如其清单文件中所述。
- en: 'The private data of each application is stored in the `/data/data` location
    and is accessible only to that application. Hence, during the course of investigation,
    the data present at this location cannot be accessed. However, rooting a phone
    will allow you to access the data present in any location. It is important to
    keep in mind that rooting a phone has several implications, as described here:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 每个应用程序的私有数据存储在`/data/data`位置，只能被该应用程序访问。因此，在调查过程中，无法访问该位置的数据。然而，对手机进行root操作将允许您访问任何位置的数据。需要记住的是，对手机进行root操作有几个影响，如下所述：
- en: '**Security risk**: Rooting a phone might expose the device to security risks.
    For instance, imagine a malicious app that has access to the entire operating
    system and to the data of all the other apps installed on the device.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全风险**：对手机进行root操作可能会使设备面临安全风险。例如，想象一下一个恶意应用程序，它可以访问整个操作系统以及设备上安装的所有其他应用程序的数据。'
- en: '**Bricking of your device**: If rooting is not done in a proper manner, it
    might result in the bricking of your device. "Bricking" is a word commonly used
    with phones that are dead or cannot be turned on in any way.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设备变砖**: 如果root操作没有正确进行，可能会导致设备变砖。"变砖"是一个常用词，用于描述无法以任何方式打开的死机手机。'
- en: '**Voiding your warranty**: Depending on the manufacturer and carrier, rooting
    a device may void your warranty, since it exposes the device to several threats.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使您的保修失效**：根据制造商和运营商的不同，对设备进行Root操作可能会使您的保修失效，因为这会使设备面临多种威胁。'
- en: '**Forensic implications**: Rooting an Android device will allow an investigator
    to access a larger set of data, but it involves the alteration of certain portions
    of the device. Hence, the device should be rooted only when it is absolutely necessary.'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 法医学意义：对Android设备进行Root操作将允许调查人员访问更多的数据，但这涉及对设备的某些部分进行修改。因此，只有在绝对必要的情况下才应对设备进行Root操作。
- en: Recovery and fastboot
  id: totrans-198
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 恢复和快速启动
- en: Before dealing with the process of rooting, it is necessary to understand boot
    loader, recovery, and fastboot modes in Android. The following sections explain
    these in detail.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理Root过程之前，有必要了解Android中的引导加载程序、恢复和快速启动模式。以下部分将详细解释这些内容。
- en: Recovery mode
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 恢复模式
- en: 'An Android phone can be seen as a device having three main partitions: boot
    loader, Android ROM, and recovery. The boot loader is present in the first partition
    and is the first program that runs when the phone is powered on. The primary job
    of this boot loader is to take care of low-level hardware initialization and boot
    the device into other partitions. It usually loads the Android partition, commonly
    referred to as Android ROM, by default. Android ROM contains all the operating
    system files that are necessary to run the device. The recovery partition, commonly
    referred to as stock recovery, is the one that is used to delete all user data
    and files or to perform system updates.'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: Android手机可以看作是一个具有三个主要分区的设备：引导加载程序、Android ROM和恢复。引导加载程序位于第一个分区中，是手机开机时运行的第一个程序。这个引导加载程序的主要工作是处理低级硬件初始化并将设备引导到其他分区。它通常默认加载Android分区，通常称为Android
    ROM。Android ROM包含运行设备所必需的所有操作系统文件。恢复分区，通常称为原生恢复，用于删除所有用户数据和文件或执行系统更新。
- en: Both of these operations can be started from the running Android system or by
    manually booting into the recovery mode. For example, when you do a factory reset
    on your phone, recovery boots up and erases the files and data. Likewise, with
    updates, the phone boots into the recovery mode to install the latest updates
    that are written directly to the Android ROM partition. Hence, the recovery mode
    is the screen that you see when you install any official update on the device.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种操作都可以从正在运行的Android系统开始，也可以通过手动进入恢复模式进行。例如，当您在手机上进行恢复出厂设置时，恢复会启动并擦除文件和数据。同样，通过更新，手机会启动到恢复模式以安装直接写入Android
    ROM分区的最新更新。因此，恢复模式是您在设备上安装任何官方更新时看到的屏幕。
- en: Accessing the recovery mode
  id: totrans-203
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 访问恢复模式
- en: 'The recovery image is stored on the recovery partition, and it consists of
    a Linux image with a simple user interface controlled by hardware buttons. The
    recovery mode can be accessed in two ways:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复映像存储在恢复分区上，它由一个带有硬件按钮控制的Linux映像组成。可以通过两种方式访问恢复模式：
- en: By pressing certain combinations of keys when booting the device (usually, by
    holding volume +, volume -, and power buttons during the bootup)
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过在设备启动时按下某些组合键（通常是在启动过程中按住音量+、音量-和电源按钮）
- en: By issuing the adb reboot recovery command to a booted Android system
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过向已启动的Android系统发出adb reboot recovery命令
- en: 'Here is the screenshot of the stock recovery mode on an Android device:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Android设备上原生恢复模式的屏幕截图：
- en: '![Accessing the recovery mode](img/image00278.jpeg)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![访问恢复模式](img/image00278.jpeg)'
- en: Android stock recovery
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: Android原生恢复
- en: The stock Android recovery is intentionally very limited in functionality. It
    has the options to reboot the system, apply updates from adb and SD card, factory
    reset, and so on. However, custom recovery offers many more options.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 原生Android恢复意图上功能非常有限。它有重新启动系统、从adb和SD卡应用更新、恢复出厂设置等选项。然而，自定义恢复提供了更多选项。
- en: Custom recovery
  id: totrans-211
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 自定义恢复
- en: 'Custom recovery is a third-party recovery environment. Flashing this recovery
    environment onto your device replaces the default stock recovery environment with
    a third-party, customized recovery environment. These are the most common features
    that are included in custom recovery:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义恢复是第三方恢复环境。将这个恢复环境刷入设备将默认的原生恢复环境替换为第三方定制的恢复环境。这些是自定义恢复中包含的最常见功能：
- en: Full backup and restore functionality (such as NANDroid)
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完整备份和恢复功能（如NANDroid）
- en: Allow unsigned update packages or allow signed packages with custom keys
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许未签名的更新包或允许带有自定义密钥的签名包
- en: Selectively mounts device partitions and SD card
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择性地挂载设备分区和SD卡
- en: Provide USB mass storage access to SD card or data partitions
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供USB大容量存储访问SD卡或数据分区
- en: Provide full ADB access, with the ADB daemon running as root
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供完整的ADB访问，ADB守护程序以root身份运行
- en: Fully featured BusyBox binary (Busybox is a collection of powerful command-line
    tools in a single binary executable)
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 功能齐全的BusyBox二进制文件（Busybox是一个包含强大命令行工具的单个二进制可执行文件集合）
- en: 'There are several custom recovery images available in the market today, such
    as ClockworkMod Recovery, TeamWin Recovery Project, and so on. The following screenshot
    shows the options available with ClockworkMod Recovery v6.0.2.5:'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 今天市场上有几种自定义恢复映像可用，例如ClockworkMod恢复、TeamWin恢复项目等。以下屏幕截图显示了ClockworkMod恢复v6.0.2.5提供的选项：
- en: '![Custom recovery](img/image00279.jpeg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![自定义恢复](img/image00279.jpeg)'
- en: ClockworkMod Recovery
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: ClockworkMod恢复
- en: Fastboot mode
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 快速启动模式
- en: 'Fastboot is a protocol that can be used to reflash partitions on your device.
    It is one of the tools that comes along with the Android SDK. It is an alternative
    to the recovery mode to do installations and updates and also to unlock the boot
    loader in some cases. While in fastboot, you can modify the filesystem images
    from a computer over a USB connection. Hence, it is one of the ways to install
    the recovery images and just boot in some cases. Once the phone is booted into
    fastboot, you can flash image files in the internal memory. For example, the custom
    recovery images, such as ClockworkMod recovery, discussed earlier can be flashed
    in this manner. One of the easiest ways to flash the ClockworkMod recovery is
    through the ROM Manager app. Once this app is installed on a rooted Android device,
    as shown in the following screenshot, the app provides a **Flash ClockworkMod
    Recovery** option to install the recovery:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: Fastboot是一种协议，可用于在设备上重新刷写分区。它是随Android SDK一起提供的工具之一。它是恢复模式的替代方案，可用于安装和更新，有时也可用于解锁引导加载程序。在快速启动模式下，可以通过USB连接从计算机修改文件系统映像。因此，这是安装恢复映像并在某些情况下启动的一种方式。一旦手机启动到快速启动模式，就可以在内部存储器中刷写图像文件。例如，可以通过ROM
    Manager应用程序以这种方式刷写之前讨论过的自定义恢复映像，如ClockworkMod恢复。刷写ClockworkMod恢复的最简单方法之一是通过ROM
    Manager应用程序。安装在已root的Android设备上后，该应用程序提供了**Flash ClockworkMod Recovery**选项来安装恢复：
- en: '![Fastboot mode](img/image00280.jpeg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![快速启动模式](img/image00280.jpeg)'
- en: Flashing ClockworkMod Recovery from the ROM Manager app
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 从ROM Manager应用程序刷入ClockworkMod恢复
- en: Locked and unlocked boot loaders
  id: totrans-226
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 已锁定和未锁定的引导加载程序
- en: Boot loaders may be locked or unlocked. Locked boot loaders do not allow you
    to perform modifications to the device's firmware by implementing restrictions
    at the boot loader level. This is usually done through cryptographic signature
    verification. Hence, unsigned code cannot be flashed to the device. In other words,
    in order to run any recovery image or your own operating system, the boot loader
    needs to be unlocked first. Unlocking the boot loader could result in serious
    security implications.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 引导加载程序可以是已锁定或未锁定的。已锁定的引导加载程序不允许您通过在引导加载程序级别实施限制来对设备的固件进行修改。这通常是通过加密签名验证来完成的。因此，无法向设备刷写未签名代码。换句话说，为了运行任何恢复映像或自己的操作系统，必须首先解锁引导加载程序。解锁引导加载程序可能会导致严重的安全问题。
- en: If the device is lost or stolen, all data on it can be recovered by an attacker
    simply by uploading a custom Android boot image or flashing a custom recovery
    image. Thus, the attacker has full access to the data contained on the device.
    As a result of this, a factory data reset is performed on the phone when unlocking
    a locked boot loader so that all the data is erased. Hence, it is important to
    perform this only when it is absolutely necessary. Some devices have ways to unlock
    them officially. For these devices, boot loader can be unlocked by putting the
    device into the fastboot mode and running the `fastboot oem unlock` command. This
    will unlock the boot loader and do a complete wipe of the Android device.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 如果设备丢失或被盗，攻击者只需上传自定义的Android引导映像或刷写自定义恢复映像，就可以恢复设备上的所有数据。因此，攻击者可以完全访问设备上包含的数据。因此，在解锁已锁定的引导加载程序时，手机会执行恢厂数据重置，以便擦除所有数据。因此，只有在绝对必要时才执行此操作非常重要。一些设备有官方解锁的方法。对于这些设备，可以将设备放入快速启动模式并运行`fastboot
    oem unlock`命令来解锁引导加载程序并完全擦除Android设备。
- en: 'Some other manufacturers provide unlocking through different means, for instance,
    through their websites and so on. The following screenshot shows the HTC website
    providing support to unlock HTC devices:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 一些其他制造商通过不同的方式提供解锁，例如通过他们的网站等。下面的屏幕截图显示了HTC网站提供支持以解锁HTC设备：
- en: '![Locked and unlocked boot loaders](img/image00281.jpeg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![已锁定和未锁定的引导加载程序](img/image00281.jpeg)'
- en: The HTC website providing support to unlock boot loader
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 提供支持解锁引导加载程序的HTC网站
- en: How to root
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何获取root权限
- en: This section talks about how to deal with both a locked and an unlocked boot
    loader. Gaining root access on a device with an unlocked boot loader is very easy,
    while gaining root access on a device with a locked boot loader is not so straightforward.
    The following sections explain this in detail.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 本节讨论如何处理已锁定和未锁定的引导加载程序。在具有未锁定引导加载程序的设备上获得root访问权限非常容易，而在具有已锁定引导加载程序的设备上获得root访问权限则不那么直接。以下各节将详细解释这一点。
- en: Rooting an unlocked boot loader
  id: totrans-234
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解锁引导加载程序
- en: 'In Unix-like systems, superuser is a special user account used for system administration
    and has privileges to access and modify all the files in an operating system.
    The process of rooting mainly involves copying the **superuser** (**su**) binary
    to a location in the current process''s path (`/system/xbin/su`) and granting
    it executable permissions with the `chmod` command. Hence, the first step here
    is to unlock the boot loader. As explained in the *Locked and unlocked boot loaders*
    section, depending on the device in question, unlocking a boot loader can be done
    either through the fastboot mode or through following vendor-specific boot loader
    unlock procedure. The su binary is usually accompanied by an Android application,
    such as Superuser, that provides a graphical prompt each time an application requests
    root access, as shown in the following screenshot:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在类Unix系统中，超级用户是用于系统管理的特殊用户帐户，并具有访问和修改操作系统中所有文件的特权。获取root权限的过程主要涉及将**超级用户**（**su**）二进制文件复制到当前进程路径中的位置（`/system/xbin/su`），并使用`chmod`命令授予其可执行权限。因此，这里的第一步是解锁引导加载程序。如在*已锁定和未锁定的引导加载程序*部分中所解释的，根据所涉及的设备，可以通过快速启动模式或遵循特定供应商的引导加载程序解锁过程来完成引导加载程序的解锁。su二进制文件通常伴随着一个Android应用程序，例如Superuser，每当应用程序请求root访问权限时都会提供一个图形提示，如下面的屏幕截图所示：
- en: '![Rooting an unlocked boot loader](img/image00282.jpeg)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![解锁引导加载程序](img/image00282.jpeg)'
- en: Superuser request
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 超级用户请求
- en: Once the boot loader is unlocked, you can make all the desired changes to the
    device. Hence, copying the su binary and granting it executable permissions can
    be done in many ways. The most common method is to boot a custom recovery image.
    This allows us to copy the su binary into the system partition and set the appropriate
    permissions through a custom update package.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦引导加载程序被解锁，您就可以对设备进行所有所需的更改。因此，可以通过多种方式复制su二进制文件并授予其可执行权限。最常见的方法是启动自定义恢复镜像。这使我们能够将su二进制文件复制到系统分区并通过自定义更新包设置适当的权限。
- en: 'On an unlocked boot loader device, follow these steps to root the device:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在解锁的引导加载程序设备上，按照以下步骤对设备进行root：
- en: Download custom recovery image from [http://www.clockworkmod.com/rommanager](http://www.clockworkmod.com/rommanager)
    and su update package from [http://superuserdownload.com/](http://superuserdownload.com/).
    The custom recovery image can be anything as long as it supports your device.
    Similarly, the su update package can be SuperSU, SuperUser, or any other package
    of your choice.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[http://www.clockworkmod.com/rommanager](http://www.clockworkmod.com/rommanager)下载自定义恢复镜像，并从[http://superuserdownload.com/](http://superuserdownload.com/)下载su更新包。自定义恢复镜像可以是任何支持您的设备的镜像。同样，su更新包可以是SuperSU、SuperUser或您选择的任何其他包。
- en: Copy both custom recovery image and the su update package to the SD card of
    the Android device.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将自定义恢复镜像和su更新包都复制到Android设备的SD卡上。
- en: Next, put the device into fastboot mode.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，将设备放入快速启动模式。
- en: 'Open the command prompt, and enter the following command:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符，并输入以下命令：
- en: '[PRE23]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: In the preceding command, `recovery.img` is the recovery image you downloaded.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在上述命令中，“recovery.img”是您下载的恢复镜像。
- en: From the `recovery` menu, select the `To apply an update zip file` option and
    browse to the location on your device where the su binary update package is present.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从“恢复”菜单中，选择“应用更新zip文件”选项，并浏览到设备上su二进制更新包所在的位置。
- en: Tip
  id: totrans-247
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Since Android 4.1 version, a new feature called the sideload mode has been introduced.
    This feature allows us to apply an update zip over ADB without copying it to the
    device beforehand. To sideload an update, run the `adb sideload su-package.zip`
    command, where `su-package.zip` is the filename of the update package on your
    computer.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 自Android 4.1版本以来，引入了一个名为sideload模式的新功能。此功能允许我们通过ADB在不事先复制到设备的情况下应用更新zip。要进行sideload更新，请运行`adb
    sideload su-package.zip`命令，其中`su-package.zip`是计算机上更新包的文件名。
- en: Alternately, you can also modify a factory image to add a su binary. This can
    be done by unpacking an ext4 formatted system image, adding a su binary, and repacking
    it. If this image is flashed, it will contain the su binary, and the device will
    be rooted.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您还可以修改工厂镜像以添加su二进制文件。这可以通过解包一个ext4格式的系统镜像，添加su二进制文件，然后重新打包来完成。如果刷入此镜像，它将包含su二进制文件，并且设备将被root。
- en: Note
  id: totrans-250
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Rooting is a highly device-specific process. Hence, a forensic investigator
    needs to be cautious before applying these techniques on any Android device.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: Rooting是一个高度特定于设备的过程。因此，在对任何Android设备应用这些技术之前，取证调查员需要谨慎。
- en: Rooting a locked boot loader
  id: totrans-252
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解锁引导加载程序的root
- en: When the boot loader is locked and cannot be unlocked through any available
    means, rooting the device requires us to find a security flaw that can be exploited.
    However, before that, it is important to identify the type of boot loader lock.
    It can vary depending on the manufacturer and the software version. With some
    mobiles, fastboot access may not be allowed, but you can still flash using the
    manufacturer's proprietary flashing protocol, such as Samsung ODIN. Some devices
    enforce signature verification on selected partitions only, such as boot and recovery.
    Hence, it may not be possible to boot into custom recovery. However, you can still
    modify the factory image to include the su binary, as explained in the preceding
    section.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 当引导加载程序被锁定且无法通过任何可用手段解锁时，对设备进行root需要我们找到一个可以被利用的安全漏洞。然而，在此之前，重要的是要确定引导加载程序锁的类型。这可能会因制造商和软件版本而异。对于一些手机，可能不允许快速启动访问，但仍可以使用制造商的专有刷机协议进行刷机，比如三星ODIN。一些设备仅对选定的分区强制执行签名验证，比如引导和恢复。因此，可能无法引导到自定义恢复模式。但是，您仍然可以修改工厂镜像以包含su二进制文件，就像前面部分所述的那样。
- en: 'If the boot loader cannot be unlocked through any means, then the only option
    is to find some vulnerability on the device that allows us to exploit and add
    the su binary. The vulnerability can be in an Android kernel, in a process running
    as root, or any other issue. It is device specific and needs to be researched
    extensively before trying it on any device. Here are some of the common exploits
    used in rooting an Android device:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 如果无法通过任何手段解锁引导加载程序，那么唯一的选择就是找到设备上允许我们利用并添加su二进制文件的一些漏洞。漏洞可能存在于Android内核、以root身份运行的进程或其他问题中。这是设备特定的，需要在尝试任何设备之前进行广泛的研究。以下是在对Android设备进行root时使用的一些常见漏洞利用：
- en: psneuter
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: psneuter
- en: asroot
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: asroot
- en: Exploid
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Exploid
- en: GingerBreak
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GingerBreak
- en: RageAgainstTheCage
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RageAgainstTheCage
- en: Volez
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞
- en: Levitator
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Levitator
- en: zergRush
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: zergRush
- en: mempodroid
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: mempodroid
- en: Razr blade
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Razr刀片
- en: ADB on a rooted device
  id: totrans-265
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 已root设备上的ADB
- en: 'We have already seen how the ADB tool can be used to interact with the device
    and execute certain commands on the device. However, on a normal Android phone,
    certain locations, such as `/data/data`, cannot be accessed. For example, the
    following the command-line output appears when you try to access `/data/data`
    on a normal device:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到了如何使用ADB工具与设备进行交互并在设备上执行某些命令。然而，在普通Android手机上，某些位置，比如“/data/data”，是无法访问的。例如，当您尝试在普通设备上访问“/data/data”时，会出现以下命令行输出：
- en: '[PRE24]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'This is because the private data of all the applications is stored in this
    folder. Thus, the security is enforced by Android. Only the root user has access
    to this location. Hence, on a rooted device, you will be able to see all the data
    under this location, as shown in the following commands:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为所有应用的私有数据都存储在这个文件夹中。因此，安卓强制执行了安全性。只有root用户才能访问这个位置。因此，在已root设备上，您将能够看到该位置下的所有数据，就像以下命令中所示：
- en: '[PRE25]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: As shown in the preceding commands, the private data of all the applications
    can now be seen easily by navigating to the respective folders. Hence, the ADB
    tool on a rooted device is very powerful and allows an examiner to access all
    the data of applications installed on the device. This is possible provided the
    device is not pattern or PIN protected or registered to the machine with an RSA
    key.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述命令所示，现在可以通过导航到相应的文件夹轻松地看到所有应用程序的私人数据。因此，对于已Root的设备上的ADB工具非常强大，并允许审查员访问设备上安装的所有应用程序的数据。只要设备没有图案或PIN保护，或者已注册到具有RSA密钥的机器上，这是可能的。
- en: Note
  id: totrans-271
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Sometimes, even on a rooted phone, you will see the permission-denied message.
    In such cases, after executing the adb shell command, try entering the superuser
    mode by typing `su`. If root is enabled, you will see `#` without asking for password.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，即使在Root手机上，您也会看到权限被拒绝的消息。在这种情况下，在执行adb shell命令后，尝试输入超级用户模式，输入`su`。如果启用了Root，您将看到`#`而不需要密码。
- en: Summary
  id: totrans-273
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Setting up a proper forensic environment is crucial prior to conducting investigation
    on an Android device. The Android SDK installation is necessary to use tools such
    as ADB that come along with it. Using ADB, an examiner can communicate with the
    device, view folders on the device, and pull data and copy data to the device.
    However, not all folders can be accessed on a normal phone in this manner. This
    is because the device's security enforcements prevent an examiner from viewing
    the locations that contain private data. Rooting a device solves this issue, as
    it provides unlimited access to all the data present on the device. Rooting a
    device with an unlocked boot loader is straightforward, while rooting a device
    with a locked boot loader involves exploiting some security bug.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 设置一个适当的取证环境是在对安卓设备进行调查之前至关重要的。安卓SDK的安装是必要的，以便使用其中附带的ADB等工具。使用ADB，审查员可以与设备通信，查看设备上的文件夹，并提取数据并将数据复制到设备上。然而，并非所有文件夹都可以以这种方式在普通手机上访问。这是因为设备的安全执行阻止审查员查看包含私人数据的位置。对设备进行Root解决了这个问题，因为它提供了对设备上所有数据的无限访问。对于已解锁引导加载程序的设备，对其进行Root是直截了当的，而对于已锁定引导加载程序的设备，则涉及利用一些安全漏洞。
- en: With this knowledge about accessing the device, you will now learn how data
    is organized on an Android device and many other details in [Chapter 3](part0026.xhtml
    "Chapter 3. Understanding Data Storage on Android Devices"), *Understanding Data
    Storage on Android Devices*.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 有了对访问设备的了解，您现在将在[第3章](part0026.xhtml "第3章。了解安卓设备上的数据存储")中学习有关数据在安卓设备上的组织以及许多其他细节，*了解安卓设备上的数据存储*。
