["```\n version: '3.7'\n\n  services:\n    ...\n\n  networks:\n    ...\n\n  volumes:\n    ...\n```", "```\nmessage-queue:\n  image: dockeronwindows/ch05-nats:2e\n networks:\n - nd-net \n```", "```\n  elasticsearch:\n  image: sixeyed/elasticsearch:5.6.11-windowsservercore-ltsc2019\n environment: \n  - ES_JAVA_OPTS=-Xms512m -Xmx512m\n  volumes:\n     - **es-data:C:\\data**\n   networks:\n    - nd-net\n```", "```\nreverse-proxy:\n  image: sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019\n  command: --docker --docker.endpoint=npipe:////./pipe/docker_engine --api\n ports:\n   - **\"80:80\"**\n **- \"8080:8080\"**\n  volumes: - type: npipe source: \\\\.\\pipe\\docker_engine target: \\\\.\\pipe\\docker_engine \n  networks:\n   - nd-net\n```", "```\nkibana:\n  image: sixeyed/kibana:5.6.11-windowsservercore-ltsc2019\n  labels:\n   - \"traefik.frontend.rule=Host:kibana.nerddinner.local\"\n   depends_on:\n   - elasticsearch  networks:\n   - nd-net\n```", "```\nnerd-dinner-index-handler:\n  image: dockeronwindows/ch05-nerd-dinner-index-handler:2e\n  environment:\n   - Elasticsearch:Url=http://elasticsearch:9200\n   - **MessageQueue:Url=nats://message-queue:4222**\n  depends_on:\n   - elasticsearch\n   - message-queue\n  networks:\n   - nd-net\n```", "```\nnerd-dinner-db:\n  image: dockeronwindows/ch03-nerd-dinner-db:2e\n env_file:\n   - **db-credentials.env**\n  volumes:\n   - db-data:C:\\data\n  networks:\n   - nd-net\n```", "```\nsa_password=4jsZedB32!iSm__\nConnectionStrings:UsersContext=Data Source=nerd-dinner-db,1433;Initial Catalog=NerdDinner...\nConnectionStrings:NerdDinnerContext=Data Source=nerd-dinner-db,1433;Initial Catalog=NerdDinner...\n```", "```\nnerd-dinner-save-handler:\n  image: dockeronwindows/ch05-nerd-dinner-save-handler:2e\n  depends_on:\n   - nerd-dinner-db\n   - message-queue\n  env_file:\n   - db-credentials.env\n  networks:\n   - nd-net\n```", "```\nnerd-dinner-api:\n  image: dockeronwindows/ch05-nerd-dinner-api:2e\n  labels:\n   - \"traefik.frontend.rule=Host:api.nerddinner.local\"\n  env_file:\n   - db-credentials.env\n  networks:\n   - nd-net\n```", "```\nnerd-dinner-homepage:\n  image: dockeronwindows/ch03-nerd-dinner-homepage:2e\n  labels:\n   - \"traefik.frontend.rule=Host:nerddinner.local;Path:/,/css/site.css\"\n   - \"traefik.frontend.priority=10\"\n  networks:\n   - nd-net\n```", "```\nnerd-dinner-web:\n  image: dockeronwindows/ch05-nerd-dinner-web:2e\n  labels:\n   - \"traefik.frontend.rule=Host:nerddinner.local;PathPrefix:/\"\n   - \"traefik.frontend.priority=1\"\n environment: \n   - HomePage:Enabled=false\n   - DinnerApi:Enabled=true\n  env_file:\n   - api-keys.env\n   - **db-credentials.env**\n  depends_on:\n   - nerd-dinner-db\n   - message-queue\n  networks:\n    - nd-net\n```", "```\nnetworks:\n  nd-net:\n   external:\n     name: nat\n```", "```\nvolumes:\n  es-data:\n  db-data:\n```", "```\n> docker-compose up -d\nCreating ch06-docker-compose_message-queue_1        ... done\nCreating ch06-docker-compose_nerd-dinner-api_1      ... done\nCreating ch06-docker-compose_nerd-dinner-db_1            ... done\nCreating ch06-docker-compose_nerd-dinner-homepage_1 ... done\nCreating ch06-docker-compose_elasticsearch_1        ... done\nCreating ch06-docker-compose_reverse-proxy_1        ... done\nCreating ch06-docker-compose_kibana_1                    ... done\nCreating ch06-docker-compose_nerd-dinner-index-handler_1 ... done\nCreating ch06-docker-compose_nerd-dinner-web_1           ... done\nCreating ch06-docker-compose_nerd-dinner-save-handler_1  ... done\n```", "```\n> docker container ls\nCONTAINER ID   IMAGE                                      COMMAND                     \nc992051ba468   dockeronwindows/ch05-nerd-dinner-web:2e   \"powershell powershe\u2026\"\n78f5ec045948   dockeronwindows/ch05-nerd-dinner-save-handler:2e          \"NerdDinner.MessageH\u2026\"      \ndf6de70f61df  dockeronwindows/ch05-nerd-dinner-index-handler:2e  \"dotnet NerdDinner.M\u2026\"      \nca169dd1d2f7  sixeyed/kibana:5.6.11-windowsservercore-ltsc2019   \"powershell ./init.p\u2026\"      \nb490263a6590  dockeronwindows/ch03-nerd-dinner-db:2e             \"powershell -Command\u2026\"      \n82055c7bfb05  sixeyed/elasticsearch:5.6.11-windowsservercore-ltsc2019   \"cmd /S /C \\\".\\\\bin\\\\el\u2026\"   \n22e2d5b8e1fa  dockeronwindows/ch03-nerd-dinner-homepage:2e       \"dotnet NerdDinner.H\u2026\"     \n 058248e7998c dockeronwindows/ch05-nerd-dinner-api:2e            \"dotnet NerdDinner.D\u2026\"      \n47a9e4d91682  sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019  \"/traefik --docker -\u2026\"      \ncfd1ef3f5414  dockeronwindows/ch05-nats:2e              \"gnatsd -c gnatsd.co\u2026\"\n... \n```", "```\n> docker-compose up -d --scale nerd-dinner-save-handler=3\n\nch06-docker-compose_elasticsearch_1 is up-to-date\nch06-docker-compose_nerd-dinner-homepage_1 is up-to-date\nch06-docker-compose_message-queue_1 is up-to-date\nch06-docker-compose_nerd-dinner-db_1 is up-to-date\nch06-docker-compose_reverse-proxy_1 is up-to-date\nch06-docker-compose_nerd-dinner-api_1 is up-to-date\nStarting ch06-docker-compose_nerd-dinner-save-handler_1 ...\nch06-docker-compose_kibana_1 is up-to-date\nch06-docker-compose_nerd-dinner-web_1 is up-to-date\nCreating ch06-docker-compose_nerd-dinner-save-handler_2 ... done\nCreating ch06-docker-compose_nerd-dinner-save-handler_3 ... done\n```", "```\n> docker container logs ch06-docker-compose_nerd-dinner-save-handler_1\nConnecting to message queue url: nats://message-queue:4222\nListening on subject: events.dinner.created, queue: save-dinner-handler\nReceived message, subject: events.dinner.created\nSaving new dinner, created at: 2/12/2019 11:22:47 AM; event ID: 60f8b653-f456-4bb1-9ccd-1253e9a222b6\nDinner saved. Dinner ID: 1; event ID: 60f8b653-f456-4bb1-9ccd-1253e9a222b6\n...\n\n> docker container logs ch06-docker-compose_nerd-dinner-save-handler_2\nConnecting to message queue url: nats://message-queue:4222\nListening on subject: events.dinner.created, queue: save-dinner-handler\nReceived message, subject: events.dinner.created\nSaving new dinner, created at: 2/12/2019 11:25:00 AM; event ID: 5f6d017e-a66b-4887-8fd5-ac053a639a6d\nDinner saved. Dinner ID: 5; event ID: 5f6d017e-a66b-4887-8fd5-ac053a639a6d\n\n> docker container logs ch06-docker-compose_nerd-dinner-save-handler_3\nConnecting to message queue url: nats://message-queue:4222\nListening on subject: events.dinner.created, queue: save-dinner-handler\nReceived message, subject: events.dinner.created\nSaving new dinner, created at: 2/12/2019 11:24:55 AM; event ID: 8789179b-c947-41ad-a0e4-6bde7a1f2614\nDinner saved. Dinner ID: 4; event ID: 8789179b-c947-41ad-a0e4-6bde7a1f2614\n```", "```\n> docker-compose up -d --scale nerd-dinner-web=3\nch06-docker-compose_message-queue_1 is up-to-date\n...\nStopping and removing ch06-docker-compose_nerd-dinner-save-handler_2 ... done\nStopping and removing ch06-docker-compose_nerd-dinner-save-handler_3 ... done\nCreating ch06-docker-compose_nerd-dinner-web_2                       ... done\nCreating ch06-docker-compose_nerd-dinner-web_3                       ... done\nStarting ch06-docker-compose_nerd-dinner-save-handler_1              ... done\n```", "```\ndocker-compose up -d --scale nerd-dinner-web=3 --scale nerd-dinner-save-handler=3\n```", "```\nnerd-dinner-web:\n  image: dockeronwindows/ch05-nerd-dinner-web:2e\n  labels:\n   - \"traefik.frontend.rule=Host:nerddinner.local;PathPrefix:/\"\n   - \"traefik.frontend.priority=1\"\n   - \"traefik.backend.loadbalancer.stickiness=true\"\n```", "```\n> docker-compose up -d --scale nerd-dinner-web=3 --scale nerd-dinner-save-handler=3\nch06-docker-compose_message-queue_1 is up-to-date\n...\nRecreating ch06-docker-compose_nerd-dinner-web_1 ... done\nRecreating ch06-docker-compose_nerd-dinner-web_2 ... done\nRecreating ch06-docker-compose_nerd-dinner-web_3 ... done\n```", "```\n> docker-compose stop\nStopping ch06-docker-compose_nerd-dinner-web_2           ... done\nStopping ch06-docker-compose_nerd-dinner-web_1           ... done\nStopping ch06-docker-compose_nerd-dinner-web_3           ... done\nStopping ch06-docker-compose_nerd-dinner-save-handler_3  ... done\nStopping ch06-docker-compose_nerd-dinner-save-handler_2  ... done\nStopping ch06-docker-compose_nerd-dinner-save-handler_1  ... done\nStopping ch06-docker-compose_nerd-dinner-index-handler_1 ... done\nStopping ch06-docker-compose_kibana_1                    ... done\nStopping ch06-docker-compose_reverse-proxy_1             ... done\nStopping ch06-docker-compose_nerd-dinner-homepage_1      ... done\nStopping ch06-docker-compose_nerd-dinner-db_1            ... done\nStopping ch06-docker-compose_nerd-dinner-api_1           ... done\nStopping ch06-docker-compose_elasticsearch_1             ... done\nStopping ch06-docker-compose_message-queue_1             ... done\n```", "```\n> docker-compose stop elasticsearch\nStopping ch06-docker-compose_elasticsearch_1 ... done\n```", "```\nversion: '3.7' services:\n  nerd-dinner-db:\n  image: dockeronwindows/ch06-nerd-dinner-db:2e\n```", "```\n> docker-compose `\n   -f docker-compose.yml `\n   -f docker-compose-db-upgrade.yml `\n  up -d \nch06-docker-compose_reverse-proxy_1 is up-to-date\nch06-docker-compose_nerd-dinner-homepage_1 is up-to-date\nch06-docker-compose_elasticsearch_1 is up-to-date\nch06-docker-compose_message-queue_1 is up-to-date\nch06-docker-compose_kibana_1 is up-to-date\nRecreating ch06-docker-compose_nerd-dinner-db_1 ... done\nRecreating ch06-docker-compose_nerd-dinner-web_1          ... done\nRecreating ch06-docker-compose_nerd-dinner-save-handler_1 ... done\nRecreating ch06-docker-compose_nerd-dinner-api_1          ... done\n```", "```\n> docker volume ls\n\nDRIVER  VOLUME NAME\nlocal   ch06-docker-compose_db-data\nlocal   ch06-docker-compose_es-data\n```", "```\n> docker volume inspect -f '{{ .Mountpoint }}' ch06-docker-compose_db-data\nC:\\ProgramData\\docker\\volumes\\ch06-docker-compose_db-data\\_data\n\n> ls C:\\ProgramData\\docker\\volumes\\ch06-docker-compose_db-data\\_data\n\n    Directory: C:\\ProgramData\\docker\\volumes\\ch06-docker-compose_db-data\\_data\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a----       12/02/2019     13:47        8388608 NerdDinner_Primary.ldf\n-a----       12/02/2019     13:47        8388608 NerdDinner_Primary.mdf\n```", "```\n> docker container logs ch06-docker-compose_nerd-dinner-db_1\n\nVERBOSE: Starting SQL Server\nVERBOSE: Changing SA login credentials\nVERBOSE: Data files exist - will attach and upgrade database\nGenerating publish script for database 'NerdDinner' on server '.\\SQLEXPRESS'.\nSuccessfully generated script to file C:\\init\\deploy.sql.\nVERBOSE: Changed database context to 'NerdDinner'.\nVERBOSE: Altering [dbo].[Dinners]...\nVERBOSE: Update complete.\nVERBOSE: Deployed NerdDinner database, data files at: C:\\data\n```", "```\n> docker-compose top\n\nch06-docker-compose_elasticsearch_1\nName          PID     CPU            Private Working Set\n---------------------------------------------------------\nsmss.exe      21380   00:00:00.046   368.6kB\ncsrss.exe     11232   00:00:00.359   1.118MB\nwininit.exe   16328   00:00:00.093   1.196MB\nservices.exe  15180   00:00:00.359   1.831MB\nlsass.exe     12368   00:00:01.156   3.965MB\nsvchost.exe   18424   00:00:00.156   1.626MB\n...\n```", "```\n> docker-compose logs\nAttaching to ch06-docker-compose_nerd-dinner-web_1, ch06-docker-compose_nerd-dinner-save-handler_1, ch06-docker-compose_nerd-dinner-api_1, ch06-docker-compose_nerd-dinner-db_1, ch06-docker-compose_kibana_1, ch06-docker-compose_nerd-dinner-index-handler_1, ch06-docker-compose_reverse-proxy_1, ch06-docker-compose_elasticsearch_1, ch06-docker-compose_nerd-dinner-homepage_1, ch06-docker-compose_message-queue_1\n\nnerd-dinner-web_1   | 2019-02-12 13:47:11 W3SVC1002144328 127.0.0.1 GET / - 80 - 127.0.0.1 Mozilla/5.0+(Windows+NT;+Windows+NT+10.0;+en-US)+WindowsPowerShell/5.1.17763.134 - 200 0 0 7473\nnerd-dinner-web_1   | 2019-02-12 13:47:14 W3SVC1002144328 ::1 GET / - 80 - ::1 Mozilla/5.0+(Windows+NT;+Windows+NT+10.0;+en-US)+WindowsPowerShell/5.1.17763.134 - 200 0 0 9718\n...\n```", "```\nnerd-dinner-db:\n  image: dockeronwindows/ch06-nerd-dinner-db:2e\n build:\n    context: ../ch06-nerd-dinner-db\n    dockerfile: **./Dockerfile** ...\nnerd-dinner-save-handler: image: dockeronwindows/ch05-nerd-dinner-save-handler:2e build: context: ../../ch05 dockerfile: ./ch05-nerd-dinner-save-handler/Dockerfile\n```", "```\n> docker-compose pull\nPulling message-queue             ... done\nPulling elasticsearch             ... done\nPulling reverse-proxy             ... done\nPulling kibana                    ... done\nPulling nerd-dinner-db            ... done\nPulling nerd-dinner-save-handler  ... done\nPulling nerd-dinner-index-handler ... done\nPulling nerd-dinner-api           ... done\nPulling nerd-dinner-homepage      ... done\nPulling nerd-dinner-web           ... done\n```", "```\nvolumes:\n  es-data:\n external: \n      name: nerd-dinner-elasticsearch-data\n\n  db-data:\n external: \n      name: nerd-dinner-database-data\n```", "```\n> docker-compose up -d\n\nERROR: Volume nerd-dinner-elasticsearch-data declared as external, but could not be found. Please create the volume manually using `docker volume create --name=nerd-dinner-elasticsearch-data` and try again.\n```", "```\ndocker volume create --name nerd-dinner-elasticsearch-data\ndocker volume create --name nerd-dinner-database-data\n```", "```\nnetworks:\n  nd-net:\n    external:\n name: nerd-dinner-network\n```", "```\ndocker network create -d nat nerd-dinner-network\n```", "```\nreverse-proxy:\n  image: sixeyed/traefik:v1.7.8-windowsservercore-ltsc2019\n  command: --docker --docker.endpoint=npipe:////./pipe/docker_engine --api\n  ports:\n   - \"80\"\n   - \"8080\"\n  volumes:\n   - type: npipe\n      source: \\\\.\\pipe\\docker_engine \n      target: \\\\.\\pipe\\docker_engine  networks:\n  - nd-net\n```", "```\nreverse-proxy:\n  ports:\n   - \"80:80\"\n   - \"8080:8080\"\n```", "```\nreverse-proxy:\n  command: --docker --docker.endpoint=npipe:////./pipe/docker_engine\n  ports:\n   - \"80:80\"\n```", "```\nnerd-dinner-homepage:\n  image: dockeronwindows/ch03-nerd-dinner-homepage:2e\n  labels:\n   - \"traefik.frontend.rule=Host:nerddinner.local;Path:/,/css/site.css\"\n   - \"traefik.frontend.priority=10\"\n  networks:\n   - nd-net\n```", "```\nnerd-dinner-homepage:\n  labels:\n   - \"traefik.frontend.rule=Host:nerd-dinner.test;Path:/,/css/site.css\"\n   - \"traefik.frontend.priority=10\"\n```", "```\nnerd-dinner-homepage:\n  labels:\n - \"traefik.frontend.rule=Host:nerd-dinner.com;Path:/,/css/site.css\"\n - \"traefik.frontend.priority=10\"\n```", "```\ndocker-compose `\n  -f docker-compose.yml `\n  -f docker-compose.production.yml `\n up -d\n```"]