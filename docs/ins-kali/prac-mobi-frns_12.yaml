- en: Android Data Analysis and Recovery
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Android数据分析和恢复
- en: In the previous chapter, we covered various logical and physical extraction
    techniques. In physical extraction, a bit-by-bit image of the Android device is
    obtained, which contains valuable information. In this chapter, we will learn
    how to analyze and extract relevant data, such as call logs and text messages,
    from an image file. While the data extraction and analysis techniques provide
    information about various details, not all techniques can provide information
    about the deleted data. Data recovery is a crucial aspect of mobile forensics,
    as it helps to unearth the deleted items.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了各种逻辑和物理提取技术。在物理提取中，获得了Android设备的逐位镜像，其中包含有价值的信息。在本章中，我们将学习如何分析和提取图像文件中的通话记录和短信等相关数据。虽然数据提取和分析技术提供了各种详细信息，但并非所有技术都能提供有关已删除数据的信息。数据恢复是移动取证的关键方面，因为它有助于发现已删除的项目。
- en: This chapter aims at covering various techniques, that can be used by a forensic
    analyst to recover the data from an Android device.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章旨在涵盖法证分析员可以使用的各种技术，以从Android设备中恢复数据。
- en: 'In this chapter, we will cover the following two major topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下两个主要主题：
- en: Analyzing and extracting data from Android image files using the Autopsy tool
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Autopsy工具分析和提取Android镜像文件中的数据
- en: Understanding techniques to recover deleted files from an SD card and the internal
    memory
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解从SD卡和内部存储器中恢复已删除文件的技术
- en: Analyzing and extracting data from Android image files using the Autopsy tool
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Autopsy工具分析和提取Android镜像文件中的数据
- en: The term **Android image** refers to the physical image (also called a forensic
    image or raw image) that is obtained by performing any of the physical data extraction
    techniques. Using the techniques explained in [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*, you can image the entire `/data/data` block
    or any particular block that is of relevance to the investigation. Once the image
    is obtained, an investigator like you can manually go through the contents of
    the file or take advantage of the available tools to parse through the contents.
    Commercial tools, such as Cellebrite and XRY, can drill into the data and present
    a comprehensive picture of the contents. Autopsy is one of the very widely used
    open source tools in the forensics world that performs an excellent job of analyzing
    an Android image.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 术语**Android镜像**指的是通过执行任何物理数据提取技术获得的物理镜像（也称为法证镜像或原始镜像）。使用[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)中解释的技术，*Android数据提取技术*，您可以对整个`/data/data`块或任何与调查相关的特定块进行镜像。一旦获得镜像，像您这样的调查人员可以手动查看文件内容或利用可用工具来解析内容。商业工具，如Cellebrite和XRY，可以深入挖掘数据并呈现内容的全面图片。Autopsy是法证界中使用非常广泛的开源工具之一，它在分析Android镜像方面表现出色。
- en: The Autopsy platform
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Autopsy平台
- en: Autopsy is a forensic platform and acts as a GUI for the Sleuth Kit. It is available
    for free; you can download it at [http://www.sleuthkit.org/](http://www.sleuthkit.org/).
    The Sleuth Kit is a collection of Unix and Windows-based tools and utilities,
    which are used to perform forensic analysis. Autopsy displays the results by forensically
    analyzing a given volume, and thereby helps investigators to focus on relevant
    sections of the data. Autopsy is free and extensible and has several modules that
    can be plugged in. Autopsy can be used to load and analyze an Android image that
    is obtained after physical extraction.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Autopsy是一个法证平台，作为Sleuth Kit的GUI。它是免费提供的；您可以在[http://www.sleuthkit.org/](http://www.sleuthkit.org/)下载。Sleuth
    Kit是一组Unix和基于Windows的工具和实用程序，用于进行法证分析。Autopsy通过对给定卷进行法证分析来显示结果，从而帮助调查人员专注于数据的相关部分。Autopsy是免费且可扩展的，并且有几个可以插入的模块。Autopsy可用于加载和分析在物理提取后获得的Android镜像。
- en: Adding an image to Autopsy
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将图像添加到Autopsy
- en: 'Once you have downloaded and installed Autopsy, follow these steps to add an
    image to Autopsy:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装Autopsy后，按照以下步骤将图像添加到Autopsy中：
- en: 'Open the Autopsy tool and select the Create New Case option, as shown in the
    following screenshot:'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Autopsy工具，并选择“创建新案例”选项，如下面的屏幕截图所示：
- en: '![](img/7bcd8c15-85e4-473c-b9b5-a5d2ba2da1de.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7bcd8c15-85e4-473c-b9b5-a5d2ba2da1de.png)'
- en: Creating a new case in Autopsy
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中创建新案例
- en: 'Enter all of the necessary case details, including the name of the case, the
    location where data needs to be stored, and so on, as shown in the following screenshot:'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入所有必要的案例详细信息，包括案例名称、数据存储位置等，如下面的屏幕截图所示：
- en: '![](img/56ad49d1-b9fc-41b8-bb2f-15104f4a7417.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/56ad49d1-b9fc-41b8-bb2f-15104f4a7417.png)'
- en: Entering case information in Autopsy
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中输入案例信息
- en: Enter the case number and examiner details, and click on Finish.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入案例编号和审查员详细信息，然后点击“完成”。
- en: 'Now, click on the Add Data Source button, add the image file to be analyzed,
    and click on Next:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击“添加数据源”按钮，添加要分析的图像文件，然后点击“下一步”：
- en: '![](img/19d316c7-1514-472b-b0ba-d2068d1843a4.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](img/19d316c7-1514-472b-b0ba-d2068d1843a4.png)'
- en: Entering data source information in Autopsy
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中输入数据源信息
- en: 'On the next screen, you can configure what modules have to be run on the images,
    as shown in the following screenshot. It is recommended to select the Recent Activity,
    Exif Parser, Keyword Search, and Android Analyzer modules. In the next step, click
    on Finish:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，您可以配置在图像上运行哪些模块，如下面的屏幕截图所示。建议选择最近活动、Exif解析器、关键字搜索和Android分析器模块。在下一步中，点击“完成”：
- en: '![](img/74334196-b009-4843-9e35-183edf3011f4.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/74334196-b009-4843-9e35-183edf3011f4.png)'
- en: Configuring modules in Autopsy
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中配置模块
- en: Once this is done, the tool usually takes a few minutes to parse through the
    image depending on its size. During this time, you might see some errors or warning
    messages if any are encountered by the tool. However, Autopsy provides the fastest
    access to the artifacts and the filesystem when compared to other tools.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，工具通常需要几分钟来解析图像，具体取决于图像的大小。在此期间，如果工具遇到任何错误或警告消息，您可能会看到一些错误。但是，与其他工具相比，Autopsy在访问工件和文件系统时提供了最快的访问速度。
- en: Analyzing an image using Autopsy
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Autopsy分析图像
- en: 'Once the image is loaded, expand the file present under Data Sources to see
    data present in the image. For example, the following screenshot shows the contents
    of the `/data/` folder:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 加载图像后，展开“数据源”下的文件，以查看图像中的数据。例如，以下屏幕截图显示了“/data/”文件夹中的内容：
- en: '![](img/f59c327a-baa5-44f9-9d76-2411f1a28b8b.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f59c327a-baa5-44f9-9d76-2411f1a28b8b.png)'
- en: Analyzing an image in Autopsy
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中分析图像
- en: 'In the preceding example, only the `/data` portion of the device has been imaged.
    If the entire device had been imaged, then the tool would show more volumes. Depending
    on the underlying details of the investigation, relevant portions need to be analyzed.
    In the following example, by examining the folders present under `com.android.browser`,
    we can extract the list of various sites visited by the user along with their
    access dates:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的示例中，只对设备的“/data”部分进行了成像。如果对整个设备进行成像，那么工具将显示更多卷。根据调查的基本细节，需要分析相关部分。在下面的示例中，通过检查“com.android.browser”下的文件夹，我们可以提取用户访问的各种网站列表以及它们的访问日期：
- en: '![](img/c32ae2e2-df40-4ebd-a120-e66c47f35afc.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c32ae2e2-df40-4ebd-a120-e66c47f35afc.png)'
- en: Analyzing browsing details in Autopsy
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中分析浏览详细信息
- en: Valuable data, such as text messages, browsing history, chats, call history,
    pictures, videos, and location details, could be unearthed by analyzing the data
    present under various sections. In the next section, we shall look into data recovery
    from an SD card and the internal memory.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析各个部分下的数据，可以发现有价值的数据，例如短信、浏览历史、聊天记录、通话记录、图片、视频和位置详情。在下一节中，我们将研究从SD卡和内部存储器中恢复数据。
- en: Understanding techniques to recover deleted files from the SD card and the internal
    memory
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解从SD卡和内部存储器中恢复已删除文件的技术
- en: Data recovery is one of the most significant and powerful aspects of forensic
    analysis. The ability to recover deleted data can be crucial to crack many civil
    and criminal cases. From a normal user's point of view, recovering data that has
    been deleted would usually refer to the operating system's built-in solutions,
    such as the Recycle Bin in Windows. While it's true that data can be recovered
    from these locations, due to an increase in user awareness, these options don't
    often work. For instance, on a desktop computer, people now use *Shift* + *Delete*
    as a way to delete a file completely from their desktop.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 数据恢复是取证分析中最重要和最强大的方面之一。恢复已删除的数据的能力对于破解许多民事和刑事案件至关重要。从普通用户的角度来看，恢复已删除的数据通常指的是操作系统内置的解决方案，例如Windows中的回收站。虽然可以从这些位置恢复数据，但由于用户意识的增加，这些选项通常不起作用。例如，在台式电脑上，人们现在使用*Shift*
    + *Delete*来彻底从桌面上删除文件。
- en: 'Data recovery is the process of retrieving deleted data from a device when
    it cannot be accessed normally. Consider the scenario where a mobile phone has
    been seized from a terrorist. Wouldn''t it be of the greatest importance to know
    which items were deleted by the terrorist? Access to any deleted SMS messages,
    pictures, dialed numbers, application data, and more can be of critical importance,
    as they often reveal sensitive information. With Android, it is possible to recover
    most of the deleted data if the device files are properly acquired. However, if
    proper care is not taken while handling the device, the deleted data could be
    lost forever. To ensure that the deleted data is not overwritten, it is recommended
    to keep the following points in mind:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 数据恢复是在无法正常访问设备时从设备中检索已删除数据的过程。考虑一种情况，即从恐怖分子手中夺取了一部手机。知道恐怖分子删除了哪些项目将是至关重要的吗？访问任何已删除的短信、图片、拨打的号码、应用程序数据等都可能至关重要，因为它们通常会透露敏感信息。对于Android，如果正确获取了设备文件，就可以恢复大部分已删除的数据。但是，如果在处理设备时不注意，已删除的数据可能会永远丢失。为了确保已删除的数据不会被覆盖，建议牢记以下几点：
- en: Do not use the phone for any activity after seizing it. The deleted data exists
    on the device until space is needed by some other incoming data. Hence, the phone
    must not be used for any sort of activity to prevent the data from being overwritten.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 夺取手机后不要进行任何活动。设备上的已删除数据会一直存在，直到其他传入数据需要空间。因此，为了防止数据被覆盖，手机不得用于任何活动。
- en: Even when the phone is not used, without any intervention from our end, data
    can be overwritten. For instance, an incoming SMS would automatically occupy space,
    which could overwrite the data marked for deletion. To prevent the occurrence
    of such events, you should follow the forensic handling methods described in the
    previous chapters. The easiest solution is to place the device in airplane mode
    or disable all connectivity options on the device. This prevents the delivery
    of any new messages.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 即使手机没有使用，也会自动覆盖数据，而无需我们进行任何干预。例如，一条新短信会自动占用空间，可能会覆盖标记为删除的数据。为了防止发生这种情况，您应该遵循前几章描述的取证处理方法。最简单的解决方案是将设备置于飞行模式或禁用设备上的所有连接选项。这可以防止传递任何新消息。
- en: 'All Android filesystems have metadata that contains information about the hierarchy
    of files, filenames, and so on. Deletion will not really erase this data but remove
    the filesystem metadata. When text messages or any other files are deleted from
    the device, they are just made invisible to the user, but the files are still
    present on the device. Essentially, the files are simply marked for deletion,
    but they reside on the filesystem until being overwritten. Recovering deleted
    data from an Android device involves two scenarios: recovering data that is deleted
    from the SD card, such as pictures, videos, application data, and more, and recovering
    data that is deleted from the internal memory of the device. The following sections
    cover the techniques that can be used to recover deleted data from both the SD
    card and the internal memory of the Android device.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 所有Android文件系统都有包含有关文件层次结构、文件名等信息的元数据。删除不会真正擦除这些数据，而是删除文件系统的元数据。当从设备中删除短信或任何其他文件时，它们只是对用户不可见，但文件仍然存在于设备上。基本上，这些文件只是标记为删除，但它们仍然存在于文件系统中，直到被覆盖。从Android设备中恢复已删除的数据涉及两种情况：从SD卡中恢复已删除的数据，如图片、视频、应用程序数据等，以及从设备的内部存储器中恢复已删除的数据。以下部分涵盖了可以用来从SD卡和Android设备的内部存储器中恢复已删除数据的技术。
- en: Recovering deleted data from an external SD card
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从外部SD卡中恢复已删除的数据
- en: Data present on SD cards can reveal a lot of information to forensic investigators.
    SD cards are capable of storing pictures and videos taken by the phone's camera,
    voice recordings, application data, cached files, and more. Essentially, anything
    that can be stored on a computer hard drive can be stored on an SD card as much
    as the available space allows.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 存储在SD卡上的数据可以向取证人员透露大量信息。SD卡能够存储手机相机拍摄的照片和视频、语音录音、应用程序数据、缓存文件等。基本上，任何可以存储在计算机硬盘上的东西都可以存储在SD卡上，只要可用空间允许。
- en: Recovering the deleted data from an external SD card is a straightforward process.
    SD cards can be mounted as an external mass storage device and forensically acquired
    using standard digital forensic methods, as discussed in [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*. As mentioned in the previous chapters, SD
    cards in Android devices often use the FAT32 filesystem. The main reason for this
    is that the FAT32 filesystem is widely supported in most operating systems, including
    Windows, Linux, and macOS X. The maximum file size on a FAT32 formatted drive
    is around 4 GB. With increasingly high-resolution formats now available, this
    limit is commonly reached. Apart from this, FAT32 can only be used on partitions
    that are less than 32 GB in size. Hence, the exFAT filesystem, which overcomes
    these problems, is now being used in some of the devices.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 从外部SD卡中恢复已删除的数据是一个简单的过程。SD卡可以作为外部大容量存储设备挂载，并且可以使用标准的数字取证方法进行取证，如[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)
    *Android数据提取技术*中所讨论的。如前几章所述，Android设备中的SD卡通常使用FAT32文件系统。这主要是因为FAT32文件系统在包括Windows、Linux和macOS
    X在内的大多数操作系统中得到了广泛支持。FAT32格式化的驱动器上的最大文件大小约为4GB。随着越来越高分辨率的格式现在可用，这个限制通常会被达到。除此之外，FAT32只能用于小于32GB的分区。因此，现在一些设备中使用了克服这些问题的exFAT文件系统。
- en: 'Recovering the deleted data from an external SD card can be easily accomplished
    if it can be mounted as a drive. Hence, if the SD card is removable, connect it
    to a workstation using a write blocker for acquisition. However, the latest Android
    devices do not usually mount as a mass storage. This is because these devices
    use the **Media Transfer Protocol** (**MTP**) or **Picture Transfer Protocol**
    (**PTP**) protocols instead of USB mass storage. The problem with USB mass storage
    is that the computer would need exclusive access to the storage. In other words,
    the external storage needs to be completely disconnected from the Android OS when
    it is connected to a workstation. This has led to several other complications
    for mobile apps. When an Android device uses MTP, it appears to the computer as
    a media device and not as Removable Storage, as shown in the following screenshot:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可以将外部SD卡挂载为驱动器，那么从中恢复已删除的数据就可以很容易地完成。因此，如果SD卡是可移动的，可以使用写入阻断器将其连接到工作站进行取证。然而，最新的Android设备通常不会作为大容量存储挂载。这是因为这些设备使用**媒体传输协议**（MTP）或**图片传输协议**（PTP）协议，而不是USB大容量存储。USB大容量存储的问题在于计算机需要对存储进行独占访问。换句话说，当连接到工作站时，外部存储需要完全断开与Android操作系统的连接。这给移动应用程序带来了其他一些复杂性。当Android设备使用MTP时，它会被计算机识别为媒体设备，而不是可移动存储，如下图所示：
- en: '![](img/0cc751b4-0dd5-42dd-8374-9e338934d118.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0cc751b4-0dd5-42dd-8374-9e338934d118.png)'
- en: Android device connection using MTP
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 使用MTP连接Android设备
- en: But the normal data recovery tools would need a mount drive to perform a scan.
    Hence, most of the latest devices that use MTP/PTP are not treated as a mount
    drive, and so the traditional data recovery tools that work for computers do not
    work on them.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，普通的数据恢复工具需要挂载驱动器才能进行扫描。因此，大多数使用MTP/PTP的最新设备不被视为挂载驱动器，因此传统的适用于计算机的数据恢复工具在这些设备上不起作用。
- en: For this reason, when the device uses MTP/PTP and is not mounted as a drive,
    the recovery can be done by certain Android-specific data recovery tools that
    need the USB debugging option to be turned on. Almost all Android data recovery
    tools in the market need you to enable USB debugging so that your device and the
    SD card can be recognized before starting Android data recovery.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，当设备使用MTP/PTP并且没有作为驱动器挂载时，可以通过某些需要打开USB调试选项的特定于Android的数据恢复工具来进行恢复。市场上几乎所有的Android数据恢复工具都需要您启用USB调试，以便在开始Android数据恢复之前识别您的设备和SD卡。
- en: You must understand that Android devices might use space on the SD card to cache
    application data; therefore, it is important to make sure that as much data as
    possible is obtained from the device prior to removing the SD card. Some older
    devices automatically mount the device as a drive when connected through USB.
    It is a sound forensic practice to not work directly on the device for data extraction,
    data recovery, and so on. Hence, a physical image of the SD card needs to be taken
    and all required analysis is performed on the image itself. It is recommended
    to acquire the SD card through the device as well as separately to ensure that
    all data is obtained. To achieve the SD card image, `dd` through `adb` can be
    used while the device is running to obtain an image of the SD card of the device
    if the device cannot be powered off due to possible evidence running in the memory.
    If the SD card is removed and connected to the workstation through a card reader,
    it appears as external mass storage, which can then be imaged using the standard
    forensic techniques described in earlier chapters.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 您必须了解，安卓设备可能会使用SD卡上的空间来缓存应用程序数据；因此，在移除SD卡之前，确保尽可能多地从设备获取数据非常重要。一些旧设备在通过USB连接时会自动将设备挂载为驱动器。在数据提取、数据恢复等方面，直接在设备上操作不是一个良好的取证实践。因此，需要获取SD卡的物理镜像，并在镜像上执行所有必要的分析。建议通过设备以及单独获取SD卡，以确保获取所有数据。要获取SD卡镜像，可以在设备运行时使用`adb`中的`dd`来获取设备的SD卡镜像，如果设备由于可能在内存中运行的证据而无法关闭电源。如果SD卡被移除并通过读卡器连接到工作站，它将显示为外部大容量存储，然后可以使用早期章节中描述的标准取证技术来制作镜像。
- en: Once the image is obtained, it can be analyzed using any standard forensic tools,
    such as FTK Imager. FTK Imager is a simple tool that can be used to create and
    analyze disk images. It is available for download at [https://accessdata.com/product-download/ftk-imager-version-3.2.0](https://accessdata.com/product-download/ftk-imager-version-3.2.0).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 获取镜像后，可以使用任何标准的取证工具进行分析，例如FTK Imager。FTK Imager是一个简单的工具，可用于创建和分析磁盘镜像。可在[https://accessdata.com/product-download/ftk-imager-version-3.2.0](https://accessdata.com/product-download/ftk-imager-version-3.2.0)下载。
- en: 'The following is a step-by-step process to recover the deleted files from an
    SD card image using FTK Imager:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用FTK Imager从SD卡镜像中恢复已删除文件的逐步过程：
- en: 'Start FTK Imager and click on File, then click on Add Evidence Item... in the
    menu:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动FTK Imager，单击“文件”，然后在菜单中单击“添加证据项...”：
- en: '![](img/f9157927-aeda-4160-b896-13aacb1227cb.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f9157927-aeda-4160-b896-13aacb1227cb.png)'
- en: Adding evidence in FTK Imager
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在FTK Imager中添加证据
- en: 'Select Image File as the evidence type in the Select Source dialog, and click
    on Next:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“选择源”对话框中选择“图像文件”作为证据类型，然后单击“下一步”：
- en: '![](img/88ef8592-2aa5-49c6-8fcc-a64e4c705149.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/88ef8592-2aa5-49c6-8fcc-a64e4c705149.png)'
- en: Selecting file type in FTK Imager
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在FTK Imager中选择文件类型
- en: 'In the Select File dialog, go to the location where the `SDCARD.dd` SD card
    image file is present, select it, and click on Finish:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“选择文件”对话框中，转到存在`SDCARD.dd`SD卡镜像文件的位置，选择它，然后单击“完成”：
- en: '![](img/55fd1ac0-095a-4d90-8013-82442a372936.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/55fd1ac0-095a-4d90-8013-82442a372936.png)'
- en: Selecting the image file for analysis in FTK Imager
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在FTK Imager中选择要分析的镜像文件
- en: 'The contents of the SD card image are then shown in the View pane. You can
    browse through the folders by clicking on the + sign. When a folder is highlighted,
    the contents are shown on the right pane. When a file is selected, its contents
    can be seen in the bottom pane. As shown in the following screenshot, the deleted
    files are also shown with a red cross mark over the icon:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后在查看窗格中显示SD卡镜像的内容。您可以通过单击“+”号来浏览文件夹。当文件夹被突出显示时，其内容将显示在右窗格中。选择文件后，其内容将显示在底部窗格中。如下图所示，已删除的文件也显示为图标上的红色叉号：
- en: '![](img/d7b02a85-49af-428f-9f32-64b7a357eb48.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d7b02a85-49af-428f-9f32-64b7a357eb48.png)'
- en: Deleted files shown with a red cross over the icons in FTK Imager
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在FTK Imager中显示带有红色叉号的图标的已删除文件
- en: 'To copy the deleted files to the workstation, right-click on the marked file
    and select Export Files..., as shown in the following screenshot:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将已删除的文件复制到工作站，请右键单击标记的文件，然后选择“导出文件...”，如下图所示：
- en: '![](img/4d7afc47-f079-44d2-aa77-778c938e6ec8.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4d7afc47-f079-44d2-aa77-778c938e6ec8.png)'
- en: Recovering deleted images in FTK Imager
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在FTK Imager中恢复已删除的图像
- en: 'It is also recommended to check whether the device has any backup applications
    or files installed. The initial release of Android did not include a mechanism
    for users to back up their personal data. Hence, several backup applications were
    used extensively by users. Using these apps, users can back up their data either
    to the SD card or to the cloud. For example, the **Super Backup** app contains
    the options to back up call logs, contacts, SMS, and more, as shown in the following
    screenshot:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 还建议检查设备是否安装了任何备份应用程序或文件。最初的安卓版本没有包括用户备份其个人数据的机制。因此，用户广泛使用了几个备份应用程序。使用这些应用程序，用户可以将其数据备份到SD卡或云端。例如，**Super
    Backup**应用程序包含了备份通话记录、联系人、短信等选项，如下图所示：
- en: '![](img/3613f886-2579-4196-8738-221a53c6ba08.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3613f886-2579-4196-8738-221a53c6ba08.png)'
- en: The Super Backup Android app
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 超级备份安卓应用程序
- en: Upon detection of a backup application, you must attempt to determine where
    the data is stored. Usually, the backup folder path is the internal SD card. The
    folder path is also present in the backup app's settings. The data saved in a
    backup may contain important information, and hence, looking for any third-party
    backup app on the device would be very helpful.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 检测到备份应用程序后，必须尝试确定数据存储在何处。通常，备份文件夹路径是内部SD卡。备份应用程序的设置中也包含文件夹路径。备份中保存的数据可能包含重要信息，因此，在设备上寻找任何第三方备份应用程序将非常有帮助。
- en: Recovering data deleted from the internal memory
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从内部存储器中恢复数据
- en: 'Recovering files that are deleted from an Android device''s internal memory
    (such as SMS, contacts, and app data) is not supported by all analytical tools
    and may require manual carving. Unlike some media containing common filesystems,
    such as SD cards, the filesystem may not be recognized and mounted by forensic
    tools. Also, you cannot get access to the raw partitions of the internal memory
    of an Android phone unless the phone is rooted. It is recommended to image the
    device before and after the rooting process happens. The following are some of
    the other issues that you may face when attempting to recover data from the internal
    memory on Android devices:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 从Android设备的内部存储器中恢复已删除的文件（如短信、联系人和应用数据）并非所有分析工具都支持，可能需要手动切割。与一些包含常见文件系统的媒体（如SD卡）不同，取证工具可能无法识别和挂载文件系统。此外，除非手机已root处理，否则无法访问Android手机的内部存储器的原始分区。建议在root处理发生之前和之后对设备进行镜像。在尝试从Android设备的内部存储器中恢复数据时，可能会面临以下一些其他问题：
- en: To get access to the internal memory, you can try to root the phone. However,
    the rooting process might involve writing some data to the `/data` partition,
    and this process could overwrite the data of value on the device.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要访问内部存储器，可以尝试对手机进行root处理。但是，root处理过程可能涉及向`/data`分区写入一些数据，这个过程可能会覆盖设备上有价值的数据。
- en: Unlike SD cards, the internal filesystem here is not FAT32 (which is widely
    supported by forensic tools). The internal filesystem could be YAFFS2 (on older
    devices), EXT3, EXT4, RFS, or something proprietary built to run on Android. Therefore,
    many of the recovery tools designed for use with Windows filesystems won't work.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与SD卡不同，这里的内部文件系统不是FAT32（这是取证工具广泛支持的）。内部文件系统可能是YAFFS2（在旧设备上）、EXT3、EXT4、RFS或专为Android运行而构建的其他文件系统。因此，许多专为Windows文件系统设计的恢复工具将无法使用。
- en: Application data on Android devices is commonly stored in the SQLite format.
    While most forensic tools provide access to the database files, they may have
    to be exported and viewed in a native browser. You must examine the raw data to
    ensure that the deleted data is not overlooked by the forensic tool.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android设备上的应用数据通常以SQLite格式存储。虽然大多数取证工具提供对数据库文件的访问，但可能需要将其导出并在本机浏览器中查看。您必须检查原始数据，以确保取证工具没有忽略已删除的数据。
- en: The discussed reasons make it difficult, but not impossible, to recover the
    deleted data from the internal memory. The internal memory of Android devices
    holds the bulk of the user data and the possible keys to your investigation. As
    previously mentioned, the device must be rooted to access the raw partitions.
    Most of the Android recovery tools on the market do not highlight the fact that
    they only work on rooted phones. Let's now take a look at how we can recover deleted
    data from an Android phone.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 讨论的原因使从内部存储器中恢复已删除的数据变得困难，但并非不可能。Android设备的内部存储器保存了大部分用户数据以及您调查的可能关键。如前所述，设备必须经过root处理才能访问原始分区。市面上大多数Android恢复工具并未强调它们只能在root手机上运行的事实。现在让我们看看如何从Android手机中恢复已删除的数据。
- en: Recovering deleted files by parsing SQLite files
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过解析SQLite文件来恢复已删除的文件
- en: Android uses SQLite files to store most data. Data related to text messages,
    emails, and certain app data is stored in SQLite files. SQLite databases can store
    deleted data within the database itself. Files marked for deletion by the user
    no longer appear in the active SQLite database files. Therefore, it is possible
    to recover the deleted data, such as text messages and contacts. There are two
    areas within a SQLite page that can contain deleted data—unallocated blocks and
    free blocks.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Android使用SQLite文件来存储大部分数据。与短信、电子邮件和某些应用数据相关的数据存储在SQLite文件中。SQLite数据库可以在数据库本身内存储已删除的数据。用户标记为删除的文件不再出现在活动的SQLite数据库文件中。因此，可以恢复已删除的数据，如短信和联系人。SQLite页面中有两个区域可能包含已删除的数据——未分配的块和空闲块。
- en: Most of the commercial tools that recover deleted data scan the unallocated
    blocks and free blocks of the SQLite pages. Parsing the deleted data can be done
    using the available forensic tools, such as **Oxygen Forensics SQLite Viewer**.
    The trial version of the SQLite Viewer can be used for this purpose; however,
    there are certain limitations on the amount of data that you can recover. You
    can write your own script to parse the files for deleted content, and for this,
    you need to have a good understanding of the SQLite file format. The [http://www.sqlite.org/fileformat.html](http://www.sqlite.org/fileformat.html) page is
    a good place to start. If you do not want to reinvent the wheel and want to reuse
    the existing scripts, you can try the available open source Python scripts ([http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html](http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html))
    to parse the SQLite files for deleted records.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数恢复已删除数据的商业工具会扫描SQLite页面的未分配块和空闲块。可以使用可用的取证工具（如**Oxygen Forensics SQLite Viewer**）来解析已删除的数据。SQLite
    Viewer的试用版可用于此目的；但是，对您可以恢复的数据量有一定限制。您可以编写自己的脚本来解析文件中的已删除内容，但这需要对SQLite文件格式有很好的理解。[http://www.sqlite.org/fileformat.html](http://www.sqlite.org/fileformat.html) 页面是一个很好的起点。如果您不想重复造轮子，想要重用现有的脚本，可以尝试使用可用的开源Python脚本（[http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html](http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html)）来解析SQLite文件中的已删除记录。
- en: 'For our example, we will recover deleted SMSes from an Android device. Recovering
    deleted SMSs from an Android phone is quite often requested as part of the forensic
    analysis of a device, mainly because text messages contain data, which can reveal
    a lot of information. There are different ways to recover deleted text messages
    on an Android device. First, we need to understand where the messages are being
    stored on the device. In [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*, we explained the important locations on
    the Android device where user data is stored. Here is a quick recap of this:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的示例中，我们将从安卓设备中恢复已删除的短信。从安卓手机中恢复已删除的短信经常被要求作为设备取证分析的一部分，主要是因为短信包含的数据可以揭示很多信息。有不同的方法可以在安卓设备上恢复已删除的短信。首先，我们需要了解消息在设备上的存储位置。在[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)中，*安卓数据提取技术*，我们解释了安卓设备上存储用户数据的重要位置。以下是对此的快速回顾：
- en: Every application stores its data under the `/data/data` folder (again, this
    requires root access to acquire data).
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个应用程序都将其数据存储在`/data/data`文件夹下（同样，这需要root权限来获取数据）。
- en: The files under the location, `/data/data/com.android.providers.telephony/databases`,
    contain details about the SMS/MMS.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 位于`/data/data/com.android.providers.telephony/databases`位置下的文件包含有关短信/彩信的详细信息。
- en: 'Under the mentioned locations, text messages are stored in an SQLite database
    file, which is named `mmssms.db`. Deleted text messages can be recovered by examining
    this file. Here are the steps to recover deleted SMSes using the `mmssms.db` file:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述位置下，短信存储在名为`mmssms.db`的SQLite数据库文件中。可以通过检查此文件来恢复已删除的短信。以下是使用`mmssms.db`文件恢复已删除短信的步骤：
- en: 'On the Android device, enable the USB debugging mode and connect the device
    to the forensic workstation. Using the `adb` command-line tool, extract the databases
    folder present at `/data/data/` by issuing the following command:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安卓设备上，启用USB调试模式并将设备连接到取证工作站。使用`adb`命令行工具，通过以下命令提取位于`/data/data/`下的数据库文件夹：
- en: '[PRE0]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The output can be seen as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下所示：
- en: '![](img/c0fa3c4a-cf09-4b3f-a49d-bfc7153176a6.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c0fa3c4a-cf09-4b3f-a49d-bfc7153176a6.png)'
- en: ADB pull command
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ADB pull命令
- en: Once the files are extracted to the local machine, use the Oxygen Forensics
    SQLite Viewer tool to open the `mmssms.db` file.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦文件被提取到本地机器上，使用Oxygen Forensics SQLite Viewer工具打开`mmssms.db`文件。
- en: Click on the table named `sms` and observe the current message under the Tables
    data tab in the tool.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击名为`sms`的表，并观察工具中Tables数据选项卡下的当前消息。
- en: 'One way to view the deleted data is by clicking on the Blocks containing deleted
    data tab, as shown in the following screenshot:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看已删除数据的一种方法是点击包含已删除数据的块选项卡，如下截图所示：
- en: '![](img/cd09b6cc-c32f-4012-927d-7a1a21324e42.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cd09b6cc-c32f-4012-927d-7a1a21324e42.png)'
- en: Recovering deleted SMS messages
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复已删除的短信
- en: Similarly, other data residing on Android devices that is stored in SQLite files
    can be recovered by parsing for deleted content. When the preceding method doesn't
    provide access to the deleted data, you should look at the file in raw hex file
    for data marked as deleted, which can be manually carved and reported.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，存储在SQLite文件中的安卓设备上的其他数据可以通过解析已删除内容来恢复。当前述方法无法访问已删除数据时，应查看原始十六进制文件中标记为已删除的数据，可以手动切割和报告。
- en: Recovering files using file-carving techniques
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用文件切割技术恢复文件
- en: File carving is an extremely useful method in forensics because it allows data
    that has been deleted or hidden to be recovered for analysis. In simple terms,
    file carving is the process of reassembling computer files from fragments in the
    absence of filesystem metadata. In file carving, specified file types are searched
    for and extracted across the binary data to create a forensic image of a partition
    or an entire disk. File carving recovers files from the unallocated space in a
    drive based merely on file structure and content without any matching filesystem
    metadata. Unallocated space refers to the part of the drive that no longer holds
    any file information indicated by the filesystem structures, such as the file
    table.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 文件切割是取证中非常有用的方法，因为它允许恢复已删除或隐藏的数据以进行分析。简而言之，文件切割是在没有文件系统元数据的情况下从片段中重新组装计算机文件的过程。在文件切割中，指定的文件类型在二进制数据中搜索并提取，以创建分区或整个磁盘的取证镜像。文件切割仅基于文件结构和内容从驱动器的未分配空间中恢复文件，而不需要匹配文件系统元数据。未分配空间指的是不再包含任何由文件系统结构指示的文件信息的驱动器部分，如文件表。
- en: Files can be recovered or reconstructed by scanning the raw bytes of the disk
    and reassembling them. This can be done by examining the header (the first few
    bytes) and footer (the last few bytes) of a file.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过扫描磁盘的原始字节并重新组装它们来恢复或重建文件。这可以通过检查文件的头部（前几个字节）和尾部（最后几个字节）来完成。
- en: File-carving methods are categorized based on the underlying technique in use.
    The header-footer carving method relies on recovering the files based on their
    header and footer information. For instance, for JPEG files, these start with
    `0xffd8` and end with `0xffd9`.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 文件切割方法根据使用的基本技术进行分类。头部-尾部切割方法依赖于根据其头部和尾部信息恢复文件。例如，对于JPEG文件，这些文件以`0xffd8`开头，以`0xffd9`结尾。
- en: The locations of the header and footer are identified and everything between
    those two endpoints is carved. Similarly, the carving method based on the file
    structure uses the internal layout of a file to reconstruct the file. However,
    the traditional file-carving techniques, such as the ones that we've already explained,
    may not work if the data is fragmented. To overcome this, new techniques, such
    as smart carving, use the fragmentation characteristics of several popular filesystems
    to recover the data.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 标识头部和尾部的位置，然后切割两个端点之间的所有内容。同样，基于文件结构的切割方法使用文件的内部布局来重建文件。然而，传统的文件切割技术，如我们已经解释过的技术，如果数据是分段的，则可能无法工作。为了克服这一点，新技术，如智能切割，利用几种流行文件系统的分段特性来恢复数据。
- en: 'Once the phone is imaged, it can be analyzed using tools such as **Scalpel**.
    Scalpel is a powerful open source utility to carve files. This tool analyzes the
    block database storage, identifies the deleted files, and recovers them. Scalpel
    is filesystem-independent and is known to work on various filesystems, including
    FAT, NTFS, EXT2, EXT3, HFS, and more. More details about Scalpel can be found
    at [https://github.com/sleuthkit/scalpel](https://github.com/sleuthkit/scalpel).
    The following steps explain how to use Scalpel on an Ubuntu workstation:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦手机被成像，就可以使用**Scalpel**等工具对其进行分析。Scalpel是一个功能强大的开源实用程序，用于切割文件。该工具分析块数据库存储，识别已删除的文件并恢复它们。Scalpel与文件系统无关，并且已知可以在各种文件系统上工作，包括FAT、NTFS、EXT2、EXT3、HFS等。有关Scalpel的更多详细信息，请访问[https://github.com/sleuthkit/scalpel](https://github.com/sleuthkit/scalpel)。以下步骤解释了如何在Ubuntu工作站上使用Scalpel：
- en: Install Scalpel on the Ubuntu workstation using the `sudo apt-get install scalpel`
    command.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`sudo apt-get install scalpel`命令在Ubuntu工作站上安装Scalpel。
- en: 'The `scalpel.conf` file present under the `/etc/scalpel` directory contains
    information about the supported file types, as shown in the following screenshot:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/etc/scalpel`目录下的`scalpel.conf`文件包含有关支持的文件类型的信息，如下面的屏幕截图所示：'
- en: '![](img/f4de510a-e735-4e48-9f5f-cb550289245a.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f4de510a-e735-4e48-9f5f-cb550289245a.png)'
- en: The scalpel configuration file
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 手术刀配置文件
- en: This file needs to be modified to mention the files that are related to Android.
    A sample `scalpel.conf` file can be downloaded from [https://www.nowsecure.com/tools-and-trainings/#viaforensics](https://www.nowsecure.com/tools-and-trainings/#viaforensics).
    You can also uncomment the files and save the `conf` file to select file types
    of your choice. Once this is done, replace the original `conf` file with the one
    that is downloaded.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 需要修改此文件以提及与Android相关的文件。可以从[https://www.nowsecure.com/tools-and-trainings/#viaforensics](https://www.nowsecure.com/tools-and-trainings/#viaforensics)下载样本`scalpel.conf`文件。您还可以取消注释文件并保存`conf`文件以选择您喜欢的文件类型。完成后，用下载的文件替换原始的`conf`文件。
- en: 'Scalpel needs to be run along with the preceding configuration file on the
    `dd` image being examined. You can run the tool using the following command by
    inputting the configuration file and the `dd` file:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Scalpel需要在正在检查的`dd`镜像上运行前面的配置文件。您可以使用以下命令运行该工具，输入配置文件和`dd`文件：
- en: '[PRE1]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once this command is run, the tool starts to carve the files and build them
    accordingly as shown in the following screenshot:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 运行此命令后，工具开始切割文件并相应地构建它们，如下面的屏幕截图所示：
- en: '![](img/16e1d626-b359-4783-975b-f0a94337a8c7.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](img/16e1d626-b359-4783-975b-f0a94337a8c7.png)'
- en: Running the Scalpel tool on a dd file
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在dd文件上运行Scalpel工具
- en: 'The `output` folder that was specified in the preceding command now contains
    lists of folders that are based on the file types, as shown in the following screenshot.
    Each of these folders contains data that is based on the folder name. For instance,
    `jpg 2-0` contains files related to the `.jpg` extension that have been recovered:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的命令中指定的`output`文件夹现在包含基于文件类型的文件夹列表，如下面的屏幕截图所示。每个文件夹都包含基于文件夹名称的数据。例如，`jpg
    2-0`包含与`.jpg`扩展名相关的已恢复文件。
- en: '![](img/b0debf76-fb4c-4bbd-aacb-61d273c26730.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b0debf76-fb4c-4bbd-aacb-61d273c26730.png)'
- en: Output folder after running the Scalpel tool
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 运行Scalpel工具后的输出文件夹
- en: 'As shown in the preceding screenshot, each folder contains recovered data from
    the Android device, such as images, PDF files, ZIP files, and more. While some
    pictures are recovered completely, some are not recovered fully, as shown in the
    following screenshot:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如前面的屏幕截图所示，每个文件夹都包含从Android设备中恢复的数据，例如图像、PDF文件、ZIP文件等。虽然有些图片完全恢复了，但有些并没有完全恢复，如下面的屏幕截图所示：
- en: '![](img/478b1fcc-46d1-4250-8609-a88ece1a76b7.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/478b1fcc-46d1-4250-8609-a88ece1a76b7.png)'
- en: Recovered data using the Scalpel tool
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Scalpel工具恢复的数据
- en: Applications such as **DiskDigger** can be installed on Android devices to recover
    different types of files from both the internal memory and SD cards. DiskDigger
    includes support for JPG files, MP3 and WAV audio, MP4 and 3GP video, raw camera
    formats, Microsoft Office files (DOC, XLS, and PPT), and more. However, as mentioned
    earlier, the application requires root privileges on the Android device to recover
    the content from the internal memory. These changes should be clearly documented
    by you. The DiskDigger Android app operates in two different modes, basic scan
    mode and full scan mode.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 诸如**DiskDigger**之类的应用程序可以安装在Android设备上，以从内部存储器和SD卡中恢复不同类型的文件。 DiskDigger包括对JPG文件、MP3和WAV音频、MP4和3GP视频、原始相机格式、Microsoft
    Office文件（DOC、XLS和PPT）等的支持。然而，如前所述，该应用程序需要在Android设备上具有root权限才能从内部存储器中恢复内容。这些更改应该由您清楚地记录。 DiskDigger
    Android应用程序以两种不同的模式运行，即基本扫描模式和完整扫描模式。
- en: 'The full scan mode works only on rooted devices, whereas the basic scan mode
    works on any device. As shown in the following screenshot, on a rooted phone,
    the app automatically locates and displays the available partitions:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 完整扫描模式仅适用于已root的设备，而基本扫描模式适用于任何设备。 如下面的屏幕截图所示，在已root的手机上，应用程序会自动定位并显示可用的分区：
- en: '![](img/dbc0b996-23c3-4b2e-8733-34ff4a2ba878.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dbc0b996-23c3-4b2e-8733-34ff4a2ba878.png)'
- en: The DiskDigger app
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: DiskDigger应用程序
- en: 'After you select the memory partition, the tool now prompts you to select the
    types of files that you would like to recover. Proceed by selecting the file types
    of interest:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 选择内存分区后，工具现在提示您选择要恢复的文件类型。通过选择感兴趣的文件类型继续：
- en: '![](img/8ea75d5e-d4be-4683-a3a5-611fc544acb1.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ea75d5e-d4be-4683-a3a5-611fc544acb1.png)'
- en: The DiskDigger app file selection screen
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: DiskDigger应用程序文件选择屏幕
- en: Once the scanning begins, the DiskDigger app will automatically show you the
    files that are available for recovery. The recovered files can be either saved
    to the app or to the device directly. Hence, file-carving techniques play a very
    important role in recovering important deleted files from the device's internal
    memory.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦扫描开始，DiskDigger应用程序将自动显示可供恢复的文件。 恢复的文件可以保存到应用程序或直接保存到设备上。因此，文件切割技术在从设备的内部存储器中恢复重要的已删除文件中起着非常重要的作用。
- en: Recovering contacts using your Google account
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用您的Google帐户恢复联系人
- en: 'You can also restore the contacts on the device using the Contacts app through
    the Google account that is configured on the device. This would work if the user
    of the device has previously synced their contacts using the Sync Settings option
    available in Android. This option synchronizes the contacts and other details
    and stores them in the cloud. A forensic examiner like you with legal authority
    or proper consent can restore the deleted contacts if you can get access to the
    Google account configured on the device. Once the account is accessed, perform
    the following steps to restore the data:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用设备上配置的Google帐户通过联系人应用程序恢复设备上的联系人。如果设备的用户以前使用Android中可用的同步设置选项同步他们的联系人，这将起作用。此选项会将联系人和其他详细信息同步并存储在云中。像您这样具有法定权限或适当同意的法医检查员可以在访问设备上配置的Google帐户后恢复已删除的联系人。一旦访问了帐户，请执行以下步骤来恢复数据：
- en: Log in to your Google Contacts app on the Android device using the configured
    Google account. The following example is attempt on a OnePlus 5 device running
    the Android Pie version.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用配置的Google帐户在Android设备上登录您的Google联系人应用程序。以下示例是在运行Android Pie版本的OnePlus 5设备上尝试的。
- en: 'Click on Settings and then look for Restore, as shown in the following screenshot:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“设置”，然后查找“恢复”，如下面的屏幕截图所示：
- en: '![](img/8ca9b41a-46bc-4948-ba14-50d7b4c9b11b.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ca9b41a-46bc-4948-ba14-50d7b4c9b11b.png)'
- en: The Restore menu in the Contacts app
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 联系人应用程序中的恢复菜单
- en: 'Click on Restore, and the following screen will appear:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“恢复”，将出现以下屏幕：
- en: '![](img/76745b73-595a-4ca2-b80a-7924728abe8e.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/76745b73-595a-4ca2-b80a-7924728abe8e.png)'
- en: The Restore contacts dialog box
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 联系人恢复对话框
- en: 'As you can see, you can restore the contact list to a previous state when the
    backup was taken at various points in time. You can also use the Undo changes
    option under the Settings menu to restore the contacts to any state in the past
    30 days:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，您可以将联系人列表恢复到以前备份的各个时间点。您还可以在“设置”菜单下使用“撤消更改”选项将联系人恢复到过去30天的任何状态：
- en: '![](img/e817a2aa-d067-4158-b2ec-ae006e0bafb9.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e817a2aa-d067-4158-b2ec-ae006e0bafb9.png)'
- en: Restore deleted contacts in Google account
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在Google帐户中恢复已删除的联系人
- en: Hence, using any one of the preceding techniques, a forensic examiner like you
    can attempt to easily recover deleted data.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，使用上述任一技术，像您这样的法医检查员可以尝试轻松恢复已删除的数据。
- en: Summary
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned various techniques to recover deleted data from
    an Android device. This process depends on various factors, which heavily rely
    on access to the data residing in the internal memory and SD card. We saw various
    techniques to recover deleted data from both SD card as well as internal memory.
    While the recovery of deleted items from external storage, such as an SD card,
    is easy, the recovery of deleted items from the internal memory takes considerable
    effort. We have also learned SQLite file-parsing and file-carving techniques,
    using which deleted data can be extracted from an Android device. With this knowledge,
    you can now perform data recovery during a forensic investigation.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了从Android设备中恢复已删除数据的各种技术。这个过程取决于各种因素，这些因素严重依赖于访问存储在内部存储器和SD卡中的数据。我们看到了从SD卡和内部存储器中恢复已删除数据的各种技术。虽然从外部存储器（如SD卡）中恢复已删除的项目很容易，但从内部存储器中恢复已删除的项目需要相当大的努力。我们还学习了SQLite文件解析和文件切割技术，使用这些技术可以从Android设备中提取已删除的数据。有了这些知识，您现在可以在法医调查期间进行数据恢复。
- en: The next chapter discusses the forensic analysis of Android apps and malware
    and the reverse engineering of Android apps.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将讨论Android应用程序和恶意软件的法医分析以及Android应用程序的逆向工程。
